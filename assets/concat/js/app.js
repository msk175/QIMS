'use strict';var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"])_i["return"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError("Invalid attempt to destructure non-iterable instance");}};}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}(function(angular,$){

var appConfig=void 0;
var packageJson=void 0;
var i18nPackageJson=void 0;

$.get('./appConfig.json').
then(function(configData){
appConfig=Object.assign({},appConfig,configData);
return $.get('./appConfig-env.json');
}).
then(function(envConfigData){
appConfig=Object.assign({},appConfig,envConfigData);
return $.get('./package.json');
}).
then(function(packageJsonData){
packageJson=Object.assign({},packageJson,packageJsonData);
if(appConfig.languageResources.dependencyOrigin==='cui-idm-b2x'){
return $.get('./node_modules/@covisint/cui-i18n/package.json');
}else
return undefined;
}).
then(function(i18nPackageJsonData){
if(i18nPackageJsonData!==undefined){
i18nPackageJson=Object.assign({},i18nPackageJson,i18nPackageJsonData);
}
}).
always(function(){

angular.module('user',[]).
config(['$stateProvider',function($stateProvider){

var templateBase='app/modules/user/';

var returnCtrlAs=function returnCtrlAs(name,asPrefix){
return name+'Ctrl as '+(asPrefix?asPrefix:'')+(asPrefix?name[0].toUpperCase()+name.slice(1,name.length):name);
};

var loginRequired=true;

$stateProvider.
state('user',{
url:'/user',
template:'<div ui-view></div>',
access:loginRequired}).

state('user.profile',{
url:'/profile',
templateUrl:templateBase+'profile/user-profile.html',
controller:returnCtrlAs('userProfile'),
access:loginRequired}).

state('user.history',{
url:'/history',
templateUrl:templateBase+'history/user-history.html',
controller:returnCtrlAs('userHistory'),
access:loginRequired}).

state('user.appRequestHistory',{
url:'/appRequestHistory?name&page&pageSize&sortBy&status',
templateUrl:templateBase+'appHistory/app-requestHistory.html',
controller:returnCtrlAs('appRequestHistory'),
access:loginRequired}).

state('user.appGrantHistory',{
url:'/appGrantHistory?name&page&pageSize&sortBy&status',
templateUrl:templateBase+'appHistory/app-grantHistory.html',
controller:returnCtrlAs('appGrantHistory'),
access:loginRequired}).

state('user.roles',{
url:'/roles',
templateUrl:templateBase+'roles/user-roles.html',
controller:returnCtrlAs('userRoles'),
access:loginRequired});


}]);

angular.module('user').
controller('appGrantHistoryCtrl',['Loader', 'User', '$scope', 'API', 'APIError', '$filter', '$pagination', '$q', '$state', '$stateParams', function(Loader,User,$scope,API,APIError,$filter,$pagination,$q,$state,$stateParams){

var appGrantHistory=this;
var scopeName='appGrantHistory.';
appGrantHistory.search=Object.assign({},$stateParams);
appGrantHistory.search.page=appGrantHistory.search.page||1;
appGrantHistory.paginationPageSize=appGrantHistory.paginationPageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
appGrantHistory.search.pageSize=appGrantHistory.paginationPageSize;
appGrantHistory.searchBy='name';
/* -------------------------------------------- HELPER FUNCTIONS START --------------------------------------------- */

appGrantHistory.pageGrantedChange=function(newpage){
appGrantHistory.updateSearch('page',newpage);
};

appGrantHistory.updateSearch=function(updateType,updateValue){
switch(updateType){
case'eventdate':
switchBetween('sortBy','+eventDate','-eventDate');
break;
case'eventType':
switchBetween('sortBy','+eventType','-eventType');
break;
case'actorId':
switchBetween('sortBy','+actorId','-actorId');
break;
case'status':
appGrantHistory.search.page=1;
appGrantHistory.search['status']=updateValue;
break;
case'search':
if(appGrantHistory.searchBy==='name')
appGrantHistory.search['name']=updateValue;else

appGrantHistory.search['eventType']=updateValue;
break;}



var queryParams=[['page',String(appGrantHistory.search.page)],['pageSize',String(appGrantHistory.search.pageSize)]];
if(appGrantHistory.search.sortBy)
queryParams.push(['sortBy',appGrantHistory.search['sortBy']]);
if(appGrantHistory.search.status)
queryParams.push(['status',appGrantHistory.search['status']]);
if(appGrantHistory.search.name)
queryParams.push(['name',appGrantHistory.search['name']]);
if(appGrantHistory.search.eventType)
queryParams.push(['eventType',appGrantHistory.search['eventType']]);
var opts={
personId:User.user.id,
qs:queryParams};


// doesn't change state, only updates the url
$state.transitionTo('user.appGrantHistory',appGrantHistory.search,{notify:false});
console.log(appGrantHistory.search);
appGrantHistory.grantedHistory=[];
API.cui.getPersonApplicationsGrantHistory(opts).
then(function(res){
appGrantHistory.grantedHistory=res;
// if(appGrantHistory.grantedHistory.length>0)
//     getPkgDetailsGrant(appGrantHistory.grantedHistory);
$scope.$digest();
}).
fail(function(err){
APIError.onFor(scopeName+'initHistory');
console.log(err);
});
//onLoadGranted(true,opts)
};

var switchBetween=function switchBetween(property,firstValue,secondValue){
// helper function to switch a property between two values or set to undefined if values not passed
if(!firstValue){
appGrantHistory.search[property]=undefined;
return;
}
appGrantHistory.search[property]=appGrantHistory.search[property]===firstValue?
secondValue:
firstValue;
};

var getCountsOfStatus=function getCountsOfStatus(qsValue){
var opts={
personId:API.getUser(),
useCuid:true

//Assign query strings if any value passed 
//otherwise it will get full count
};if(qsValue){
opts.qs=[['status',qsValue]];
}
API.cui.getPersonApplicationsGrantHistory(opts).
then(function(res){
if(!qsValue){
appGrantHistory.popupGrantedCount=res.length;
console.log(appGrantHistory.popupGrantedCount);
}else if(qsValue==="active"){
appGrantHistory.activeCount=res.length;
console.log(appGrantHistory.activeCount);
}else
{
appGrantHistory.suspendedCount=res.length;
console.log(appGrantHistory.suspendedCount);
}
$scope.$digest();
}).
fail(function(err){

});
};
/* -------------------------------------------- HELPER FUNCTIONS END ----------------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

appGrantHistory.user=User.user;

var queryParams=[['page',String(appGrantHistory.search.page)],['pageSize',String(appGrantHistory.search.pageSize)]];
if(appGrantHistory.search.sortBy)
queryParams.push(['sortBy',appGrantHistory.search['sortBy']]);
var opts={
personId:User.user.id,
qs:queryParams};


Loader.onFor(scopeName+'initHistory');
API.cui.getPersonApplicationsGrantHistory(opts).
then(function(res){
appGrantHistory.grantedHistory=res;
// if(appGrantHistory.grantedHistory.length>0)
//     getPkgDetailsGrant(appGrantHistory.grantedHistory);
// if(appGrantHistory.requestedHistory.length>0)
//     getPkgDetailsRequested(appGrantHistory.requestedHistory);
//to display in popover
getCountsOfStatus("active");
getCountsOfStatus("suspended");
//To getFull count
getCountsOfStatus(undefined);

return API.cui.getPersonApplicationsGrantHistoryCount(opts);
}).
then(function(res){
console.log(res);
appGrantHistory.count=res;
Loader.offFor(scopeName+'initHistory');
$scope.$apply();
}).
fail(function(err){
APIError.onFor(scopeName+'initHistory');
console.log(err);
}).
always(function(){
Loader.offFor(scopeName+'initHistory');
$scope.$digest();
});
/* -------------------------------------------- ON LOAD END --------------------------------------------- */

}]);
angular.module('user').
controller('appRequestHistoryCtrl',['Loader', 'User', '$scope', 'API', 'APIError', '$filter', '$pagination', '$q', '$state', '$stateParams', function(Loader,User,$scope,API,APIError,$filter,$pagination,$q,$state,$stateParams){

var appRequestHistory=this;
var scopeName='appRequestHistory.';
appRequestHistory.search=Object.assign({},$stateParams);
appRequestHistory.search.page=appRequestHistory.search.page||1;
appRequestHistory.paginationPageSize=appRequestHistory.paginationPageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
appRequestHistory.search.pageSize=appRequestHistory.paginationPageSize;
/* -------------------------------------------- HELPER FUNCTIONS START --------------------------------------------- */

appRequestHistory.pageChange=function(newpage){
appRequestHistory.updateSearch('page',newpage);
};

appRequestHistory.updateSearch=function(updateType,updateValue){
switch(updateType){
case'alphabetic':
switchBetween('sortBy','+service.name','-service.name');
break;
case'requesteddate':
switchBetween('sortBy','+requestedDate','-requestedDate');
break;
case'decisiondate':
switchBetween('sortBy','+evaluationDate','-evaluationDate');
break;
case'eventdate':
switchBetween('sortBy','+eventDate','-eventDate');
break;
case'eventType':
switchBetween('sortBy','+eventType','-eventType');
break;
case'actorId':
switchBetween('sortBy','+actorId','-actorId');
break;
case'evaluator':
switchBetween('sortBy','+evaluatorId','-evaluatorId');
break;
case'status':
appRequestHistory.search.page=1;
appRequestHistory.search['grant.status']=updateValue;
break;}


var queryParams=[['page',String(appRequestHistory.search.page)],['pageSize',String(appRequestHistory.search.pageSize)]];
if(appRequestHistory.search.sortBy)
queryParams.push(['sortBy',appRequestHistory.search['sortBy']]);
var opts={
personId:User.user.id,
qs:queryParams};


// doesn't change state, only updates the url
$state.transitionTo('user.appRequestHistory',appRequestHistory.search,{notify:false});
console.log(appRequestHistory.search);
appRequestHistory.requestedHistory=[];
API.cui.getPersonApplicationsRequestHistory(opts).
then(function(res){
appRequestHistory.requestedHistory=res;
// if(appRequestHistory.requestedHistory.length>0)
//     getPkgDetailsRequested(appRequestHistory.requestedHistory);
$scope.$digest();
}).
fail(function(err){
APIError.onFor(scopeName+'initHistory');
console.log(err);
});
//onLoad(true,opts)
};

var switchBetween=function switchBetween(property,firstValue,secondValue){
// helper function to switch a property between two values or set to undefined if values not passed
if(!firstValue){
appRequestHistory.search[property]=undefined;
return;
}
appRequestHistory.search[property]=appRequestHistory.search[property]===firstValue?
secondValue:
firstValue;
};
/*
     const onLoad = (previouslyLoaded,opts) => {
        console.log(appRequestHistory.search);
        appRequestHistory.requestedHistory = [];
         API.cui.getPersonApplicationsRequestHistory({personId:User.user.id,'qs':[['sortBy',appRequestHistory.search['sortBy']]] })
         .then(res => {
            appRequestHistory.requestedHistory=res;
            // if(appRequestHistory.requestedHistory.length>0)
            //     getPkgDetailsRequested(appRequestHistory.requestedHistory);
            $scope.$digest()
         })
         .fail(err =>{
            APIError.onFor(scopeName + 'initHistory')
            console.log(err)
         })
     }*/

/*     const onLoadGranted = (previouslyLoaded) => {
        appRequestHistory.grantedHistory = [];
         API.cui.getPersonApplicationsGrantHistory({personId:User.user.id,'qs':[['sortBy',appRequestHistory.search['sortBy']]] })
         .then(res => {
           appRequestHistory.grantedHistory=res;
            // if(appRequestHistory.grantedHistory.length>0)
            //     getPkgDetailsGrant(appRequestHistory.grantedHistory);
            $scope.$digest()
         })
         .fail(err =>{
            APIError.onFor(scopeName + 'initHistory')
            console.log(err)
         })
     }*/

var getCountsOfStatus=function getCountsOfStatus(qsValue){
var opts={
personId:API.getUser(),
useCuid:true

//Assign query strings if any value passed 
//otherwise it will get full count
};if(qsValue){
opts.qs=[['status',qsValue]];
}
API.cui.getPersonApplicationsGrantHistory(opts).
then(function(res){
if(!qsValue){
appRequestHistory.popupGrantedCount=res.length;
console.log(appRequestHistory.popupGrantedCount);
}else if(qsValue==="active"){
appRequestHistory.activeCount=res.length;
console.log(appRequestHistory.activeCount);
}else
{
appRequestHistory.suspendedCount=res.length;
console.log(appRequestHistory.suspendedCount);
}
$scope.$digest();
}).
fail(function(err){

});
};

var getCountsOfApproved=function getCountsOfApproved(qsValue){
var opts={
personId:API.getUser(),
useCuid:true

//Assign query strings if any value passed 
//otherwise it will get full count
};if(qsValue){
opts.qs=[['status',qsValue]];
}
API.cui.getPersonApplicationsRequestHistory(opts).
then(function(res){
if(!qsValue){
appRequestHistory.popuprequestedCount=res.length;
console.log(appRequestHistory.popuprequestedCount);
}else if(qsValue==="active"){
appRequestHistory.yesCount=res.length;
console.log(appRequestHistory.yesCount);
}else
{
appRequestHistory.noCount=res.length;
console.log(appRequestHistory.noCount);
}
$scope.$digest();
}).
fail(function(err){

});
};
/* -------------------------------------------- HELPER FUNCTIONS END ----------------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

appRequestHistory.user=User.user;

var queryParams=[['page',String(appRequestHistory.search.page)],['pageSize',String(appRequestHistory.search.pageSize)]];
if(appRequestHistory.search.sortBy)
queryParams.push(['sortBy',appRequestHistory.search['sortBy']]);
var opts={
personId:User.user.id,
qs:queryParams};


Loader.onFor(scopeName+'initHistory');
API.cui.getPersonApplicationsRequestHistory(opts).
then(function(res){
appRequestHistory.requestedHistory=res;
// if(appRequestHistory.requestedHistory.length>0)
//     getPkgDetailsRequested(appRequestHistory.requestedHistory);
/*        //to display in popover
        getCountsOfStatus("active")
        getCountsOfStatus("suspended")
        //To getFull count
        getCountsOfStatus(undefined)*/
/*        //to display in popover
        getCountsOfStatus("active")
        getCountsOfStatus("suspended")
        //To getFull count
        getCountsOfStatus(undefined)*/
/* Loader.offFor(scopeName + 'initHistory')
        $scope.$apply();*/
return API.cui.getPersonApplicationsRequestHistoryCount(opts);
}).
then(function(res){
appRequestHistory.count=res;
Loader.offFor(scopeName+'initHistory');
$scope.$apply();
}).
fail(function(err){
APIError.onFor(scopeName+'initHistory');
console.log(err);
}).
always(function(){
Loader.offFor(scopeName+'initHistory');
$scope.$digest();
});
/* -------------------------------------------- ON LOAD END --------------------------------------------- */

}]);
angular.module('user').
controller('userHistoryCtrl',['Loader', 'User', 'UserHistory', '$scope', function(Loader,User,UserHistory,$scope){

var userHistory=this;
var scopeName='userHistory.';
/* -------------------------------------------- HELPER FUNCTIONS START --------------------------------------------- */

/* -------------------------------------------- HELPER FUNCTIONS END ----------------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */
UserHistory.injectUI(userHistory,$scope,User.user.id);
userHistory.user=User.user;//give user info to userhistory
userHistory.lastLogin=User.user.lastLoginDate;
userHistory.userName=User.user.name;
Loader.onFor(scopeName+'initHistory');
UserHistory.initUserHistory(User.user.id).
then(function(res){
angular.merge(userHistory,res);
Loader.offFor(scopeName+'initHistory');
});

/* -------------------------------------------- ON LOAD END --------------------------------------------- */

}]);
angular.module('user').
controller('userProfileCtrl',['Loader', 'User', 'UserProfile', '$scope', function(Loader,User,UserProfile,$scope){

var userProfile=this;
var scopeName='userProfile.';
//$cuiIconProvider.iconSet('cui','node_modules/@covisint/cui-icons/dist/icons/icons-out.svg','0 0 48 48')
/* -------------------------------------------- HELPER FUNCTIONS START --------------------------------------------- */

//Error handler for email inline Edit tag
//Commenting out Inline Editing changes as they might not needed
// userProfile.email=function(value){
//     let EMAIL_REGXP=/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/i
//     if (!angular.isDefined(value)) {
//         userProfile.emailError={};
//     }else{
//         userProfile.emailError={
//             required: value==="" || !value,
//             email:!EMAIL_REGXP.test(value)
//         }
//     }
//     userProfile.noSaveEmail= value==="" || !value || !EMAIL_REGXP.test(value)
// }
/* -------------------------------------------- HELPER FUNCTIONS END --------------------------------------------- */
/* -------------------------------------------- ON LOAD START --------------------------------------------- */

userProfile.maskAnswers=true;
userProfile.inputType='password';
userProfile.updateUIMasking=function(){
if(userProfile.maskAnswers){
userProfile.inputType='password';
}else
{
userProfile.inputType='text';
}
};

UserProfile.injectUI(userProfile,$scope,User.user.id);

Loader.onFor(scopeName+'initProfile');

UserProfile.initUserProfile(User.user.id,User.user.organization.id).
then(function(res){
angular.merge(userProfile,res);
Loader.offFor(scopeName+'initProfile');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

}]);

angular.module('user').
controller('userRolesCtrl',['Loader', 'User', 'UserProfile', '$scope', 'API', 'APIError', '$timeout', '$state', function(Loader,User,UserProfile,$scope,API,APIError,$timeout,$state){
'use strict';

var userRoles=this;
var scopeName='userRoles.';
userRoles.user=User.user;
userRoles.grantedHistoryError=false;
userRoles.getRolesDetailsError=false;
userRoles.appCheckbox={};

// HELPER FUNCTIONS START ------------------------------------------------------------------------

var handleError=function handleError(err){
userRoles.loading=false;
$scope.$digest();
console.log('Error',err);
};



var init=function init(){
userRoles.success=false;
Loader.onFor(scopeName+'initHistory');
API.cui.getPersonRolesOnly({personId:User.user.id}).
then(function(res){
userRoles.rolesDetails=res;
initiGrantable();
}).
fail(function(err){
Loader.offFor(scopeName+'initHistory');
APIError.onFor(scopeName+'initHistory');
userRoles.getRolesDetailsError=true;
initiGrantable();
});
};

var initiGrantable=function initiGrantable(){
API.cui.getPersonRolesGrantable({personId:User.user.id}).
then(function(res){
userRoles.rolesGrantable=res;
Loader.offFor(scopeName+'initHistory');
$scope.$digest();
}).
fail(function(err){
Loader.offFor(scopeName+'initHistory');
APIError.onFor(scopeName+'initHistory');
userRoles.grantedHistoryError=true;
$scope.$digest();
});
};

init();

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------
// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------
userRoles.assignRoles=function(){
var roles=[];
angular.forEach(userRoles.appCheckbox,function(dsd,appId){
/*Object.keys(userRoles.appCheckbox).forEach(function(appId) {*/
if(dsd){
var test={
"id":appId};

roles.push(test);
}
});
var rolesSubmitData={
"userId":User.user.id,
"roles":roles};

console.log(rolesSubmitData);

Loader.onFor(scopeName+'initHistory');
API.cui.assignPersonRoles({data:rolesSubmitData}).
then(function(res){
console.log(res);
Loader.offFor(scopeName+'initHistory');
$scope.$digest();
userRoles.success=true;
$timeout(function(){
init();
},3000);

}).
fail(function(err){
Loader.offFor(scopeName+'initHistory');
APIError.onFor(scopeName+'initHistory');
userRoles.rolessubmitError=true;
$scope.$digest();
});
};
/*    userRoles.checkrequest = (roleId) =>{
        if (!userRoles.selectedCheckbox[roleId]) {
            userRoles.selectedCheckbox[roleId] = roleId
        } else {
            delete userRoles.selectedCheckbox[roleId]
        }
        if(Object.keys(userRoles.selectedCheckbox).length<0){
            
        }else{
            userRoles.appCheckboxValid=true
        }
    }*/
$scope.$watch("userRoles.appCheckbox",function(n){
var count=0;
angular.forEach(userRoles.appCheckbox,function(dsd,key){
console.log(key);
if(dsd)
count+=1;
});
if(count>0){
userRoles.appCheckboxValid=true;
}else{
userRoles.appCheckboxValid=false;
}
},true);
// ON CLICK END ----------------------------------------------------------------------------------
}]);


angular.module('registration',[]).
config(['$stateProvider',function($stateProvider){

var templateBase='app/modules/registration/';

var returnCtrlAs=function returnCtrlAs(name,asPrefix){
return name+'Ctrl as '+(asPrefix?asPrefix:'')+(asPrefix?name[0].toUpperCase()+name.slice(1,name.length):name);
};

$stateProvider.
state('registration',{
url:'/register',
template:'<div ui-view></div>'}).

state('registration.walkup',{
url:'/walkup',
templateUrl:templateBase+'userWalkup/userWalkup.html',
controller:returnCtrlAs('userWalkup'),
menu:{
desktop:false,
mobile:false}}).


state('registration.invitation',{
url:'/invitation?inviteId&pin',
templateUrl:templateBase+'userInvited/userInvited.html',
controller:returnCtrlAs('userInvited'),
menu:{
desktop:false,
mobile:false}});



}]);

angular.module('registration').
controller('userInvitedCtrl',['APIError', 'localStorageService', 'Registration', '$scope', '$state', '$q', 'LocaleService', '$window', 'Base', '$stateParams', '$pagination', '$filter', function(APIError,localStorageService,Registration,$scope,$state,$q,LocaleService,$window,Base,$stateParams,$pagination,$filter){

var userInvited=this;
var encodedString=btoa($stateParams.inviteId+':'+$stateParams.pin);
userInvited.applications={};
userInvited.userLogin={};
userInvited.applications.numberOfSelected=0;
userInvited.submitError=false;
userInvited.languages=[];
userInvited.showOrgInfo=false;
userInvited.pageSize=userInvited.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
// need to initialize to avoid undefined error when preselecting apps based on invitation data
userInvited.applications.selected={};
/* -------------------------------------------- ON LOAD START --------------------------------------------- */

//for detectig browser time
var d=new Date();
var tz=d.toTimeString();

//for detectig browser language
var lang=$window.navigator.language||$window.navigator.userLanguage;

if(lang.indexOf('en-')>=0){userInvited.browserPreference='en';}else
if(lang.indexOf('zh')>=0){userInvited.browserPreference='zh';}else
if(lang.indexOf('pl')>=0){userInvited.browserPreference='pl';}else
if(lang.indexOf('pt')>=0){userInvited.browserPreference='pt';}else
if(lang.indexOf('tr')>=0){userInvited.browserPreference='tr';}else
if(lang.indexOf('fr')>=0){userInvited.browserPreference='fr';}else
if(lang.indexOf('ja')>=0){userInvited.browserPreference='ja';}else
if(lang.indexOf('es')>=0){userInvited.browserPreference='es';}else
if(lang.indexOf('de')>=0){userInvited.browserPreference='de';}else
if(lang.indexOf('ru')>=0){userInvited.browserPreference='ru';}else
if(lang.indexOf('it')>=0){userInvited.browserPreference='it';}else
{
console.log(lang+"not supported");
userInvited.browserPreference='en';
}
//LocaleService.setLocaleByDisplayName(appConfig.languages[userInvited.browserPreference])
userInvited.initializing=true;

if(!localStorageService.get('userInvited.user')){
// If registration is not saved in localstorage we need to initialize 
// these arrays so ng-model treats them as arrays rather than objects 
userInvited.user={addresses:[]};
userInvited.user.addresses[0]={streets:[]};
userInvited.user.phones=[];
}else
{
userInvited.user=localStorageService.get('userInvited.user');

}

Object.keys(Base.languages).forEach(function(id,index){
userInvited.languages[index]={
id:id};

});
Object.values(Base.languages).forEach(function(language,index){
userInvited.languages[index].name=language;
});
userInvited.user.language=_.find(userInvited.languages,{id:userInvited.browserPreference});
Registration.initInvitedRegistration(encodedString).
then(function(res){
var questions=res.securityQuestions;

// Split questions to use between 2 dropdowns
questions.splice(0,1);
var numberOfQuestionsFloor=Math.floor(questions.length/2);

userInvited.userLogin.challengeQuestions1=questions.slice(0,numberOfQuestionsFloor);
userInvited.userLogin.challengeQuestions2=questions.slice(numberOfQuestionsFloor);

// Preload questions into input
userInvited.userLogin.question1=userInvited.userLogin.challengeQuestions1[0];
userInvited.userLogin.question2=userInvited.userLogin.challengeQuestions2[0];

// Populate organization Data
userInvited.organization=res.organization;
userInvited.invitationData=res.invitationData;

//Check restrict Email flag
userInvited.user.email="";
if(userInvited.invitationData.restrictEmail){
userInvited.user.email=userInvited.invitationData.email;
userInvited.emailRe=userInvited.user.email;
}
userInvited.initializing=false;
}).
catch(function(error){
console.error(error);
if(error.responseJSON&&error.responseJSON.apiMessage.indexOf(encodedString)>0){
userInvited.initializing=false;
APIError.onFor('RegistrationFactory.inValidInvite');
}else{
$state.go('misc.loadError');
}
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */

userInvited.applications.updateNumberOfSelected=function(checkboxValue){
// Update the number of selected apps everytime on of the boxes is checked/unchecked
if(checkboxValue!==null){
userInvited.applications.numberOfSelected+=1;
}else{
userInvited.applications.numberOfSelected-=1;
}
userInvited.applications.process();
};

userInvited.applications.updateSelected=function(application,checkboxValue,index){
if(checkboxValue===true){
userInvited.applications.selected[index]=application.id+','+application.packageId+','+application.name+','+application.showTac;
userInvited.applications.numberOfSelected+=1;
}else{
delete userInvited.applications.selected[index];
userInvited.applications.numberOfSelected-=1;
}
};

userInvited.getAppicationTaC=function(){
angular.forEach(userInvited.applications.processedSelected,function(app){
//need to change later to ===
if(app.showTac=='true'&&app.tac===undefined){
Registration.getTac(app.packageId).
then(function(res){
app.tac=res;
}).
catch(function(err){
console.log(err);
});
};
});
};

//Check TAC flag for selected applications
userInvited.checkTacFlag=function(selectedApplications){
var TacCount=0;
angular.forEach(selectedApplications,function(app){
//need to change later to ===
if(app.showTac=='true'){
TacCount++;
};
});
return TacCount;
};

userInvited.showTac=function(index){
if(userInvited.applications.processedSelected[index].tac){
userInvited.tacContent=userInvited.applications.processedSelected[index].tac.tacText;
userInvited.applications.step=3;
}
};

userInvited.applications.process=function(){
// Process the selected apps when you click next after selecting the apps you need
// returns number of apps selected
var oldSelected=void 0;
var index=0;
if(userInvited.applications.processedSelected){
oldSelected=userInvited.applications.processedSelected;
}

// Fixes issue where adding and removing selected apps would leave objects with null values
angular.forEach(userInvited.applications.selected,function(app,i){
if(app===null)delete userInvited.applications.selected[i];
});

userInvited.applications.processedSelected=[];

angular.forEach(userInvited.applications.selected,function(app,i){
if(app!==null){
userInvited.applications.processedSelected.push({
id:app.split(',')[0],
packageId:app.split(',')[1],
name:app.split(',')[2],
// this fixes an issue where removing an app from the selected list that the user 
// had accepted the terms for would carry over that acceptance to the next app on the list
acceptedTos:oldSelected&&oldSelected[index]&&oldSelected[index].id==i?oldSelected[index].acceptedTos:false,
showTac:app.split(',')[3],
tac:oldSelected&&oldSelected[index]&&oldSelected[index].id==i?oldSelected[index].tac:undefined});

}
index++;
});
return userInvited.checkTacFlag(userInvited.applications.processedSelected);

};

userInvited.submit=function(){
userInvited.submitting=true;
userInvited.submitError=false;

var registrationData={
profile:userInvited.user,
organization:userInvited.organization,
login:userInvited.userLogin,
applications:userInvited.applications,
userCountry:userInvited.userCountry,
requestReason:userInvited.reason};


Registration.invitedSubmit(registrationData,encodedString,$stateParams.inviteId).
then(function(){
userInvited.success=true;
userInvited.submitting=false;
$state.go('misc.success');
}).
catch(function(error){
userInvited.submitError=true;
userInvited.submitting=false;
if(error.responseJSON){
userInvited.errorMessage=error.responseJSON.apiMessage;
}else
{
userInvited.errorMessage='Error submitting registration request';
}
});
};

userInvited.selectOrganization=function(){
userInvited.applications.numberOfSelected=0;// Restart applications count
userInvited.applications.processedSelected=undefined;// Restart applications selected

Registration.selectOrganization(userInvited.organization,userInvited.pageSize).
then(function(res){
var grants=res.grants;
userInvited.appCount=res.appCount;
if(!grants.length)userInvited.applications.list=undefined;else
{
userInvited.applications.list=grants;
//Preselect the applications selected by admin
if(userInvited.invitationData.servicePackage){
var flagObject=userInvited.preSelectApps(userInvited.applications.list,false,false);
// Check whether we found main apps and sub apps in the current pagination
if(flagObject.appsFoundFlag&&flagObject.subappsFoundFlag){
userInvited.applications.process();
}
// application or subapplication was not retrieved in current set of pagination
// need to retrieve all apps and pre selects them
else{
userInvited.getAllOrgApps(flagObject).
then(function(){
userInvited.applications.process();
});
}
}
}
// userInvited.reRenderPaginate && userInvited.reRenderPaginate()
userInvited.passwordRules=res.passwordRules;
}).
fail(function(error){
console.error('Error getting organization information',error);
APIError.onFor('userInvited.orgInfo',error);
}).
always(function(){
$scope.$digest();
});
};

//Updates the selected apps and count and set the found flags
userInvited.selectAndUpdateFlags=function(application,flags){
userInvited.applications.selected[application.id]=application.id+','+application.servicePackage.id+','+$filter('cuiI18n')(application.name)+','+application.servicePackage.personTacEnabled;
flags[application.id]=true;
if(application.bundledApps&&Object.keys(flags).length===1){
application.bundledApps.forEach(function(app){
flags[app.id]=false;
});
}
return flags;
};

userInvited.preSelectApps=function(appList,appsFoundFlag,subappsFoundFlag){
var bundledAppFlags={};
var subappFlags={};
appList.forEach(function(application){
if(appsFoundFlag!==true&&userInvited.invitationData.servicePackage.id===application.servicePackage.id){
bundledAppFlags=userInvited.selectAndUpdateFlags(application,bundledAppFlags);
}
if(subappsFoundFlag!==true&&userInvited.invitationData.subPackage){
// If subpackages
if(userInvited.invitationData.subPackage.id.indexOf(',')>0){
// If multiple subpackages Then subPackage.id will be string like "id1,id2,...idn"
var subPackages=userInvited.invitationData.subPackage.id.split(',');
subPackages.forEach(function(subPackage){
subappFlags[subPackage]=subappFlags[subPackage]||{};
if(application.servicePackage.id.indexOf(subPackage)>0){
subappFlags[subPackage]=userInvited.selectAndUpdateFlags(application,subappFlags[subPackage]);
}
});
}else
{
// Single Subpackage
if(application.servicePackage.id.indexOf(userInvited.invitationData.subPackage.id)>0){
subappFlags[userInvited.invitationData.subPackage.id]={};
subappFlags[userInvited.invitationData.subPackage.id]=userInvited.selectAndUpdateFlags(application,subappFlags[userInvited.invitationData.subPackage.id]);
}
}
}
});
//Check whether we found all the main apps,
var count=0;
var iteration=0;
angular.forEach(bundledAppFlags,function(flag){
iteration++;
if(flag===false){
count++;
}
if(iteration===Object.keys(bundledAppFlags).length){
if(count===0){
appsFoundFlag=true;
}
}
});
//Check wether we found all the subapps,
count=0;
iteration=0;
var iterationOut=0;
var countOut=0;
angular.forEach(subappFlags,function(subpackage){
iterationOut++;
if(Object.keys(subpackage).length!==0){
angular.forEach(subpackage,function(flag){
iteration++;
if(flag===false){
count++;
}
if(iteration===Object.keys(subpackage).length){
if(count===0){
subappsFoundFlag=true;
}
}
});
}else
{
countOut++;
}
if(iterationOut===Object.keys(subappFlags).length){
if(countOut===0){
subappsFoundFlag=true;
}else
{
subappsFoundFlag=false;
}

}
});
userInvited.applications.numberOfSelected=Object.keys(userInvited.applications.selected).length;
return{
appsFoundFlag:appsFoundFlag,
subappsFoundFlag:subappsFoundFlag};

};

userInvited.getAllOrgApps=function(flagObject){
var deferred=$q.defer();
var tempAllApps=[];
var tempAppsCount=userInvited.appCount;
var page=0;
var apiPromises=[];
do{
page++;
apiPromises.push(Registration.getOrgAppsByPage(page,200,userInvited.organization.id));
tempAppsCount=tempAppsCount-200;
}while(tempAppsCount>200);
$q.all(apiPromises).
then(function(res){
res.forEach(function(appList){
userInvited.preSelectApps(appList,flagObject.appsFoundFlag,flagObject.subappsFoundFlag);
});
deferred.resolve();
});
return deferred.promise;
};

userInvited.pageChange=function(newpage){
userInvited.updatingApps=true;
Registration.getOrgAppsByPage(newpage,userInvited.pageSize,userInvited.organization.id).
then(function(res){
userInvited.page=newpage;
if(!res.length)userInvited.applications.list=undefined;else
{
userInvited.applications.list=res;
userInvited.updatingApps=false;
}
});
};
/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

/* -------------------------------------------- WATCHERS START -------------------------------------------- */

$scope.$watch('userInvited.user',function(a){
if(a&&Object.keys(a).length!==0){
localStorageService.set('userInvited.user',a);
}
},true);

userInvited.checkDuplicateEmail=function(value){
if(value&&value!==""){
$q.all([Registration.isEmailTaken(value).promise]).
then(function(res){
userInvited.isEmailTaken=res[0];
});
}else
{
userInvited.isEmailTaken=true;
}
};

userInvited.checkDuplicateEmail(userInvited.user.email);
userInvited.customErrors={
userName:{
usernameTaken:Registration.isUsernameTaken},

email:{
email:function email(){
var EMAIL_REGEXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
if(userInvited.user.email){
return EMAIL_REGEXP.test(userInvited.user.email);
}else{
return true;
}
}},

answersMatch:{
answersMatch:function answersMatch(){
if(userInvited.userLogin&&userInvited.userLogin.challengeAnswer2){
return userInvited.userLogin.challengeAnswer2!==userInvited.userLogin.challengeAnswer1;
}else{
return true;
}
}}



//Error handlers for Inline Edits in review page
};userInvited.inlineEdit={
firstName:function firstName(value){
if(!angular.isDefined(value)){
userInvited.inlineEdit.firstNameError={};
}else
{
userInvited.inlineEdit.firstNameError={
required:value===""||!value};

}
userInvited.inlineEdit.noSaveFirstName=value===""||!value;
},
lastName:function lastName(value){
if(!angular.isDefined(value)){
userInvited.inlineEdit.lastNameError={};
}else
{
userInvited.inlineEdit.lastNameError={
required:value===""||!value};

}
userInvited.inlineEdit.noSaveLastName=value===""||!value;
},
email:function email(value){
var EMAIL_REGXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
if(!angular.isDefined(value)){
userInvited.inlineEdit.emailError={};
}else
{
userInvited.inlineEdit.emailError={
required:value===""||!value,
email:!EMAIL_REGXP.test(value)

//emailTaken:
};if(!userInvited.inlineEdit.emailError.required&&!userInvited.inlineEdit.emailError.email){
userInvited.checkDuplicateEmail(value);
}

}
userInvited.inlineEdit.noSaveEmail=value===""||!value||!EMAIL_REGXP.test(value);
},
//For autocomplete need to handle differently
country:function country(value){
console.log(value);
if(!angular.isDefined(value)){
userInvited.inlineEdit.countryError={
required:true};

}else{
userInvited.inlineEdit.countryError={
required:false};

}
userInvited.inlineEdit.noSaveCountry=value===undefined;
},
address1:function address1(value){
if(!angular.isDefined(value)){
userInvited.inlineEdit.address1Error={};
}else
{
userInvited.inlineEdit.address1Error={
required:value===""||!value};

}
userInvited.inlineEdit.noSaveAddress1=value===""||!value;
},
telephone:function telephone(value){
if(!angular.isDefined(value)){
userInvited.inlineEdit.telephoneError={};
}else
{
userInvited.inlineEdit.telephoneError={
required:value===""||!value};

}
userInvited.inlineEdit.noSaveTelephone=value===""||!value;
},
userId:function userId(value){
if(!angular.isDefined(value)){
userInvited.inlineEdit.userIdError={};
}else
{
userInvited.inlineEdit.userIdError={
required:value===""||!value

//usernameTaken: 
};if(!userInvited.inlineEdit.userIdError.required){
$q.all([Registration.isUsernameTaken(value).promise]).
then(function(res){
userInvited.inlineEdit.userIdError.usernameTaken=!res[0];
userInvited.inlineEdit.noSaveUserId=value===""||!value||userInvited.inlineEdit.userIdError.usernameTaken;
});
}

}
userInvited.inlineEdit.noSaveUserId=value===""||!value;
},
challengeAnswer1:function challengeAnswer1(value){
if(!angular.isDefined(value)){
userInvited.inlineEdit.challengeAnswer1Error={};
}else
{
userInvited.inlineEdit.challengeAnswer1Error={
required:value===""||!value,
answersMatch:value===userInvited.userLogin.challengeAnswer2};

}
userInvited.inlineEdit.noSaveChallengeAnswer1=value===""||!value||value===userInvited.userLogin.challengeAnswer2;
},
challengeAnswer2:function challengeAnswer2(value){
if(!angular.isDefined(value)){
userInvited.inlineEdit.challengeAnswer2Error={};
}else
{
userInvited.inlineEdit.challengeAnswer2Error={
required:value===""||!value,
answersMatch:value===userInvited.userLogin.challengeAnswer1};

}
userInvited.inlineEdit.noSaveChallengeAnswer2=value===""||!value||value===userInvited.userLogin.challengeAnswer1;
},
//on save functions needed to show error when pressed enter
updateFirstNameError:function updateFirstNameError(){
userInvited.inlineEdit.firstName(userInvited.user.name.given);
},
updateLastNameError:function updateLastNameError(){
userInvited.inlineEdit.lastName(userInvited.user.name.surname);
},
updateEmailError:function updateEmailError(){
userInvited.emailRe=userInvited.user.email;
userInvited.inlineEdit.email(userInvited.user.email);
},
updateCountryError:function updateCountryError(){
if(userInvited.userCountry){
userInvited.inlineEdit.countryError={
required:false};

}
},
updateAddress1Error:function updateAddress1Error(){
userInvited.inlineEdit.address1(userInvited.user.addresses[0].streets[0]);
},
updateTelephoneError:function updateTelephoneError(){
userInvited.inlineEdit.telephone(userInvited.user.phones[0].number);
},
updateUserIdError:function updateUserIdError(){
userInvited.inlineEdit.userId(userInvited.userLogin.username);
},
updateChallengeAnswer1Error:function updateChallengeAnswer1Error(){
userInvited.inlineEdit.challengeAnswer1(userInvited.userLogin.challengeAnswer1);
},
updateChallengeAnswer2Error:function updateChallengeAnswer2Error(){
userInvited.inlineEdit.challengeAnswer2(userInvited.userLogin.challengeAnswer2);
}



/* --------------------------------------------- WATCHERS END --------------------------------------------- */};

}]);

angular.module('registration').
controller('userWalkupCtrl',['APIError', 'localStorageService', 'Registration', '$scope', '$state', '$q', 'LocaleService', '$window', 'Base', '$pagination', '$filter', function(APIError,localStorageService,Registration,$scope,$state,$q,LocaleService,$window,Base,$pagination,$filter){

var userWalkup=this;

userWalkup.applications={};
userWalkup.userLogin={};
userWalkup.applications.numberOfSelected=0;
userWalkup.submitError=false;
userWalkup.languages=[];
userWalkup.orgPaginationSize=userWalkup.orgPaginationSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
userWalkup.appPaginationSize=userWalkup.appPaginationSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
/* -------------------------------------------- ON LOAD START --------------------------------------------- */

//for detectig browser time
var d=new Date();
var tz=d.toTimeString();

//for detectig browser language
var lang=$window.navigator.language||$window.navigator.userLanguage;

if(lang.indexOf('en-')>=0){userWalkup.browserPreference='en';}else
if(lang.indexOf('zh')>=0){userWalkup.browserPreference='zh';}else
if(lang.indexOf('pl')>=0){userWalkup.browserPreference='pl';}else
if(lang.indexOf('pt')>=0){userWalkup.browserPreference='pt';}else
if(lang.indexOf('tr')>=0){userWalkup.browserPreference='tr';}else
if(lang.indexOf('fr')>=0){userWalkup.browserPreference='fr';}else
if(lang.indexOf('ja')>=0){userWalkup.browserPreference='ja';}else
if(lang.indexOf('es')>=0){userWalkup.browserPreference='es';}else
if(lang.indexOf('de')>=0){userWalkup.browserPreference='de';}else
if(lang.indexOf('ru')>=0){userWalkup.browserPreference='ru';}else
if(lang.indexOf('it')>=0){userWalkup.browserPreference='it';}else
{
console.log(lang+"not supported");
userWalkup.browserPreference='en';
}
//LocaleService.setLocaleByDisplayName(appConfig.languages[userWalkup.browserPreference])
userWalkup.initializing=true;

if(!localStorageService.get('userWalkup.user')){
// If registration is not saved in localstorage we need to initialize 
// these arrays so ng-model treats them as arrays rather than objects 
userWalkup.user={addresses:[]};
userWalkup.user.addresses[0]={streets:[]};
userWalkup.user.phones=[];
}else
{
userWalkup.user=localStorageService.get('userWalkup.user');

}

Object.keys(Base.languages).forEach(function(id,index){
userWalkup.languages[index]={
id:id};

});
Object.values(Base.languages).forEach(function(language,index){
userWalkup.languages[index].name=language;
});
userWalkup.user.language=_.find(userWalkup.languages,{id:userWalkup.browserPreference});
Registration.initWalkupRegistration(userWalkup.orgPaginationSize).
then(function(res){
var questions=res.securityQuestions;

// Split questions to use between 2 dropdowns
questions.splice(0,1);
var numberOfQuestionsFloor=Math.floor(questions.length/2);

userWalkup.userLogin.challengeQuestions1=questions.slice(0,numberOfQuestionsFloor);
userWalkup.userLogin.challengeQuestions2=questions.slice(numberOfQuestionsFloor);

// Preload questions into input
userWalkup.userLogin.question1=userWalkup.userLogin.challengeQuestions1[0];
userWalkup.userLogin.question2=userWalkup.userLogin.challengeQuestions2[0];

// Populate organization list
userWalkup.organizationList=res.organizations;
userWalkup.organizationCount=res.organizationCount;
userWalkup.orgReRenderPaginate&&userWalkup.orgReRenderPaginate();

userWalkup.initializing=false;
}).
catch(function(error){
$state.go('misc.loadError');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */
userWalkup.applications.checkOrUncheckBundledApps=function(checkboxValue,application){
if(application.bundledApps){
application.bundledApps.forEach(function(bundledApp){
if(checkboxValue!==null){
bundledApp=_.find(userWalkup.applications.list,{id:bundledApp.id});
userWalkup.applications.selected[bundledApp.id]=bundledApp.id+','+bundledApp.servicePackage.id+','+$filter('cuiI18n')(bundledApp.name)+','+application.servicePackage.personTacEnabled;
userWalkup.applications.numberOfSelected+=1;

}else{
userWalkup.applications.selected[bundledApp.id]=null;
userWalkup.applications.numberOfSelected-=1;
}
});
}

};

userWalkup.applications.updateNumberOfSelected=function(checkboxValue,application){
// Update the number of selected apps everytime on of the boxes is checked/unchecked
if(checkboxValue!==null){
userWalkup.applications.numberOfSelected+=1;
}else{
userWalkup.applications.numberOfSelected-=1;
}
userWalkup.applications.checkOrUncheckBundledApps(checkboxValue,application);
userWalkup.applications.process();
};

userWalkup.applications.updateSelected=function(application,checkboxValue,index){
var bundledApps=_.filter(userWalkup.applications.processedSelected,{packageId:application.packageId});
bundledApps.forEach(function(bundledApp){
if(checkboxValue!==null){
userWalkup.applications.selected[bundledApp.id]=bundledApp.id+','+bundledApp.packageId+','+bundledApp.name+','+bundledApp.showTac;
userWalkup.applications.numberOfSelected+=1;
}else{
delete userWalkup.applications.selected[bundledApp.id];
userWalkup.applications.numberOfSelected-=1;
}
});
};

userWalkup.getAppicationTaC=function(){
angular.forEach(userWalkup.applications.processedSelected,function(app){
//need to change later to ===
if(app.showTac=='true'){
Registration.getTac(app.packageId).
then(function(res){
app.tac=res;
}).
catch(function(err){
console.log(err);
});
};
});
};

//Check TAC flag for selected applications
userWalkup.checkTacFlag=function(selectedApplications){
var TacCount=0;
angular.forEach(selectedApplications,function(app){
//need to change later to ===
if(app.showTac=='true'){
TacCount++;
};
});
return TacCount;
};

userWalkup.showTac=function(index){
if(userWalkup.applications.processedSelected[index].tac){
userWalkup.tacContent=userWalkup.applications.processedSelected[index].tac.tacText;
userWalkup.applications.step=3;
}
};

userWalkup.applications.process=function(){
// Process the selected apps when you click next after selecting the apps you need
// returns number of apps selected
var oldSelected=void 0;
var index=0;
if(userWalkup.applications.processedSelected){
oldSelected=userWalkup.applications.processedSelected;
}

// Fixes issue where adding and removing selected apps would leave objects with null values
angular.forEach(userWalkup.applications.selected,function(app,i){
if(app===null)delete userWalkup.applications.selected[i];
});

userWalkup.applications.processedSelected=[];

angular.forEach(userWalkup.applications.selected,function(app,i){
if(app!==null){
userWalkup.applications.processedSelected.push({
id:app.split(',')[0],
packageId:app.split(',')[1],
name:app.split(',')[2],
// this fixes an issue where removing an app from the selected list that the user 
// had accepted the terms for would carry over that acceptance to the next app on the list
acceptedTos:oldSelected&&oldSelected[index]&&oldSelected[index].id==i?oldSelected[index].acceptedTos:false,
showTac:app.split(',')[3]});

}
index++;
});
return userWalkup.checkTacFlag(userWalkup.applications.processedSelected);

};

userWalkup.submit=function(){
userWalkup.submitting=true;
userWalkup.submitError=false;

var registrationData={
profile:userWalkup.user,
organization:userWalkup.organization,
login:userWalkup.userLogin,
applications:userWalkup.applications,
userCountry:userWalkup.userCountry,
requestReason:userWalkup.reason};


Registration.walkupSubmit(registrationData).
then(function(){
userWalkup.success=true;
userWalkup.submitting=false;
$state.go('misc.success');
}).
catch(function(error){
userWalkup.submitError=true;
userWalkup.submitting=false;
if(error.responseJSON){
userWalkup.errorMessage=error.responseJSON.apiMessage;
}else
{
userWalkup.errorMessage='Error submitting registration request';
}
});
};

userWalkup.selectOrganization=function(organization){
userWalkup.organization=organization;
userWalkup.applications.numberOfSelected=0;// Restart applications count
userWalkup.applications.processedSelected=undefined;// Restart applications selected

Registration.selectOrganization(organization,userWalkup.appPaginationSize).
then(function(res){
var grants=res.grants;
userWalkup.appCount=res.appCount;
userWalkup.appReRenderPaginate&&userWalkup.appReRenderPaginate();
if(!grants.length)userWalkup.applications.list=undefined;else
{
userWalkup.applications.list=grants;
}

userWalkup.passwordRules=res.passwordRules;
}).
fail(function(error){
console.error('Error getting organization information',error);
APIError.onFor('userWalkup.orgInfo',error);
}).
always(function(){
$scope.$digest();
});
};

userWalkup.orgPaginationPageHandler=function(newPage){
userWalkup.updatingOrgs=true;
Registration.getOrgsByPageAndName(newPage,userWalkup.orgPaginationSize).
then(function(res){
userWalkup.orgPaginationCurrentPage=newPage;
userWalkup.organizationList=res;
userWalkup.updatingOrgs=false;
$scope.$digest();
}).
fail(function(err){
console.error("There was an error in fetching organization list for page "+newPage+err);
userWalkup.updatingOrgs=false;
$scope.$digest();
});
};

userWalkup.appPaginationPageHandler=function(newPage){
userWalkup.updatingApps=true;
Registration.getOrgAppsByPage(newPage,userWalkup.appPaginationSize,userWalkup.organization.id).
then(function(res){
userWalkup.appPaginationCurrentPage=newPage;
if(!res.length){
userWalkup.updatingApps=false;
userWalkup.applications.list=undefined;
}else
{
userWalkup.applications.list=res;
userWalkup.updatingApps=false;
}
$scope.$digest();
}).
fail(function(err){
userWalkup.updatingApps=false;
$scope.$digest();
console.error("There was an error in fetching app list for page "+newPage+err);
});
};
/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

/* -------------------------------------------- WATCHERS START -------------------------------------------- */

$scope.$watch('userWalkup.user',function(a){
if(a&&Object.keys(a).length!==0){
localStorageService.set('userWalkup.user',a);
}
},true);

$scope.$watch('userWalkup.orgFilterByname',function(a){
if(a!==undefined){
userWalkup.updatingOrgs=true;
Registration.getOrgsByPageAndName(1,userWalkup.orgPaginationSize,a).
then(function(res){
userWalkup.organizationList=res;
userWalkup.updatingOrgs=false;
$scope.$digest();
}).
fail(function(err){
userWalkup.updatingOrgs=false;
$scope.$digest();
console.error("There was an error in filtering orgs by name "+err);
});
}

});

userWalkup.checkDuplicateEmail=function(value){
if(value&&value!==""){
$q.all([Registration.isEmailTaken(value).promise]).
then(function(res){
userWalkup.isEmailTaken=res[0];
});
}else
{
userWalkup.isEmailTaken=true;
}
};

userWalkup.checkDuplicateEmail(userWalkup.user.email);
userWalkup.customErrors={
userName:{
usernameTaken:Registration.isUsernameTaken},

email:{
email:function email(){
var EMAIL_REGEXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
if(userWalkup.user.email){
return EMAIL_REGEXP.test(userWalkup.user.email);
}else{
return true;
}
}},

answersMatch:{
answersMatch:function answersMatch(){
if(userWalkup.userLogin&&userWalkup.userLogin.challengeAnswer2){
return userWalkup.userLogin.challengeAnswer2!==userWalkup.userLogin.challengeAnswer1;
}else{
return true;
}
}}



//Error handlers for Inline Edits in review page
};userWalkup.inlineEdit={
firstName:function firstName(value){
if(!angular.isDefined(value)){
userWalkup.inlineEdit.firstNameError={};
}else
{
userWalkup.inlineEdit.firstNameError={
required:value===""||!value};

}
userWalkup.inlineEdit.noSaveFirstName=value===""||!value;
},
lastName:function lastName(value){
if(!angular.isDefined(value)){
userWalkup.inlineEdit.lastNameError={};
}else
{
userWalkup.inlineEdit.lastNameError={
required:value===""||!value};

}
userWalkup.inlineEdit.noSaveLastName=value===""||!value;
},
email:function email(value){
var EMAIL_REGXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
if(!angular.isDefined(value)){
userWalkup.inlineEdit.emailError={};
}else
{
userWalkup.inlineEdit.emailError={
required:value===""||!value,
email:!EMAIL_REGXP.test(value)

//emailTaken:
};if(!userWalkup.inlineEdit.emailError.required&&!userWalkup.inlineEdit.emailError.email){
userWalkup.checkDuplicateEmail(value);
}

}
userWalkup.inlineEdit.noSaveEmail=value===""||!value||!EMAIL_REGXP.test(value);
},
//For autocomplete need to handle differently
country:function country(value){
console.log(value);
if(!angular.isDefined(value)){
userWalkup.inlineEdit.countryError={
required:true};

}else{
userWalkup.inlineEdit.countryError={
required:false};

}
userWalkup.inlineEdit.noSaveCountry=value===undefined;
},
address1:function address1(value){
if(!angular.isDefined(value)){
userWalkup.inlineEdit.address1Error={};
}else
{
userWalkup.inlineEdit.address1Error={
required:value===""||!value};

}
userWalkup.inlineEdit.noSaveAddress1=value===""||!value;
},
telephone:function telephone(value){
if(!angular.isDefined(value)){
userWalkup.inlineEdit.telephoneError={};
}else
{
userWalkup.inlineEdit.telephoneError={
required:value===""||!value};

}
userWalkup.inlineEdit.noSaveTelephone=value===""||!value;
},
userId:function userId(value){
if(!angular.isDefined(value)){
userWalkup.inlineEdit.userIdError={};
}else
{
userWalkup.inlineEdit.userIdError={
required:value===""||!value

//usernameTaken: 
};if(!userWalkup.inlineEdit.userIdError.required){
$q.all([Registration.isUsernameTaken(value).promise]).
then(function(res){
userWalkup.inlineEdit.userIdError.usernameTaken=!res[0];
userWalkup.inlineEdit.noSaveUserId=value===""||!value||userWalkup.inlineEdit.userIdError.usernameTaken;
});
}

}
userWalkup.inlineEdit.noSaveUserId=value===""||!value;
},
challengeAnswer1:function challengeAnswer1(value){
if(!angular.isDefined(value)){
userWalkup.inlineEdit.challengeAnswer1Error={};
}else
{
userWalkup.inlineEdit.challengeAnswer1Error={
required:value===""||!value,
answersMatch:value===userWalkup.userLogin.challengeAnswer2};

}
userWalkup.inlineEdit.noSaveChallengeAnswer1=value===""||!value||value===userWalkup.userLogin.challengeAnswer2;
},
challengeAnswer2:function challengeAnswer2(value){
if(!angular.isDefined(value)){
userWalkup.inlineEdit.challengeAnswer2Error={};
}else
{
userWalkup.inlineEdit.challengeAnswer2Error={
required:value===""||!value,
answersMatch:value===userWalkup.userLogin.challengeAnswer1};

}
userWalkup.inlineEdit.noSaveChallengeAnswer2=value===""||!value||value===userWalkup.userLogin.challengeAnswer1;
},
//on save functions needed to show error when pressed enter
updateFirstNameError:function updateFirstNameError(){
userWalkup.inlineEdit.firstName(userWalkup.user.name.given);
},
updateLastNameError:function updateLastNameError(){
userWalkup.inlineEdit.lastName(userWalkup.user.name.surname);
},
updateEmailError:function updateEmailError(){
userWalkup.emailRe=userWalkup.user.email;
userWalkup.inlineEdit.email(userWalkup.user.email);
},
updateCountryError:function updateCountryError(){
if(userWalkup.userCountry){
userWalkup.inlineEdit.countryError={
required:false};

}
},
updateAddress1Error:function updateAddress1Error(){
userWalkup.inlineEdit.address1(userWalkup.user.addresses[0].streets[0]);
},
updateTelephoneError:function updateTelephoneError(){
userWalkup.inlineEdit.telephone(userWalkup.user.phones[0].number);
},
updateUserIdError:function updateUserIdError(){
userWalkup.inlineEdit.userId(userWalkup.userLogin.username);
},
updateChallengeAnswer1Error:function updateChallengeAnswer1Error(){
userWalkup.inlineEdit.challengeAnswer1(userWalkup.userLogin.challengeAnswer1);
},
updateChallengeAnswer2Error:function updateChallengeAnswer2Error(){
userWalkup.inlineEdit.challengeAnswer2(userWalkup.userLogin.challengeAnswer2);
}



/* --------------------------------------------- WATCHERS END --------------------------------------------- */};

}]);

angular.module('organization',[]).
config(['$stateProvider',function($stateProvider){

var templateBase='app/modules/organization/';

var returnCtrlAs=function returnCtrlAs(name,asPrefix){return name+'Ctrl as '+(asPrefix||'')+(asPrefix?name[0].toUpperCase()+name.slice(1,name.length):name);};

var loginRequired=true;

$stateProvider.
state('organization',{
url:'/organization',
template:'<div ui-view></div>',
access:loginRequired})

// Profile --------------------------------------------------
.state('organization.profile',{
url:'/profile/:orgId?userId',
templateUrl:templateBase+'profile/organization-profile.html',
controller:returnCtrlAs('orgProfile'),
access:loginRequired})

// Directory ------------------------------------------------
.state('organization.directory',{
abstract:true,
template:'<div ui-view></div>'}).

state('organization.directory.userList',{
url:'/directory/:orgId?page&pageSize&sortBy&status&fullName',
templateUrl:templateBase+'directory/user-list/directory-userList.html',
controller:returnCtrlAs('orgDirectory'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('organization.directory.userDetails',{
url:'/user-details?userId&orgId',
views:{
'':{
templateUrl:templateBase+'directory/user-details/directory-userDetails.html',
controller:returnCtrlAs('userDetails')},

'profile@organization.directory.userDetails':{
templateUrl:templateBase+'directory/user-details/sections/profile/userDetails-profile.html',
controller:returnCtrlAs('userDetailsProfile')},

'applications@organization.directory.userDetails':{
templateUrl:templateBase+'directory/user-details/sections/applications/userDetails-applications.html',
controller:returnCtrlAs('userDetailsApps')},

'roles@organization.directory.userDetails':{
templateUrl:templateBase+'directory/user-details/sections/roles/userDetails-roles.html',
controller:returnCtrlAs('userDetailsRoles')},

'history@organization.directory.userDetails':{
templateUrl:templateBase+'directory/user-details/sections/history/userDetails-history.html',
controller:returnCtrlAs('userDetailsHistory')}},


access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('organization.directory.userAppDetails',{
url:'/user-app-details/:appId?userId&orgId',
templateUrl:templateBase+'directory/user-app-details/directory-userAppDetails.html',
controller:returnCtrlAs('userAppDetails'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('organization.directory.orgDetails',{
url:'/org-details?orgId&page&pageSize',
views:{
'':{
templateUrl:templateBase+'directory/org-details/directory-orgDetails.html',
controller:returnCtrlAs('orgDetails')},

'profile@organization.directory.orgDetails':{
templateUrl:templateBase+'directory/org-details/sections/profile/orgDetails-profile.html',
controller:returnCtrlAs('orgDetailsProfile')},

'applications@organization.directory.orgDetails':{
templateUrl:templateBase+'directory/org-details/sections/applications/orgDetails-applications.html',
controller:returnCtrlAs('orgDetailsApps')},

'users@organization.directory.orgDetails':{
templateUrl:templateBase+'directory/org-details/sections/users/orgDetails-users.html',
controller:returnCtrlAs('orgDetailsUsers')},

'hierarchy@organization.directory.orgDetails':{
templateUrl:templateBase+'directory/org-details/sections/hierarchy/orgDetails-hierarchy.html',
controller:returnCtrlAs('orgDetailsHierarchy')}},


access:{
permittedLogic:appConfig.accessByAnyAdmin}})


// Hierarchy ------------------------------------------------
.state('organization.hierarchy',{
url:'/hierarchy/:orgId',
templateUrl:templateBase+'hierarchy/organization-hierarchy.html',
controller:returnCtrlAs('orgHierarchy'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}})


// applications----------------------------------------------
.state('organization.applications',{
url:'/applications/:orgId?name&page&pageSize&service.category&sortBy&refine',
templateUrl:templateBase+'applications/organization-applications.html',
controller:returnCtrlAs('organizationApplications'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('organization.applicationDetails',{
url:'/applications/:appId/details/:orgId',
templateUrl:templateBase+'applications/applicationDetails/organization-applicationDetails.html',
controller:returnCtrlAs('orgApplicationDetails'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('organization.newRequest',{
url:'/request',
templateUrl:templateBase+'applications/appRequest/newRequest/appRequest-newRequest.html',
controller:returnCtrlAs('orgAppRequest'),
access:loginRequired}).

state('organization.newRequestReview',{
url:'/request/review',
templateUrl:templateBase+'applications/appRequest/newRequestReview/appRequest-newRequestReview.html',
controller:returnCtrlAs('orgAppRequestReview'),
access:loginRequired}).

state('organization.search',{
url:'/search?name&category&page&pageSize',
templateUrl:templateBase+'applications/search/orgApplications-search.html',
controller:returnCtrlAs('orgAppSearch'),
access:loginRequired})

// Roles ----------------------------------------------------
.state('organization.roles',{
url:'/roles?orgID',
templateUrl:templateBase+'roles/organization-roles.html',
controller:returnCtrlAs('orgRoles'),
access:loginRequired})

// Requests -------------------------------------------------
.state('organization.requests',{
url:'/requests',
template:'<div ui-view></div>',
access:loginRequired}).

state('organization.requests.newGrant',{
url:'/new-grant?orgId&userId',
templateUrl:templateBase+'requests/newGrant/requests-newGrant.html',
controller:returnCtrlAs('newGrant'),
access:{
permittedLogic:appConfig.grantAppToUserLogic}}).


state('organization.requests.newGrantSearch',{
url:'/search?type&category&name&orgId&userId&page&pageSize&sortBy',
templateUrl:templateBase+'requests/newGrant/search/search.html',
controller:returnCtrlAs('newGrantSearch'),
access:{
permittedLogic:appConfig.grantAppToUserLogic}}).


state('organization.requests.newGrantClaims',{
url:'/claims?orgId&userId',
templateUrl:templateBase+'requests/newGrant/claims/claims.html',
controller:returnCtrlAs('newGrantClaims'),
access:{
permittedLogic:appConfig.grantAppToUserLogic}})


// Org Grant
.state('organization.requests.newOrgGrant',{
url:'/new-org-grant?orgId',
templateUrl:templateBase+'requests/newOrgGrant/requests-newGrant.html',
controller:returnCtrlAs('newOrgGrant'),
access:{
permittedLogic:appConfig.grantAppToOrgLogic}}).


state('organization.requests.newOrgGrantSearch',{
url:'/search-org?type&category&name&orgId&page&pageSize&sortBy',
templateUrl:templateBase+'requests/newOrgGrant/search/search.html',
controller:returnCtrlAs('newOrgGrantSearch'),
access:{
permittedLogic:appConfig.grantAppToOrgLogic}}).


state('organization.requests.newOrgGrantClaims',{
url:'/claims-org?orgId',
templateUrl:templateBase+'requests/newOrgGrant/claims/claims.html',
controller:returnCtrlAs('newOrgGrantClaims'),
access:{
permittedLogic:appConfig.grantAppToOrgLogic}}).


state('organization.requests.pendingRequests',{
url:'/pending-requests?userId&orgId',
templateUrl:templateBase+'requests/pendingRequestsReview/requests-pendingRequests.html',
controller:returnCtrlAs('pendingRequests'),
access:loginRequired}).

state('organization.requests.pendingRequestsReview',{
url:'/pending-requests/review?userId&orgId',
templateUrl:templateBase+'requests/pendingRequestsReview/requests-pendingRequestsReview.html',
controller:returnCtrlAs('pendingRequestsReview'),
access:loginRequired})

// Approval of Org requests
.state('organization.requests.organizationRequest',{
url:'/organization-request?orgId&userId',
templateUrl:templateBase+'requests/organizationRequest/requests-organization.html',
controller:returnCtrlAs('organizationRequest'),
access:{
permittedLogic:appConfig.orgAdminLogic}}).


state('organization.requests.organizationRequestReview',{
url:'/organization-request-review?orgId',
templateUrl:templateBase+'requests/organizationRequest/requests-organizationReview.html',
controller:returnCtrlAs('organizationRequestReview'),
access:{
permittedLogic:appConfig.orgAdminLogic}}).


state('organization.requests.organizationAppRequest',{
url:'/organization-app-request?orgId&userId',
templateUrl:templateBase+'requests/organizationAppRequests/requests-organization.html',
controller:returnCtrlAs('organizationAppRequest'),
access:{
permittedLogic:appConfig.orgAdminLogic}}).


state('organization.requests.organizationAppRequestReview',{
url:'/organization-app-request-review?orgId',
templateUrl:templateBase+'requests/organizationAppRequests/requests-organizationReview.html',
controller:returnCtrlAs('organizationAppRequestReview'),
access:{
permittedLogic:appConfig.orgAdminLogic}}).


state('organization.requests.personRequest',{
url:'/person-request?userId&orgId',
templateUrl:templateBase+'requests/personRequest/requests-person.html',
controller:returnCtrlAs('personRequest'),
access:loginRequired}).

state('organization.requests.personRequestReview',{
url:'/person-request-review?userId&orgId',
templateUrl:templateBase+'requests/personRequest/requests-personReview.html',
controller:returnCtrlAs('personRequestReview'),
access:loginRequired})


// ADMIN...
.state('organization.requests.usersRegistrationRequests',{
url:'/userRequests',
templateUrl:templateBase+'requests/usersRequests/usersRegistrationRequests/requests-RegistrationRequests.html',
controller:returnCtrlAs('usersRegistrationRequests'),
access:appConfig.orgAdminLogic}).

state('organization.requests.usersAppRequests',{
url:'/applicationRequests',
templateUrl:templateBase+'requests/usersRequests/usersAppRequests/requests-AppRequests.html',
controller:returnCtrlAs('usersAppRequests'),
access:appConfig.orgAdminLogic}).

state('invitation',{
url:'/invitation',
template:'<div ui-view></div>',
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('invitation.inviteSelect',{
url:'/select',
templateUrl:templateBase+'invitation/invitation.html',
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('invitation.inviteUser',{
url:'/user',
templateUrl:templateBase+'invitation/user/user.html',
controller:returnCtrlAs('user'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('invitation.division',{
url:'/division',
templateUrl:templateBase+'invitation/division/division.html',
controller:returnCtrlAs('division'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}}).


state('invitation.tlo',{
url:'/tlo',
templateUrl:templateBase+'invitation/tlo/tlo.html',
controller:returnCtrlAs('tlo'),
access:{
permittedLogic:appConfig.accessByAnyAdmin}})


// Org Requests/ADMIN
.state('organization.requests.orgRegistrationRequests',{
url:'/orgRequests?page&pageSize&organizationName',
templateUrl:templateBase+'requests/orgRequests/orgRegistrationRequests/requests-RegistrationRequests.html',
controller:returnCtrlAs('orgRegistrationRequests'),
access:{
permittedLogic:appConfig.orgAdminLogic}}).


state('organization.requests.orgAppRequests',{
url:'/orgApplicationRequests?pageSize&page',
templateUrl:templateBase+'requests/orgRequests/orgAppRequests/requests-AppRequests.html',
controller:returnCtrlAs('orgAppRequests'),
access:{
permittedLogic:appConfig.orgAdminLogic}});


}]);

angular.module('organization').
controller('orgAppRequestCtrl',['API', 'DataStorage', 'Loader', 'User', '$scope', '$state', '$stateParams', function(API,DataStorage,Loader,User,$scope,$state,$stateParams){

var orgAppRequest=this;
var orgAppsBeingRequested=DataStorage.getType('orgAppsBeingRequested');
var loaderName='orgAppRequest.loading';
orgAppRequest.stateParamsOrgId=User.user.organization.id;

orgAppRequest.orgAppsBeingRequested=[];
orgAppRequest.numberOfOrgRequests=0;

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

Loader.onFor(loaderName);

if(orgAppsBeingRequested){
orgAppRequest.numberOfOrgRequests=Object.keys(orgAppsBeingRequested).length;
}

API.cui.getOrgAppCategories({organizationId:orgAppRequest.stateParamsOrgId}).
then(function(res){
orgAppRequest.categories=res;
Loader.offFor(loaderName);
$scope.$digest();
}).
fail(function(err){
Loader.offFor(loaderName);
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */

orgAppRequest.searchCallback=function(searchWord){
$state.go('organization.search',{name:searchWord});
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('orgAppRequestReviewCtrl',['API', 'APIError', 'BuildPackageRequests', 'DataStorage', 'Loader', 'User', '$q', '$state', '$timeout', 'AppRequests', '$stateParams', function(API,APIError,BuildPackageRequests,DataStorage,Loader,User,$q,$state,$timeout,AppRequests,$stateParams){

var orgAppRequestReview=this;
var loaderName='orgAppRequestReview.';
orgAppRequestReview.stateParamsOrgId=$stateParams.orgId;

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

Loader.onFor(loaderName+'loading');
/*orgAppRequestReview.appsRequests = DataStorage.getType('orgAppsBeingRequested', User.user.id)*/
Loader.offFor(loaderName+'loading');

if(Object.keys(AppRequests.get()).length===0&&DataStorage.getType('orgAppsBeingRequested',User.user.id)){
AppRequests.set(DataStorage.getType('orgAppsBeingRequested',User.user.id));
}


var appRequests=AppRequests.get(),
appsBeingRequested=Object.keys(appRequests);

if(appsBeingRequested.length===0){
$state.go('organization.search',{orgId:orgAppRequestReview.stateParamsOrgId});
}

orgAppRequestReview.appRequests=[];

for(var i=0;i<appsBeingRequested.length;i+=2){
var applicationGroup=[];
applicationGroup.push(appRequests[appsBeingRequested[i]]);
if(appRequests[appsBeingRequested[i+1]]){
applicationGroup.push(appRequests[appsBeingRequested[i+1]]);
}
//get Terms And Conditions for requested packages
applicationGroup.forEach(function(app){
if(app.servicePackage.organizationTacEnabled){
API.cui.getOrgTacOfPackage({packageId:app.servicePackage.id}).
then(function(res){
app.tac=res;
}).
fail(function(err){
console.log("There was an error fetching Tac");
console.log(err);
});
}
});
orgAppRequestReview.appRequests.push(applicationGroup);
}

orgAppRequestReview.numberOfRequests=0;
appsBeingRequested.forEach(function(){
orgAppRequestReview.numberOfRequests+=1;
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */

orgAppRequestReview.removeApplicationRequest=function(requestId){
delete orgAppRequestReview.appRequests[requestId];

if(Object.keys(orgAppRequestReview.appRequests).length===0){
DataStorage.deleteType('orgAppsBeingRequested');
$state.go('organization.applications',{orgId:orgAppRequestReview.stateParamsOrgId});
}else
{
DataStorage.setType('orgAppsBeingRequested',orgAppRequestReview.appRequests);
}
};

orgAppRequestReview.submit=function(){
var requestArray=[];

Loader.onFor(loaderName+'attempting');

/*Object.keys(orgAppRequestReview.appRequests).forEach((request) => {
            requestArray.push(orgAppRequestReview.appRequests[request])
        })
*/
orgAppRequestReview.appRequests.forEach(function(appRequestGroup,i){
appRequestGroup.forEach(function(appRequest,x){
requestArray[i+x]=appRequest;
});

});

$q.all(BuildPackageRequests(User.user.organization.id,'organization',requestArray)).
then(function(){
Loader.offFor(loaderName+'attempting');
DataStorage.deleteType('orgAppsBeingRequested');
AppRequests.clear();// clears app requests if the request goes through
DataStorage.setType('orgAppsBeingRequested',{});
orgAppRequestReview.success=true;
$timeout(function(){
$state.go('organization.applications',{orgId:User.user.organization.id});
},3000);
}).
catch(function(error){
APIError.onFor(loaderName+'requestError');
Loader.offFor(loaderName+'attempting');
});
};

orgAppRequestReview.updateSearch=function(nameSearch){
orgAppRequestReview.search=nameSearch;
};

orgAppRequestReview.showTac=function(application){
if(application.tac){
orgAppRequestReview.tacContent=application.tac.tacText;
orgAppRequestReview.step=2;
}
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('orgApplicationDetailsCtrl',['API', 'APIHelpers', 'APIError', 'Loader', 'Sort', 'User', '$q', '$scope', '$state', '$stateParams', function(API,APIHelpers,APIError,Loader,Sort,User,$q,$scope,$state,$stateParams){

var orgApplicationDetails=this;
var organizationId=$stateParams.orgId;
var serviceId=$stateParams.appId;
var loaderName='orgApplicationDetails.';
orgApplicationDetails.stateParamsOrgId=$stateParams.orgId;

orgApplicationDetails.sortFlag=true;

/* ---------------------------------------- HELPER FUNCTIONS START ---------------------------------------- */

var checkIfRequestable=function checkIfRequestable(organizationId,relatedAppsArray){
if(relatedAppsArray){
API.cui.getOrganizationRequestableApps({organizationId:organizationId}).
then(function(res){
relatedAppsArray.forEach(function(app){
var requestable=_.find(res,function(id){return app.id=id;});
if(requestable){
app.requestable=true;
}
});
}).
then(function(){
$scope.$digest();
});
}
};

var getGrantArrayData=function getGrantArrayData(grantArray){
var promises=[];

Loader.onFor(loaderName+'loadingPageData');

grantArray.forEach(function(grant){
promises.push(
API.cui.getPerson({personId:grant.grantee.id}).
then(function(res){
grant.person=res;
return API.cui.getOrganization({organizationId:grant.person.organization.id});
}).
then(function(res){
grant.organization=res;
return API.cui.getPersonPackageClaims({grantee:grant.person.organization.id,packageId:grant.servicePackage.id});
}).
then(function(res){
grant.claims=res.packageClaims;
}));

});

$q.all(promises).
then(function(res){
orgApplicationDetails.grantList=grantArray;
Loader.offFor(loaderName+'loadingPageData');
}).
catch(function(error){
Loader.offFor(loaderName+'loadingPageData');
APIError.onFor(loaderName+'grants: ',error);
});
};

/* ----------------------------------------- HELPER FUNCTIONS END ----------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

Loader.onFor(loaderName+'app');

API.cui.getOrganization({organizationId:organizationId}).
then(function(res){
orgApplicationDetails.organization=res;
return API.cui.getOrganizationGrantedApps({organizationId:organizationId,qs:[['service.id',serviceId]]});
}).
then(function(res){
orgApplicationDetails.application=res[0];
return API.cui.getOrganizationRequestableApps({organizationId:organizationId,qs:[['service.id',serviceId]]});
}).
then(function(res){
orgApplicationDetails.application.bundledApps=res[0].bundledApps;
orgApplicationDetails.application.relatedApps=res[0].relatedApps;
/*return API.cui.getPackageGrants    ({qs: [
    		['grantedPackageId', orgApplicationDetails.application.servicePackage.id],
    		['granteeType', 'person']
    	]});*/
Loader.offFor(loaderName+'app');
checkIfRequestable(organizationId,orgApplicationDetails.application.relatedApps);
$scope.$apply();
})
/* .then((res) => {
        Loader.offFor(loaderName + 'app');
        orgApplicationDetails.unparsedGrantList = res;
        getGrantArrayData(orgApplicationDetails.unparsedGrantList);*/
/*Loader.onFor(loaderName + 'user');*/
/*checkIfRequestable(organizationId, orgApplicationDetails.application.relatedApps);*/
/*return API.cui.getPersons({qs: [
            ['organization.id', organizationId]
        ]});*//*Loader.offFor(loaderName + 'user');*/
/* })*/
/*.then((res) => {
        orgApplicationDetails.grantList = res;
        Loader.offFor(loaderName + 'user');
        $scope.$apply();
    })*/.
fail(function(error){
APIError.onFor(loaderName+'grants: ',error);
Loader.offFor(loaderName+'user');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */

orgApplicationDetails.sort=function(sortValue){
Sort.listSort(orgApplicationDetails.userList,sortValue,orgApplicationDetails.sortFlag);
orgApplicationDetails.sortFlag=!orgApplicationDetails.sortFlag;
};

orgApplicationDetails.parseGrantUsersByStatus=function(status){
if(status==='all'){
orgApplicationDetails.grantList=orgApplicationDetails.unparsedGrantList;
}else
{
var filteredGrantUsers=_.filter(orgApplicationDetails.unparsedGrantList,function(grant){
return grant.person.status===status;
});
orgApplicationDetails.grantList=filteredGrantUsers;
}
};

orgApplicationDetails.newGrants=function(){
$state.go('applications.orgApplications.newGrant',{appId:serviceId});
};

orgApplicationDetails.switchDivision=function(organization){
Loader.onFor(loaderName+'loadingPageData');

API.cui.getGrants({qs:[
['grantedPackageId',orgApplicationDetails.application.servicePackage.id],
['granteeType','person'],
['organization.id',organization.id]]}).

then(function(res){
orgApplicationDetails.unparsedGrantList=res;
getGrantArrayData(orgApplicationDetails.unparsedGrantList);
Loader.offFor(loaderName+'loadingPageData');
}).
fail(function(error){
APIError.onFor(loaderName+'grants: ',error);
});
};

orgApplicationDetails.requestRelatedApp=function(service){
var data={
requestor:{
id:organizationId,
type:'organization'},

'servicePackage':{
id:service.packageId}};



Loader.onFor(loaderName+'appRequest');

API.cui.postRequest({data:data}).
then(function(){
service.requestable=false;
Loader.offFor(loaderName+'appRequest');
$scope.$digest();
}).
fail(function(error){
APIError.onFor(loaderName+'appRequest');
console.log(error);
$scope.$digest();
});
};


orgApplicationDetails.mobileTabs=function(tab){

if(tab=='bundled'){
orgApplicationDetails.mobileTabs.bundled=true;
orgApplicationDetails.mobileTabs.related=false;
}else if(tab=='related'){
orgApplicationDetails.mobileTabs.bundled=false;
orgApplicationDetails.mobileTabs.related=true;
}
};

orgApplicationDetails.suspendApplication=function(organization){
Loader.onFor(loaderName+'app');

var suspendObj={
"grantee":{
"id":orgApplicationDetails.application.owningOrganization.id,
"type":"organization",
"realm":orgApplicationDetails.application.realm},

"servicePackage":{
"id":orgApplicationDetails.application.servicePackage.id,
"type":"servicepackage",
"realm":orgApplicationDetails.application.realm},

"justification":"Suspending Organization Application"};


API.cui.suspendOrgPkg({data:suspendObj}).
then(function(res){
orgApplicationDetails.success='true';
Loader.offFor(loaderName+'app');
$timeout(function(){
$state.go('applications.orgApplications.applicationList');
},3000);
}).
fail(function(error){
Loader.offFor(loaderName+'app');
orgApplicationDetails.suspendError=true;
$scope.$apply();
/*APIError.onFor(loaderName + 'grants: ', error);*/
});
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */
}]);
angular.module('organization').
controller('organizationApplicationsCtrl',['API', 'Sort', 'User', '$filter', '$pagination', '$q', '$scope', '$state', '$stateParams', function(API,Sort,User,$filter,$pagination,$q,$scope,$state,$stateParams){

var organizationApplications=this;
organizationApplications.stateParamsOrgId=$stateParams.orgId;

organizationApplications.loading=true;
organizationApplications.search={orgId:organizationApplications.stateParamsOrgId};
organizationApplications.search.page=organizationApplications.search.page||1;
organizationApplications.paginationPageSize=organizationApplications.paginationPageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
organizationApplications.search.pageSize=organizationApplications.paginationPageSize;

// HELPER FUNCTIONS START ---------------------------------------------------------------------------------

/*const switchBetween = (property, firstValue, secondValue) => { 
        // helper function to switch a property between two values or set to undefined if values not passed;
        if(!firstValue) organizationApplications.search[property] = undefined;
        organizationApplications.search[property] === firstValue ? organizationApplications.search[property] = secondValue : organizationApplications.search[property] = firstValue;
    };*/

/*const switchBetween = (property, firstValue, secondValue) => { 
        // helper function to switch a property between two values or set to undefined if values not passed;
        if(!firstValue) {
            organizationApplications.search[property] = undefined;
            return
        }
        organizationApplications.search[property] = organizationApplications.search[property] === firstValue
            ? secondValue
            : firstValue
    }*/

var switchBetween=function switchBetween(property,firstValue,secondValue){
// helper function to switch a property between two values or set to undefined if values not passed
if(!firstValue){
organizationApplications.search[property]=undefined;
return;
}
organizationApplications.search[property]=organizationApplications.search[property]===firstValue?
secondValue:
firstValue;
};

var getPackageServices=function getPackageServices(ArrayOfPackages){
var services=[];

ArrayOfPackages.forEach(function(servicePackage){
API.cui.getPackageServices({packageId:servicePackage.servicePackage.id}).
then(function(res){
res.forEach(function(service){
services.push(service);
});
});
});

return services;
};

// HELPER FUNCTIONS END -----------------------------------------------------------------------------------

// ON LOAD START ------------------------------------------------------------------------------------------

var onLoad=function onLoad(previouslyLoaded){
if(previouslyLoaded){
organizationApplications.loading=false;
}else
{
organizationApplications.search.name=$stateParams.name;
organizationApplications.search.category=$stateParams.category;
organizationApplications.search.sortBy=$stateParams.sortBy;
organizationApplications.search.refine=$stateParams.refine;
if($stateParams.page)
organizationApplications.search.page=parseInt($stateParams.page);
if($stateParams.pageSize)
organizationApplications.search.pageSize=parseInt($stateParams.pageSize);


API.cui.getOrgAppCategories({organizationId:organizationApplications.stateParamsOrgId}).
then(function(res){
organizationApplications.categories=res;
$scope.$digest();
}).
fail(function(err){

});

}

var queryParams=[['page',String(organizationApplications.search.page)],['pageSize',String(organizationApplications.search.pageSize)]];
var promises=[];
var opts={
organizationId:organizationApplications.stateParamsOrgId,
qs:queryParams};


if(organizationApplications.search.name)queryParams.push(['service.name',organizationApplications.search.name]);
if(organizationApplications.search.category)queryParams.push(['service.category',organizationApplications.search.category]);
// sortBy: +/-service.name, +/-service.creation, +/-grant.instant
if(organizationApplications.search.sortBy)queryParams.push(['sortBy',organizationApplications.search.sortBy]);

switch(organizationApplications.search.refine){
case'active':
case'suspended':
queryParams.push(['grant.status',organizationApplications.search.refine]);
promises.push(API.cui.getOrganizationGrantedApps(opts),API.cui.getOrganizationGrantedCount(opts));
/*promises.push(API.cui.getOrganizationGrantedApps(opts));*/
break;
case'pending':
/*promises.push(
                    API.cui.getOrgPendingServicePackages({qs: [['requestor.id', organizationId], ['requestor.type', 'organization']]})
                    .then((res) => {
                        return getPackageServices(res);
                    }),
                    API.cui.getOrganizationRequestableCount({organizationId: organizationId})
                );*/
queryParams.push(['grant.status',organizationApplications.search.refine]);
/* promises.push(API.cui.getOrganizationGrantedApps(opts));*/
promises.push(API.cui.getOrganizationGrantedApps(opts),API.cui.getOrganizationGrantedCount(opts));
break;
case undefined:
/*promises.push(API.cui.getOrganizationGrantedApps(opts));*/
promises.push(API.cui.getOrganizationGrantedApps(opts),API.cui.getOrganizationGrantedCount(opts));
break;}


$q.all(promises).
then(function(res){
organizationApplications.appList=res[0];
organizationApplications.count=res[1];
/*organizationApplications.count = res[0].length;*/
organizationApplications.loading=false;
if(organizationApplications.reRenderPaginate)organizationApplications.reRenderPaginate();
}).
catch(function(err){
organizationApplications.loadingError=true;
organizationApplications.loading=false;
});
};
// get Organization to display name
API.cui.getOrganization({organizationId:organizationApplications.stateParamsOrgId}).
then(function(res){
organizationApplications.organization=res;
});
onLoad(false);

// ON LOAD END --------------------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START -------------------------------------------------------------------------------

organizationApplications.pageChange=function(newpage){
organizationApplications.updateSearch('page',newpage);
};

organizationApplications.updateSearchByName=function(){
organizationApplications.updateSearch('name',organizationApplications.search['name']);
};

organizationApplications.updateSearch=function(updateType,updateValue){
switch(updateType){
case'alphabetic':
switchBetween('sortBy','+service.name','-service.name');
break;
case'date':
switchBetween('sortBy','+grant.instant','-grant.instant');
break;
case'status':
organizationApplications.search.page=1;
organizationApplications.search.refine=updateValue;
break;
case'category':
organizationApplications.search.page=1;
organizationApplications.search.category=$filter('cuiI18n')(updateValue);
break;
case'name':
organizationApplications.search.page=1;
break;}


// Updates URL, doesn't change state
$state.transitionTo('organization.applications',organizationApplications.search,{notify:false});
onLoad(true);
};

organizationApplications.goToDetails=function(application){
var opts={
appId:application.id,
orgId:application.owningOrganization.id};

$state.go('organization.applicationDetails',opts);
};

// ON CLICK FUNCTIONS END ---------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('orgAppSearchCtrl',['API', 'DataStorage', 'Loader', 'User', '$pagination', '$q', '$state', '$stateParams', function(API,DataStorage,Loader,User,$pagination,$q,$state,$stateParams){

var orgAppSearch=this;
var loaderName='orgAppSearch.loading';
orgAppSearch.stateParamsOrgId=User.user.organization.id;

orgAppSearch.packageRequests=DataStorage.getType('orgAppsBeingRequested',User.user.id)||{};
orgAppSearch.appCheckbox={};

/* ---------------------------------------- HELPER FUNCTIONS START ---------------------------------------- */

var processNumberOfRequestedApps=function processNumberOfRequestedApps(pkgRequest){
if(pkgRequest)orgAppSearch.numberOfRequests++;else
orgAppSearch.numberOfRequests--;
};

var updateViewList=function updateViewList(list){
var deferred=$q.defer();
orgAppSearch.viewList=[];
var qs=[];
var apiPromises=[];
angular.forEach(list,function(app,parentIndex){
// Child App and Parent app requested by user
if(app.servicePackage.parent&&app.relatedApps){
var flag=false;
angular.forEach(app.relatedApps,function(realtedApp,index){
if(_.find(list,{id:realtedApp.id})){
flag=true;
}else
{
qs.push(['service.id',realtedApp.id]);
}
if(index===app.relatedApps.length-1&&qs.length!==0){
apiPromises.push(API.cui.getOrganizationsRequestableApps({organizationId:User.user.organization.id,qs:qs}));
qs=[];
}
});
}else
{
orgAppSearch.viewList.push(app);
}
});
$q.all(apiPromises).
then(function(res){
angular.forEach(res,function(app){var _orgAppSearch$viewLis,_orgAppSearch$list;
if(orgAppSearch.search.name){
app[0].expanded=true;
}
(_orgAppSearch$viewLis=orgAppSearch.viewList).push.apply(_orgAppSearch$viewLis,_toConsumableArray(app));
(_orgAppSearch$list=orgAppSearch.list).push.apply(_orgAppSearch$list,_toConsumableArray(app));
});
deferred.resolve();
}).
catch(function(err){
console.log("There was an error loading parent requestable apps");
deferred.reject(err);
});
return deferred.promise;
};
/* ----------------------------------------- HELPER FUNCTIONS END ----------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

var onLoad=function onLoad(previouslyLoaded){
if(previouslyLoaded){
Loader.onFor(loaderName);
}else
{
Loader.onFor(loaderName);
// pre populate fields based on state params on first load
var numberOfRequests=0;

Object.keys(orgAppSearch.packageRequests).forEach(function(appId){
// Gets the list of package requests saved in memory
// This sets the checkboxes back to marked when the user clicks back after being in request review
orgAppSearch.appCheckbox[appId]=true;
numberOfRequests++;
});

orgAppSearch.numberOfRequests=numberOfRequests;

orgAppSearch.search={};
orgAppSearch.search.name=$stateParams.name;
orgAppSearch.search.category=$stateParams.category;
orgAppSearch.search.page=parseInt($stateParams.page);
orgAppSearch.search.pageSize=parseInt($stateParams.pageSize);
}

var query=[];

if(orgAppSearch.search.name)query.push(['service.name',orgAppSearch.search.name]);
if(orgAppSearch.search.category)query.push(['service.category',orgAppSearch.search.category]);

orgAppSearch.search.pageSize=orgAppSearch.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0]||25;
query.push(['pageSize',String(orgAppSearch.search.pageSize)]);

orgAppSearch.search.page=orgAppSearch.search.page||1;
query.push(['page',String(orgAppSearch.search.page)]);

var opts={
organizationId:User.user.organization.id,
useCuid:true,
qs:query};


var promises=[API.cui.getOrganizationsRequestableApps(opts),API.cui.getOrganizationRequestableCount(opts)];

$q.all(promises).
then(function(res){
orgAppSearch.list=res[0];
orgAppSearch.count=res[1];
updateViewList(res[0]).
then(function(){
Loader.offFor(loaderName);
});

});
};

onLoad(false);

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */

orgAppSearch.pageChange=function(newpage){
orgAppSearch.updateSearch('page',newpage);
};

orgAppSearch.updateSearch=function(updateType,updateValue){
if(updateType!=='page'){
orgAppSearch.search.page=1;
}
orgAppSearch.search.orgId=orgAppSearch.stateParamsOrgId;
// Update current URL without changing the state
$state.transitionTo('organization.search',orgAppSearch.search,{notify:false});
onLoad(true);
};

orgAppSearch.toggleRequest=function(application){
if(!orgAppSearch.packageRequests[application.id])orgAppSearch.packageRequests[application.id]=application;else
delete orgAppSearch.packageRequests[application.id];

DataStorage.setType('orgAppsBeingRequested',orgAppSearch.packageRequests);
processNumberOfRequestedApps(orgAppSearch.packageRequests[application.id]);
};

/* orgAppSearch.saveRequestsAndCheckout = function() {
        DataStorage.setType('orgAppsBeingRequested', orgAppSearch.packageRequests);
        $state.go('organization.newRequestReview');
    };*/


orgAppSearch.saveRequestsAndCheckout=function(){
var qs=[];
//needed to set a flag for related apps to display in review page
angular.forEach(orgAppSearch.packageRequests,function(request){
if(request.relatedApps){
request.relatedAppSelectedCount=0;
request.relatedApps.forEach(function(relatedApp){
if(_.find(orgAppSearch.packageRequests,{id:relatedApp.id})){
relatedApp.selected=true;
request.relatedAppSelectedCount++;
}else
{
relatedApp.selected=false;
}
});
}
// If Selected Related app full details not available need to fetch it
if(!request.servicePackage){
qs.push(['service.id',request.id]);
}
});
if(qs.length!==0){
API.cui.getPersonRequestableApps({personId:API.getUser(),qs:qs}).
then(function(res){
res.forEach(function(app){
orgAppSearch.packageRequests[app.id]=app;
});
/*AppRequests.set(orgAppSearch.packageRequests);*/
DataStorage.setType('orgAppsBeingRequested',orgAppSearch.packageRequests);
$state.go('organization.newRequestReview');
});
}else
{
/*AppRequests.set(orgAppSearch.packageRequests);*/
DataStorage.setType('orgAppsBeingRequested',orgAppSearch.packageRequests);
$state.go('organization.newRequestReview');
}
};
//Related apps will always appear inside body, So need to select parent if it is selected 
orgAppSearch.checkRelatedAppsBody=function(relatedApp,parent){
if(_.find(orgAppSearch.list,{id:relatedApp.id})){
orgAppSearch.toggleRequest(_.find(orgAppSearch.list,{id:relatedApp.id}));
}else
{
orgAppSearch.list.push(relatedApp);
orgAppSearch.toggleRequest(relatedApp);
}
orgAppSearch.checkRelatedAndBundledApps(_.find(orgAppSearch.list,{id:relatedApp.id}),parent);
};

//Deselect Child apps If it has any and select parent if checked from parent body 
orgAppSearch.checkRelatedAndBundledApps=function(application,parent){
//if unchecked the checkbox
if(!orgAppSearch.packageRequests[application.id]){
//if it is a parent then then deselect childs
if(!parent){
application.relatedApps&&application.relatedApps.forEach(function(relatedApp){
if(orgAppSearch.appCheckbox[relatedApp.id]){
orgAppSearch.appCheckbox[relatedApp.id]=!orgAppSearch.appCheckbox[relatedApp.id];
orgAppSearch.toggleRequest(_.find(orgAppSearch.list,{id:relatedApp.id}));
}
});
orgAppSearch.checkBundledApps(application,false);
}
}else{
if(parent){
if(!orgAppSearch.appCheckbox[parent.id]){
orgAppSearch.appCheckbox[parent.id]=true;
orgAppSearch.toggleRequest(parent);
orgAppSearch.checkBundledApps(parent,true);
}
}else
orgAppSearch.checkBundledApps(application,true);
}
};

orgAppSearch.checkBundledApps=function(application,check){
if(application.bundledApps){
application.bundledApps.forEach(function(bundledApp){
orgAppSearch.appCheckbox[bundledApp.id]=check;
if(_.find(orgAppSearch.list,{id:bundledApp.id}))
orgAppSearch.toggleRequest(_.find(orgAppSearch.list,{id:bundledApp.id}));
});
}
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('orgDetailsCtrl',['API', 'Loader', '$scope', '$stateParams', 'APIError', 'APIHelpers', '$timeout', '$q', function(API,Loader,$scope,$stateParams,APIError,APIHelpers,$timeout,$q){

var orgDetails=this;
var scopeName='orgDetails.';
orgDetails.prevState={
params:{
orgId:$stateParams.orgId},

name:"organization.directory.userList"};

orgDetails.mobileHandler='profile';
orgDetails.profileUsersSwitch='profile';
orgDetails.appsHierarchySwitch='apps';

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

Loader.onFor(scopeName+'orgInfo');
/*
    API.cui.getPerson({ personId: $stateParams.userId })
    .then(res => {
        orgDetails.user = res
        CuiMobileNavFactory.setTitle(res.name.given + '.' + res.name.surname)
    })
    .fail(error => {
        console.error('Failed getting user information')
    })
    .always(() => {
        Loader.offFor(scopeName + 'userInfo')
        $scope.$digest()
    })*/


var apiPromises=[
API.cui.getOrganization({organizationId:$stateParams.orgId})];


$q.all(apiPromises).
then(function(_ref){var _ref2=_slicedToArray(_ref,1),organization=_ref2[0];
// CuiMobileNavFactory.setTitle(user.name.given + '.' + user.name.surname)
orgDetails.organization=Object.assign({},organization);
Loader.offFor(scopeName+'orgInfo');
}).
catch(function(){
Loader.offFor(scopeName+'orgInfo');
APIError.onFor('orgDetails.org');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------------- ON CLICK START ---------------------------------------------- */

/* --------------------------------------------- ON CLICK END ---------------------------------------------- */
}]);

angular.module('organization').
controller('orgDetailsAppsCtrl',['API', '$stateParams', '$q', '$state', 'DataStorage', '$pagination', 'Loader', '$filter', '$scope', function(API,$stateParams,$q,$state,DataStorage,$pagination,Loader,$filter,$scope){
'use strict';


var orgDetailsApps=this;
var scopeName='orgDetailsApps.';
orgDetailsApps.stateParamsOrgId=$stateParams.orgId;

Loader.onFor('orgDetailsApps.init');
orgDetailsApps.search={orgId:orgDetailsApps.stateParamsOrgId};
orgDetailsApps.search.page=orgDetailsApps.search.page||1;
orgDetailsApps.paginationPageSize=orgDetailsApps.paginationPageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
orgDetailsApps.search.pageSize=orgDetailsApps.paginationPageSize;

// HELPER FUNCTIONS START ---------------------------------------------------------------------------------

/*const switchBetween = (property, firstValue, secondValue) => { 
        // helper function to switch a property between two values or set to undefined if values not passed;
        if(!firstValue) orgDetailsApps.search[property] = undefined;
        orgDetailsApps.search[property] === firstValue ? orgDetailsApps.search[property] = secondValue : orgDetailsApps.search[property] = firstValue;
    };*/

/*const switchBetween = (property, firstValue, secondValue) => { 
        // helper function to switch a property between two values or set to undefined if values not passed;
        if(!firstValue) {
            orgDetailsApps.search[property] = undefined;
            return
        }
        orgDetailsApps.search[property] = orgDetailsApps.search[property] === firstValue
            ? secondValue
            : firstValue
    }*/

var switchBetween=function switchBetween(property,firstValue,secondValue){
// helper function to switch a property between two values or set to undefined if values not passed
if(!firstValue){
orgDetailsApps.search[property]=undefined;
return;
}
orgDetailsApps.search[property]=orgDetailsApps.search[property]===firstValue?
secondValue:
firstValue;
};

var getPackageServices=function getPackageServices(ArrayOfPackages){
var services=[];

ArrayOfPackages.forEach(function(servicePackage){
API.cui.getPackageServices({packageId:servicePackage.servicePackage.id}).
then(function(res){
res.forEach(function(service){
services.push(service);
});
});
});

return services;
};

// HELPER FUNCTIONS END -----------------------------------------------------------------------------------

// ON LOAD START ------------------------------------------------------------------------------------------

var onLoad=function onLoad(previouslyLoaded){
if(previouslyLoaded){
Loader.offFor('orgDetailsApps.init');
}else
{
orgDetailsApps.search.name=$stateParams.name;
orgDetailsApps.search.category=$stateParams.category;
orgDetailsApps.search.sortBy=$stateParams.sortBy;
orgDetailsApps.search.refine=$stateParams.refine;
if($stateParams.page)
orgDetailsApps.search.page=parseInt($stateParams.page);
if($stateParams.pageSize)
orgDetailsApps.search.pageSize=parseInt($stateParams.pageSize);


API.cui.getOrgAppCategories({organizationId:orgDetailsApps.stateParamsOrgId}).
then(function(res){
orgDetailsApps.categories=res;
$scope.$digest();
}).
fail(function(err){

});

}

var queryParams=[['page',String(orgDetailsApps.search.page)],['pageSize',String(orgDetailsApps.search.pageSize)]];
var promises=[];
var opts={
organizationId:orgDetailsApps.stateParamsOrgId,
qs:queryParams};


if(orgDetailsApps.search.name)queryParams.push(['service.name',orgDetailsApps.search.name]);
if(orgDetailsApps.search.category)queryParams.push(['service.category',orgDetailsApps.search.category]);
// sortBy: +/-service.name, +/-service.creation, +/-grant.instant
if(orgDetailsApps.search.sortBy)queryParams.push(['sortBy',orgDetailsApps.search.sortBy]);

switch(orgDetailsApps.search.refine){
case'active':
case'suspended':
queryParams.push(['grant.status',orgDetailsApps.search.refine]);
promises.push(API.cui.getOrganizationGrantedApps(opts),API.cui.getOrganizationGrantedCount(opts));
/*promises.push(API.cui.getOrganizationGrantedApps(opts));*/
break;
case'pending':
/*promises.push(
                    API.cui.getOrgPendingServicePackages({qs: [['requestor.id', organizationId], ['requestor.type', 'organization']]})
                    .then((res) => {
                        return getPackageServices(res);
                    }),
                    API.cui.getOrganizationRequestableCount({organizationId: organizationId})
                );*/
queryParams.push(['grant.status',orgDetailsApps.search.refine]);
/* promises.push(API.cui.getOrganizationGrantedApps(opts));*/
promises.push(API.cui.getOrganizationGrantedApps(opts),API.cui.getOrganizationGrantedCount(opts));
break;
case undefined:
/*promises.push(API.cui.getOrganizationGrantedApps(opts));*/
promises.push(API.cui.getOrganizationGrantedApps(opts),API.cui.getOrganizationGrantedCount(opts));
break;}


$q.all(promises).
then(function(res){
orgDetailsApps.appList=res[0];
orgDetailsApps.count=res[1];
/*orgDetailsApps.count = res[0].length;*/
Loader.offFor('orgDetailsApps.init');
if(orgDetailsApps.reRenderPaginate)orgDetailsApps.reRenderPaginate();
}).
catch(function(err){
orgDetailsApps.loadingError=true;
Loader.offFor('orgDetailsApps.init');
});
};
// get Organization to display name
API.cui.getOrganization({organizationId:orgDetailsApps.stateParamsOrgId}).
then(function(res){
orgDetailsApps.organization=res;
});
onLoad(false);

// ON LOAD END --------------------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START -------------------------------------------------------------------------------

orgDetailsApps.pageChange=function(newpage){
orgDetailsApps.updateSearch('page',newpage);
};

orgDetailsApps.updateSearchByName=function(){
orgDetailsApps.updateSearch('name',orgDetailsApps.search['name']);
};

orgDetailsApps.updateSearch=function(updateType,updateValue){
switch(updateType){
case'alphabetic':
switchBetween('sortBy','+service.name','-service.name');
break;
case'date':
switchBetween('sortBy','+grant.instant','-grant.instant');
break;
case'status':
orgDetailsApps.search.page=1;
orgDetailsApps.search.refine=updateValue;
break;
case'category':
orgDetailsApps.search.page=1;
orgDetailsApps.search.category=$filter('cuiI18n')(updateValue);
break;
case'name':
orgDetailsApps.search.page=1;
break;}


// Updates URL, doesn't change state
$state.transitionTo('organization.directory.orgDetails',orgDetailsApps.search,{notify:false});
onLoad(true);
};

orgDetailsApps.goToDetails=function(application){
var opts={
appId:application.id,
orgId:application.owningOrganization.id};

$state.go('organization.applicationDetails',opts);
};
// ON CLICK FUNCTIONS END ------------------------------------------------------------------------
}]);

angular.module('organization').
controller('orgDetailsHierarchyCtrl',['API', 'APIError', 'Loader', 'User', '$scope', '$state', '$stateParams', function(API,APIError,Loader,User,$scope,$state,$stateParams){
'use strict';
var orgDetailsHierarchy=this;
var pageLoader='orgDetailsHierarchy.loading';
orgDetailsHierarchy.stateParamsOrgId=$stateParams.orgId;

/* -------------------------------------------- HELPER FUNCTIONS START --------------------------------------------- */

var addExpandedProperty=function addExpandedProperty(childOrgs,parentOrg){

childOrgs.forEach(function(org){
// Need to remove org if it is pending
if(org.status==="PENDING"){
parentOrg.children.splice(index,1);
return;
}
if(org.children){
org.expanded=false;
addExpandedProperty(org.children,org);
}
});
};

/* -------------------------------------------- HELPER FUNCTIONS END --------------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */
Loader.onFor(pageLoader);
API.cui.getOrganizationHierarchy({organizationId:orgDetailsHierarchy.stateParamsOrgId}).
done(function(res){
// Put hierarchy response in an array as the hierarchy directive expects an array
orgDetailsHierarchy.organizationHierarchy=[res];
// add expended property to all the org with children directive needs it to work for 
// expandable and collapsable function
if(orgDetailsHierarchy.organizationHierarchy[0].children){
addExpandedProperty(orgDetailsHierarchy.organizationHierarchy[0].children,orgDetailsHierarchy.organizationHierarchy[0]);
}
}).
fail(function(err){
APIError.onFor(pageLoader,err);
}).
always(function(){
Loader.offFor(pageLoader);
$scope.$digest();
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */
/* */
orgDetailsHierarchy.goToOrgPrfile=function(org){
$state.go('organization.directory.orgDetails',{orgId:org.id});
};

orgDetailsHierarchy.toggleExpand=function(object){
object.expanded=!object.expanded;
// let updateOrgChildren= (orgs) => {
//     orgs.forEach(org => {
//         if (org.id===object.id) {
//             org.expanded=object.expanded
//             return;
//         }
//         if (org.children) {
//             updateOrgChildren(org.children)
//         }
//     })

//     if (true) {};
// }
// updateOrgChildren(orgDetailsHierarchy.organizationHierarchy[0].children)
$scope.$digest();
};
}]);

angular.module('organization').
controller('orgDetailsProfileCtrl',['Loader', 'Organization', '$stateParams', '$q', 'APIError', function(Loader,Organization,$stateParams,$q,APIError){

var orgDetailsProfile=this;
var scopeName='orgDetailsProfile.';

orgDetailsProfile.stateParamsOrgId=$stateParams.orgId;
var orgPromise=[];

/* -------------------------------------------- ON LOAD START --------------------------------------------- */
Loader.onFor('orgDetailsProfile.init');
orgPromise.push(Organization.getOrganization($stateParams.orgId));
$q.all(orgPromise).
then(function(res){
if(orgPromise.length!==0){
orgDetailsProfile.organization=res[0];
}
Organization.initOrganizationProfile(orgDetailsProfile.organization.id,orgDetailsProfile.organization.passwordPolicy.id,orgDetailsProfile.organization.authenticationPolicy.id).
then(function(res){
orgDetailsProfile.securityAdmins=res.admins;
orgDetailsProfile.passwordPolicy=res.passwordPolicy;
orgDetailsProfile.authenticationPolicy=res.authenticationPolicy;
Loader.offFor('orgDetailsProfile.init');
}).
catch(function(err){
console.error("there was an error fetching additional org details"+err);
Loader.offFor('orgDetailsProfile.init');
APIError.onFor('orgDetailsProfile.init');
});
}).
catch(function(err){
console.error("there was an error fetching org details"+err);
Loader.offFor('orgDetailsProfile.init');
APIError.onFor('orgDetailsProfile.init');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

}]);

angular.module('organization').
controller('orgDetailsUsersCtrl',['API', 'APIError', 'APIHelpers', 'CuiMobileNavFactory', 'Loader', 'User', 'UserList', '$filter', '$pagination', '$q', '$state', '$stateParams', function(API,APIError,APIHelpers,CuiMobileNavFactory,Loader,User,UserList,$filter,$pagination,$q,$state,$stateParams){

var orgDetailsUsers=this;
var scopeName='orgDetailsUsers.';
orgDetailsUsers.stateParamsOrgId=$stateParams.orgId;
orgDetailsUsers.search={};
orgDetailsUsers.sortBy={};

/* ---------------------------------------- HELPER FUNCTIONS START ---------------------------------------- */

var switchBetween=function switchBetween(property,firstValue,secondValue){
orgDetailsUsers.search[property]===firstValue?
orgDetailsUsers.search[property]=secondValue:
orgDetailsUsers.search[property]=firstValue;
};

var getUserListAppCount=function getUserListAppCount(userList){
userList.forEach(function(user){
API.cui.getPersonGrantedAppCount({personId:user.id}).
then(function(res){
user.appCount=res;
}).
fail(function(error){
user.appCount='...';
});
});
};

/* ----------------------------------------- HELPER FUNCTIONS END ----------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

var initDirectory=function initDirectory(organizationId){
orgDetailsUsers.search['organization.id']=organizationId||$stateParams.orgId||User.user.organization.id;
orgDetailsUsers.search.pageSize=orgDetailsUsers.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];

var apiCalls=[
UserList.getUsers({qs:APIHelpers.getQs(orgDetailsUsers.search)}),
UserList.getUserCount({qs:[['organization.id',orgDetailsUsers.search['organization.id']]]}),
API.cui.getOrganization({organizationId:orgDetailsUsers.search['organization.id']})];


Loader.onFor(scopeName+'userList');
APIError.offFor(scopeName+'userList');

$q.all(apiCalls).
then(function(_ref3){var _ref4=_slicedToArray(_ref3,3),users=_ref4[0],userCount=_ref4[1],organization=_ref4[2];
orgDetailsUsers.organization=organization;
// orgDetailsUsers.organizationList = APIHelpers.flattenOrgHierarchy(orgHierarchy)
orgDetailsUsers.userList=users;
orgDetailsUsers.userCount=userCount;
orgDetailsUsers.statusData=APIHelpers.getCollectionValuesAndCount(users,'status',true);
CuiMobileNavFactory.setTitle(organization.name);
orgDetailsUsers.reRenderPagination&&orgDetailsUsers.reRenderPagination();
getUserListAppCount(orgDetailsUsers.userList);
}).
catch(function(error){
APIError.onFor(scopeName+'userList');
}).
finally(function(){
Loader.offFor(scopeName+'userList');
});
};

orgDetailsUsers.search=Object.assign({},$stateParams);
initDirectory();

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */


// headers="['cui-name', 'username', 'status']" 

orgDetailsUsers.sortingCallbacks={
name:function name(){
orgDetailsUsers.sortBy.sortBy='name';
orgDetailsUsers.sort(['name.given','name.surname'],orgDetailsUsers.sortBy.sortType);
},
username:function username(){
orgDetailsUsers.sortBy.sortBy='username';
orgDetailsUsers.sort('username',orgDetailsUsers.sortBy.sortType);
},
status:function status(){
orgDetailsUsers.sortBy.sortBy='status';
orgDetailsUsers.sort('status',orgDetailsUsers.sortBy.sortType);
}};


orgDetailsUsers.sort=function(sortBy,order){
cui.log('sort',sortBy,order);

orgDetailsUsers.userList=_.orderBy(orgDetailsUsers.userList,sortBy,order);
};

orgDetailsUsers.updateSearchParams=function(page){
if(page)orgDetailsUsers.search.page=page;
$state.transitionTo('organization.directory.orgDetails',orgDetailsUsers.search,{notify:false});
initDirectory(orgDetailsUsers.search['organization.id']);
};

orgDetailsUsers.updateSearchByName=function(name){
orgDetailsUsers.updateSearchParams();
};
orgDetailsUsers.actionCallbacks={
sort:function sort(sortType){
switch(sortType){
case'name':
switchBetween('sortBy','+person.name','-person.name');
break;
case'username':
switchBetween('sortBy','+person.username','-person.username');
break;
case'status':
switchBetween('sortBy','+person.status','-person.status');
break;}


// if (!orgDetailsUsers.search.hasOwnProperty('sortBy')) orgDetailsUsers.search['sortBy'] = '+' + sortType
// else if (orgDetailsUsers.search.sortBy.slice(1) !== sortType) orgDetailsUsers.search.sortBy = '+' + sortType
// else switchBetween('sortBy', '+' + sortType, '-' + sortType)
orgDetailsUsers.updateSearchParams();
},
refine:function refine(refineType){
if(refineType==='all')delete orgDetailsUsers.search['status'];else
{
if(!orgDetailsUsers.search.hasOwnProperty('status'))orgDetailsUsers.search['status']=refineType;else
orgDetailsUsers.search.status=refineType;
}
orgDetailsUsers.updateSearchParams();
}};


orgDetailsUsers.userClick=function(clickedUser){
var stateOpts={
userId:clickedUser.id,
orgId:clickedUser.organization.id};

if(clickedUser.status==='pending')$state.go('organization.requests.personRequest',stateOpts);else
$state.go('organization.directory.userDetails',stateOpts);
};

orgDetailsUsers.getOrgMembers=function(organization){
CuiMobileNavFactory.setTitle($filter('cuiI18n')(organization.name));
initDirectory(organization.id);
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('userAppDetailsCtrl',['API', '$scope', '$stateParams', '$state', '$q', 'APIHelpers', 'Loader', 'APIError', 'DataStorage', '$timeout', function(API,$scope,$stateParams,$state,$q,APIHelpers,Loader,APIError,DataStorage,$timeout){
var userAppDetails=this;
userAppDetails.relatedApps=[];
userAppDetails.prevState={
params:{
userId:$stateParams.userId,
orgId:$stateParams.orgId},

name:"organization.directory.userDetails"};

userAppDetails.dropDown={
claims:false,
suspend:false,
unsuspend:false,
remove:false

// HELPER FUNCTIONS START ------------------------------------------------------------------------
};var getClaims=function getClaims(app){
var deferred=$q.defer();
var packageId=app.servicePackage.id;

Loader.onFor(loaderName+'claims');
API.cui.getPersonPackageClaims({grantee:$stateParams.userId,packageId:packageId}).
then(function(userClaims){
APIError.offFor(loaderName+'claims');
deferred.resolve(userClaims);
}).
fail(function(err){
APIError.onFor(loaderName+'claims');
deferred.reject(err);
}).
always(function(){
Loader.offFor(loaderName+'claims');
$scope.$digest();
});
return deferred.promise;
};

// Returns claims that are associated with a package id
var getPackageClaims=function getPackageClaims(packageId){
var deferred=$q.defer();
API.cui.getPackageClaims({qs:[['packageId',packageId]]}).
then(function(packageClaims){
APIError.offFor(loaderName+'packageClaims');
deferred.resolve(packageClaims);
}).
fail(function(err){
console.error('Failed getting package claims');
APIError.onFor(loaderName+'packageClaims');
deferred.reject(err);
}).
always(function(){
Loader.offFor(loaderName+'packageClaims');
$scope.$digest();
});
return deferred.promise;
};

var getFormattedClaimData=function getFormattedClaimData(){
$q.all([getClaims(userAppDetails.app),getPackageClaims(userAppDetails.app.servicePackage.id)]).
then(function(res){
userAppDetails.userClaims=res[0];
userAppDetails.packageClaims=res[1];
userAppDetails.claimSelection={};
//initialize and preselect claims which are already granted to user
userAppDetails.packageClaims.forEach(function(packageClaim){
userAppDetails.claimSelection[packageClaim.claimId]={};
var grantedClaim=_.find(userAppDetails.userClaims.packageClaims,{claimId:packageClaim.claimId});
if(grantedClaim){
packageClaim.claimValues.forEach(function(claimValue){
if(_.find(grantedClaim.claimValues,{claimValueId:claimValue.claimValueId})){
userAppDetails.claimSelection[packageClaim.claimId][claimValue.claimValueId]=true;
}
});
}
});
});
};

var getApp=function getApp(updating){
if(!updating){
Loader.onFor(loaderName+'app');
}
API.cui.getPersonGrantedApps(opts).
then(function(res){
APIError.offFor(loaderName+'app');
userAppDetails.app=Object.assign({},res[0]);
if(!updating){
getFormattedClaimData();
getRelatedApps(userAppDetails.app);
}
}).
fail(function(err){
APIError.onFor(loaderName+'app');
}).
done(function(){
Loader.offFor(loaderName+'app');
$scope.$digest();
});
};
var getRelatedApps=function getRelatedApps(app){
var packageId=app.servicePackage.id;
var qs=void 0;
if(app.servicePackage.parent){
qs=[['servicePackage.id',app.servicePackage.parent.id]];
}else{
qs=[['servicePackage.parentPackage.id',app.servicePackage.id]];
}
Loader.onFor(loaderName+'relatedApps');
var apiPromises=[
API.cui.getPersonRequestableApps({personId:API.getUser(),'qs':[['servicePackage.parentPackage.id',packageId]]}),
API.cui.getPersonGrantedApps({personId:API.getUser(),'qs':qs})];

$q.all(apiPromises).
then(function(res){
APIError.offFor(loaderName+'relatedApps');
userAppDetails.relatedApps=userAppDetails.relatedApps.concat(res[0]);
userAppDetails.relatedApps=userAppDetails.relatedApps.concat(res[1]);
}).
catch(function(err){
APIError.onFor(loaderName+'relatedApps');
}).
finally(function(){
Loader.offFor(loaderName+'relatedApps');
});
};

var buildData=function buildData(type){
var reason=void 0;
if(type=="suspend"){
reason=userAppDetails.suspendReason;
}else{
reason=userAppDetails.unsuspendReason;
}
return{
grantee:{
id:$stateParams.userId,
type:'person'},

servicePackage:{
id:userAppDetails.app.servicePackage.id},

justification:reason};


};

var buildClaimData=function buildClaimData(){

var buildPackageClaims=function buildPackageClaims(claimsObject){
if(Object.keys(claimsObject).length===0){
return undefined;
}// if there's no claims in this claim object
var packageClaims=[];
Object.keys(claimsObject).forEach(function(claimId){
if(Object.keys(claimsObject[claimId]).length===0){
return;
}// if no claimValues selected for that claimId
var claimValues=[];
Object.keys(claimsObject[claimId]).forEach(function(claimValueId){
if(claimsObject[claimId][claimValueId]){//If checked
claimValues.push({claimValueId:claimValueId});
}
});
// const claimValues = Object.keys(claimsObject[claimId]).reduce((claims, claimValueId) => {
//     claims.push({ claimValueId })
//     return claims
// },[])
if(claimValues.length!==0){
packageClaims.push({
claimId:claimId,
claimValues:claimValues});

}
});
return packageClaims;
};
return{
data:{
grantee:{
id:$stateParams.userId,
type:'person'},

servicePackage:{
id:userAppDetails.app.servicePackage.id,
type:'servicePackage'},

packageClaims:buildPackageClaims(userAppDetails.claimSelection)}};


};
// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

var loaderName='userAppDetails.';

var qs={
'service.id':$stateParams.appId};


var opts={
personId:$stateParams.userId,
qs:APIHelpers.getQs(qs)};

userAppDetails.app=DataStorage.getType('userAppDetail');
if(userAppDetails.app&&userAppDetails.app.id===$stateParams.appId){
getFormattedClaimData();
getRelatedApps(userAppDetails.app);
// Update application detail for any new changes during reload
// Commenting out as API is not giving full details for service.id query parameter get
//it is relying on previous page details which has full details
getApp(true);
}else
{
getApp(false);
}

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START ----------------------------------------------------------------------

userAppDetails.goToDetails=function(application){
$state.go('applications.userAppDetails',{
'packageId':application.packageId,
'appId':application.id});

};

userAppDetails.toggleDropDown=function(type){
Object.keys(userAppDetails.dropDown).forEach(function(key){
if(key===type){
userAppDetails.dropDown[key]=!userAppDetails.dropDown[key];
}else{
userAppDetails.dropDown[key]=false;
}
});
};
userAppDetails.suspendApp=function(){
Loader.onFor(loaderName+'suspend');
APIError.offFor(loaderName+'suspend');
var data=buildData('suspend');
API.cui.suspendPersonApp({data:data}).
then(function(res){
userAppDetails.app.grant.status="suspended";
userAppDetails.suspendAppSuccess=true;
Loader.offFor(loaderName+'suspend');
$scope.$digest();
$timeout(function(){
userAppDetails.dropDown.suspend=false;
userAppDetails.suspendAppSuccess=false;
},2000);
}).
fail(function(err){
APIError.onFor(loaderName+'suspend');
Loader.offFor(loaderName+'suspend');
$scope.$digest();
console.log('There was an error suspending user App',+err);
});
};

userAppDetails.unsuspendApp=function(){
Loader.onFor(loaderName+'unsuspend');
APIError.offFor(loaderName+'unsuspend');
var data=buildData('unsuspend');
API.cui.unsuspendPersonApp({data:data}).
then(function(res){
userAppDetails.app.grant.status="active";
userAppDetails.unsuspendAppSuccess=true;
Loader.offFor(loaderName+'unsuspend');
$scope.$digest();
$timeout(function(){
userAppDetails.dropDown.unsuspend=false;
userAppDetails.unsuspendAppSuccess=false;
},2000);
}).
fail(function(err){
APIError.onFor(loaderName+'unsuspend');
Loader.offFor(loaderName+'unsuspend');
$scope.$digest();
console.log('There was an error suspending user App',+err);
});
};

userAppDetails.removeApp=function(){
Loader.onFor(loaderName+'remove');
APIError.offFor(loaderName+'remove');
API.cui.revokePersonApp({personId:$stateParams.userId,packageId:userAppDetails.app.servicePackage.id}).
then(function(res){
// userAppDetails.app.grant.status="removeed"
userAppDetails.removeAppSuccess=true;
Loader.offFor(loaderName+'remove');
$scope.$digest();
$timeout(function(){
userAppDetails.removeAppSuccess=false;
$state.go('organization.directory.userDetails',userAppDetails.prevState.params);
},2000);
}).
fail(function(err){
APIError.onFor(loaderName+'remove');
Loader.offFor(loaderName+'remove');
$scope.$digest();
$timeout(function(){
APIError.offFor(loaderName+'remove');
},3000);
console.log('There was an error removing user App',+err);
});
};

userAppDetails.modifyClaims=function(){
Loader.onFor(loaderName+'modifyClaims');
APIError.offFor(loaderName+'modifyClaims');
API.cui.grantClaims(buildClaimData()).
then(function(res){
userAppDetails.modifyClaimsSuccess=true;
Loader.offFor(loaderName+'modifyClaims');
$scope.$digest();
$timeout(function(){
userAppDetails.dropDown.claims=false;
userAppDetails.modifyClaimsSuccess=false;
},2000);
}).
fail(function(err){
APIError.onFor(loaderName+'modifyClaims');
Loader.offFor(loaderName+'modifyClaims');
$scope.$digest();
console.log('There was an error updating user\'s app claims',+err);
});

};
// ON CLICK FUNCTIONS END ------------------------------------------------------------------------

}]);

angular.module('organization').
controller('userDetailsCtrl',['API', 'Loader', '$scope', '$stateParams', 'APIError', 'APIHelpers', '$timeout', '$q', function(API,Loader,$scope,$stateParams,APIError,APIHelpers,$timeout,$q){

var userDetails=this;
var scopeName='userDetails.';
userDetails.prevState={
params:{
orgId:$stateParams.orgId},

name:"organization.directory.userList"};

userDetails.stateParamsOrgId=$stateParams.orgId;
userDetails.mobileHandler='profile';
userDetails.profileRolesSwitch='profile';
userDetails.appsHistorySwitch='apps';

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

Loader.onFor(scopeName+'userInfo');
/*
    API.cui.getPerson({ personId: $stateParams.userId })
    .then(res => {
        userDetails.user = res
        CuiMobileNavFactory.setTitle(res.name.given + '.' + res.name.surname)
    })
    .fail(error => {
        console.error('Failed getting user information')
    })
    .always(() => {
        Loader.offFor(scopeName + 'userInfo')
        $scope.$digest()
    })*/


var apiPromises=[
API.cui.getPerson({
personId:$stateParams.userId}),

API.cui.getOrganization({organizationId:$stateParams.orgId}),
API.cui.getPersonPassword({
personId:$stateParams.userId})];



$q.all(apiPromises).
then(function(_ref5){var _ref6=_slicedToArray(_ref5,3),user=_ref6[0],organization=_ref6[1],password=_ref6[2];
// CuiMobileNavFactory.setTitle(user.name.given + '.' + user.name.surname)
userDetails.user=Object.assign({},user);
userDetails.organization=Object.assign({},organization);
userDetails.passwordAccount=Object.assign({},password);
return API.cui.getPasswordPolicy({policyId:userDetails.organization.passwordPolicy.id});
}).
then(function(res){
userDetails.passwordPolicy=res;

res.rules.forEach(function(rule){
if(rule.type==='history'){
userDetails.numberOfPasswords=rule.numberOfPasswords;
}
});
Loader.offFor(scopeName+'userInfo');
}).
catch(function(){
Loader.offFor(scopeName+'userInfo');
APIError.onFor('userDetails.user');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------------- ON CLICK START ---------------------------------------------- */
userDetails.suspend=function(personId){

userDetails.suspend.begun=userDetails.suspend.begun?false:true;
userDetails.unsuspend.begun=userDetails.unsuspend.begun?false:false;
userDetails.specifyPassword.begun=userDetails.specifyPassword.begun?false:false;
userDetails.resetPassword.begun=userDetails.resetPassword.begun?false:false;

var name='userDetails.suspend';

userDetails.suspend.reset=function(){
Loader.offFor(name);
APIError.offFor(name);
userDetails.user.suspendReason='';
userDetails.suspend.success&&delete userDetails.suspend.success;
};

userDetails.suspend.reset();

userDetails.suspend.confirm=function(){
Loader.onFor(name);
APIError.offFor(name);

var reason=encodeURIComponent(userDetails.user.suspendReason);

API.cui.suspendPerson({
qs:APIHelpers.getQs({
personId:personId,
reason:reason})}).


then(
function(res){
APIError.offFor(name);
userDetails.suspend.success=true;
userDetails.user.status='suspended';
$timeout(userDetails.suspend.cancel,1500);
},
function(err){
APIError.onFor(name);
}).

always(function(){
Loader.offFor(name);
$scope.$digest();
});
};

userDetails.suspend.cancel=function(){
userDetails.suspend.begun=false;
userDetails.suspend.reset();
};
};

userDetails.unsuspend=function(personId){
userDetails.unsuspend.begun=userDetails.unsuspend.begun?false:true;
userDetails.suspend.begun=userDetails.suspend.begun?false:false;
userDetails.specifyPassword.begun=userDetails.specifyPassword.begun?false:false;
userDetails.resetPassword.begun=userDetails.resetPassword.begun?false:false;

var name='userDetails.unsuspend';

userDetails.unsuspend.reset=function(){
Loader.offFor(name);
APIError.offFor(name);
userDetails.user.unsuspendReason='';
userDetails.unsuspend.success&&delete userDetails.unsuspend.success;
};

userDetails.unsuspend.reset();

userDetails.unsuspend.confirm=function(){
Loader.onFor(name);
APIError.offFor(name);

var reason=encodeURIComponent(userDetails.user.unsuspendReason);

API.cui.unsuspendPerson({
qs:APIHelpers.getQs({
personId:personId,
reason:reason})}).


then(
function(res){
APIError.offFor(name);
userDetails.unsuspend.success=true;
userDetails.user.status='active';
$timeout(userDetails.unsuspend.cancel,1500);
},
function(err){
APIError.onFor(name);
}).

always(function(){
Loader.offFor(name);
$scope.$digest();
});
};

userDetails.unsuspend.cancel=function(){
userDetails.unsuspend.begun=false;
userDetails.unsuspend.reset();
};
};

userDetails.resetPassword=function(){
userDetails.unsuspend.begun=userDetails.unsuspend.begun?false:false;
userDetails.suspend.begun=userDetails.suspend.begun?false:false;
userDetails.specifyPassword.begun=userDetails.specifyPassword.begun?false:false;
userDetails.resetPassword.begun=userDetails.resetPassword.begun?false:true;


if(userDetails.resetPassword.begun){
var name='userDetails.unsuspend';

Loader.onFor(name);
APIError.offFor(name);
API.cui.resetPersonPassword({
qs:[['subject',$stateParams.userId]]}).

then(
function(res){
APIError.offFor(name);
userDetails.resetPasswordValue=res;
userDetails.resetPassword.begun=true;
},
function(err){
APIError.onFor(name);
}).

always(function(){
Loader.offFor(name);
$scope.$digest();
});
}

};

userDetails.specifyPassword=function(){
errorTimer&&$timeout.cancel(errorTimer);// cancel the timer if there's one pending
var errorTimer=void 0;

var name='userDetails.specifyPassword';
userDetails.specifyPassword.begun=userDetails.specifyPassword.begun?false:true;
userDetails.suspend.begun=userDetails.suspend.begun?false:false;
userDetails.unsuspend.begun=userDetails.unsuspend.begun?false:false;
userDetails.resetPassword.begun=userDetails.resetPassword.begun?false:false;

userDetails.specifyPassword.reset=function(){
Loader.offFor(name);
APIError.offFor(name);
APIError.offFor('userDetails.passwordHistory');
userDetails.specifyPassword.success&&delete userDetails.specifyPassword.success;
userDetails.specifyPassword.passwordHistoryError=false;
userDetails.specifyPassword.newPassword='';
userDetails.specifyPassword.newPasswordConfirm='';
};

userDetails.specifyPassword.validate=function(password,formObject,input){
var validSwitch=function validSwitch(input,isValidBoolean){
switch(input){
case'newPassword':
userDetails.specifyPassword.validNewPassword=isValidBoolean;
case'newPasswordConfirm':
userDetails.specifyPassword.validNewPasswordRe=isValidBoolean;}

};

var validateData={
userId:$stateParams.userId,
organizationId:$stateParams.orgId,
password:password,
operations:['PASSWORD_SPECIFY']};


API.cui.validatePassword({data:validateData}).
then(function(res){
var validPasswordHistory=false;

res.forEach(function(rule){
if(rule.type==='HISTORY'&&rule.isPassed){
validPasswordHistory=true;
return;
}
});

if(validPasswordHistory){
validSwitch(input,true);
formObject[input].$setValidity(input,true);
$scope.$digest();
}else
{
validSwitch(input,false);
formObject[input].$setValidity(input,false);
$scope.$digest();
}
}).
fail(function(err){
validSwitch(input,false);
formObject[input].$setValidity(input,false);
$scope.$digest();
});
};

userDetails.specifyPassword.confirm=function(){
APIError.offFor(name);
Loader.onFor(name);

/*  if (!userDetails.specifyPassword.form.$valid) {
                angular.forEach(userDetails.specifyPassword.form.$error, error => {
                    angular.forEach(error, errorField => errorField.$setTouched())
                })
                APIError.onFor(name)
                return
            }*/

API.cui.getPersonPassword({personId:$stateParams.userId}).
then(function(res){
return API.cui.specifyPersonPassword({
data:{
subject:$stateParams.userId,
password:userDetails.specifyPassword.newPassword}});


}).
then(function(res){
return API.cui.expirePersonPassword({
qs:[['subject',$stateParams.userId]],
data:{
subject:$stateParams.userId,
password:userDetails.specifyPassword.newPassword,
passwordPolicyId:userDetails.passwordPolicy.id,
authenticationPolicyId:userDetails.organization.authenticationPolicy.id}});


}).
then(function(res){
userDetails.specifyPassword.success=true;
$timeout(userDetails.specifyPassword.cancel,1500);
},function(err){
console.log(err);
APIError.onFor(name);
errorTimer=$timeout(function(){return APIError.offFor(name);},1500);
}).
always(function(){
Loader.offFor(name);
$scope.$digest();
});
};

userDetails.specifyPassword.cancel=function(){
userDetails.specifyPassword.begun=false;
userDetails.specifyPassword.reset();
};
};

userDetails.unlockUser=function(){
Loader.onFor('userDetails.unlockUser');
APIError.offFor('userDetails.unlockUser');
//Need to call two API's One is unlock Password Account and Update person stutus to active
API.cui.unlockPersonPassword({qs:[['subject',$stateParams.userId]]}).
then(function(res){
userDetails.user.stutus='active';
API.cui.updatePerson({personId:$stateParams.userId,data:userDetails.user}).
then(function(res){
userDetails.unlockUserSuccess=true;
}).
fail(function(err){
APIError.onFor('userDetails.unlockUser');
$timeout(function(){APIError.offFor('userDetails.unlockUser');},3000);
}).
always(function(){
Loader.offFor('userDetails.unlockUser');
$scope.$digest();
});
}).
fail(function(err){
APIError.onFor('userDetails.unlockUser');
$timeout(function(){APIError.offFor('userDetails.unlockUser');},3000);
}).
always(function(){
Loader.offFor('userDetails.unlockUser');
$scope.$digest();
});
};

/* --------------------------------------------- ON CLICK END ---------------------------------------------- */
}]);

angular.module('organization').
controller('userDetailsAppsCtrl',['API', '$stateParams', '$q', '$state', 'DataStorage', function(API,$stateParams,$q,$state,DataStorage){
'use strict';

var userDetailsApps=this,
userId=$stateParams.userId,
organizationId=$stateParams.orgId;

var apiPromises=[];

userDetailsApps.loading=true;
userDetailsApps.appList=[];

var getPackageServices=function getPackageServices(servicePackage){
return API.cui.getPackageServices({packageId:servicePackage.servicePackage.id}).
then(function(res){
res.forEach(function(pendingService){
pendingService.grant={
status:'pending'};

pendingService.servicePackage=servicePackage;
userDetailsApps.appList.push(pendingService);
});
});
};

// ON LOAD START ---------------------------------------------------------------------------------

apiPromises.push(
// Get user's granted applications
API.cui.getPersonGrantedApps({personId:userId}).
then(function(res){
res.forEach(function(grantedApp){
userDetailsApps.appList.push(grantedApp);
});
}));


apiPromises.push(
// Get user's pending service packages
API.cui.getPersonPendingServicePackages({qs:[['requestor.id',userId],['requestor.type','person']]}).
then(function(res){
var pendingServicePromises=[];

res.forEach(function(servicePackage){
// For each packages get its services
pendingServicePromises.push(getPackageServices(servicePackage));
});

$q.all(pendingServicePromises).
then(function(){
userDetailsApps.loading=false;
}).
catch(function(error){
userDetailsApps.loading=false;
console.log(error);
});
}));


apiPromises.push(
// Get categories of applications
API.cui.getCategories().
then(function(res){
userDetailsApps.appCategories=res;
}));


apiPromises.push(
// Get user's granted applications count
API.cui.getPersonGrantedAppCount({personId:userId}).
then(function(res){
userDetailsApps.appCount=res;
}));


$q.all(apiPromises).
catch(function(error){
userDetailsApps.loading=false;
console.log(error);
});

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START ----------------------------------------------------------------------

userDetailsApps.goToDetails=function(application){
DataStorage.setType('userAppDetail',application);
if(application.grant.status==='pending'){
$state.go('organization.requests.pendingRequests',{
'userId':userId,
'orgId':organizationId,
'packageId':application.servicePackage.servicePackage.id});

}else

$state.go('organization.directory.userAppDetails',{appId:application.id,orgId:organizationId,userId:userId});
};

// ON CLICK FUNCTIONS END ------------------------------------------------------------------------
}]);

angular.module('organization').
controller('userDetailsHistoryCtrl',['API', '$stateParams', '$q', function(API,$stateParams,$q){
'use strict';

var userDetailsHistory=this,
userId=$stateParams.userId,
organizationId=$stateParams.orgId;

var apiPromises=[];

userDetailsHistory.loading=true;
userDetailsHistory.sortClicked=false;

// ON LOAD START ---------------------------------------------------------------------------------

apiPromises.push(
API.cui.getPersonStatusHistory({qs:[['userId',String(userId)]]}).
then(function(res){
userDetailsHistory.personStatusHistory=res;
}));


$q.all(apiPromises).
then(function(res){
userDetailsHistory.loading=false;
}).
catch(function(error){
userDetailsHistory.loading=false;
console.log(error);
});

// ON LOAD END -----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('userDetailsProfileCtrl',['Loader', 'UserProfile', '$scope', '$stateParams', function(Loader,UserProfile,$scope,$stateParams){

var userDetailsProfile=this;
var scopeName='userDetailsProfile.';

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

UserProfile.injectUI(userDetailsProfile,$scope,$stateParams.userId);

Loader.onFor(scopeName+'initProfile');

UserProfile.initUserProfile($stateParams.userId,$stateParams.orgId).
then(function(res){
angular.merge(userDetailsProfile,res);
Loader.offFor(scopeName+'initProfile');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

}]);

angular.module('organization').
controller('userDetailsRolesCtrl',['API', '$stateParams', '$q', '$scope', 'APIError', '$timeout', function(API,$stateParams,$q,$scope,APIError,$timeout){
'use strict';

var userDetailsRoles=this,
userId=$stateParams.userId,
organizationId=$stateParams.orgId;

var apiPromises=[];

userDetailsRoles.loading=true;

// ON LOAD START ---------------------------------------------------------------------------------

var init=function init(){

apiPromises.push(
API.cui.getPersonRoles({personId:userId}).
then(function(res){
userDetailsRoles.assignedRoles=res;
API.cui.getPersonRolesGrantable({personId:userId}).
then(function(res){
userDetailsRoles.rolesGrantable=res;
}).
fail(function(err){
userDetailsRoles.grantedHistoryError=true;
});
}));


apiPromises.push(
API.cui.getPersonRolesGrantable({personId:userId}).
then(function(res){
userDetailsRoles.rolesGrantable=res;
}).
fail(function(err){
userDetailsRoles.grantedHistoryError=true;
}));


$q.all(apiPromises).
then(function(res){
userDetailsRoles.loading=false;
userDetailsRoles.success=false;
}).
catch(function(error){
userDetailsRoles.loading=false;
userDetailsRoles.grantedHistoryError=true;
userDetailsRoles.success=false;
console.log(error);
});
};

init();

userDetailsRoles.assignRoles=function(){
var roles=[];
angular.forEach(userDetailsRoles.appCheckbox,function(dsd,appId){
/*Object.keys(userRoles.appCheckbox).forEach(function(appId) {*/
if(dsd){
var test={
"id":appId};

roles.push(test);
}
});
var rolesSubmitData={
"userId":userId,
"roles":roles};

console.log(rolesSubmitData);

userDetailsRoles.loading=true;
API.cui.assignPersonRoles({data:rolesSubmitData}).
then(function(res){
console.log(res);
$scope.$digest();
userDetailsRoles.success=true;
$timeout(function(){
userDetailsRoles.loading=false;

init();
},3000);

}).
fail(function(err){
userDetailsRoles.loading=false;
userDetailsRoles.rolessubmitError=true;
$scope.$digest();
});
};

$scope.$watch("userDetailsRoles.appCheckbox",function(n){
var count=0;
angular.forEach(userDetailsRoles.appCheckbox,function(dsd,key){
console.log(key);
if(dsd)
count+=1;
});
if(count>0){
userDetailsRoles.appCheckboxValid=true;
}else{
userDetailsRoles.appCheckboxValid=false;
}
},true);

// ON LOAD END -----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('orgDirectoryCtrl',['API', 'APIError', 'APIHelpers', 'CuiMobileNavFactory', 'Loader', 'User', 'UserList', '$filter', '$pagination', '$q', '$state', '$stateParams', function(API,APIError,APIHelpers,CuiMobileNavFactory,Loader,User,UserList,$filter,$pagination,$q,$state,$stateParams){

var orgDirectory=this;
var scopeName='orgDirectory.';
orgDirectory.stateParamsOrgId=$stateParams.orgId;
orgDirectory.search={};
orgDirectory.sortBy={};

/* ---------------------------------------- HELPER FUNCTIONS START ---------------------------------------- */

var switchBetween=function switchBetween(property,firstValue,secondValue){
orgDirectory.search[property]===firstValue?
orgDirectory.search[property]=secondValue:
orgDirectory.search[property]=firstValue;
};

var getUserListAppCount=function getUserListAppCount(userList){
userList.forEach(function(user){
API.cui.getPersonGrantedAppCount({personId:user.id}).
then(function(res){
user.appCount=res;
}).
fail(function(error){
user.appCount='...';
});
});
};

/* ----------------------------------------- HELPER FUNCTIONS END ----------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

var initDirectory=function initDirectory(organizationId){
orgDirectory.search['organization.id']=organizationId||$stateParams.orgId||User.user.organization.id;
orgDirectory.search.pageSize=orgDirectory.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];

var apiCalls=[
UserList.getUsers({qs:APIHelpers.getQs(orgDirectory.search)}),
UserList.getUserCount({qs:[['organization.id',orgDirectory.search['organization.id']]]}),
API.cui.getOrganization({organizationId:orgDirectory.search['organization.id']})];


Loader.onFor(scopeName+'userList');
APIError.offFor(scopeName+'userList');

$q.all(apiCalls).
then(function(_ref7){var _ref8=_slicedToArray(_ref7,3),users=_ref8[0],userCount=_ref8[1],organization=_ref8[2];
orgDirectory.organization=organization;
// orgDirectory.organizationList = APIHelpers.flattenOrgHierarchy(orgHierarchy)
orgDirectory.userList=users;
orgDirectory.userCount=userCount;
orgDirectory.statusData=APIHelpers.getCollectionValuesAndCount(users,'status',true);
CuiMobileNavFactory.setTitle(organization.name);
orgDirectory.reRenderPagination&&orgDirectory.reRenderPagination();
getUserListAppCount(orgDirectory.userList);
}).
catch(function(error){
APIError.onFor(scopeName+'userList');
}).
finally(function(){
Loader.offFor(scopeName+'userList');
});
};

orgDirectory.search=Object.assign({},$stateParams);
initDirectory();

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */


// headers="['cui-name', 'username', 'status']" 

orgDirectory.sortingCallbacks={
name:function name(){
orgDirectory.sortBy.sortBy='name';
orgDirectory.sort(['name.given','name.surname'],orgDirectory.sortBy.sortType);
},
username:function username(){
orgDirectory.sortBy.sortBy='username';
orgDirectory.sort('username',orgDirectory.sortBy.sortType);
},
status:function status(){
orgDirectory.sortBy.sortBy='status';
orgDirectory.sort('status',orgDirectory.sortBy.sortType);
}};


orgDirectory.sort=function(sortBy,order){
cui.log('sort',sortBy,order);

orgDirectory.userList=_.orderBy(orgDirectory.userList,sortBy,order);
};

orgDirectory.updateSearchParams=function(page){
if(page)orgDirectory.search.page=page;
$state.transitionTo('organization.directory.userList',orgDirectory.search,{notify:false});
initDirectory(orgDirectory.search['organization.id']);
};

orgDirectory.updateSearchByName=function(name){
orgDirectory.updateSearchParams();
};
orgDirectory.actionCallbacks={
sort:function sort(sortType){
switch(sortType){
case'name':
switchBetween('sortBy','+name.given','-name.given');
break;
case'username':
switchBetween('sortBy','+person.username','-person.username');
break;
case'status':
switchBetween('sortBy','+person.status','-person.status');
break;}


// if (!orgDirectory.search.hasOwnProperty('sortBy')) orgDirectory.search['sortBy'] = '+' + sortType
// else if (orgDirectory.search.sortBy.slice(1) !== sortType) orgDirectory.search.sortBy = '+' + sortType
// else switchBetween('sortBy', '+' + sortType, '-' + sortType)
orgDirectory.updateSearchParams();
},
refine:function refine(refineType){
if(refineType==='all')delete orgDirectory.search['status'];else
{
if(!orgDirectory.search.hasOwnProperty('status'))orgDirectory.search['status']=refineType;else
orgDirectory.search.status=refineType;
}
orgDirectory.updateSearchParams();
}};


orgDirectory.userClick=function(clickedUser){
var stateOpts={
userId:clickedUser.id,
orgId:clickedUser.organization.id};

if(clickedUser.status==='pending')$state.go('organization.requests.personRequest',stateOpts);else
$state.go('organization.directory.userDetails',stateOpts);
};

orgDirectory.getOrgMembers=function(organization){
CuiMobileNavFactory.setTitle($filter('cuiI18n')(organization.name));
initDirectory(organization.id);
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('orgHierarchyCtrl',['API', 'APIError', 'DataStorage', 'Loader', 'User', '$scope', '$state', '$stateParams', function(API,APIError,DataStorage,Loader,User,$scope,$state,$stateParams){

var orgHierarchy=this;
var pageLoader='orgHierarchy.loading';
orgHierarchy.stateParamsOrgId=$stateParams.orgId;
orgHierarchy.expanded=false;

/* -------------------------------------------- HELPER FUNCTIONS START --------------------------------------------- */

var addExpandedProperty=function addExpandedProperty(childOrgs,parentOrg){
childOrgs.forEach(function(org,index){
// Need to remove org if it is pending
if(org.status==="PENDING"){
parentOrg.children.splice(index,1);
return;
}
if(org.children){
org.expanded=false;
addExpandedProperty(org.children,org);
}
});
};

/* -------------------------------------------- HELPER FUNCTIONS END --------------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

var storedData=DataStorage.getType('orgHierarchy');

if(storedData){
orgHierarchy.organizationHierarchy=storedData;
// add expended property to all the org with children directive needs it to work for 
// expandable and collapsable function
if(orgHierarchy.organizationHierarchy[0].children){
addExpandedProperty(orgHierarchy.organizationHierarchy[0].children,orgHierarchy.organizationHierarchy[0]);
}
}

if(!storedData)Loader.onFor(pageLoader);
// Loader.onFor(pageLoader)
API.cui.getOrganizationHierarchy({organizationId:orgHierarchy.stateParamsOrgId}).
done(function(res){
// Put hierarchy response in an array as the hierarchy directive expects an array
orgHierarchy.organizationHierarchy=[res];
DataStorage.setType('orgHierarchy',orgHierarchy.organizationHierarchy);
// add expended property to all the org with children directive needs it to work for 
// expandable and collapsable function
if(orgHierarchy.organizationHierarchy[0].children){
addExpandedProperty(orgHierarchy.organizationHierarchy[0].children,orgHierarchy.organizationHierarchy[0]);
}
}).
fail(function(err){
APIError.onFor(pageLoader,err);
}).
always(function(){
Loader.offFor(pageLoader);
$scope.$digest();
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */
/* */
orgHierarchy.goToOrgPrfile=function(org){
$state.go('organization.directory.orgDetails',{orgId:org.id});
};

orgHierarchy.toggleExpand=function(object){
object.expanded=!object.expanded;
var updateOrgChildren=function updateOrgChildren(orgs){
orgs.forEach(function(org){
if(org.id===object.id){
org.expanded=object.expanded;
return;
}
if(org.children){
updateOrgChildren(org.children);
}
});

if(true){};
};
updateOrgChildren(orgHierarchy.organizationHierarchy[0].children);
$scope.$digest();
};

orgHierarchy.toggleAll=function(toggleFlag){
orgHierarchy.expanded=!orgHierarchy.expanded;
var updateFlag=function updateFlag(orgs){
orgs.forEach(function(org){
if(org.children){
org.expanded=!toggleFlag;
updateFlag(org.children);
}
});
};
updateFlag(orgHierarchy.organizationHierarchy[0].children);
};
/* */
}]);

angular.module('organization').
controller('divisionCtrl',['APIError', 'API', '$scope', '$state', '$q', 'Base', '$stateParams', 'User', '$timeout', 'DataStorage', function(APIError,API,$scope,$state,$q,Base,$stateParams,User,$timeout,DataStorage){

var division=this;
division.sendInvitationError='';
var promises=[];
division.userSelectedOrg={};
division.userSelectedOrg.originalObject={};
division.userSelectedOrg.originalObject.name=User.user.organization.name;
division.userSelectedOrg.originalObject.id=User.user.organization.id;
division.stateParamsOrgId=User.user.organization.id;
//division.emailSubject='Register as an adminstrator within '

var storedData=DataStorage.getType('orgHierarchy',User.user.id);

if(storedData){
division.organizationHierarchyRoot=storedData;
division.organizationHierarchy=storedData[0].children;
var organizationList=[];
angular.forEach(division.organizationHierarchy,function(value){
var array={
"id":value.id,
"name":value.name[0].text};

organizationList.push(array);
});
division.organizationList=organizationList;
}else{
division.loader=true;
API.cui.getOrganizationHierarchy({organizationId:User.user.organization.id}).
done(function(res){
DataStorage.setType('orgHierarchy',[res],User.user.id);
var organizationList=[];
// Put hierarchy response in an array as the hierarchy directive expects an array
var storedDatas=DataStorage.getType('orgHierarchy',User.user.id);
division.organizationHierarchyRoot=storedDatas;
division.organizationHierarchy=storedDatas[0].children;

angular.forEach(division.organizationHierarchy,function(value){
var array={
"id":value.id,
"name":value.name[0].text};


organizationList.push(array);
});
division.organizationList=organizationList;
console.log(division.organizationList);

}).
fail(function(err){
APIError.onFor(pageLoader,err);
}).
always(function(){
division.loader=false;
$scope.$digest();
});
}


division.sendInvitation=function(){
var promises=[];
var validEmails=[];
division.emailAddressError=false;
division.sendInvitationError=false;
var EMAIL_REGEXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
division.emailArray=new Array();
division.emailArray=division.emailAddress.split(',');
angular.forEach(division.emailArray,function(email){
if(EMAIL_REGEXP.test(email)){
validEmails.push(email);
}
});
if(validEmails.length===division.emailArray.length){
division.loader=true;
angular.forEach(division.emailArray,function(email){
var opts={
"email":email,
"invitor":{
"id":User.user.id,
"type":"person"},

"targetOrganization":{
"id":division.userSelectedOrg.originalObject.id,
"type":"organization"}};


promises.push(API.cui.createOrgDivisionInvitation({data:opts}));
});

$q.all(promises).
then(function(res){
division.loader=false;
division.success=true;
division.sendInvitationError=false;
$timeout(function(){
$state.go('invitation.inviteSelect');
},3000);
}).
catch(function(error){
division.loader=false;
division.sendInvitationError=true;
});
}else{
division.emailAddressError=true;
}
};
division.goToOrgPrfile=function(org){
division.userSelectedOrg.originalObject={};
division.userSelectedOrg.originalObject.name=org.name[0].text;
division.userSelectedOrg.originalObject.id=org.id;
division.selectOrgFromList=false;
$scope.$digest();
};
division.goToOrg=function(){

};
}]);

angular.module('organization').
controller('tloCtrl',['APIError', 'API', '$scope', '$state', '$q', 'Base', '$stateParams', 'User', '$timeout', function(APIError,API,$scope,$state,$q,Base,$stateParams,User,$timeout){

var tlo=this;
tlo.sendInvitationError='';
var promises=[];
tlo.organization={};
tlo.organization.name=User.user.organization.name;
tlo.stateParamsOrgId=User.user.organization.id;
//tlo.emailSubject='Register as a new organization'

tlo.sendInvitation=function(){
var promises=[];
var validEmails=[];
tlo.emailAddressError=false;
tlo.sendInvitationError=false;
var EMAIL_REGEXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
tlo.emailArray=new Array();
tlo.emailArray=tlo.emailAddress.split(',');
angular.forEach(tlo.emailArray,function(email){
if(EMAIL_REGEXP.test(email)){
validEmails.push(email);
}
});
if(validEmails.length===tlo.emailArray.length){
tlo.loader=true;
angular.forEach(tlo.emailArray,function(email){
var opts={
"email":email,
"invitor":{
"id":User.user.id,
"type":"person"},

"targetOrganization":{
"id":User.user.organization.id,
"type":"organization"}};


promises.push(API.cui.createOrgCompanyInvitation({data:opts}));
});

$q.all(promises).
then(function(res){
tlo.loader=false;
tlo.success=true;
tlo.sendInvitationError=false;
$timeout(function(){
$state.go('invitation.inviteSelect');
},3000);
}).
catch(function(error){
tlo.loader=false;
tlo.sendInvitationError=true;
});
}else{
tlo.emailAddressError=true;
}
};
}]);

angular.module('organization').
controller('userCtrl',['APIError', 'API', '$scope', '$state', '$q', 'Base', '$stateParams', 'User', '$timeout', 'DataStorage', function(APIError,API,$scope,$state,$q,Base,$stateParams,User,$timeout,DataStorage){

var user=this;
user.sendInvitationError='';
var promises=[];
user.userSelectedOrg={};
user.userSelectedOrg.originalObject={};
user.userSelectedOrg.originalObject.name=User.user.organization.name;
user.userSelectedOrg.originalObject.id=User.user.organization.id;
user.stateParamsOrgId=User.user.organization.id;
//user.emailSubject='Register as a user to join '
user.selectOrgFromList=false;

var storedData=DataStorage.getType('orgHierarchy',User.user.id);

if(storedData){
user.organizationHierarchyRoot=storedData;
user.organizationHierarchy=storedData[0].children;
var organizationList=[];
angular.forEach(user.organizationHierarchy,function(value){
var array={
"id":value.id,
"name":value.name[0].text};

organizationList.push(array);
});
user.organizationList=organizationList;
}else{
user.loader=true;
API.cui.getOrganizationHierarchy({organizationId:User.user.organization.id}).
done(function(res){
DataStorage.setType('orgHierarchy',[res],User.user.id);
var organizationList=[];
var storedDatas=DataStorage.getType('orgHierarchy',User.user.id);
// Put hierarchy response in an array as the hierarchy directive expects an array
user.organizationHierarchyRoot=storedDatas;
user.organizationHierarchy=storedDatas[0].children;

angular.forEach(user.organizationHierarchy,function(value){
var array={
"id":value.id,
"name":value.name[0].text};


organizationList.push(array);
});
user.organizationList=organizationList;
}).
fail(function(err){
APIError.onFor(pageLoader,err);
}).
always(function(){
user.loader=false;
$scope.$digest();
});
}


user.customErrors={
email:{
email:function email(){
var EMAIL_REGEXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
if(user.email){
return EMAIL_REGEXP.test(user.email);
}else{
return true;
}
}}};



user.sendInvitation=function(){
var promises=[];
var validEmails=[];
user.emailAddressError=false;
user.sendInvitationError=false;
var EMAIL_REGEXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
user.emailArray=new Array();
user.emailArray=user.emailAddress.split(',');
angular.forEach(user.emailArray,function(email){
if(EMAIL_REGEXP.test(email)){
validEmails.push(email);
}
});
if(validEmails.length===user.emailArray.length){
user.loader=true;
angular.forEach(user.emailArray,function(email){
var opts={
"email":email,
"invitor":{
"id":User.user.id,
"type":"person"},

"targetOrganization":{
"id":user.userSelectedOrg.originalObject.id,
"type":"organization"}};


promises.push(API.cui.createPersonInvitation({data:opts}));
});

$q.all(promises).
then(function(res){
user.loader=false;
user.success=true;
user.sendInvitationError=false;
$timeout(function(){
$state.go('invitation.inviteSelect');
},3000);
}).
catch(function(error){
user.loader=false;
user.sendInvitationError=true;
});
}else{
user.emailAddressError=true;
}

};

user.goToOrgPrfile=function(org){
user.userSelectedOrg.originalObject={};
user.userSelectedOrg.originalObject.name=org.name[0].text;
user.userSelectedOrg.originalObject.id=org.id;
user.selectOrgFromList=false;
$scope.$digest();
};

}]);

angular.module('organization').
controller('orgProfileCtrl',['DataStorage', 'Loader', 'Organization', 'User', '$stateParams', '$q', 'APIError', function(DataStorage,Loader,Organization,User,$stateParams,$q,APIError){

var orgProfile=this;
var storedData=DataStorage.getType('orgProfile');
orgProfile.stateParamsOrgId=$stateParams.orgId;
var orgPromise=[];
if(User.user.organization.id===$stateParams.orgId){
orgProfile.organization=User.user.organization;
}else
{
// Organization is different than user's org, need to get fresh
Loader.onFor('orgProfile.init');
orgPromise.push(Organization.getOrganization($stateParams.orgId));
}


/* -------------------------------------------- ON LOAD START --------------------------------------------- */

if(storedData!==undefined){
orgProfile.securityAdmins=storedData.admins;
orgProfile.passwordPolicy=storedData.passwordPolicy;
orgProfile.authenticationPolicy=storedData.authenticationPolicy;
}else
Loader.onFor('orgProfile.init');
$q.all(orgPromise).
then(function(res){
if(orgPromise.length!==0){
orgProfile.organization=res[0];
}
Organization.initOrganizationProfile(orgProfile.organization.id,orgProfile.organization.passwordPolicy.id,orgProfile.organization.authenticationPolicy.id).
then(function(res){
orgProfile.securityAdmins=res.admins;
orgProfile.passwordPolicy=res.passwordPolicy;
orgProfile.authenticationPolicy=res.authenticationPolicy;
DataStorage.setType('orgProfile',res);
Loader.offFor('orgProfile.init');
}).
catch(function(err){
console.error("there was an error fetching additional org details"+err);
Loader.offFor('orgProfile.init');
APIError.onFor('orgProfile.init');
});
}).
catch(function(err){
console.error("there was an error fetching org details"+err);
Loader.offFor('orgProfile.init');
APIError.onFor('orgProfile.init');
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

}]);

angular.module('organization').
factory('NewGrant',['DataStorage', 'API', '$stateParams', function(DataStorage,API,$stateParams){
var newGrant={};
var newGrantsInStorage=void 0;
/*
        This Factory provides common platform to share common logic between granting an app to 
        User and Organization
    */
// Not handling package requests as not needed
newGrant.updateStorage=function(type,id,application){
var storageType=void 0;
if(type==="person")storageType='newGrant';else
storageType='newOrgGrant';
DataStorage.setType(storageType,{
id:id,
type:type,
applications:application});

// console.log(DataStorage.getType('newGrant'))
};

newGrant.pullFromStorage=function(scope,resourceId,type){
// const newGrantsInStorage = DataStorage.getDataThatMatches('newGrant', { userId: $stateParams.userID })
if(type==="person"){
newGrantsInStorage=DataStorage.getType('newGrant');
}else
{
newGrantsInStorage=DataStorage.getType('newOrgGrant');
}
if(newGrantsInStorage&&newGrantsInStorage.id==resourceId){
scope.appsBeingRequested=Object.assign({},newGrantsInStorage.applications);
scope.packagesBeingRequested=Object.assign({},newGrantsInStorage.packages);
}else
{
scope.packagesBeingRequested={};
scope.appsBeingRequested={};
}

scope.numberOfRequests=Object.keys(scope.appsBeingRequested).length+Object.keys(scope.packagesBeingRequested).length;

scope.applicationCheckbox=Object.keys(scope.appsBeingRequested).reduce(function(applications,appId){
applications[appId]=true;
return applications;
},{});

scope.packageCheckbox=Object.keys(scope.packagesBeingRequested).reduce(function(packages,appId){
packages[appId]=true;
return packages;
},{});

scope.requests={
application:scope.appsBeingRequested,
package:scope.packagesBeingRequested};

};

newGrant.claimGrants=function(id,type,packageRequestObject){
var claimGrants=[];

var buildPackageClaims=function buildPackageClaims(claimsObject){
if(Object.keys(claimsObject).length===0){
return undefined;
}// if there's no claims in this claim object
var packageClaims=[];
Object.keys(claimsObject).forEach(function(claimId){
if(Object.keys(claimsObject[claimId]).length===0){
return;
}// if no claimValues selected for that claimId
var claimValues=Object.keys(claimsObject[claimId]).reduce(function(claims,claimValueId){
claims.push({claimValueId:claimValueId});
return claims;
},[]);

packageClaims.push({
claimId:claimId,
claimValues:claimValues});

});
return packageClaims;
};

Object.keys(packageRequestObject).forEach(function(pkgId){
claimGrants.push({
data:{
grantee:{
id:id,
type:type},

servicePackage:{
id:pkgId,
type:'servicePackage'},

packageClaims:buildPackageClaims(packageRequestObject[pkgId].claims)}});


});

return claimGrants;
};

newGrant.packageGrants=function(id,type,packageRequestObject){
var packageGrants=[];
var index=0;
Object.keys(packageRequestObject).forEach(function(pkgId){
packageGrants.push({
packageId:pkgId,
data:{
version:'123',
status:'active',
grantee:{
id:id,
type:type},

servicePackage:{
id:pkgId,
type:'servicePackage'},

reason:packageRequestObject[pkgId].reason}});


if(type==='person'){
packageGrants[index].personId=id;
}else
{
packageGrants[index].organizationId=id;
}
index++;
});

return packageGrants;
};

return newGrant;
}]);
angular.module('organization').
controller('newGrantClaimsCtrl',['API', 'APIHelpers', 'DataStorage', 'Loader', 'NewGrant', '$stateParams', '$q', '$scope', '$state', '$timeout', function(API,APIHelpers,DataStorage,Loader,NewGrant,$stateParams,$q,$scope,$state,$timeout){

var newGrantClaims=this;
var loaderType='newGrantClaims.';
newGrantClaims.prevState={
params:{
userId:$stateParams.userId,
orgId:$stateParams.orgId},

name:"organization.directory.userDetails"};

newGrantClaims.packageRequests={};

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

NewGrant.pullFromStorage(newGrantClaims,$stateParams.userId,'person');
if(newGrantClaims.numberOfRequests===0){
$state.go('organization.requests.newGrantSearch',{userId:$stateParams.userId});
}
//For PopUp
newGrantClaims.appsBeingRequestedforPopup=angular.copy(newGrantClaims.appsBeingRequested);
//Keep only one app among all bundled apps
angular.forEach(newGrantClaims.appsBeingRequested,function(request){
if(request.bundledApps){
request.bundledApps.forEach(function(bundledApp){
if(newGrantClaims.appsBeingRequested[bundledApp.id]){
delete newGrantClaims.appsBeingRequested[bundledApp.id];
}
});
}
});
// get the claims for each app being requested
Object.keys(newGrantClaims.appsBeingRequested).forEach(function(appId,i){
var app=newGrantClaims.appsBeingRequested[appId];

if(!newGrantClaims.packageRequests[app.servicePackage.id]){
newGrantClaims.packageRequests[app.servicePackage.id]={
claims:{},
administratorRights:false};

}

Loader.onFor(loaderType+'claims'+i);

var opts={
qs:APIHelpers.getQs({
packageId:newGrantClaims.appsBeingRequested[appId].servicePackage.id})};



API.cui.getPackageClaims(opts).
then(function(res){
newGrantClaims['claims'+i]=Object.assign({},res);
res.forEach(function(claim){
newGrantClaims.packageRequests[app.servicePackage.id].claims[claim.claimId]={};
});
Loader.offFor(loaderType+'claims'+i);
$scope.$digest();
}).
fail(function(err){
// claims endpoint throws an error when the package has no claims
newGrantClaims['claims'+i]=[];
Loader.offFor(loaderType+'claims'+i);
$scope.$digest();
});
});

Loader.onFor(loaderType+'user');
API.cui.getPerson({personId:$stateParams.userId}).
then(function(res){
newGrantClaims.user=Object.assign({},res);
Loader.offFor(loaderType+'user');
$scope.$digest();
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */

newGrantClaims.submit=function(){
Loader.onFor(loaderType+'submit');
var claimsPromises=[];
// Grant Packages
$q.all(NewGrant.packageGrants($stateParams.userId,'person',newGrantClaims.packageRequests).map(function(opts){return API.cui.grantPersonPackage(opts);})).
then(function(res){
// grant claims
var claimsData=NewGrant.claimGrants($stateParams.userId,'person',newGrantClaims.packageRequests);
claimsData.forEach(function(claimData){
if(claimData.data.packageClaims&&claimData.data.packageClaims.length!==0){
claimsPromises.push(API.cui.grantClaims(claimData));
}
});
return $q.all(claimsPromises);
}).
then(function(res){
Loader.offFor(loaderType+'submit');
newGrantClaims.success=true;
DataStorage.setType('newGrant',{});
$timeout(function(){
$state.go('organization.directory.userList',{userId:$stateParams.userId,orgId:$stateParams.orgId});
},3000);
}).
catch(function(err){
Loader.offFor(loaderType+'submit');
newGrantClaims.error=true;
});
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('newGrantCtrl',['API', '$stateParams', '$scope', '$state', '$filter', 'Loader', 'DataStorage', 'NewGrant', function(API,$stateParams,$scope,$state,$filter,Loader,DataStorage,NewGrant){

var newGrant=this;
newGrant.prevState={
params:{
userId:$stateParams.userId,
orgId:$stateParams.orgId},

name:"organization.directory.userDetails"

// HELPER FUNCTIONS START ------------------------------------------------------------------------
// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------
};newGrant.searchType='applications';

/****
        grants in DataStorage are under the type 'newGrant' and look like

        [
            {
                userId:<user for which the grant is being made>,
                applications:<array of applications being granted>,
                packages:<array of packages being granted>
            }
        ]
    ****/
NewGrant.pullFromStorage(newGrant,$stateParams.userId,'person');
Loader.onFor('newGrant.user');
API.cui.getPerson({personId:$stateParams.userId}).
then(function(res){
newGrant.user=Object.assign({},res);
Loader.offFor('newGrant.user');
$scope.$digest();
});

Loader.onFor('newGrant.categories');
API.cui.getCategories().
then(function(res){
newGrant.categories=res.slice();
Loader.offFor('newGrant.categories');
$scope.$digest();
}).
fail(function(err){
Loader.offFor('newGrant.categories');
newGrant.categoryError=true;
$scope.$digest();
});

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

newGrant.searchCallback=function(opts){
if(!opts){
$state.go('organization.requests.newGrantSearch',{type:newGrant.searchType,userId:$stateParams.userId,orgId:$stateParams.orgId});
}else if(typeof opts==='string'){
$state.go('organization.requests.newGrantSearch',{type:newGrant.searchType,userId:$stateParams.userId,orgId:$stateParams.orgId,name:opts});
}else{
var optsParser={
category:function category(unparsedCategory){
var category=$filter('cuiI18n')(unparsedCategory);
$state.go('organization.requests.newGrantSearch',{type:newGrant.searchType,userId:$stateParams.userId,orgId:$stateParams.orgId,category:category});
}};

optsParser[opts.type](opts.value);
}
};

newGrant.goToClaimSelection=function(){
$state.go('organization.requests.newGrantClaims',{userId:$stateParams.userId,orgId:$stateParams.orgId});
};
// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('newGrantSearchCtrl',['$scope', '$state', '$stateParams', 'API', 'DataStorage', 'Loader', '$pagination', 'APIHelpers', 'NewGrant', '$q', function($scope,$state,$stateParams,API,DataStorage,Loader,$pagination,APIHelpers,NewGrant,$q){
var newGrantSearch=this;
newGrantSearch.prevState={
params:{
userId:$stateParams.userId,
orgId:$stateParams.orgId},

name:"organization.directory.userDetails"


// HELPER FUNCTIONS START ------------------------------------------------------------------------

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

/****
        grants in DataStorage are under the type 'newGrant' and look like

        [
            {
                userId:<user for which the grant is being made>,
                applications:<object of applications being granted>,
                packages:<object of packages being granted>
            }
        ]
    ****/};

NewGrant.pullFromStorage(newGrantSearch,$stateParams.userId,'person');

Loader.onFor('newGrantSearch.user');
API.cui.getPerson({personId:$stateParams.userId}).
then(function(res){
newGrantSearch.user=Object.assign({},res);
Loader.offFor('newGrantSearch.user');
$scope.$digest();
}).
fail(function(err){
console.error("There was an error in fetching user details"+err);
Loader.offFor('newGrantSearch.user');
$scope.$digest();
});

var searchUpdate=function searchUpdate(_ref9){var previouslyLoaded=_ref9.previouslyLoaded;
Loader.onFor('newGrantSearch.apps');
if(!previouslyLoaded){
newGrantSearch.search=Object.assign({},$stateParams);
}

var type=newGrantSearch.search.type||'applications';

var queryParams={
'service.name':newGrantSearch.search.name,
'service.category':newGrantSearch.search.category,
page:newGrantSearch.search.page||1,
pageSize:newGrantSearch.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0],
sortBy:newGrantSearch.search.sortBy};


var queryArray=APIHelpers.getQs(queryParams);

var queryOptions={
personId:$stateParams.userId,
qs:queryArray};


if(type==='applications'){
// TODO: REPLACE WITH REAL COUNT
$q.all([API.cui.getPersonGrantableCount(queryOptions),API.cui.getPersonGrantableApps(queryOptions)]).
then(function(res){
newGrantSearch.applicationList=res[1].slice();
newGrantSearch.count=res[0];
if(newGrantSearch.reRenderPaginate){
newGrantSearch.reRenderPaginate();
}
Loader.offFor('newGrantSearch.apps');
}).
catch(function(err){
console.error('There was an error fetching grantable apps or/and its count'+err);
Loader.offFor('newGrantSearch.apps');
newGrantSearch.grantableAppsError=true;
});
}
};

searchUpdate({
previouslyLoaded:false});


// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

newGrantSearch.toggleRequest=function(_ref10){var type=_ref10.type,payload=_ref10.payload;
if(payload){
var storedRequests=newGrantSearch.requests[type];
storedRequests[payload.id]?delete storedRequests[payload.id]:storedRequests[payload.id]=payload;
if(storedRequests[payload.id]){
newGrantSearch[type+'Checkbox'][payload.id]=true;
}else if(newGrantSearch[type+'Checkbox'][payload.id]){
delete newGrantSearch[type+'Checkbox'][payload.id];
}
newGrantSearch.numberOfRequests=Object.keys(newGrantSearch.applicationCheckbox).length+Object.keys(newGrantSearch.packageCheckbox).length;
NewGrant.updateStorage('person',$stateParams.userId,newGrantSearch.requests.application);
}
};

newGrantSearch.updateSearch=function(){
var stateParams=Object.assign({},newGrantSearch.search);
$state.transitionTo('organization.requests.newGrantSearch',stateParams,{notify:false});
searchUpdate({
previouslyLoaded:true});

};

newGrantSearch.goToClaimSelection=function(){
$state.go('organization.requests.newGrantClaims',{userId:$stateParams.userId,orgId:$stateParams.orgId});
};

//select parent if it is a child, deselect child if it is a parent
newGrantSearch.checkRelatedAppsBody=function(relatedApp){
newGrantSearch.toggleRequest(_.find(newGrantSearch.list,{id:relatedApp.id}));
newGrantSearch.checkRelatedAndBundledApps(_.find(newGrantSearch.list,{id:relatedApp.id}));
};

//deselect child if it is a parent, select parent if it is a child 
newGrantSearch.checkRelatedAndBundledApps=function(type,application){
var storedRequests=newGrantSearch.requests[type];
//if unchecked the checkbox
if(!storedRequests[application.id]){
//if it is a parent then then deselect childs
if(!application.servicePackage.parent){
application.relatedApps&&application.relatedApps.forEach(function(relatedApp){
// if (newGrantSearch[type + 'Checkbox'][relatedApp.id]) {
// newGrantSearch[type + 'Checkbox'][relatedApp.id]=!newGrantSearch[type + 'Checkbox'][relatedApp.id]
newGrantSearch.toggleRequest({type:'application',payload:_.find(newGrantSearch.applicationList,{id:relatedApp.id})});
// }
});
}
newGrantSearch.checkBundledApps(application,false);
}else{
if(application.servicePackage.parent){
//Need to select the other parent(if it has any) If user clicks on expandabel title
newGrantSearch.applicationList.forEach(function(app){
//if it is a parent and parent of selected app
if(!app.servicePackage.parent&&app.servicePackage.id===application.servicePackage.parent.id&&!newGrantSearch['applicationCheckbox'][app.id]){
newGrantSearch['applicationCheckbox'][app.id]=!newGrantSearch['applicationCheckbox'][app.id];
newGrantSearch.toggleRequest({type:'application',payload:app});
}
});
}
newGrantSearch.checkBundledApps(application,true);
}
};

newGrantSearch.checkBundledApps=function(application,check){
if(application.bundledApps){
application.bundledApps.forEach(function(bundledApp){
// newGrantSearch['applicationCheckbox'][bundledApp.id]=check
newGrantSearch.toggleRequest({type:'application',payload:_.find(newGrantSearch.applicationList,{id:bundledApp.id})});
});
}
};
// ON CLICK END ----------------------------------------------------------------------------------
}]);

angular.module('organization').
controller('newOrgGrantClaimsCtrl',['API', 'APIHelpers', 'DataStorage', 'Loader', 'NewGrant', '$stateParams', '$q', '$scope', '$state', '$timeout', function(API,APIHelpers,DataStorage,Loader,NewGrant,$stateParams,$q,$scope,$state,$timeout){

var newOrgGrantClaims=this;
var loaderType='newOrgGrantClaims.';
newOrgGrantClaims.prevState={
params:{
orgId:$stateParams.orgId}};


if(API.user.organization.id===$stateParams.orgId){
newOrgGrantClaims.prevState.name="organization.applications";
}else
{
newOrgGrantClaims.prevState.name="organization.directory.orgDetails";
}
newOrgGrantClaims.packageRequests={};

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

NewGrant.pullFromStorage(newOrgGrantClaims,$stateParams.orgId,'organization');
if(newOrgGrantClaims.numberOfRequests===0){
$state.go('organization.requests.newOrgGrantSearch',{orgId:$stateParams.orgId});
}
//For PopUp
newOrgGrantClaims.appsBeingRequestedforPopup=angular.copy(newOrgGrantClaims.appsBeingRequested);
//Keep only one app among all bundled apps
angular.forEach(newOrgGrantClaims.appsBeingRequested,function(request){
if(request.bundledApps){
request.bundledApps.forEach(function(bundledApp){
if(newOrgGrantClaims.appsBeingRequested[bundledApp.id]){
delete newOrgGrantClaims.appsBeingRequested[bundledApp.id];
}
});
}
});
// get the claims for each app being requested
Object.keys(newOrgGrantClaims.appsBeingRequested).forEach(function(appId,i){
var app=newOrgGrantClaims.appsBeingRequested[appId];

if(!newOrgGrantClaims.packageRequests[app.servicePackage.id]){
newOrgGrantClaims.packageRequests[app.servicePackage.id]={
claims:{},
administratorRights:false};

}

Loader.onFor(loaderType+'claims'+i);

// const opts = {
//     qs: APIHelpers.getQs({
//         packageId: newOrgGrantClaims.appsBeingRequested[appId].servicePackage.id
//     })
// }

// API.cui.getPackageClaims(opts)
// .then(res => {
//     newOrgGrantClaims['claims' + i] = Object.assign({}, res)
//     res.forEach(claim => {
//         newOrgGrantClaims.packageRequests[app.servicePackage.id].claims[claim.claimId] = {}
//     })
//     Loader.offFor(loaderType + 'claims' + i)
//     $scope.$digest()
// })
// .fail(err => { 
//     // claims endpoint throws an error when the package has no claims
//     newOrgGrantClaims['claims' + i] = []
//     Loader.offFor(loaderType + 'claims' + i)
//     $scope.$digest()
// })
});

Loader.onFor(loaderType+'org');
API.cui.getOrganization({organizationId:$stateParams.orgId}).
then(function(res){
newOrgGrantClaims.org=Object.assign({},res);
Loader.offFor(loaderType+'org');
$scope.$digest();
});

/* --------------------------------------------- ON LOAD END ---------------------------------------------- */

/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */

newOrgGrantClaims.submit=function(){
Loader.onFor(loaderType+'submit');
newOrgGrantClaims.success=false;
var claimsPromises=[];
// Grant Packages
$q.all(NewGrant.packageGrants($stateParams.orgId,'organization',newOrgGrantClaims.packageRequests).map(function(opts){return API.cui.grantOrganizationPackage(opts);}))
// .then(res => {
//     // grant claims
//     let claimsData=NewGrant.claimGrants($stateParams.orgId ,'organization', newOrgGrantClaims.packageRequests)
//     claimsData.forEach(claimData => {
//         if(claimData.data.packageClaims&&claimData.data.packageClaims.length!==0){
//             claimsPromises.push(API.cui.grantClaims(claimData))
//         }
//     })
//     return $q.all(claimsPromises)
// })
.then(function(res){
Loader.offFor(loaderType+'submit');
newOrgGrantClaims.success=true;
DataStorage.setType('newOrgGrant',{});
$timeout(function(){
$state.go('organization.applications',{orgId:$stateParams.orgId});
},3000);
}).
catch(function(err){
Loader.offFor(loaderType+'submit');
newOrgGrantClaims.error=true;
});
};

/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('newOrgGrantCtrl',['API', '$stateParams', '$scope', '$state', '$filter', 'Loader', 'DataStorage', 'NewGrant', function(API,$stateParams,$scope,$state,$filter,Loader,DataStorage,NewGrant){

var newOrgGrant=this;
newOrgGrant.prevState={
params:{
orgId:$stateParams.orgId}};


if(API.user.organization.id===$stateParams.orgId){
newOrgGrant.prevState.name="organization.applications";
}else
{
newOrgGrant.prevState.name="organization.directory.orgDetails";
}

// HELPER FUNCTIONS START ------------------------------------------------------------------------
// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

newOrgGrant.searchType='applications';

/****
        grants in DataStorage are under the type 'newGrant' and look like

        [
            {
                id:<user/org for which the grant is being made>,
                applications:<array of applications being granted>,
                packages:<array of packages being granted>
                type:person or organiztion
            }
        ]
    ****/
NewGrant.pullFromStorage(newOrgGrant,$stateParams.orgId,'organization');
Loader.onFor('newOrgGrant.org');
API.cui.getOrganization({organizationId:$stateParams.orgId}).
then(function(res){
newOrgGrant.org=Object.assign({},res);
Loader.offFor('newOrgGrant.org');
$scope.$digest();
});

Loader.onFor('newOrgGrant.categories');
API.cui.getCategories().
then(function(res){
newOrgGrant.categories=res.slice();
Loader.offFor('newOrgGrant.categories');
$scope.$digest();
}).
fail(function(err){
Loader.offFor('newOrgGrant.categories');
newOrgGrant.categoryError=true;
$scope.$digest();
});

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

newOrgGrant.searchCallback=function(opts){
if(!opts){
$state.go('organization.requests.newOrgGrantSearch',{type:newOrgGrant.searchType,orgId:$stateParams.orgId});
}else if(typeof opts==='string'){
$state.go('organization.requests.newOrgGrantSearch',{type:newOrgGrant.searchType,orgId:$stateParams.orgId,name:opts});
}else{
var optsParser={
category:function category(unparsedCategory){
var category=$filter('cuiI18n')(unparsedCategory);
$state.go('organization.requests.newOrgGrantSearch',{type:newOrgGrant.searchType,orgId:$stateParams.orgId,category:category});
}};

optsParser[opts.type](opts.value);
}
};

newOrgGrant.goToClaimSelection=function(){
$state.go('organization.requests.newOrgGrantClaims',{orgId:$stateParams.orgId});
};
// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('newOrgGrantSearchCtrl',['$scope', '$state', '$stateParams', 'API', 'DataStorage', 'Loader', '$pagination', 'APIHelpers', 'NewGrant', '$q', 'APIError', function($scope,$state,$stateParams,API,DataStorage,Loader,$pagination,APIHelpers,NewGrant,$q,APIError){
var newOrgGrantSearch=this;
newOrgGrantSearch.prevState={
params:{
orgId:$stateParams.orgId}};



if(API.user.organization.id===$stateParams.orgId){
newOrgGrantSearch.prevState.name="organization.applications";
}else
{
newOrgGrantSearch.prevState.name="organization.directory.orgDetails";
}
// HELPER FUNCTIONS START ------------------------------------------------------------------------

// const updateStorage = () => {
//     DataStorage.setType('newOrgGrant', {
//         id: $stateParams.orgId,
//         type:'organization',
//         applications: newOrgGrantSearch.requests.application,
//         packages: newOrgGrantSearch.requests.package
//     })
//     console.log(DataStorage.getType('newOrgGrant'))
// };

var updateViewList=function updateViewList(list){
var deferred=$q.defer();
newOrgGrantSearch.viewList=[];
var qs=[];
var apiPromises=[];
angular.forEach(list,function(app,parentIndex){
// Child App and Parent app requested by user
if(app.servicePackage.parent&&app.relatedApps){
var flag=false;
angular.forEach(app.relatedApps,function(realtedApp,index){
if(_.find(list,{id:realtedApp.id})){
flag=true;
}else
{
qs.push(['service.id',realtedApp.id]);
}
if(index===app.relatedApps.length-1&&qs.length!==0){
apiPromises.push(API.cui.getPersonRequestableApps({personId:API.getUser(),qs:qs}));
qs=[];
}
});
}else
{
newOrgGrantSearch.viewList.push(app);
}
});
$q.all(apiPromises).
then(function(res){
angular.forEach(res,function(app){var _newOrgGrantSearch$vi,_newOrgGrantSearch$li;
if(newOrgGrantSearch.search.name){
app[0].expanded=true;
}
(_newOrgGrantSearch$vi=newOrgGrantSearch.viewList).push.apply(_newOrgGrantSearch$vi,_toConsumableArray(app));
(_newOrgGrantSearch$li=newOrgGrantSearch.list).push.apply(_newOrgGrantSearch$li,_toConsumableArray(app));
});
deferred.resolve();
}).
catch(function(err){
console.log("There was an error loading parent requestable apps");
deferred.reject(err);
});
return deferred.promise;
};

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

/****
        grants in DataStorage are under the type 'newGrant' and look like

        [
            {
                id:<user/org for which the grant is being made>,
                applications:<object of applications being granted>,
                packages:<object of packages being granted>
                type:<person or org>
            }
        ]
    ****/

NewGrant.pullFromStorage(newOrgGrantSearch,$stateParams.orgId,'organization');

Loader.onFor('newOrgGrantSearch.org');
API.cui.getOrganization({organizationId:$stateParams.orgId}).
then(function(res){
newOrgGrantSearch.org=Object.assign({},res);
Loader.offFor('newOrgGrantSearch.org');
$scope.$digest();
}).
fail(function(err){
console.error('There was an error retreiving organization details '+err);
Loader.offFor('newOrgGrantSearch.org');
$scope.$digest();
});

var searchUpdate=function searchUpdate(_ref11){var previouslyLoaded=_ref11.previouslyLoaded;
Loader.onFor('newOrgGrantSearch.apps');
if(!previouslyLoaded){
newOrgGrantSearch.search=Object.assign({},$stateParams);
}

var type=newOrgGrantSearch.search.type||'applications';

var queryParams={
'service.name':newOrgGrantSearch.search.name,
'service.category':newOrgGrantSearch.search.category,
page:newOrgGrantSearch.search.page||1,
pageSize:newOrgGrantSearch.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0],
sortBy:newOrgGrantSearch.search.sortBy};


var queryArray=APIHelpers.getQs(queryParams);

var queryOptions={
organizationId:$stateParams.orgId,
qs:queryArray};


if(type==='applications'){
// TODO: REPLACE WITH REAL COUNT
$q.all([API.cui.getOrganizationGrantableCount(queryOptions),API.cui.getOrganizationGrantableApps(queryOptions)]).
then(function(res){
newOrgGrantSearch.applicationList=res[1].slice();
newOrgGrantSearch.count=res[0];
if(newOrgGrantSearch.reRenderPaginate){
newOrgGrantSearch.reRenderPaginate();
}
updateViewList(res[1]).
then(function(){
Loader.offFor('newOrgGrantSearch.apps');
});
}).
catch(function(err){
console.error("There was an error in retreiving grantable apps. "+err);
APIError.onFor('newOrgGrantSearch.apps');
Loader.offFor('newOrgGrantSearch.apps');
});
}
};

searchUpdate({
previouslyLoaded:false});


// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

newOrgGrantSearch.toggleRequest=function(_ref12){var type=_ref12.type,payload=_ref12.payload;
if(payload){
var storedRequests=newOrgGrantSearch.requests[type];
storedRequests[payload.id]?delete storedRequests[payload.id]:storedRequests[payload.id]=payload;
if(storedRequests[payload.id]){
newOrgGrantSearch[type+'Checkbox'][payload.id]=true;
}else if(newOrgGrantSearch[type+'Checkbox'][payload.id]){
delete newOrgGrantSearch[type+'Checkbox'][payload.id];
}
newOrgGrantSearch.numberOfRequests=Object.keys(newOrgGrantSearch.applicationCheckbox).length+Object.keys(newOrgGrantSearch.packageCheckbox).length;

NewGrant.updateStorage('organization',$stateParams.orgId,newOrgGrantSearch.requests.application);
}
};

newOrgGrantSearch.updateSearch=function(){
var stateParams=Object.assign({},newOrgGrantSearch.search);
$state.transitionTo('organization.requests.newOrgGrantSearch',stateParams,{notify:false});
searchUpdate({
previouslyLoaded:true});

};

newOrgGrantSearch.goToClaimSelection=function(){
$state.go('organization.requests.newOrgGrantClaims',{orgId:$stateParams.orgId});
};

//select parent if it is a child, deselect child if it is a parent
newOrgGrantSearch.checkRelatedAppsBody=function(relatedApp){
newOrgGrantSearch.toggleRequest(_.find(newOrgGrantSearch.list,{id:relatedApp.id}));
newOrgGrantSearch.checkRelatedAndBundledApps(_.find(newOrgGrantSearch.list,{id:relatedApp.id}));
};

//deselect child if it is a parent, select parent if it is a child 
newOrgGrantSearch.checkRelatedAndBundledApps=function(type,application){
var storedRequests=newOrgGrantSearch.requests[type];
//if unchecked the checkbox
if(!storedRequests[application.id]){
//if it is a parent then then deselect childs
if(!application.servicePackage.parent){
application.relatedApps&&application.relatedApps.forEach(function(relatedApp){
// if (newOrgGrantSearch[type + 'Checkbox'][relatedApp.id]) {
// newOrgGrantSearch[type + 'Checkbox'][relatedApp.id]=!newOrgGrantSearch[type + 'Checkbox'][relatedApp.id]
newOrgGrantSearch.toggleRequest({type:'application',payload:_.find(newOrgGrantSearch.applicationList,{id:relatedApp.id})});
// }
});
}
newOrgGrantSearch.checkBundledApps(application,false);
}else{
if(application.servicePackage.parent){
//Need to select the other parent(if it has any) If user clicks on expandabel title
newOrgGrantSearch.applicationList.forEach(function(app){
//if it is a parent and parent of selected app
if(!app.servicePackage.parent&&app.servicePackage.id===application.servicePackage.parent.id&&!newOrgGrantSearch['applicationCheckbox'][app.id]){
newOrgGrantSearch['applicationCheckbox'][app.id]=!newOrgGrantSearch['applicationCheckbox'][app.id];
newOrgGrantSearch.toggleRequest({type:'application',payload:app});
}
});
}
newOrgGrantSearch.checkBundledApps(application,true);
}
};

newOrgGrantSearch.checkBundledApps=function(application,check){
if(application.bundledApps){
application.bundledApps.forEach(function(bundledApp){
// newOrgGrantSearch['applicationCheckbox'][bundledApp.id]=check
newOrgGrantSearch.toggleRequest({type:'application',payload:_.find(newOrgGrantSearch.applicationList,{id:bundledApp.id})});
});
}
};
// ON CLICK END ----------------------------------------------------------------------------------
}]);

angular.module('organization').
controller('orgAppRequestsCtrl',
['$timeout', '$filter', '$pagination', '$state', '$stateParams', 'API', 'APIError', 'APIHelpers', 'CuiMobileNavFactory', 'Loader', 'User', 'DataStorage', function($timeout,$filter,$pagination,$state,$stateParams,API,APIError,APIHelpers,CuiMobileNavFactory,Loader,User,DataStorage){

var scopeName='orgAppRequests.';
var orgAppRequests=this;
orgAppRequests.search={};
orgAppRequests.sortBy={};

orgAppRequests.search=Object.assign({},$stateParams);
if(!orgAppRequests.search.page)
orgAppRequests.search.page=1;

/* -------------------------------------------- ON LOAD START --------------------------------------------- */

var foundOrgs=[];
var foundPersons=[];
var foundPackages=[];


var init=function init(){
cui.log('init');

orgAppRequests.search['isApprovable']=true;
orgAppRequests.search.pageSize=orgAppRequests.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
var qsArray=APIHelpers.getQs(orgAppRequests.search);

orgAppRequests.data=[];
Loader.onFor(scopeName+'data');
APIError.offFor(scopeName+'data');


var getOrg=function getOrg(orgId){
return $.Deferred(function(dfr){
if(orgId.length){
var cached=_.find(foundOrgs,{id:orgId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getOrganizationSecured({organizationId:orgId}).then(function(org){
foundOrgs.push(org);
//cui.log('org pushed', org, foundOrgs);
dfr.resolve(org);
}).fail(function(err){
cui.log('getOrg error',orgId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPerson=function getPerson(personId){
return $.Deferred(function(dfr){
if(personId.length){
var cached=_.find(foundPersons,{id:personId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPerson({personId:personId}).then(function(person){
foundPersons.push(person);
dfr.resolve(person);
}).fail(function(err){
cui.log('getPerson error',personId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPackage=function getPackage(packageId){
return $.Deferred(function(dfr){
if(packageId.length){
var cached=_.find(foundPackages,{id:packageId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPackage({packageId:packageId}).then(function(pkg){
var p={id:pkg.id,name:pkg.name[0].text};
foundPackages.push(p);
dfr.resolve(p);
}).fail(function(err){
cui.log('getPackage error',packageId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var done=function done(context){
$timeout(function(){
Loader.offFor(scopeName+'data');
cui.log('done',context);
cui.log('data',orgAppRequests.data);

orgAppRequests.reRenderPagination&&orgAppRequests.reRenderPagination();
});
};

/*qsArray.push(['requestor.type','organization'])getPackageRequests*/
qsArray.push(['requestor.id',User.user.organization.id]);
API.cui.retriveOrgPendingApps({qs:['requestor.id',User.user.organization.id]}).then(function(res){
var calls=[];

_.each(res,function(pkgReq){

// NB create an obj and bind it to scope...
var data=pkgReq;
orgAppRequests.data.push(data);

// ..then cache the calls, which populate obj asynchronously...
calls.push(
getPerson(pkgReq.creator).then(function(person){
data.personData=person||{};
var pkgId=pkgReq&&pkgReq.servicePackage?pkgReq.servicePackage.id:'';
return getPackage(pkgId);
}).then(function(pkg){
data.packageData=pkg;
var orgId=pkgReq.requestor.id;
return getOrg(orgId);
}).then(function(org){
if(!data.personData.organization){
data.personData.organization={};
}
data.personData.organization.name=!_.isEmpty(org)?org.name:'';
return $.Deferred().resolve();
}).fail(function(){
// mute the failures so as not to derail the entire list
return $.Deferred().resolve();
}));

});
return $.Deferred().resolve(calls);
}).then(function(calls){
// do the cached calls
return $.when.apply($,calls);
}).then(function(){
// do the count (used for pagination)
return API.cui.getPackageRequestsCount();
}).then(function(count){
// apply the count
orgAppRequests.userCount=count;
API.user.orgAppRequestsCount=count;
return $.Deferred().resolve();
}).fail(function(error){
APIError.onFor(scopeName+'data');
}).always(function(){
CuiMobileNavFactory.setTitle($filter('cuiI18n')('App Requests'));
done('finally');
});
};

init();
/* --------------------------------------------- ON LOAD END ---------------------------------------------- */


/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */
orgAppRequests.sortingCallbacks={
administrator:function administrator(){
orgAppRequests.sortBy.sortBy='administrator';
orgAppRequests.sort(['personData.name.given','personData.name.surname'],orgAppRequests.sortBy.sortType);
},
submitted:function submitted(){
orgAppRequests.sortBy.sortBy='submitted';
orgAppRequests.sort('personData.creation',orgAppRequests.sortBy.sortType);
},
request:function request(){
orgAppRequests.sortBy.sortBy='request';
orgAppRequests.sort('packageData.name',orgAppRequests.sortBy.sortType);
},
organization:function organization(){
orgAppRequests.sortBy.sortBy='organization';
orgAppRequests.sort('personData.organization.name',orgAppRequests.sortBy.sortType);
}};


orgAppRequests.sort=function(sortBy,order){
cui.log('sort',sortBy,order);
orgAppRequests.data=_.orderBy(orgAppRequests.data,sortBy,order);
};

orgAppRequests.goToDetails=function(request){
if(request.personData&&request.personData.id&&
request.personData.organization&&request.personData.organization.id&&
request.packageData&&request.packageData.id){
DataStorage.setType('organizationAppRequest',request);
$state.go('organization.requests.organizationAppRequest',{
'userId':request.personData.id,
'orgId':request.personData.organization.id,
'packageId':request.packageData.id});

}else{
cui.log('orgAppRequests goToDetails missing keys',request);
}
};

orgAppRequests.updateSearchParams=function(page){
if(page)orgAppRequests.search.page=page;
$state.transitionTo('organization.requests.orgAppRequests',orgAppRequests.search,{notify:false});
init();
};
/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('orgRegistrationRequestsCtrl',
['$timeout', '$filter', '$pagination', '$state', '$stateParams', 'API', 'APIError', 'APIHelpers', 'CuiMobileNavFactory', 'Loader', 'User', 'DataStorage', function($timeout,$filter,$pagination,$state,$stateParams,API,APIError,APIHelpers,CuiMobileNavFactory,Loader,User,DataStorage){

var scopeName='orgRegistrationRequests.';
var orgRegistrationRequests=this;
orgRegistrationRequests.search={};
orgRegistrationRequests.sortBy={};

orgRegistrationRequests.search=Object.assign({},$stateParams);
if(!orgRegistrationRequests.search.page)
orgRegistrationRequests.search.page=1;

/* -------------------------------------------- ON LOAD START --------------------------------------------- */
var foundOrgs=[];
var foundPersons=[];
var foundPackages=[];


var init=function init(){
cui.log('init');

orgRegistrationRequests.search.pageSize=orgRegistrationRequests.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
var qsArray=APIHelpers.getQs(orgRegistrationRequests.search);
//cui.log('qsArray', qsArray);

orgRegistrationRequests.data=[];
Loader.onFor(scopeName+'data');
APIError.offFor(scopeName+'data');

var getOrg=function getOrg(orgId){
return $.Deferred(function(dfr){
if(orgId.length){
var cached=_.find(foundOrgs,{id:orgId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getOrganizationSecured({organizationId:orgId}).then(function(org){
foundOrgs.push(org);
//cui.log('org pushed', org, foundOrgs);
dfr.resolve(org);
}).fail(function(err){
cui.log('getOrg error',orgId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPerson=function getPerson(personId){
return $.Deferred(function(dfr){
if(personId&&personId.length){
var cached=_.find(foundPersons,{id:personId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPerson({personId:personId}).then(function(person){
foundPersons.push(person);
dfr.resolve(person);
}).fail(function(err){
cui.log('getPerson error',personId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPackage=function getPackage(packageId){
return $.Deferred(function(dfr){
if(packageId.length){
var cached=_.find(foundPackages,{id:packageId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPackage({packageId:packageId}).then(function(pkg){
var p={id:pkg.id,name:pkg.name[0].text};
foundPackages.push(p);
dfr.resolve(p);
}).fail(function(err){
cui.log('getPackage error',packageId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var done=function done(context){
$timeout(function(){
Loader.offFor(scopeName+'data');
cui.log('done',context);
cui.log('data',orgRegistrationRequests.data);

orgRegistrationRequests.reRenderPagination&&orgRegistrationRequests.reRenderPagination();
});
};

var start=window.performance.now();
var end;
API.cui.getOrgRegistrationRequests({qs:qsArray}).
then(function(res){
var calls=[];
_.each(res,function(regReq){
//Needed as some requests will not contain security admin details
//And they need to be removed
if(regReq.registrant){
// NB create an obj and bind it to scope...
var data=regReq;
orgRegistrationRequests.data.push(data);

// ..then cache the calls, which populate obj asynchronously...
calls.push(
getPerson(regReq.registrant&&regReq.registrant.id).
then(function(person){
data.personData=person||{};
var pkgId=!_.isEmpty(regReq.packages)?regReq.packages[0].id:'';
return getPackage(pkgId);
}).
then(function(pkg){
data.packageData=pkg;
var orgId=data.personData&&data.personData.organization?data.personData.organization.id:'';
return getOrg(orgId);
}).
then(function(org){
if(!data.personData.organization){
data.personData.organization={};
}
data.personData.organization.name=!_.isEmpty(org)?org.name:'';
return $.Deferred().resolve();
}).
fail(function(){
// mute the failures so as not to derail the entire list
return $.Deferred().resolve();
}));

}
});
return $.Deferred().resolve(calls);
}).
then(function(calls){
// do the cached calls
return $.when.apply($,calls);
}).
then(function(){
// do the count (used for pagination)
return API.cui.getOrgRegistrationRequestsCount();
}).
then(function(count){
// apply the count
orgRegistrationRequests.userCount=count;
API.user.orgRegistrationRequestsCount=count;
return $.Deferred().resolve();
}).
fail(function(error){
APIError.onFor(scopeName+'data');
}).
always(function(){
CuiMobileNavFactory.setTitle($filter('cuiI18n')('Registration Requests'));
done('finally');
var end=window.performance.now();
var time=end-start;
cui.log('time',time);
});
};

init();
/* --------------------------------------------- ON LOAD END ---------------------------------------------- */


/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */
orgRegistrationRequests.sortingCallbacks={
administrator:function administrator(){
orgRegistrationRequests.sortBy.sortBy='administrator';
orgRegistrationRequests.sort(['personData.name.given','personData.name.surname'],orgRegistrationRequests.sortBy.sortType);
},
submitted:function submitted(){
orgRegistrationRequests.sortBy.sortBy='submitted';
orgRegistrationRequests.sort('personData.creation',orgRegistrationRequests.sortBy.sortType);
},
request:function request(){
orgRegistrationRequests.sortBy.sortBy='request';
orgRegistrationRequests.sort('packageData.name',orgRegistrationRequests.sortBy.sortType);
},
organization:function organization(){
orgRegistrationRequests.sortBy.sortBy='organization';
orgRegistrationRequests.sort('personData.organization.name',orgRegistrationRequests.sortBy.sortType);
}};


orgRegistrationRequests.sort=function(sortBy,order){
cui.log('sort',sortBy,order);
orgRegistrationRequests.data=_.orderBy(orgRegistrationRequests.data,sortBy,order);
};


orgRegistrationRequests.goToDetails=function(request){
if(request.personData&&request.personData.id&&
request.personData.organization&&request.personData.organization.id){
DataStorage.setType('organizationRegRequest',request);
$state.go('organization.requests.organizationRequest',{
'userId':request.personData.id,
'orgId':request.personData.organization.id});

}else{
cui.log('orgRegistrationRequests goToDetails missing keys',request);
}
};

orgRegistrationRequests.updateSearch=function(updateType,updateValue){
//cui.log('updateSearchParams', page);
switch(updateType){
case'organizationName':
orgRegistrationRequests.search.page=1;
orgRegistrationRequests.search.organizationName=updateValue;
break;}

// WHY transition to this same route? if setting notify:false? what is the purpose? just to add an item to history?
$state.transitionTo('organization.requests.orgRegistrationRequests',orgRegistrationRequests.search,{notify:false});
init();
};

orgRegistrationRequests.pageChange=function(newpage){
orgRegistrationRequests.updateSearch('page',newpage);
};

orgRegistrationRequests.searchCallback=function(searchWord){
orgRegistrationRequests.updateSearch('organizationName',searchWord);
};
/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('organizationAppRequestCtrl',['APIError', 'DataStorage', 'Loader', '$state', '$stateParams', '$timeout', 'API', '$scope', '$q', 'ServicePackage', function(APIError,DataStorage,Loader,$state,$stateParams,$timeout,API,$scope,$q,ServicePackage){
'use strict';

var organizationAppRequest=this;
var userId=$stateParams.userId;
var organizationId=$stateParams.orgId;

// HELPER FUNCTIONS START------------------------------------------------------
var getAllDetails=function getAllDetails(){
var promises=[];
API.cui.getOrganization({organizationId:organizationId}).
then(function(res){
organizationAppRequest.request.personData.organization=res;
$scope.$digest();
});
if(organizationAppRequest.request.packageData){
ServicePackage.getPackageDetails(organizationAppRequest.request.packageData.id).
then(function(packageData){
organizationAppRequest.request.packageData=angular.merge(organizationAppRequest.request.packageData,packageData);
}).
catch(function(err){
APIError.onFor('organizationAppRequest.packageServices');
console.log('There was an error in fetching following package service details'+err);
}).
finally(function(){
Loader.offFor('organizationAppRequest.init');
});
}else
{
Loader.offFor('organizationAppRequest.init');
}
};
// HELPER FUNCTIONS END------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

Loader.onFor('organizationAppRequest.init');
organizationAppRequest.request=DataStorage.getType('organizationAppRequest');
console.log(organizationAppRequest.request);
if(!organizationAppRequest.request){
APIError.onFor('organizationAppRequest.noRequest');
Loader.offFor('organizationAppRequest.init');
$timeout(function(){return $state.go('organization.requests.orgAppRequests');},5000);
}else
if(organizationAppRequest.request.personData.id!==userId||organizationAppRequest.request.personData.organization.id!==organizationId){
APIError.onFor('organizationAppRequest.noRequest');
Loader.offFor('organizationAppRequest.init');
$timeout(function(){return $state.go('organization.requests.orgAppRequests');},5000);
}else
{
getAllDetails();
}

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

organizationAppRequest.reviewApprovals=function(){
DataStorage.setType('organizationRegRequest',organizationAppRequest.request);
$state.go('organization.requests.organizationAppRequestReview',{userId:userId,orgId:organizationId});
};

// ON CLICK END ----------------------------------------------------------------------------------
}]);

angular.module('organization').
controller('organizationAppRequestReviewCtrl',['DataStorage', 'Loader', 'ServicePackage', '$q', '$state', '$stateParams', '$timeout', 'APIError', 'API', '$scope', function(DataStorage,Loader,ServicePackage,$q,$state,$stateParams,$timeout,APIError,API,$scope){
'use strict';

var organizationAppRequestReview=this;
var orgId=$stateParams.orgId;

organizationAppRequestReview.success=false;

// HELPER FUNCTIONS START ------------------------------------------------------------------------

var handleSuccess=function handleSuccess(res){
Loader.offFor('organizationAppRequestReview.submitting');
organizationAppRequestReview.success=true;
DataStorage.setType('organizationAppRequest',{});
$scope.$digest();
$timeout(function(){
$state.go('organization.requests.orgAppRequests');
},3000);
};

var handleError=function handleError(err){
console.log('There was an error in approving org app request '+err.responseJSON);
if(err&&err.responseJSON.apiMessage==='The service request does not exist'){
organizationAppRequestReview.errorMessage='request-approve-or-rejected';
}else{
organizationAppRequestReview.errorMessage=undefined;
}
Loader.offFor('organizationAppRequestReview.submitting');
organizationAppRequestReview.error=true;
$scope.$digest();
};

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

Loader.onFor('organizationAppRequestReview.init');

var requestData=DataStorage.getType('organizationAppRequest');
if(!requestData){
APIError.onFor('organizationAppRequestReview.noRequest');
// $timeout(() => $state.go('organization.requests.orgAppRequests'), 5000)
}else
if(requestData.personData.organization.id!==orgId){
APIError.onFor('organizationAppRequestReview.noRequest');
// $timeout(() => $state.go('organization.requests.orgAppRequests'), 5000)
}else
{
Loader.offFor('organizationAppRequestReview.init');
}
organizationAppRequestReview.packageData=requestData.packageData;
organizationAppRequestReview.personData=requestData.personData;
organizationAppRequestReview.organization=requestData.organization;
organizationAppRequestReview.request=requestData.request;
organizationAppRequestReview.justification=requestData.justification;
organizationAppRequestReview.id=requestData.id;

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

organizationAppRequestReview.submit=function(){
Loader.onFor('organizationAppRequestReview.submitting');
organizationAppRequestReview.packageData.id=organizationAppRequestReview.id;
ServicePackage.handlePackageApproval(organizationAppRequestReview.packageData).
then(handleSuccess).
fail(handleError);
// if (organizationAppRequestReview.packageData.approval === 'approved'){
//     API.cui.denyOrgRegistrationRequest({qs:[['requestId',requestData.id],['reason',organizationAppRequestReview.request.rejectReason]]})
//     .then(handleSuccess)
//     .fail(handleError)
// }
// //all approval then call registration endpoint directly
// else (organizationAppRequestReview.deniedCount===0) {
//     API.cui.approveOrgRegistrationRequest({qs:[['requestId',requestData.id]]})
//     .then(handleSuccess)
//     .fail(handleError)
// }
// else {
//     API.cui.approvePersonRegistration({qs: [['requestId',requestData.registrant.requestId]]})
//     let packageRequestCalls = []

//     organizationAppRequestReview.packages.forEach(packageRequest => {
//         packageRequest.id=packageRequest.requestId
//         packageRequestCalls.push(ServicePackage.handlePackageApproval(packageRequest))
//     })

//     $q.all(packageRequestCalls)
//     .then( res =>{
//         Loader.offFor('organizationAppRequestReview.submitting')
//         organizationAppRequestReview.success = true
//             $timeout(() => {
//                 $state.go('organization.requests.orgRegistrationRequests')
//         }, 3000) 
//     })
//     // .catch(handleError)
// }
};

// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('organizationRequestCtrl',['APIError', 'DataStorage', 'Loader', '$state', '$stateParams', '$timeout', 'API', '$scope', '$q', 'ServicePackage', function(APIError,DataStorage,Loader,$state,$stateParams,$timeout,API,$scope,$q,ServicePackage){
'use strict';

var organizationRequest=this;
var userId=$stateParams.userId;
var organizationId=$stateParams.orgId;

// HELPER FUNCTIONS START------------------------------------------------------
var getAllDetails=function getAllDetails(){
var promises=[];
API.cui.getOrganization({organizationId:organizationId}).
then(function(res){
organizationRequest.request.personData.organization=res;
$scope.$digest();
});
if(organizationRequest.request.packages&&organizationRequest.request.packages.length!==0){
organizationRequest.request.packages.forEach(function(requestedPackage,index){
ServicePackage.getPackageDetails(requestedPackage.id).
then(function(packageData){
requestedPackage=angular.merge(requestedPackage,packageData);
}).
catch(function(err){
APIError.onFor('organizationRequest.packageServices');
console.log('There was an error in fetching following package service details'+err);
Loader.offFor('organizationRequest.init');
}).
finally(function(){
if(index===organizationRequest.request.packages.length-1){
Loader.offFor('organizationRequest.init');
}
});
});
// $q.all(promises)
// .then(res => {
//     organizationRequest.packageData =res

// })
// .catch(err => {
//     APIError.onFor('organizationRequest.packageServices')
//     console.log('There was an error in fetching one or more package service details' +err)
//     Loader.offFor('organizationRequest.init')
// })
}else
{
Loader.offFor('organizationRequest.init');
}
};
// HELPER FUNCTIONS END------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

Loader.onFor('organizationRequest.init');
organizationRequest.request=DataStorage.getType('organizationRegRequest');
console.log(organizationRequest.request);
if(!organizationRequest.request){
APIError.onFor('organizationRequest.noRequest');
Loader.offFor('organizationRequest.init');
$timeout(function(){return $state.go('organization.requests.orgRegistrationRequests');},5000);
}else
if(organizationRequest.request.personData.id!==userId||organizationRequest.request.personData.organization.id!==organizationId){
APIError.onFor('organizationRequest.noRequest');
Loader.offFor('organizationRequest.init');
$timeout(function(){return $state.go('organization.requests.orgRegistrationRequests');},5000);
}else
{
getAllDetails();
}

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

organizationRequest.reviewApprovals=function(){
DataStorage.setType('organizationRegRequest',organizationRequest.request);
$state.go('organization.requests.organizationRequestReview',{userId:userId,orgId:organizationId});
};

// ON CLICK END ----------------------------------------------------------------------------------
}]);

angular.module('organization').
controller('organizationRequestReviewCtrl',['DataStorage', 'Loader', 'ServicePackage', '$q', '$state', '$stateParams', '$timeout', 'APIError', 'API', '$scope', function(DataStorage,Loader,ServicePackage,$q,$state,$stateParams,$timeout,APIError,API,$scope){
'use strict';

var organizationRequestReview=this;
var orgId=$stateParams.orgId;

organizationRequestReview.success=false;
organizationRequestReview.approvedCount=0;
organizationRequestReview.deniedCount=0;

// HELPER FUNCTIONS START ------------------------------------------------------------------------

var getApprovalCounts=function getApprovalCounts(requests){
requests.forEach(function(request){
switch(request.approval){
case'approved':
organizationRequestReview.approvedCount+=1;
break;
case'denied':
organizationRequestReview.deniedCount+=1;
break;}

});
};

var handleSuccess=function handleSuccess(res){
Loader.offFor('organizationRequestReview.submitting');
organizationRequestReview.success=true;
$scope.$digest();
$timeout(function(){
$state.go('organization.requests.orgRegistrationRequests');
},3000);
};

var handleError=function handleError(err){
console.log('There was an error in approving org registration '+err);
Loader.offFor('organizationRequestReview.submitting');
organizationRequestReview.error=true;
$scope.$digest();
};

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

Loader.onFor('organizationRequestReview.init');

var requestData=DataStorage.getType('organizationRegRequest');
if(!requestData){
APIError.onFor('organizationRequestReview.noRequest');
$timeout(function(){return $state.go('organization.requests.orgRegistrationRequests');},5000);
}else
if(requestData.personData.organization.id!==orgId){
APIError.onFor('organizationRequestReview.noRequest');
$timeout(function(){return $state.go('organization.requests.orgRegistrationRequests');},5000);
}else
if(requestData.personData.status!=="pending"){
APIError.onFor('organizationRequestReview.active');
$timeout(function(){return $state.go('organization.requests.orgRegistrationRequests');},5000);
}else
{
Loader.offFor('organizationRequestReview.init');
}
organizationRequestReview.packages=requestData.packages;
organizationRequestReview.personData=requestData.personData;
organizationRequestReview.organization=requestData.organization;
organizationRequestReview.request=requestData.request;
organizationRequestReview.justification=requestData.justification;
organizationRequestReview.id=requestData.id;
if(organizationRequestReview.packages&&organizationRequestReview.packages.length>0){
getApprovalCounts(organizationRequestReview.packages);
}

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

organizationRequestReview.submit=function(){
Loader.onFor('organizationRequestReview.submitting');

if(organizationRequestReview.request.approval==='denied'){
API.cui.denyOrgRegistrationRequest({qs:[['requestId',requestData.id],['reason',organizationRequestReview.request.rejectReason]]}).
then(handleSuccess).
fail(handleError);
}
//all approval then call registration endpoint directly
else if(organizationRequestReview.deniedCount===0){
API.cui.approveOrgRegistrationRequest({qs:[['requestId',requestData.id]]}).
then(handleSuccess).
fail(handleError);
}else
{
API.cui.approveOrganizationRequests({qs:[['requestId',requestData.registrant.requestId]]}).
then(function(res){
var packageRequestCalls=[];

organizationRequestReview.packages.forEach(function(packageRequest){
packageRequest.id=packageRequest.requestId;
packageRequestCalls.push(ServicePackage.handlePackageApproval(packageRequest));
});

$q.all(packageRequestCalls).
then(function(res){
Loader.offFor('organizationRequestReview.submitting');
organizationRequestReview.success=true;
$timeout(function(){
$state.go('organization.requests.orgRegistrationRequests');
},3000);
}).
catch(function(err){
console.log("Org approval success but One or more package approval/denied failed"+err);
organizationRequestReview.error=true;
});
}).
fail(handleError);
}
};

// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('pendingRequestsCtrl',['API', 'DataStorage', 'Loader', 'ServicePackage', '$q', '$state', '$stateParams', '$timeout', function(API,DataStorage,Loader,ServicePackage,$q,$state,$stateParams,$timeout){
'use strict';

var pendingRequests=this;
var userId=$stateParams.userId;
var orgId=$stateParams.orgId;

pendingRequests.success=false;
// HELPER FUNCTIONS START ------------------------------------------------------------------------

var getApprovalCounts=function getApprovalCounts(requests){
pendingRequests.approvedCount=0;
pendingRequests.deniedCount=0;
requests.forEach(function(request){
switch(request.approval){
case'approved':
pendingRequests.approvedCount+=1;
break;
case'denied':
pendingRequests.deniedCount+=1;
break;}

});
};

// HELPER FUNCTIONS END --------------------------------------------------------------------------


// ON LOAD START ---------------------------------------------------------------------------------

Loader.onFor('pendingRequests.init');

$q.all([
API.cui.getPerson({personId:userId}),
ServicePackage.getAllUserPendingPackageData(userId)]).

then(function(res){
pendingRequests.user=res[0];
pendingRequests.packages=res[1];
Loader.offFor('pendingRequests.init');
});

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

pendingRequests.reviewApprovals=function(){
var storageData={
user:pendingRequests.user,
packages:pendingRequests.packages};


DataStorage.setType('appRequests',storageData);
$state.go('organization.requests.pendingRequestsReview',{userId:userId,orgId:orgId});
};

pendingRequests.submit=function(){
var submitCalls=[];
getApprovalCounts(pendingRequests.packages);
if(pendingRequests.deniedCount===0){
pendingRequests.submitting=true;
pendingRequests.packages.forEach(function(packageRequest){
submitCalls.push(ServicePackage.handlePackageApproval(packageRequest));
});

$q.all(submitCalls).
then(function(){
pendingRequests.success=true;
pendingRequests.submitting=false;
$timeout(function(){
$state.go('organization.requests.usersAppRequests');
},3000);
}).
catch(function(err){
pendingRequests.submitting=false;
console.log("There was an error in approving application requests"+err);
pendingRequests.error=true;
});
}else
{
pendingRequests.reviewApprovals();
}
};

// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('pendingRequestsReviewCtrl',['DataStorage', 'Loader', 'ServicePackage', '$q', '$state', '$stateParams', '$timeout', function(DataStorage,Loader,ServicePackage,$q,$state,$stateParams,$timeout){
'use strict';

var pendingRequestsReview=this;
var userId=$stateParams.userId;
var orgId=$stateParams.orgId;

pendingRequestsReview.success=false;
pendingRequestsReview.approvedCount=0;
pendingRequestsReview.deniedCount=0;

// HELPER FUNCTIONS START ------------------------------------------------------------------------

var getApprovalCounts=function getApprovalCounts(requests){
requests.forEach(function(request){
switch(request.approval){
case'approved':
pendingRequestsReview.approvedCount+=1;
break;
case'denied':
pendingRequestsReview.deniedCount+=1;
break;}

});
};

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

Loader.onFor('pendingRequestsReview.init');

var requestData=DataStorage.getType('appRequests');

pendingRequestsReview.pendingRequests=requestData.packages;
pendingRequestsReview.user=requestData.user;

if(pendingRequestsReview.pendingRequests.length>0){
getApprovalCounts(pendingRequestsReview.pendingRequests);
}

Loader.offFor('pendingRequestsReview.init');

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

pendingRequestsReview.submit=function(){
var submitCalls=[];
pendingRequestsReview.submitting=true;
pendingRequestsReview.pendingRequests.forEach(function(packageRequest){
submitCalls.push(ServicePackage.handlePackageApproval(packageRequest));
});

$q.all(submitCalls).
then(function(){
pendingRequestsReview.success=true;
pendingRequestsReview.submitting=false;
$timeout(function(){
$state.go('organization.requests.usersAppRequests');
},3000);
}).
catch(function(err){
console.log("There was an error in approving user application requests"+err);
pendingRequestsReview.submitting=false;
pendingRequestsReview.error=true;
});
};

pendingRequestsReview.goBack=function(){
$state.go('organization.requests.pendingRequests',{userId:userId,orgId:orgId});
};

// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('personRequestCtrl',['APIError', 'DataStorage', 'Loader', 'PersonRequest', 'ServicePackage', '$state', '$stateParams', '$timeout', 'API', '$scope', function(APIError,DataStorage,Loader,PersonRequest,ServicePackage,$state,$stateParams,$timeout,API,$scope){
'use strict';

var personRequest=this;
var userId=$stateParams.userId;
var organizationId=$stateParams.orgId;
// Needed when there is no packages
personRequest.approvedCount=0;
personRequest.deniedCount=0;

personRequest.success=false;


// HELPER FUNCTIONS START ------------------------------------------------------------------------

var getApprovalCounts=function getApprovalCounts(requests){
personRequest.approvedCount=0;
personRequest.deniedCount=0;
requests.forEach(function(request){
switch(request.approval){
case'approved':
personRequest.approvedCount+=1;
break;
case'denied':
personRequest.deniedCount+=1;
break;}

});
};

var handleSuccess=function handleSuccess(res){
Loader.offFor('personRequest.submitting');
personRequest.success=true;
DataStorage.deleteType('userPersonRequest');
API.user.userRegistrationRequestsCount=API.user.userRegistrationRequestsCount-1;
$scope.$digest();
$timeout(function(){
$state.go('organization.requests.usersRegistrationRequests');
},3000);
};

var handleError=function handleError(err){
console.log('There was an error in approving user registration '+err);
Loader.offFor('personRequest.submitting');
personRequest.error=true;
$scope.$digest();
};
// HELPER FUNCTIONS END --------------------------------------------------------------------------


// ON LOAD START ---------------------------------------------------------------------------------

var getPackageDetails=function getPackageDetails(){
if(personRequest.request.request.packages){
ServicePackage.getAllUserPendingPackageData(userId).
then(function(res){
personRequest.request.completePackageData=res;
}).
catch(function(err){
APIError.onFor('personRequest.noRequest');
$timeout(function(){return $state.go('organization.requests.usersRegistrationRequests');},5000);
});
}else
{
personRequest.request.completePackageData=[];
}
};

// Check LocalStorage if data is already obtained in previous page
var storageData=DataStorage.getType('userPersonRequest');
if(storageData&&userId===storageData.request.registrant.id){
personRequest.request=storageData;
getPackageDetails();
}else
{
Loader.onFor('personRequest.init');
PersonRequest.getPersonRegistrationRequestData(userId,organizationId).
then(function(res){
if(!res.request){
APIError.onFor('personRequest.noRequest');
$timeout(function(){return $state.go('organization.requests.usersRegistrationRequests');},5000);
}else
{
personRequest.request=res;
getPackageDetails();
Loader.offFor('personRequest.init');
}
});
}

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

personRequest.reviewApprovals=function(){
DataStorage.setType('userPersonRequest',personRequest.request);
$state.go('organization.requests.personRequestReview',{userId:userId,orgId:organizationId});
};

personRequest.submit=function(){
Loader.onFor('personRequest.submitting');
if(personRequest.packages&&personRequest.packages.length>0){
getApprovalCounts(personRequest.packages);
}
if(personRequest.request.request.approval==='denied'){
//To enter denied Reason
personRequest.reviewApprovals();
// API.cui.denyPersonRegistrationRequest({qs:[['requestId',personRequest.request.request.id],['reason',personRequestReview.request.rejectReason|""]]})
// .then(handleSuccess)
// .fail(handleError)
}else
if(personRequest.deniedCount===0){
API.cui.approvePersonRegistrationRequest({qs:[['requestId',personRequest.request.request.id]]}).
then(handleSuccess).
fail(handleError);
}else
{
//To enter denied Reason
personRequest.reviewApprovals();
// API.cui.approvePersonRequest({qs:[['requestId',personRequest.request.request.registrant.requestId||personRequestReview.request.id]]})
// .then(res => {
//     let packageRequestCalls = []

//     personRequest.packages.forEach(packageRequest => {
//         packageRequestCalls.push(ServicePackage.handlePackageApproval(packageRequest))
//     })

//     $q.all(packageRequestCalls)
//     .then(() => {
//         Loader.offFor('personRequest.submitting')
//         personRequest.success = true
//         $timeout(() => {
//             $state.go('organization.requests.usersRegistrationRequests')
//         }, 3000)  
//     })
//     .catch(err => {
//         console.log("User approval successful but there was an error approving/denying package requests" +err)
//         personRequest.error = true
//         personRequest.errorMessage="app-approval-error"
//     })
// })
// .fail(handleError)
}
};
// ON CLICK END ----------------------------------------------------------------------------------
}]);

angular.module('organization').
controller('personRequestReviewCtrl',['DataStorage', 'Loader', 'PersonRequest', 'ServicePackage', '$q', '$state', '$stateParams', '$timeout', 'API', '$scope', function(DataStorage,Loader,PersonRequest,ServicePackage,$q,$state,$stateParams,$timeout,API,$scope){
'use strict';

var personRequestReview=this;
var userId=$stateParams.userId;
var orgId=$stateParams.orgId;

personRequestReview.success=false;
personRequestReview.approvedCount=0;
personRequestReview.deniedCount=0;

// HELPER FUNCTIONS START ------------------------------------------------------------------------

var getApprovalCounts=function getApprovalCounts(requests){
requests.forEach(function(request){
switch(request.approval){
case'approved':
personRequestReview.approvedCount+=1;
break;
case'denied':
personRequestReview.deniedCount+=1;
break;}

});
};

var handleSuccess=function handleSuccess(res){
Loader.offFor('personRequestReview.submitting');
personRequestReview.success=true;
DataStorage.deleteType('userPersonRequest');
$scope.$digest();
$timeout(function(){
$state.go('organization.requests.usersRegistrationRequests');
},3000);
};

var handleError=function handleError(err){
console.log('There was an error in approving user registration '+err);
Loader.offFor('personRequestReview.submitting');
personRequestReview.error=true;
$scope.$digest();
};
// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

var requestData=DataStorage.getType('userPersonRequest');
if(requestData&&requestData.request.registrant.id===userId){
personRequestReview.packages=requestData.completePackageData;
personRequestReview.personData=requestData.personData;
personRequestReview.organization=requestData.organization;
personRequestReview.request=requestData.request;

if(personRequestReview.packages.length>0){
getApprovalCounts(personRequestReview.packages);
}
}else
{
$state.go('organization.requests.personRequest',{userId:userId,orgId:orgId});
}

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------

personRequestReview.submit=function(){
Loader.onFor('personRequestReview.submitting');

if(personRequestReview.request.approval==='denied'){
API.cui.denyPersonRegistrationRequest({qs:[['requestId',personRequestReview.request.id],['reason',personRequestReview.request.rejectReason|""]]}).
then(handleSuccess).
fail(handleError);
}else
if(personRequestReview.deniedCount===0){
API.cui.approvePersonRegistrationRequest({qs:[['requestId',personRequestReview.request.id]]}).
then(handleSuccess).
fail(handleError);
}else
{
API.cui.approvePersonRequest({qs:[['requestId',personRequestReview.request.registrant.requestId||personRequestReview.request.id]]}).
then(function(res){
var packageRequestCalls=[];

personRequestReview.packages.forEach(function(packageRequest){
packageRequestCalls.push(ServicePackage.handlePackageApproval(packageRequest));
});

$q.all(packageRequestCalls).
then(function(){
Loader.offFor('personRequestReview.submitting');
personRequestReview.success=true;
DataStorage.deleteType('userPersonRequest');
$timeout(function(){
$state.go('organization.requests.usersRegistrationRequests');
},3000);
}).
catch(function(err){
console.log("User approval successful but there was an error approving/denying package requests"+err);
personRequestReview.error=true;
personRequestReview.errorMessage="app-approval-error";
});
}).
fail(handleError);
}
};

// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('organization').
controller('usersAppRequestsCtrl',
['$timeout', '$filter', '$pagination', '$state', '$stateParams', 'API', 'APIError', 'APIHelpers', 'CuiMobileNavFactory', 'Loader', 'User', function($timeout,$filter,$pagination,$state,$stateParams,API,APIError,APIHelpers,CuiMobileNavFactory,Loader,User){

var scopeName='usersAppRequests.';
var usersAppRequests=this;
usersAppRequests.search={};
usersAppRequests.sortBy={};


/* -------------------------------------------- ON LOAD START --------------------------------------------- */

var foundOrgs=[];
var foundPersons=[];
var foundPackages=[];


var init=function init(){
cui.log('init');

usersAppRequests.search['isApprovable']=true;
usersAppRequests.search.pageSize=usersAppRequests.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
var qsArray=APIHelpers.getQs(usersAppRequests.search);

usersAppRequests.data=[];
Loader.onFor(scopeName+'data');
APIError.offFor(scopeName+'data');


var getOrg=function getOrg(orgId){
return $.Deferred(function(dfr){
if(orgId.length){
var cached=_.find(foundOrgs,{id:orgId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getOrganizationSecured({organizationId:orgId}).then(function(org){
foundOrgs.push(org);
//cui.log('org pushed', org, foundOrgs);
dfr.resolve(org);
}).fail(function(err){
cui.log('getOrg error',orgId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPerson=function getPerson(personId){
return $.Deferred(function(dfr){
if(personId.length){
var cached=_.find(foundPersons,{id:personId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPerson({personId:personId}).then(function(person){
foundPersons.push(person);
dfr.resolve(person);
}).fail(function(err){
cui.log('getPerson error',personId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPackage=function getPackage(packageId){
return $.Deferred(function(dfr){
if(packageId.length){
var cached=_.find(foundPackages,{id:packageId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPackage({packageId:packageId}).then(function(pkg){
var p={id:pkg.id,name:pkg.name[0].text};
foundPackages.push(p);
dfr.resolve(p);
}).fail(function(err){
cui.log('getPackage error',packageId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var done=function done(context){
$timeout(function(){
Loader.offFor(scopeName+'data');
cui.log('done',context);
cui.log('data',usersAppRequests.data);

usersAppRequests.reRenderPagination&&usersAppRequests.reRenderPagination();
});
};


API.cui.getPackageRequests({qs:qsArray}).then(function(res){
var calls=[];

_.each(res,function(pkgReq){

// NB create an obj and bind it to scope...
var data={};
usersAppRequests.data.push(data);

// ..then cache the calls, which populate obj asynchronously...
calls.push(
getPerson(pkgReq.requestor.id).then(function(person){
data.personData=person||{};
var pkgId=pkgReq&&pkgReq.servicePackage?pkgReq.servicePackage.id:'';
return getPackage(pkgId);
}).then(function(pkg){
data.packageData=pkg;
var orgId=data.personData&&data.personData.organization?data.personData.organization.id:'';
return getOrg(orgId);
}).then(function(org){
if(!data.personData.organization){
data.personData.organization={};
}
data.personData.organization.name=!_.isEmpty(org)?org.name:'';
return $.Deferred().resolve();
}).fail(function(){
// mute the failures so as not to derail the entire list
return $.Deferred().resolve();
}));

});
return $.Deferred().resolve(calls);
}).then(function(calls){
// do the cached calls
return $.when.apply($,calls);
}).then(function(){
// do the count (used for pagination)
return API.cui.getPackageRequestsCount();
}).then(function(count){
// apply the count
usersAppRequests.userCount=count;
API.user.userAppRequestsCount=count;
return $.Deferred().resolve();
}).fail(function(error){
APIError.onFor(scopeName+'data');
}).always(function(){
CuiMobileNavFactory.setTitle($filter('cuiI18n')('App Requests'));
done('finally');
});
};

init();
/* --------------------------------------------- ON LOAD END ---------------------------------------------- */


/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */
usersAppRequests.sortingCallbacks={
name:function name(){
usersAppRequests.sortBy.sortBy='name';
usersAppRequests.sort(['personData.name.given','personData.name.surname'],usersAppRequests.sortBy.sortType);
},
title:function title(){
usersAppRequests.sortBy.sortBy='title';
usersAppRequests.sort('personData.title',usersAppRequests.sortBy.sortType);
},
submitted:function submitted(){
usersAppRequests.sortBy.sortBy='submitted';
usersAppRequests.sort('personData.creation',usersAppRequests.sortBy.sortType);
},
application:function application(){
usersAppRequests.sortBy.sortBy='application';
usersAppRequests.sort('packageData.name',usersAppRequests.sortBy.sortType);
},
division:function division(){
usersAppRequests.sortBy.sortBy='division';
usersAppRequests.sort('personData.organization.name',usersAppRequests.sortBy.sortType);
}};


usersAppRequests.sort=function(sortBy,order){
cui.log('sort',sortBy,order);
usersAppRequests.data=_.orderBy(usersAppRequests.data,sortBy,order);
};

usersAppRequests.goToDetails=function(request){
if(request.personData&&request.personData.id&&
request.personData.organization&&request.personData.organization.id&&
request.packageData&&request.packageData.id){
$state.go('organization.requests.pendingRequests',{
'userId':request.personData.id,
'orgId':request.personData.organization.id,
'packageId':request.packageData.id});

}else{
cui.log('usersAppRequests goToDetails missing keys',request);
}
};

usersAppRequests.updateSearchParams=function(page){
if(page)usersAppRequests.search.page=page;
$state.transitionTo('organization.requests.usersAppRequests',usersAppRequests.search,{notify:false});
init();
};
/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */

}]);

angular.module('organization').
controller('usersRegistrationRequestsCtrl',
['$timeout', '$filter', '$pagination', '$state', '$stateParams', 'API', 'APIError', 'APIHelpers', 'CuiMobileNavFactory', 'Loader', 'User', '$scope', 'DataStorage', function($timeout,$filter,$pagination,$state,$stateParams,API,APIError,APIHelpers,CuiMobileNavFactory,Loader,User,$scope,DataStorage){

var scopeName='usersRegistrationRequests.';
var usersRegistrationRequests=this;
usersRegistrationRequests.search={};
usersRegistrationRequests.sortBy={};
usersRegistrationRequests.searchByOrg=[];
usersRegistrationRequests.searchByPerson=[];


/* -------------------------------------------- ON LOAD START --------------------------------------------- */
var foundOrgs=[];
var foundPersons=[];
var foundPackages=[];


var init=function init(){
cui.log('init');

usersRegistrationRequests.search.pageSize=usersRegistrationRequests.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
var qsArray=APIHelpers.getQs(usersRegistrationRequests.search);
//cui.log('qsArray', qsArray);
if(usersRegistrationRequests.searchByOrg.length>0){
usersRegistrationRequests.searchByOrg.forEach(function(val){
qsArray.push(['organization.id',val.id]);
});

}else if(usersRegistrationRequests.searchByPerson.length>0){
usersRegistrationRequests.searchByPerson.forEach(function(val){
qsArray.push(['registrant.id',val.id]);
});
}else
{}

usersRegistrationRequests.data=[];
Loader.onFor(scopeName+'data');
APIError.offFor(scopeName+'data');

var getOrg=function getOrg(orgId){
return $.Deferred(function(dfr){
if(orgId.length){
var cached=_.find(foundOrgs,{id:orgId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getOrganizationSecured({organizationId:orgId}).then(function(org){
foundOrgs.push(org);
//cui.log('org pushed', org, foundOrgs);
dfr.resolve(org);
}).fail(function(err){
cui.log('getOrg error',orgId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPerson=function getPerson(personId){
return $.Deferred(function(dfr){
if(personId.length){
var cached=_.find(foundPersons,{id:personId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPerson({personId:personId}).then(function(person){
foundPersons.push(person);
dfr.resolve(person);
}).fail(function(err){
cui.log('getPerson error',personId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var getPackage=function getPackage(packageId){
return $.Deferred(function(dfr){
if(packageId.length){
var cached=_.find(foundPackages,{id:packageId});
if(cached){
dfr.resolve(cached);
}else{
API.cui.getPackage({packageId:packageId}).then(function(pkg){
var p={id:pkg.id,name:pkg.name[0].text};
foundPackages.push(p);
dfr.resolve(p);
}).fail(function(err){
cui.log('getPackage error',packageId,err);
dfr.resolve({});
});
}
}else{
dfr.resolve({});
}
});
};

var done=function done(context){
$timeout(function(){
Loader.offFor(scopeName+'data');
cui.log('done',context);
cui.log('data',usersRegistrationRequests.data);

usersRegistrationRequests.reRenderPagination&&usersRegistrationRequests.reRenderPagination();
});
};

var start=window.performance.now();
var end;
API.cui.getRegistrationRequests({qs:qsArray}).then(function(res){
var calls=[];

_.each(res,function(regReq){
// NB create an obj and bind it to scope...
var data={};
data.request=regReq;
usersRegistrationRequests.data.push(data);

// ..then cache the calls, which populate obj asynchronously...
calls.push(
getPerson(regReq.registrant.id).
then(function(person){
data.personData=person||{};
var pkgId=!_.isEmpty(regReq.packages)?regReq.packages[0].id:'';
return getPackage(pkgId);
}).
then(function(pkg){
data.packageData=pkg;
console.log(data.personData.organization.id);
var orgId=data.personData&&data.personData.organization?data.personData.organization.id:'';
return getOrg(orgId);
}).
then(function(org){
if(!data.personData.organization){
data.personData.organization={};
}
data.personData.organization.name=!_.isEmpty(org)?org.name:'';
data.organization={
id:org.id,
name:org.name};

return $.Deferred().resolve();
}).fail(function(){
// mute the failures so as not to derail the entire list
return $.Deferred().resolve();
}));

});
return $.Deferred().resolve(calls);
}).then(function(calls){
// do the cached calls
return $.when.apply($,calls);
}).then(function(){
// do the count (used for pagination)
return API.cui.getRegistrationRequestsCount();
}).then(function(count){
// apply the count
usersRegistrationRequests.userCount=count;
API.user.userRegistrationRequestsCount=count;
return $.Deferred().resolve();
}).fail(function(error){
APIError.onFor(scopeName+'data');
}).always(function(){
CuiMobileNavFactory.setTitle($filter('cuiI18n')('Registration Requests'));
done('finally');
var end=window.performance.now();
var time=end-start;
cui.log('time',time);
});
};

init();
/* --------------------------------------------- ON LOAD END ---------------------------------------------- */


/* --------------------------------------- ON CLICK FUNCTIONS START --------------------------------------- */
usersRegistrationRequests.sortingCallbacks={
name:function name(){
usersRegistrationRequests.sortBy.sortBy='name';
usersRegistrationRequests.sort(['personData.name.given','personData.name.surname'],usersRegistrationRequests.sortBy.sortType);
},
title:function title(){
usersRegistrationRequests.sortBy.sortBy='title';
usersRegistrationRequests.sort('personData.title',usersRegistrationRequests.sortBy.sortType);
},
submitted:function submitted(){
usersRegistrationRequests.sortBy.sortBy='submitted';
usersRegistrationRequests.sort('personData.creation',usersRegistrationRequests.sortBy.sortType);
},
application:function application(){
usersRegistrationRequests.sortBy.sortBy='application';
usersRegistrationRequests.sort('packageData.name',usersRegistrationRequests.sortBy.sortType);
},
division:function division(){
usersRegistrationRequests.sortBy.sortBy='division';
usersRegistrationRequests.sort('personData.organization.name',usersRegistrationRequests.sortBy.sortType);
}};


usersRegistrationRequests.sort=function(sortBy,order){
cui.log('sort',sortBy,order);
usersRegistrationRequests.data=_.orderBy(usersRegistrationRequests.data,sortBy,order);
};


usersRegistrationRequests.goToDetails=function(request){
if(request.personData&&request.personData.id&&
request.personData.organization&&request.personData.organization.id){
DataStorage.setType('userPersonRequest',{personData:request.personData,organization:request.organization,request:request.request,packageData:request.packageData});
$state.go('organization.requests.personRequest',{
'userId':request.personData.id,
'orgId':request.personData.organization.id});

}else{
cui.log('usersRegistrationRequests goToDetails missing keys',request);
}
};

usersRegistrationRequests.updateSearchParams=function(page){
//cui.log('updateSearchParams', page);
if(page)usersRegistrationRequests.search.page=page;
// WHY transition to this same route? if setting notify:false? what is the purpose? just to add an item to history?
$state.transitionTo('organization.requests.usersRegistrationRequests',usersRegistrationRequests.search,{notify:false});
init();
};
/* ---------------------------------------- ON CLICK FUNCTIONS END ---------------------------------------- */
usersRegistrationRequests.searchBy='person';
usersRegistrationRequests.updateSearchByName=function(){
//console.log(usersRegistrationRequests.searchBy)
if(usersRegistrationRequests.searchBy==='org'&&usersRegistrationRequests.searchValue){
Loader.onFor(scopeName+'data');
APIError.offFor(scopeName+'data');
usersRegistrationRequests.searchByOrg=[];
API.cui.getOrganizations({qs:[['name',usersRegistrationRequests.searchValue+'*']]}).
then(function(res){
console.log(res);
usersRegistrationRequests.searchByOrg=res;
Loader.offFor(scopeName+'data');
if(res.length>0){
$state.transitionTo('organization.requests.usersRegistrationRequests',usersRegistrationRequests.searchByOrg,{notify:false});
init();
}else{
usersRegistrationRequests.data=[];
$scope.$apply();
}
}).
fail(function(err){
console.log(err);
});
}else if(usersRegistrationRequests.searchBy==='person'&&usersRegistrationRequests.searchValue){
Loader.onFor(scopeName+'data');
APIError.offFor(scopeName+'data');
usersRegistrationRequests.searchByPerson=[];
API.cui.getPersons({qs:[['fullName',usersRegistrationRequests.searchValue]]}).
then(function(res){
console.log(res);
usersRegistrationRequests.searchByPerson=res;
Loader.offFor(scopeName+'data');
if(res.length>0){
$state.transitionTo('organization.requests.usersRegistrationRequests',usersRegistrationRequests.searchByPerson,{notify:false});
init();
}else{
usersRegistrationRequests.data=[];
$scope.$apply();
}
}).
fail(function(err){
console.log(err);
});
}else{
usersRegistrationRequests.searchByOrg=[];
usersRegistrationRequests.searchByPerson=[];
$state.transitionTo('organization.requests.usersRegistrationRequests',{notify:false});
init();
}
/*return undefined*/
};

}]);

angular.module('organization').
controller('orgRolesCtrl',['$scope', function($scope){
'use strict';

var orgRoles=this;

// HELPER FUNCTIONS START ------------------------------------------------------------------------

var handleError=function handleError(err){
orgRoles.loading=false;
$scope.$digest();
console.log('Error',err);
};

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------
// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK START --------------------------------------------------------------------------------
// ON CLICK END ----------------------------------------------------------------------------------

}]);

angular.module('misc',[]).
config(['$stateProvider',function($stateProvider){

var templateBase='app/modules/misc/';

var returnCtrlAs=function returnCtrlAs(name,asPrefix){
return name+'Ctrl as '+(asPrefix?asPrefix:'')+(asPrefix?name[0].toUpperCase()+name.slice(1,name.length):name);
};

var loginRequired=true;
$stateProvider.
state('welcome',{
url:'/welcome',
templateUrl:templateBase+'welcome/welcome.html'}).

state('search',{
url:'/search?page&pageSize',
templateUrl:templateBase+'search/search.html',
controller:returnCtrlAs('search'),
access:{
permittedLogic:appConfig.globalSearch}}).


state('misc',{
url:'/status',
templateUrl:templateBase+'status/status.html'}).

state('misc.404',{
url:'/404',
templateUrl:templateBase+'status/status-404.html'}).

state('misc.notAuth',{
url:'/notAuthorized',
templateUrl:templateBase+'status/status-notAuth.html'}).

state('misc.pendingStatus',{
url:'/pendingStatus',
templateUrl:templateBase+'status/status-pendingStatus.html'}).

state('misc.success',{
url:'/success',
templateUrl:templateBase+'status/status-success.html'}).

state('misc.loadError',{
url:'/error',
templateUrl:templateBase+'status/status-loadError.html'});


}]);

angular.module('misc').
controller('searchCtrl',['API','$scope','$stateParams','$state','$q','$pagination','APIHelpers','Loader','APIError','Base',
function(API,$scope,$stateParams,$state,$q,$pagination,APIHelpers,Loader,APIError,Base){
var search=this;
search.currentParentOrg=API.user.organization.id;

search.users=null;
search.timer=null;
search.searchType="organizations";
search.searchOrgId="";
search.searchterms="";
search.count=1000;
search.pageError=false;

// search.keypress = function() {
//     search.users = [];
//     if (search.timer) { clearTimeout(search.timer); }
//     search.timer = window.setTimeout(function() {
//         search.searchNow();
//     }, 200);
// }

/* -------------------------------------------- HELPER FUNCTIONS END --------------------------------------------- */

search.flattenOrgHierarchy=function(orgHierarchy){
/*
                Takes the organization hierarchy response and returns a flat object array containing the id's and name's of
                the top level organization as well as it's divisions.
            */

if(orgHierarchy){
var organizationArray=[];

organizationArray.push({
id:orgHierarchy.id,
name:orgHierarchy.name});


if(orgHierarchy.children){
orgHierarchy.children.forEach(function(division){
organizationArray.push({
id:division.id,
name:division.name});


if(division.children){
var flatArray=_.flatten(division.children);

flatArray.forEach(function(childDivision){
organizationArray.push({
id:childDivision.id,
name:childDivision.name});

});
}
});
}
return organizationArray;
}else{
throw new Error('No organization hierarchy object provided');
}
};

search.addPerson=function(newPerson){

// Prevent Duplicates
var add=true;
search.users.forEach(function(person){
if(newPerson.id==person.id){add=false;}
});

if(newPerson.status=='pending'){add=false;}
if(add){search.users.push(newPerson);}

};

search.searchNow=function(searchOrPage){
search.pageError=false;
if(searchOrPage){
search.searchParams.page=1;
}
Loader.onFor('search.loading');
search.users=[];
search.orgs=[];
var qsArray=APIHelpers.getQs(search.searchParams);
//Need to filter out pending and unactive
qsArray.push(['status','active'],['status','suspended']);
// if (search.searchterms|| !type) {

if(search.searchType=="people"){
var qsArrayNameSearch=angular.copy(qsArray);
qsArrayNameSearch.push(['fullName',search.searchterms],['status','locked']);
var promises=[API.cui.countPersons({qs:qsArrayNameSearch}),API.cui.getPersons({qs:qsArrayNameSearch})];
$q.all(promises).
then(function(res){
search.personCount=res[0];
search.users=res[1];
if(search.users.length===0){
search.noRecords=true;
}
Loader.offFor('search.loading');
}).
catch(function(error){
Loader.offFor('search.loading');
search.pageError=true;
});
//     qsArray.push(['email', search.searchterms])
// API.cui.getPersons({
//         qs: qsArray
//     })
//     .done(personResponse => {

//         personResponse.forEach(function(x) {
//             search.addPerson(x);
//         })

//         $scope.$digest()
//     })
//     .fail(error => {

//     })

}
if(search.searchType=="organizations"){
qsArray.push(['name',search.searchterms+"*"]);
API.cui.getOrganizations({qs:qsArray}).
done(function(orgsResponse){
search.orgs=orgsResponse;
if(search.orgs.length===0){
search.noRecords=true;
}
}).
fail(function(error){
search.pageError=true;
}).
always(handleAll);
}
// }
};

var handleAll=function handleAll(){
Loader.offFor('search.loading');
$scope.$digest();
};

/* -------------------------------------------- HELPER FUNCTIONS END --------------------------------------------- */

/* -------------------------------------------- ON LOAD START --------------------------------------------- */
search.searchParams=Object.assign({},$stateParams);
search.searchParams.pageSize=search.searchParams.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
if(!search.searchParams.page){
search.searchParams.page=1;
}
search.sortBy={};
search.organizationList=null;
// API.cui.getOrganizationsCount({qs:APIHelpers.getQs(search.searchParams)})
// .then(count=>{
//     search.orgCount=count
//     return API.cui.getOrganizations({qs:APIHelpers.getQs(search.searchParams)})
// })
// Authorization for org serach and user search
if(Base.accessToSecurityAndExchangeAdmins()){
search.searchNow(true);
}else
{
search.searchType="people";
search.searchNow(true);
}

/* -------------------------------------------- ON LOAD END --------------------------------------------- */

/* -------------------------------------------- ON CLICK FUNCTIONS START --------------------------------------------- */
search.updateSearchParams=function(page){
if(page){
search.searchParams.page=page;
}
$state.transitionTo('search',search.searchParams,{notify:false});
search.searchNow();
};

search.userClick=function(clickedUser){

var stateOpts={
userId:clickedUser.id,
orgId:clickedUser.organization.id};

if(clickedUser.status==='pending')$state.go('organization.requests.personRequest',stateOpts);else
$state.go('organization.directory.userDetails',stateOpts);

};

search.orgClick=function(clickedOrd){
var stateOpts={
orgId:clickedOrd.id};

$state.go('organization.directory.orgDetails',stateOpts);
};

/* -------------------------------------------- ON CLICK FUNCTIONS END --------------------------------------------- */
}]);

angular.module('common',['translate','ngMessages','cui.authorization','cui-ng','ui.router','snap','LocalStorageModule']).
config(['$translateProvider', '$locationProvider', '$urlRouterProvider', '$injector', 'localStorageServiceProvider', '$cuiIconProvider', '$cuiI18nProvider', '$paginationProvider', '$stateProvider', '$compileProvider', '$cuiResizeHandlerProvider', function($translateProvider,$locationProvider,$urlRouterProvider,$injector,
localStorageServiceProvider,$cuiIconProvider,$cuiI18nProvider,$paginationProvider,
$stateProvider,$compileProvider,$cuiResizeHandlerProvider){

$urlRouterProvider.rule(function($injector,$location){
var path=$location.path();
var hasTrailingSlash=path[path.length-1]==='/';

if(hasTrailingSlash){
var newPath=path.substr(0,path.length-1);
return newPath;
}
});

localStorageServiceProvider.setPrefix('cui');
// $locationProvider.html5Mode(true);

var templateBase='app/modules/common/';

var returnCtrlAs=function returnCtrlAs(name,asPrefix){return name+'Ctrl as '+(asPrefix||'')+(asPrefix?name[0].toUpperCase()+name.slice(1,name.length):name);};

$stateProvider.
state('auth',{
url:'/auth?xsrfToken&cuid',
controller:returnCtrlAs('auth'),
templateUrl:templateBase+'auth/auth.html',
access:true});


if(appConfig.languages){
if(!appConfig.languageResources){
console.error('You need to configure languageResources in your appConfig.json.');
}

/*
        *   This section will dynamically generate the correct path to versioned i18n assets 
        *   based off of current i18n version in use in the project.
        *
        *   This requires a proper appConfig.json setup. Please refer to the documentation in
        *   ./docs/features/cui-framework/cui-i18n.md for information on how to setup the appConfig.
        *
        *   Note: Grunt tasks will not automatically work with all of the possible setups of i18n assets.
        */

if(appConfig.languageResources.hasOwnProperty('customDependencyName')){
// Loading in custom i18n project
var customDependency=appConfig.languageResources.customDependencyName;
var dependencyType=appConfig.languageResources.dependencyType||'dependencies';
var customDependencyVersion=packageJson[dependencyType][customDependency].split('#v')[1];
appConfig.languageResources.url=appConfig.languageResources.url.replace(/\{\{(.*?)\}\}/,customDependencyVersion);
}else
if(appConfig.languageResources.hasOwnProperty('dependencyOrigin')&&appConfig.languageResources.dependencyOrigin==='cui-idm-b2x'){
// Loading in i18n dependency through B2X (generator projects)
appConfig.languageResources.url=appConfig.languageResources.url.replace(/\{\{(.*?)\}\}/,i18nPackageJson.version);
}else
{
// Loading in standalone cui-i18n dependency
var _dependencyType=appConfig.languageResources.dependencyType||'dependencies';
appConfig.languageResources.url=appConfig.languageResources.url.replace(/\{\{(.*?)\}\}/,packageJson[_dependencyType]['@covisint/cui-i18n']);
}

$cuiI18nProvider.setLocaleCodesAndNames(appConfig.languages);
var languageKeys=Object.keys($cuiI18nProvider.getLocaleCodesAndNames());

var returnRegisterAvailableLanguageKeys=function returnRegisterAvailableLanguageKeys(){
// Reroute unknown language to prefered language
var object={'*':languageKeys[0]};
languageKeys.forEach(function(languageKey){
// Redirect language keys such as en_US to en
object[languageKey+'*']=languageKey;
});
return object;
};

$translateProvider.useLoader('LocaleLoader',appConfig.languageResources).
registerAvailableLanguageKeys(languageKeys,returnRegisterAvailableLanguageKeys()).
uniformLanguageTag('java').
determinePreferredLanguage().
fallbackLanguage(languageKeys);

$cuiI18nProvider.setLocalePreference(languageKeys);
}

if(appConfig.iconSets){
appConfig.iconSets.forEach(function(iconSet){
$cuiIconProvider.iconSet(iconSet.name,iconSet.path,iconSet.defaultViewBox||null);
});
}

// Pagination Results Per Page Options
if(appConfig.paginationOptions){
$paginationProvider.setPaginationOptions(appConfig.paginationOptions);
}else
{
throw new Error('You don\'t have paginationOptions set in your appConfig.json');
}

// Cui Resize Handler Breakpoint Option
if(appConfig.breakpointOption){
$cuiResizeHandlerProvider.setBreakpoint(appConfig.breakpointOption);
}else{
throw new Error('You don\'t have breakpointOption set in your appConfig.json');
}

$compileProvider.debugInfoEnabled(false);

}]);

angular.module('common').
run(['LocaleService','$rootScope','$state','$http','$templateCache','$cuiI18n','User',
'cui.authorization.routing','cui.authorization.evalRouteRequest','Menu','API','$cuiIcon','$timeout','PubSub','APIError','Loader','Theme','CuiRouteHistoryFactory',
function(LocaleService,$rootScope,$state,$http,$templateCache,$cuiI18n,User,routing,evalRouteRequest,Menu,API,$cuiIcon,$timeout,PubSub,APIError,Loader,Theme,CuiRouteHistoryFactory){

if(window.cuiApiInterceptor){
var cuiApiInterceptorConfig={
apiUris:[appConfig.serviceUrl],
stopIfInvalidPayload:true};


if(appConfig.debugServiceUrl){
cuiApiInterceptorConfig.apiUris.push(appConfig.debugServiceUrl);
}

var interceptors=[
'Get',
'PrePut',
'PrePost',
'PostPut',
'PostPost'];


interceptors.forEach(function(interceptor){return window.cuiApiInterceptor['start'+interceptor+'Interceptor'](cuiApiInterceptorConfig);});
}

// Add locales here
var languageNameObject=$cuiI18n.getLocaleCodesAndNames();

for(var LanguageKey in languageNameObject){
LocaleService.setLocales(LanguageKey,languageNameObject[LanguageKey]);
}

$rootScope.$on('$stateChangeStart',function(event,toState,toParams,fromState,fromParams){
Theme.clear();
APIError.clearAll();
Loader.clearAll();
event.preventDefault();

function attachAccessInfo(toState){
if(toState.access){
if(!_.isObject(toState.access)){
toState.access={};
}
toState.access.roles=User.getRoles();
toState.access.entitlements=User.getEntitlements();
}else{
toState.access={};
}
}

function go(toState,toParams,fromState,fromParams){
// NB... detailed access logic is evaluated upstream, in cui.authorization.evalRouteRequest...
attachAccessInfo(toState);
evalRouteRequest(toState,toParams,fromState,fromParams,'misc.notAuth');
PubSub.publish('stateChange',{toState:toState,toParams:toParams,fromState:fromState,fromParams:fromParams});
Menu.handleStateChange(toState.menu);
}

var route=function route(){
if(appConfig.debugServiceUrl){
/**
                    appConfig.debugServiceUrl can be pointed at a localhost server to act as a mock API.
                        Ex: 'debugServiceUrl': 'http://localhost:8001'
                    mock api server source code 
                        https://github.com/thirdwavellc/cui-api-mock
                    NB this workaround is not calling new evalRouteRequest() logic.
                **/
var userInfo={};
API.cui.getPerson({personId:'personId'}).
then(function(res){
userInfo=res;
return API.cui.getOrganization({organizationId:res.organization.id});
}).
then(function(res){
userInfo.organization=res;
API.setUser(userInfo);
});
routing(toState,toParams,fromState,fromParams,[]);
PubSub.publish('stateChange',{toState:toState,toParams:toParams,fromState:fromState,fromParams:fromParams});// this is required to make the ui-sref-active-nested directive work
Menu.handleStateChange(toState.menu);
}else
{
/* deprecated...
                if (!toState.access || !toState.access.loginRequired) {
                    Menu.handleStateChange(toState.menu);
                    routing(toState, toParams, fromState, fromParams, User.getEntitlements());
                    PubSub.publish('stateChange',{ toState,toParams,fromState,fromParams }); // this is required to make the ui-sref-active-nested directive work with a multi-module approach
                    return;
                }
                else if (User.get() !== '[cuid]') {
                    routing(toState, toParams, fromState, fromParams, User.getEntitlements());
                    PubSub.publish('stateChange',{ toState, toParams, fromState, fromParams });
                    Menu.handleStateChange(toState.menu);
                }
                else {
                    API.authenticateUser({ toState,toParams,fromState,fromParams })
                    .then((res) => {
                        const { toState, toParams, fromState, fromParams } = res.redirect;
                        // Determine if user is able to access the particular route we're navigating to
                        routing(toState, toParams, fromState, fromParams, res.roleList);
                        PubSub.publish('stateChange',{ toState, toParams, fromState, fromParams }); // this is required to make the ui-sref-active-nested directive work with a multi-module approach
                        // Menu handling
                        Menu.handleStateChange(res.redirect.toState.menu);
                    });
                }
                */
if(!toState.access||User.get()!=='[cuid]'){
// ...route needs no User info... or ...route needs User and we have User info...
cui.log('stateChangeStart2',toState,toParams);
go(toState,toParams,fromState,fromParams);
}else{
// ..route needs (loggedIn) User and we need User info...
API.authenticateUser({toState:toState,toParams:toParams,fromState:fromState,fromParams:fromParams}).then(function(res){
cui.log('stateChangeStart3',res.redirect.toState,res.redirect.toParams);
go(res.redirect.toState,res.redirect.toParams,res.redirect.fromState,res.redirect.fromParams);
});
}
}
};

if(_.isEmpty(API.cui)){
// async load API.cui
API.initApi().then(function(){
route();
});
}else{
route();
}
});

// $state.stateStack is a stack of states used by base.goBack()
$state.stateStack=[];

$rootScope.$on('$stateChangeSuccess',function(e,_ref13){var toState=_ref13.toState,toParams=_ref13.toParams,fromState=_ref13.fromState,fromParams=_ref13.fromParams;
// For base.goBack()
$state.stateStack.push({
name:fromState.name,
params:fromParams||{}});


// routeHistory POC
var routeTextArray=toState.name.split('.');
CuiRouteHistoryFactory.add({
text:routeTextArray[routeTextArray.length-1],
uiroute:toState.name,
uirouteparams:toParams});


cui.log('on $stateChangeSuccess',toState,toParams,fromState,fromParams,$state.stateStack);
});

angular.forEach($cuiIcon.getIconSets(),function(iconSettings,namespace){
$http.get(iconSettings.path,{
cache:$templateCache});

});

}]);

angular.module('common').
controller('authCtrl',['$state',function($state){
$state.go('welcome');
}]);

angular.module('common').
controller('baseCtrl',['Base', '$scope', function(Base,$scope){

$scope.base=Base;
$scope.base.pendingNotificationFlag=false;
}]).

filter('capitalize',function(){
return function(input){
return!!input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():'';
};
}).

filter('capitalize',function(){
return function(input){
return!!input?input.charAt(0).toUpperCase()+input.substr(1).toLowerCase():'';
};
});

angular.module('common').
directive('disableAnimate',['$animate', function($animate){return{

/*
		Use this directive to disable the animation window that is introduced by ng-animate.
		Add the 'disable-animate' attribute to an element you need to disable ng-animate on.

		Example: 	<p disable-animate> Element you need to disable ng-animate on. </p>
	*/

restrict:'A',
link:function link(attrs,elem){
$animate.enabled(elem,false);
}};}]);


angular.module('common').
factory('CuiMobileNavFactory',['PubSub', 'User', '$filter', function(PubSub,User,$filter){
return{
title:User.user.organization.name,
defaultTitle:User.user.organization.name,
getTitle:function getTitle(){
return this.title;
},
setTitle:function setTitle(newTitle){
this.title=newTitle;
PubSub.publish('mobileNavTitleChange');
},
getDefaultTitle:function getDefaultTitle(){
return this.defaultTitle;
},
setDefaultTitle:function setDefaultTitle(newDefaultTitle){
this.defaultTitle=newDefaultTitle;
}};

}]).
directive('cuiMobileNav',['CuiMobileNavFactory', 'PubSub', '$state', function(CuiMobileNavFactory,PubSub,$state){return{
restrict:'E',
scope:{
showIf:'=',
links:'=',
activeTitle:'@activeTitle',
label:'=?'},

link:function link(scope,elem,attrs){
// attrs.activeTitle ? scope.activeTitle = attrs.activeTitle : scope.activeTitle = CuiMobileNavFactory.getDefaultTitle()
scope.currentState=$state.current.name;

scope.close=function(){return scope.showIf=false;};
scope.toggle=function(){return scope.showIf=!scope.showIf;};

var pubSubSubscription=PubSub.subscribe('mobileNavTitleChange',function(){
// scope.activeTitle = CuiMobileNavFactory.getTitle()
});

scope.$on('$destroy',function(){
PubSub.unsubscribe(pubSubSubscription);
});
},
template:'\n        <nav class="cui-breadcrumb--mobile" id="breadcrumb-button" aria-hidden="true" ng-click="toggle()" off-click="close()">\n            <ul class="cui-breadcrumb__links">\n                <li class="cui-breadcrumb__link cui-breadcrumb__link--current">\n                    <span class="cui-breadcrumb__mobile-link" ng-if="links[currentState]" class="active"><span class="cui-mobile-only" ng-if="activeTitle">{{activeTitle}}.</span>{{links[currentState].label}}</span>\n                    <span class="cui-breadcrumb__mobile-link" ng-if="!links[currentState]" class="active"><span class="cui-mobile-only" ng-if="activeTitle">{{activeTitle}}.</span>{{label}}</span>\n                </li>\n                <div class="cui-popover cui-popover--menu cui-breadcrumb__popover cui-popover--top cui-popover__categories-popover" tether target="#breadcrumb-button" attachment="top left" target-attachment="bottom left" offset="-10px 0" ng-if="showIf">\n                    <li class="cui-breadcrumb__link cui-popover__row" ng-repeat="(state, stateDetails) in links" ng-if="currentState!==state">\n                        <a class="cui-breadcrumb__mobile-link" ui-sref="{{state}}(stateDetails.stateParams)">{{stateDetails.label}}</a>\n                    </li>\n                </div>\n            </ul>\n        </nav>\n    '};}]);
















/*
TODO
    -strategically handle jumps?
        - best bet is to just display last 3 routes in markup
*/

angular.module('common').
factory('CuiRouteHistoryFactory',function(){
var routes=[];
/*
        route: {
            text: '',
            uiroute: '',
            uirouteparams: ''
        }
    */
return{
add:function add(route){
routes.push(route);
return;
},
remove:function remove(route){
_.remove(routes,{text:route.text});
return;
},
truncate:function truncate(route){
// Remove everything that follows route
var idx=routes.indexOf(route);
cui.log('truncate before',routes,route,idx);
if(idx!==-1){
routes=routes.slice(0,idx);
}
cui.log('truncate after',routes);
return;
},
clear:function clear(){
routes=[];
return;
},
get:function get(){
return routes;
}};

}).
directive('cuiRouteHistory',['CuiRouteHistoryFactory', '$state', function(CuiRouteHistoryFactory,$state){return{
restrict:'E',
link:function link(scope,elem,attrs){
//scope.currentState = $state.current.name;
scope.routes=CuiRouteHistoryFactory.get();
scope.go=function(route){
if(route.uiroute&&route.uiroute!==$state.current.name){
CuiRouteHistoryFactory.truncate(route);
if(route.uirouteparams){
$state.go(route.uiroute,route.uirouteparams);
}else{
$state.go(route.uiroute);
}
}
};
},
template:'\n        <nav class="cui-breadcrumb">\n            <ul class="cui-breadcrumb__links">\n              <li class="cui-breadcrumb__link" ng-repeat="route in routes | limitTo:-3">\n                <span ng-class="{\'cui-breadcrumb__route\':!$last, \'cui-breadcrumb__routelast\':$last}" ng-click="go(route)">{{route.text}}</span>\n              </li>\n            </ul>\n        </nav>\n    '








//            <a ng-if="route.uiroute !== null" ui-sref="{{route.uiroute}}">{{route.text}}</a>
};}]);

angular.module('common').
directive('cuiSuccessPane',['$state', '$timeout', function($state,$timeout){return{

/*****
		--- Usage ---

        <cui-success-pane show-if="scope.variable" close-after="5000" on-close="scope.functionName()">
      		<p class="cui-modal__secondary-message">This is extra content</p>
      		<p class="cui-modal__secondary-message">{{scope.object.name}}</p>
    	</cui-success-pane>

        --- Optional Paramaters ---

            close-after - specify how long before the success pane automatically closes
                        - if timer is not specified, the pane will stay open until clicked

            on-close    - specify what scope function to fire when the modal closes
	*****/

restrict:'E',
transclude:true,
scope:{
showIf:'=',
closeAfter:'=',
onClose:'&'},

link:function link(scope){
scope.close=function(){
scope.showIf=!scope.showIf;
};

if(scope.closeAfter){
$timeout(function(){
if(scope.onClose){
scope.onClose()&&scope.onClose()();
}
scope.close();
},scope.closeAfter);
}
},
template:'\n        <div class="cui-modal" ng-if="showIf" ng-click="close()">\n            <div class="cui-modal__pane">\n                <div class="cui-modal__icon">\n                    <cui-icon cui-svg-icon="cui:check-with-border" class="cui-modal__icon"></cui-icon>\n                </div>\n                <span class="cui-modal__primary-message">{{\'cui-success\' | translate}}</span>\n                <ng-transclude></ng-transclude>\n            </div>\n        </div>\n    '};}]);












angular.module('common').
directive('unique',['$parse',function($parse){
return{
restrict:'A',
require:'ngModel',
link:function link(scope,element,attrs,ctrl){
var checkIfUnique=function checkIfUnique(values){
ctrl.$setValidity('unique',values[0]!==(values[1]||''));
};

scope.$watch(function(){return[scope.$eval(attrs.unique),ctrl.$viewValue];},checkIfUnique,function(newValues,oldValues){return angular.equals(newValues,oldValues);});
}};

}]);
angular.module('common').
factory('API',['Base', 'CustomAPI', 'Loader', 'localStorageService', 'User', '$location', '$q', '$timeout', '$window', 'LocaleService', function(Base,CustomAPI,Loader,localStorageService,User,$location,$q,$timeout,$window,LocaleService){

var authInfo={};
var myCUI={};

Base.authInfo=authInfo;

var populateUserInfo=function populateUserInfo(info,redirectOpts){
var deferred=$q.defer();
var userInfo=void 0,roleList=void 0,entitlementList=void 0;
authInfo=info;
User.set(info);

$q.all([
myCUI.getPersonRoles({personId:authInfo.cuid}),
myCUI.getPersonEntitlements({personId:authInfo.cuid}),
myCUI.getPerson({personId:authInfo.cuid})]).

then(function(res){
roleList=res[0].map(function(x){return x.name;});
User.setRoles(roleList);

entitlementList=res[1].map(function(x){return x.privilegeName;});
User.setEntitlements(entitlementList);

userInfo=res[2];
LocaleService.setLocaleByDisplayName(appConfig.languages[userInfo.language]);
return myCUI.getOrganizationWithAttributes({organizationId:res[2].organization.id});
}).
then(function(res){
userInfo.organization=res;
User.set(userInfo);
//cui.log('populateUserInfo', User);
//get user notification related information  as lazy loading,
// No need to hold entire UI apps for this loading.
getNotificationDetails(userInfo);
deferred.resolve({roleList:roleList,redirect:redirectOpts});
});

return deferred.promise;
};

var getNotificationDetails=function getNotificationDetails(userInfo){
if(!Base.canGrantAppToUser()){
myCUI.getPersonPendingApps({personId:userInfo.id}).
then(function(res){
userInfo.pendingApps=res.map(function(x){return x.name;});
User.set(userInfo);
});
}else
{
$q.all([
myCUI.getRegistrationRequestsCount(),
myCUI.getPackageRequestsCount(),
myCUI.getOrgRegistrationRequestsCount(),
myCUI.getPackageRequestsCount({qs:[['requestor.id',userInfo.organization.id],['requestor.type','organization']]})]).

then(function(res){
userInfo.userRegistrationRequestsCount=res[0];
userInfo.userAppRequestsCount=res[1];
userInfo.orgRegistrationRequestsCount=res[2];
userInfo.orgAppRequestsCount=res[3];
userInfo.totalCount=res[0]+res[1]+res[2]+res[3];
User.set(userInfo);
});
}

};
var jwtAuthHandler=function jwtAuthHandler(){
return myCUI.covAuth({
originUri:appConfig.originUri,
authRedirect:window.location.href.split('#')[0]+'#/auth',
appRedirect:$location.path()});

};

var initApi=function initApi(){
var deferred=$q.defer();
Loader.onFor('wholeApp','custom-api-loading');
cui.api({
retryUnseured:true,
envDefs:['https://cuijs.run.covisintrnd.com/defs/env.json'],
dataCallDefs:[
'https://cuijs.run.covisintrnd.com/defs/auth.json',
'app/json/idm-call-defs.json',
CustomAPI]}).


then(function(cuiObject){
if(appConfig.logoutUrl){
Base.logout=function(){
myCUI.covLogout({
redirect:appConfig.logoutUrl,
qs:[['type','logout']]});

};
}else
Base.logout=cuiObject.covLogout;
angular.copy(cuiObject,myCUI);
myCUI.setAuthHandler(jwtAuthHandler);
// overwrite the service url to get the solution instance id
appConfig.solutionInstancesUrl&&myCUI.setServiceUrl(appConfig.solutionInstancesUrl);
return myCUI.covAuthInfo({originUri:appConfig.originUri});
}).
then(function(){
// reset the service url
appConfig.debugServiceUrl?
myCUI.setServiceUrl(appConfig.debugServiceUrl):
myCUI.setServiceUrl(appConfig.serviceUrl);
$timeout(function(){return Loader.offFor('wholeApp');},50);
deferred.resolve();
});
return deferred.promise;
};

var apiFactory={
cui:myCUI,
getUser:User.get,
setUser:User.set,
setPersonData:User.setPersonData,
getPersonData:User.getPersonData,
user:User.user,
initApi:initApi,
authenticateUser:function authenticateUser(redirectOpts){
var deferred=$q.defer();
var sessionInfo=myCUI.getCovAuthInfo();

if(redirectOpts.toState.name!=='auth'){
localStorageService.set('appRedirect',redirectOpts);// set the redirect to whatever the last state before auth was
Loader.onFor('wholeApp','redirecting-to-sso');// don't need to turn this loader off since covAuth takes us to another page
appConfig.solutionInstancesUrl&&myCUI.setServiceUrl(appConfig.solutionInstancesUrl);
jwtAuthHandler();// force redirect to SSO
}else
{
Loader.onFor('wholeApp','getting-user-info');
myCUI.handleCovAuthResponse({selfRedirect:true}).
then(function(res){
populateUserInfo(res,localStorageService.get('appRedirect')).
then(function(res){
deferred.resolve(res);
$timeout(function(){return Loader.offFor('wholeApp');},50);
});
});
}
return deferred.promise;
},
setAuthInfo:function setAuthInfo(newAuthInfo){
angular.copy(newAuthInfo[0],authInfo);
},
authInfo:authInfo};


return apiFactory;

}]);

angular.module('common').
factory('APIError',['SharedService', function(SharedService){
var APIError=Object.create(SharedService);
APIError.details=Object.assign({},APIError.details);
APIError.for=APIError.details;
return APIError;
}]);
angular.module('common').
factory('APIHelpers',['API', '$filter', function(API,$filter){
'use strict';

var apiHelpers={

getQs:function getQs(opts){
/**
                return a qs array from an object of key value pairs
                where the key is the search param and the value is the search value (accepts undefined values)
            **/

return Object.keys(_(opts).omitBy(_.isUndefined).value()).
reduce(function(query,param){
return query.concat([[param,opts[param]]]);
},[]);
},

buildPackageRequests:function buildPackageRequests(arrayOfApps){
/**
                returns an array of API package request promises
                based on an array of apps that we want to request

                the reason for the request should be under app._reason
                if it does not have a reason and the service package
                for that app requires one, we return undefined and
                attach an _error property (app._error = true) on that app
            **/

var numberOfApps=arrayOfApps.length;

if(!_.isArray(arrayOfApps)||numberOfApps===0){
throw new Error('The argument passed to APIHelpers.buildPackageRequests should be an array of apps, with 1 or more apps.');
return undefined;
}

var error=false;
for(var i=0;i<numberOfApps;i+=1){
if(arrayOfApps[i].servicePackage.requestReasonRequired&&!arrayOfApps[i]._reason){
arrayOfApps[i]._error=true;
if(!error){
error=true;
}
}
}
if(error){
return undefined;
}

var packagesBeingRequested=[];
var packageRequests=[];
for(var _i=0;_i<numberOfApps;_i+=1){
if(packagesBeingRequested.indexOf(arrayOfApps[_i].servicePackage.id)>=0){
// if the service package is already being requested, simply append to the reason.
// if the app doesn't have a reason and we got to this point then the package
// doesn't require a reason
if(arrayOfApps[_i]._reason){
packageRequests[packagesBeingRequested.indexOf(arrayOfApps[_i].servicePackage.id)].reason+=
'\n'+$filter('translate')('reason-im-requesting')+' '+$filter('cuiI18n')(arrayOfApps[_i].name)+': '+arrayOfApps[_i].name._reason;
}
}else
{
// cache the ids in another array so that we can look for an existing package request
// without having to search through the array of requests.
packagesBeingRequested.push(arrayOfApps[_i].servicePackage.id);
packageRequests.push({
requestor:{
id:API.getUser(),
type:'person'},

servicePackage:{
id:arrayOfApps[_i].servicePackage.id,
type:'servicePackage'},

reason:arrayOfApps[_i]._reason||''});

}
}
return packageRequests.map(function(data){return API.cui.createPackageRequest({data:data});});
},

flattenOrgHierarchy:function flattenOrgHierarchy(orgHierarchy){
/*
                Takes the organization hierarchy response and returns a flat object array containing the id's and name's of
                the top level organization as well as it's divisions.
            */

if(orgHierarchy){
var organizationArray=[];

organizationArray.push({
id:orgHierarchy.id,
name:orgHierarchy.name});


if(orgHierarchy.children){
orgHierarchy.children.forEach(function(division){
organizationArray.push({
id:division.id,
name:division.name});


if(division.children){
var flatArray=_.flatten(division.children);

flatArray.forEach(function(childDivision){
organizationArray.push({
id:childDivision.id,
name:childDivision.name});

});
}
});
}
return organizationArray;
}else
{
throw new Error('No organization hierarchy object provided');
}
},

getCollectionValuesAndCount:function getCollectionValuesAndCount(collection,key,returnAsCollection){
// Given a collection and a key, will return an object containing each different value found
// for the given key as well as the count of that key. If the optional parameter `returnAsCollection`
// is provided, will return data as a collection instead of an object. This was done as in some 
// cases (such as ng-repeat) it is easier to work with the data when its in an array.

// One area this method is handy is when you are getting all the different status values of a user list
// and need the count of each status.

var data={
all:0};


collection.forEach(function(object){
if(object.hasOwnProperty(key)){
var keyValue=object[key];
if(data.hasOwnProperty(keyValue)){
data[keyValue]+=1;
data.all+=1;
}else
{
data[keyValue]=1;
data.all+=1;
}
}
});

if(!returnAsCollection)return data;else
{
var collectionData=[];

Object.keys(data).forEach(function(dataKey){
var asObject={
value:dataKey,
count:data[dataKey]};


collectionData.push(asObject);
});

return collectionData;
}
}};


return apiHelpers;

}]);

angular.module('common').
factory('Base',['APIError', 'BaseExtensions', 'Countries', 'Languages', 'LocaleService', 'Loader', 'Menu', 'Theme', 'Timezones', 'User', '$state', '$translate', function(APIError,BaseExtensions,Countries,Languages,LocaleService,Loader,Menu,Theme,Timezones,User,$state,$translate){

var baseFactory={
apiError:APIError,
appConfig:appConfig,
countries:Countries,
getLanguageCode:Languages.getCurrentLanguageCode,
languages:Languages.all,
loader:Loader,
menu:Menu,
theme:Theme,
timezones:Timezones.all,
user:User.user,

goBack:function goBack(stateName,stateParams){
var numberOfStates=$state.stateStack.length;
var i=numberOfStates-1;// Last state user visited
var counter=0;
var stateParamsFromStack=void 0;
do{
if($state.stateStack[i].name===stateName){
stateParamsFromStack=$state.stateStack[i].params;
}
i--;
counter++;
}while(!stateParamsFromStack&&i>=0&&counter<=20);// limit our attempts to 20
if(stateParamsFromStack)stateParams=stateParamsFromStack;
if(!stateParams)$state.go(stateName);else
$state.go(stateName,stateParams);
},

generateHiddenPassword:function generateHiddenPassword(password){return Array(password.length+1).join('•');}};


return Object.assign({},baseFactory,BaseExtensions);

}]);

angular.module('common').
factory('BaseExtensions',['cui.authorization.permitted','User',function(permitted,User){

function _test(){
cui.log('base extensions test');
return true;
}

return{
test:function test(){
return _test();
},
isPermitted:function isPermitted(logic){
//cui.log('isPermitted', logic, User.getRoles(), User.getEntitlements());
return permitted(logic,User.getRoles(),User.getEntitlements());
},
isOrgAdmin:function isOrgAdmin(){
//cui.log('isOrgAdmin', appConfig.orgAdminLogic, User.getRoles(), User.getEntitlements());
return permitted(appConfig.orgAdminLogic,User.getRoles(),User.getEntitlements());
},
canGrantAppToUser:function canGrantAppToUser(){
return permitted(appConfig.grantAppToUserLogic,User.getRoles(),User.getEntitlements());
},
canGrantAppToOrg:function canGrantAppToOrg(){
return permitted(appConfig.grantAppToOrgLogic,User.getRoles(),User.getEntitlements());
},
accessByAnyAdmin:function accessByAnyAdmin(){
return permitted(appConfig.accessByAnyAdmin,User.getRoles(),User.getEntitlements());
},
globalSearch:function globalSearch(){
return permitted(appConfig.globalSearch,User.getRoles(),User.getEntitlements());
},
accessToSecurityAndExchangeAdmins:function accessToSecurityAndExchangeAdmins(){
return permitted(appConfig.accessToSecurityAndExchangeAdmins,User.getRoles(),User.getEntitlements());
}};

}]);

angular.module('common').
factory('CommonAPI',['API', 'APIError', '$q', function(API,APIError,$q){
'use strict';

// This service handles basic API calls that are done throughout the project.
// API calls that are more specific are handled in their own services.

var errorName='CommonAPIFactory.';

var getPerson=function getPerson(userId){
var defer=$q.defer();

APIError.offFor(errorName+'getPerson');

API.cui.getPerson({personId:userId}).
done(function(personResponse){
defer.resolve(personResponse);
}).
fail(function(err){
console.error('Failed getting person information');
APIError.onFor(errorName+'getPerson');
defer.reject(err);
});

return defer.promise;
};

var getOrganization=function getOrganization(organizationId){
var defer=$q.defer();

APIError.offFor(errorName+'getOrganization');

API.cui.getOrganization({organizationId:organizationId}).
done(function(orgResponse){
defer.resolve(orgResponse);
}).
fail(function(err){
console.error('Failed getting organization information');
APIError.onFor(errorName+'getOrganization');
defer.reject(err);
});

return defer.promise;
};

var getOrganizationHierarchy=function getOrganizationHierarchy(organizationId){
var defer=$q.defer();

APIError.offFor(errorName+'getOrgHierarchy');

API.cui.getOrganizationHierarchy({organizationId:organizationId}).
done(function(orgHierarchy){
defer.resolve(orgHierarchy);
}).
fail(function(err){
console.error('Failed getting organization hierarchy');
APIError.onFor(errorName+'getOrgHierarchy');
defer.reject(err);
});

return defer.promise;
};

return{
getPerson:getPerson,
getOrganization:getOrganization,
getOrganizationHierarchy:getOrganizationHierarchy};


}]);

angular.module('common').
factory('Countries',['$http', '$rootScope', '$translate', function($http,$rootScope,$translate){

var countries=[];

var GetCountries=function GetCountries(locale){
return $http.get(appConfig.languageResources.url+'countries/'+locale+'.json');
};

var setCountries=function setCountries(language){
language=language||'en';

if(language.indexOf('_')>-1){
language=language.split('_')[0];
}

GetCountries(language).
then(function(res){
countries.length=0;

res.data.forEach(function(country){
countries.push(country);
});
}).
catch(function(err){
console.log(err);
});
};

$rootScope.$on('languageChange',function(e,args){
setCountries(args);
});

var getCountryByCode=function getCountryByCode(countryCode){
return _.find(countries,function(countryObject){
return countryObject.code===countryCode;
});
};

setCountries($translate.proposedLanguage());

return{
list:countries,
getCountryByCode:getCountryByCode};

}]);

angular.module('common').
factory('CustomAPI',['CustomAPIExtension', function(CustomAPIExtension){

var calls=[
{
cmd:'getPackageClaims',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.package.claim.v1+json',
call:'/service/v3/claims',
type:'GET'},

{
cmd:'getPersonPackageClaims',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.package.grant.claim.v1+json',
call:'/service/v3/persons/'+'{grantee}'+'/packages/'+'{packageId}'+'/claims',
type:'GET'},

{
cmd:'getCategories',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.category.v1+json',
call:'/service/v3/categories',
type:'GET'},

{
cmd:'getPersonRequestableApps',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.service.application.v1+json',
call:'/service/v3/applications/persons/'+'{personId}'+'/requestable',
type:'GET'},

{
cmd:'getPersonRequestableCount',
accepts:'text/plain',
call:'/service/v3/applications/persons/'+'{personId}'+'/requestable/count',
type:'GET'},

{
cmd:'getPersonGrantedApps',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.service.application.v1+json',
call:'/service/v3/applications/persons/'+'{personId}',
type:'GET'},

{
cmd:'getPersonGrantedAppCount',
cmdType:'secured',
accepts:'text/plain',
call:'/service/v3/applications/persons/'+'{personId}'+'/count',
type:'GET'},

{
cmd:'getOrganizationRequestableApps',
accepts:'application/vnd.com.covisint.platform.service.application.v1+json',
call:'/service/v3/applications/organizations/'+'{organizationId}',
type:'GET'},

{
cmd:'getOrganizationRequestableCount',
accepts:'text/plain',
call:'/service/v3/applications/organizations/'+'{organizationId}'+'/requestable/count',
type:'GET'},

{
cmd:'getOrganizationGrantedApps',
accepts:'application/vnd.com.covisint.platform.service.application.v1+json',
call:'/service/v3/applications/organizations/'+'{organizationId}',
type:'GET'},

{
cmd:'getOrganizationGrantedCount',
accepts:'text/plain',
call:'/service/v3/applications/organizations/'+'{organizationId}'+'/count',
type:'GET'},

{
cmd:'getPersonGrantableApps',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.service.application.v1+json',
call:'/service/v3/applications/persons/'+'{personId}'+'/grantable',
type:'GET'},

{
cmd:'getPersonGrantableCount',
accepts:'text/plain',
call:'/service/v3/applications/persons/'+'{personId}'+'/grantable/count',
type:'GET'},

{
cmd:'getOrganizationGrantableApps',
accepts:'application/vnd.com.covisint.platform.service.application.v1+json',
call:'/service/v3/applications/organizations/'+'{organizationId}'+'/grantable',
type:'GET'},

{
cmd:'getOrganizationGrantableCount',
accepts:'text/plain',
call:'/service/v3/applications/organizations/'+'{organizationId}'+'/grantable/count',
type:'GET'},

{
cmd:'getPersonStatusHistory',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.person.status.history.v1+json',
call:'/person/v3/persons/statusHistory',
type:'GET'},

{
cmd:'getPersonPasswordChangeHistory',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.authn.password.change.history.req.v1+json',
call:'/authentication/v4/passwords/changeHistory',
type:'GET'},

{
cmd:'getPersonPendingServicePackages',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.package.request.v1+json',
call:'/service/v3/requests',
type:'GET'},

{
cmd:'getPackage',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.package.v1+json',
call:'/service/v3/packages/'+'{packageId}',
type:'GET'},

{
cmd:'denyPackage',
cmdType:'secured',
accepts:'text/plain',
type:'POST',
call:'/service/v3/requests/tasks/deny'},

{
cmd:'approvePackage',
cmdType:'secured',
accepts:'text/plain',
type:'POST',
call:'/service/v3/requests/tasks/approve'},

{
cmd:'grantClaims',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.package.grant.claim.v1+json',
call:'/service/v3/packages/grants/claims',
type:'PUT'},

{
cmd:'getOrganizationRegistrationRequest',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.organization.request.v1+json',
call:'/organization/v3/requests',
type:'GET'},

{
cmd:'getPersonRegistrationRequest',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.person.request.v1+json',
call:'/person/v3/requests',
type:'GET'},

{
cmd:'approvePersonRegistration',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.person.request.v1+json',
call:'/person/v3/requests/tasks/approve',
type:'POST'},

{
cmd:'denyPersonRegistration',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.person.request.v1+json',
call:'/person/v3/requests/tasks/deny',
type:'POST'},

{
cmd:'getAllOrganizationRequests',
accepts:'application/vnd.com.covisint.platform.organization.request.v1+json',
call:'/organization/v3/requests',
type:'GET'},

{
cmd:'getPersonEntitlements',
cmdType:'secured',
contentType:'application/vnd.com.covisint.platform.person.privilege.v1+json',
accepts:'application/vnd.com.covisint.platform.person.privilege.v1+json',
call:'/person/v3/persons/privileges/'+'{personId}',
type:'GET'},

{cmd:'getPersonGrantedCount',
cmdType:'secured',
accepts:'text/plain',
call:'/person/v3/persons/count',
type:'GET'},

{
cmd:'suspendOrgPkg',
cmdType:'secured',
accepts:'application/vnd.com.covisint.platform.package.grant.status.request.v1+json',
contentType:'application/vnd.com.covisint.platform.package.grant.status.request.v1+json',
call:'/service/v3/grants/tasks/organization/package/suspend',
type:'POST'}];



return calls.concat(CustomAPIExtension);

}]);

angular.module('common').
factory('CustomAPIExtension',function(){

/* 	
		Any calls added here will be added to the API.cui object.
	*/

var calls=[
/* ---------- Registration Nonce Calls ---------- */
{
cmd:'initiateNonce',
cmdType:'unsecured',
type:'GET',
accepts:'application/json',
call:'/registration/v1/registrations/open/initiate'},

{
cmd:'getOrganizationNonce',
cmdType:'nonce',
type:'GET',
accepts:'application/vnd.com.covisint.platform.organization.v1+json',
call:'/registration/v1/registrations/organizations/{organizationId}'},

{
cmd:'getOrganizationsNonce',
cmdType:'nonce',
type:'GET',
accepts:'application/vnd.com.covisint.platform.organization.v1+json',
call:'/registration/v1/registrations/organizations'},

{
cmd:'getSecurityQuestionsNonce',
cmdType:'nonce',
type:'GET',
accepts:'application/vnd.com.covisint.platform.securityquestion.v1+json',
call:'/registration/v1/registrations/securityQuestions'},

{
cmd:'postUserRegistrationNonce',
cmdType:'nonce',
type:'POST',
accepts:'application/vnd.com.covisint.platform.person.password.account.v1+json',
contentType:'application/vnd.com.covisint.platform.person.password.account.v1+json',
call:'/registration/v1/registrations/persons/registration'},

{
cmd:'getPasswordPoliciesNonce',
cmdType:'nonce',
type:'GET',
accepts:'application/vnd.com.covisint.platform.password.policy.v1+json',
call:'/registration/v1/registrations/passwords/policies/{policyId}'},

{
cmd:'postPersonRequestNonce',
cmdType:'nonce',
type:'POST',
accepts:'application/vnd.com.covisint.platform.person.request.v1+json',
contentType:'application/vnd.com.covisint.platform.person.request.v1+json',
call:'/registration/v1/registrations/persons/requests'},

{
cmd:'getOrgPackageGrantsNonce',
cmdType:'nonce',
type:'GET',
accepts:'application/vnd.com.covisint.platform.package.grant.v1+json',
call:'/registration/v1/registrations/organizations/{organizationId}/packages'},

{
cmd:'validateUsernameEmailNonce',
cmdType:'nonce',
type:'POST',
accepts:'application/vnd.com.covisint.platform.person.password.account.v1+json',
contentType:'application/vnd.com.covisint.platform.person.password.account.v1+json',
call:'/registration/v1/registrations/persons/registration/validate'},

{
cmd:'securedInitiate',
cmdType:'unsecured',
type:'GET',
accepts:'application/vnd.com.covisint.platform.person.invitation.v1+json',
call:'/registration/v1/registrations/securedInvite/initiate/{invitationId}'},

{
cmd:'getOrgAppsNonce',
cmdType:'nonce',
type:'GET',
accepts:'application/vnd.com.covisint.platform.service.application.v1+json',
call:'/registration/v1/applications/organizations/{organizationId}'},

{
cmd:'getOrgAppsCountNonce',
cmdType:'nonce',
type:'GET',
accepts:'text/plain',
call:'/registration/v1/applications/organizations/{organizationId}/count'},

{
cmd:'getOrganizationsCountNonce',
cmdType:'nonce',
type:'GET',
accepts:'text/plain',
call:'/registration/v1/registrations/organizations/count'},

//New Calls-S
{cmd:"getOrgRegistrationRequests",call:"/registration/v1/organization/requests",type:"GET",accepts:"application/vnd.com.covisint.platform.organization.request.v1+json",contentType:"application/vnd.com.covisint.platform.organization.request.v1+json"},
{cmd:"getOrgRegistrationRequestsCount",call:"/registration/v1/organization/requests/count",type:"GET",accepts:"text/plain"},
{cmd:'approveOrgRegistrationRequest',call:'/registration/v1/organization/requests/tasks/approve',type:'POST',accepts:'application/vnd.com.covisint.platform.organization.request.v1+json'},
{cmd:'denyOrgRegistrationRequest',call:'/registration/v1/organization/requests/tasks/deny',type:'POST',accepts:'application/vnd.com.covisint.platform.organization.request.v1+json'},
// ADMIN... imported from Coke...
{cmd:'getPackageByQuery',accepts:'application/vnd.com.covisint.platform.package.v1+json',call:'/service/v3/packages',type:'GET'},
{cmd:"getPersonByQuery",call:"/person/v3/persons",type:"GET",accepts:"application/vnd.com.covisint.platform.person.v1+json"},
{cmd:"getRegistrationRequests",call:"/registration/v1/person/requests",type:"GET",accepts:"application/vnd.com.covisint.platform.person.request.v1+json",contentType:"application/vnd.com.covisint.platform.person.request.v1+json"},
{cmd:"createRegistrationRequest","cmdType":"unsecured",call:"/registration/v1/person/requests",type:"POST",accepts:"application/vnd.com.covisint.platform.person.request.v1+json",contentType:"application/vnd.com.covisint.platform.person.request.v1+json"},
{cmd:"getOrganizationSecured","cmdType":"secured","call":"/organization/v3/organizations/{organizationId}","type":"GET","accepts":"application/vnd.com.covisint.platform.organization.v1+json"},
{cmd:"getPasswordPolicySecured","cmdType":"secured","call":"/authn/v4/passwords/policies/{policyId}","type":"GET","accepts":"application/vnd.com.covisint.platform.password.policy.v1+json"},
{cmd:'grantClaims',accepts:'application/vnd.com.covisint.platform.package.grant.claim.v1+json',contentType:"application/vnd.com.covisint.platform.package.grant.claim.v1+json",call:'/service/v3/packages/grants/claims',type:'PUT'},
{cmd:'initiateRegistration',cmdType:'unsecured',call:'/registration/v1/registrations/open/initiate',type:'GET',accepts:'application/vnd.com.covisint.platform.person.invitation.v1+json'},
{cmd:'initiateSecuredRegistration',cmdType:'unsecured',call:'/registration/v1/registrations/securedInvite/initiate/{id}',type:'GET',accepts:'application/vnd.com.covisint.platform.person.invitation.v1+json'},
{cmd:'createRegistrationNonce',cmdType:'nonce',call:'/registration/v1/registrations/persons/registration',type:'POST',accepts:'application/vnd.com.covisint.platform.person.password.account.v1+json',contentType:'application/vnd.com.covisint.platform.person.password.account.v1+json'},
{cmd:'createRegistrationRequestNonceWithPkg',cmdType:'nonce',call:'/registration/v1/registrations/persons/requests',type:'POST',accepts:'application/vnd.com.covisint.platform.person.request.v1+json',contentType:'application/vnd.com.covisint.platform.person.request.v1+json'},
{cmd:'approvePersonRegistrationRequest',call:'/registration/v1/person/requests/tasks/approve',type:'POST',accepts:'application/vnd.com.covisint.platform.person.request.v1+json'},
{cmd:'denyPersonRegistrationRequest',call:'/registration/v1/person/requests/tasks/deny',type:'POST',accepts:'application/vnd.com.covisint.platform.person.request.v1+json'},
{cmd:'validateRegistrationNonce',cmdType:'nonce',call:'/registration/v1/registrations/persons/registration/validate',type:'POST',accepts:'text/plain'},
//{cmd: 'getOrganizationNonce',cmdType:'nonce',call: '/registration/v1/registrations/organizations/{id}', type:'GET', accepts: 'application/vnd.com.covisint.platform.organization.v1+json'},
{cmd:'getPasswordPolicyNonce',cmdType:'nonce',call:'/registration/v1/registrations/passwords/policies/{id}',type:'GET',accepts:'application/vnd.com.covisint.platform.password.policy.v1+json'},
{cmd:'getAttributeTemplatesNonce',cmdType:'nonce',call:'/registration/v1/registrations/attributeTemplates',type:'GET',accepts:'application/vnd.com.covisint.platform.attribute.template.v1+json'},
{cmd:"getOrganizationPackagesSecured","cmdType":"secured","call":"/service/v3/organizations/{organizationId}/packages","type":"GET","accepts":"application/vnd.com.covisint.platform.package.grant.v1+json"},
{cmd:"validatePasswordSecured",call:"/person/v3/persons/password/validate",type:"POST",accepts:"application/vnd.com.covisint.platform.password.validation.response.v1+json","contentType":"application/vnd.com.covisint.platform.password.validation.v1+json"},
{cmd:"getPackageRequestsCount",call:"/service/v3/requests/count",type:"GET",accepts:"text/plain"},
{cmd:"getOrganizationPackagesCount",call:"/service/v3/organizations/{organizationId}/packages/count",type:"GET",accepts:"text/plain"},
{cmd:"getRegistrationRequestsCount",call:"/registration/v1/person/requests/count",type:"GET",accepts:"text/plain"},
{cmd:"getPackagesRequestedCount",call:"/service/v3/persons/{personId}/packages/count",type:"GET",accepts:"text/plain"},
{cmd:'validatePasswordNonce',cmdType:'nonce',call:'/registration/v1/registrations/persons/password/validate',type:'POST',accepts:'application/vnd.com.covisint.platform.password.validation.response.v1+json',contentType:'application/vnd.com.covisint.platform.password.validation.v1+json'}];




return calls;

});

angular.module('common').
factory('DataStorage',['API', 'localStorageService', function(API,localStorageService){

var storage=localStorageService.get('dataStorage')||{};
var dataStorage={};

var initStorageIfUndefined=function initStorageIfUndefined(){
if(!storage[API.getUser()]){
storage[API.getUser()]={};
}
};

var saveToLocaStorage=function saveToLocaStorage(){
localStorageService.set('dataStorage',storage);
};

/****************************************
        FOR OBJECT AND ARRAY TYPE DATA
    ****************************************/

// completely overrides a type
dataStorage.setType=function(type,data){
initStorageIfUndefined();
storage[API.getUser()][type]=data;
saveToLocaStorage();
};

dataStorage.getType=function(type){
if(!storage[API.getUser()]){
return undefined;
}
return storage[API.getUser()][type];
};

dataStorage.deleteType=function(type){
if(!storage[API.getUser()]||!storage[API.getUser()][type]){
return;
}
delete storage[API.getUser()][type];
saveToLocaStorage();
};

// deletes the storage for just the currently logged in user
dataStorage.deleteUserStorage=function(){
if(storage[API.getUser()]){
delete storage[API.getUser()];
}
saveToLocaStorage();
};

// deletes the storage for every user in local storage
dataStorage.clear=function(){
storage={};
saveToLocaStorage();
};

dataStorage.getUserStorage=function(){return storage[API.getUser()];};

/****************************************
        FOR ARRAY TYPE DATA ONLY
    ****************************************/

// appends to a certain type
// NOTE: Make sure to use data that you can later distinguish between using dataThatMatches
// I recommend using replaceDataThatMatches instead unless you know what you're doing
dataStorage.appendToType=function(type,data){
initStorageIfUndefined();
if(!storage[API.getUser()][type]){
storage[API.getUser()][type]=[data];
}else
if(!_.isArray(storage[API.getUser()][type])){
throw new Error('Tried appending to an existing data type that is not an array in dataStorage.');
return;
}else
{
storage[API.getUser()][type].push(data);
}
saveToLocaStorage();
};

// returns ALL data that matches against a given comparison or undefined if no results
dataStorage.getDataThatMatches=function(type,comparison){
if(!storage[API.getUser()]||!storage[API.getUser()][type]){
return undefined;
}else
if(!_.isArray(storage[API.getUser()][type])){
throw new Error('Tried using DataStorage.getDataThatMatches on a type that isn\'t an array. Use .getType(type) instead.');
return;
}else
{
var matches=storage[API.getUser()][type].filter(function(x){
return _.isMatch(x,comparison);
});
if(matches.length>0){
return matches;
}else
{
return undefined;
}
}
};

// replaces all data that matches against a certain comparison and appends
// new data to that type's array
dataStorage.replaceDataThatMatches=function(type,comparison,newData){
dataStorage.deleteDataThatMatches(type,newData);
dataStorage.appendToType(type,newData);
};

dataStorage.deleteDataThatMatches=function(type,comparison){
if(!storage[API.getUser()]||!storage[API.getUser()][type]){
return;
}else
if(!_.isArray(storage[API.getUser()][type])){
throw new Error('Tried using DataStorage.deleteDataThatMatches on a type that isn\'t an array. Use .deleteType(type) instead.');
return;
}else
{
storage[API.getUser()][type]=storage[API.getUser()][type].filter(function(x){
return!_.isMatch(x,comparison);
});
}
saveToLocaStorage();
};

return dataStorage;
}]);

angular.module('common').
factory('Languages',['$cuiI18n','LocaleService',function($cuiI18n,LocaleService){

var languages=$cuiI18n.getLocaleCodesAndNames();

return{
all:languages,
getCurrentLanguageCode:function getCurrentLanguageCode(){
if(LocaleService.getLocaleCode().indexOf('_')>-1){
return LocaleService.getLocaleCode().split('_')[0];
}else{
return LocaleService.getLocaleCode();
}
}};

}]);
angular.module('common').
factory('Loader',['SharedService', function(SharedService){
var Loader=Object.create(SharedService);
Loader.details=Object.assign({},Loader.details);
Loader.for=Loader.details;
return Loader;
}]);

angular.module('common').
factory('Menu',['snapRemote', '$rootScope', '$window', function(snapRemote,$rootScope,$window){

var shouldShowMobileNav=function shouldShowMobileNav(){
if($window.innerWidth>=1000){
snapRemote.close();
}
};

// Fixes issue where opening up the mobile menu and then expanding into desktop mode 
// would leave all content pushed to the right.
$window.onresize=_.debounce(function(){
shouldShowMobileNav();
},1000);

return{
desktop:{
state:'open',// default state for desktop menu
enabled:true,
open:function open(){
this.state='closed';
},
close:function close(){
this.state='closed';
},
toggle:function toggle(){
this.state==='open'?this.state='closed':this.state='open';
},
hide:function hide(){
this.enabled=false;
},
show:function show(){
this.enabled=true;
}},


mobile:{
state:'closed',// default state for mobile menu
enabled:true,
open:function open(){
this.state='open';
},
close:function close(){
this.state='close';
},
toggle:function toggle(){
this.state==='open'?this.state='closed':this.state='open';
},
hide:function hide(){
this.enabled=false;
},
show:function show(){
this.state=true;
}},


handleStateChange:function handleStateChange(stateMenuOptions){
if(!angular.isDefined(stateMenuOptions)){
this.desktop.show();
this.mobile.show();
}else
{
angular.isDefined(stateMenuOptions.desktop)&&stateMenuOptions.desktop===false?this.desktop.hide():this.desktop.show()(
angular.isDefined(stateMenuOptions.mobile)&&stateMenuOptions.mobile===false)?this.mobile.hide():this.mobile.show();
}
}};

}]);

angular.module('common').
factory('Organization',['API', '$q', function(API,$q){

var factoryName='organizationFactory.';

var getOrganizationAdmins=function getOrganizationAdmins(organizationId){
var defer=$q.defer();

API.cui.getOrganizationSecurityAdmins({organizationId:organizationId}).
done(function(response){return defer.resolve(response);}).
fail(function(error){return defer.reject(error);});

return defer.promise;
};

var getOrganizationPasswordPolicy=function getOrganizationPasswordPolicy(policyId){
var defer=$q.defer();

API.cui.getPasswordPolicy({policyId:policyId}).
done(function(response){return defer.resolve(response);}).
fail(function(error){return defer.reject(error);});

return defer.promise;
};

var getOrganizationAuthenticationPolicy=function getOrganizationAuthenticationPolicy(policyId){
var defer=$q.defer();

API.cui.getAuthenticationPolicy({policyId:policyId}).
done(function(response){return defer.resolve(response);}).
fail(function(error){return defer.reject(error);});

return defer.promise;
};

var getOrganization=function getOrganization(organizationId){
return API.cui.getOrganizationWithAttributes({organizationId:organizationId});
};

var initOrganizationProfile=function initOrganizationProfile(organizationId,policyId,authPolicyId){
var defer=$q.defer();
var organizationProfile={};
var callsToComplete=3;
var callsCompleted=0;

getOrganizationAdmins(organizationId).
then(function(response){return organizationProfile['admins']=response;}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(organizationProfile);
});

getOrganizationPasswordPolicy(policyId).
then(function(response){return organizationProfile['passwordPolicy']=response;}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(organizationProfile);
});

getOrganizationAuthenticationPolicy(authPolicyId).
then(function(response){return organizationProfile['authenticationPolicy']=response;}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(organizationProfile);
});

return defer.promise;
};

return{
getOrganizationAdmins:getOrganizationAdmins,
getOrganizationPasswordPolicy:getOrganizationPasswordPolicy,
getOrganizationAuthenticationPolicy:getOrganizationAuthenticationPolicy,
getOrganization:getOrganization,
initOrganizationProfile:initOrganizationProfile};


}]);

angular.module('common').
factory('PersonAndOrgRequest',['API', 'APIError', 'CommonAPI', '$q', function(API,APIError,CommonAPI,$q){
'use strict';

/*
		Use this service as a helper when dealing with person requests.

		Allows you to get a person's registration request or a wrapper call that also gets you the person's and their
		organization's data.
	*/

var PersonAndOrgRequestFactory={};
var errorName='PersonAndOrgRequestFactory.';

/****************************************
				Service Functions
	****************************************/

// Returns the registration request associated with the userId
PersonAndOrgRequestFactory.getPersonRegistrationRequest=function(userId){
var defer=$q.defer();

API.cui.getPersonRegistrationRequest({qs:[['registrant.id',userId]]}).
done(function(registrationResponse){
defer.resolve(registrationResponse[0]);
}).
fail(function(err){
console.error('Failed getting user\'s registration request');
APIError.onFor(errorName+'getRegistrationRequest');
defer.reject(err);
});

return defer.promise;
};

PersonAndOrgRequestFactory.getOrgRegistrationRequest=function(organizationId){
var defer=$q.defer();

API.cui.getOrgRegistrationRequests({qs:[['organization.id',organizationId]]}).
done(function(registrationResponse){
defer.resolve(registrationResponse[0]);
}).
fail(function(err){
console.error('Failed getting organization\'s registration request');
APIError.onFor(errorName+'getRegistrationRequest');
defer.reject(err);
});

return defer.promise;
};

/*
		Wrapper call for: 	PersonRequest.getPersonRegistrationRequest()
							CommonAPI.getPerson()
							CommonAPI.getOrganization()
	*/
PersonAndOrgRequestFactory.getRegistrationRequestData=function(userId,organizationId,type){
var defer=$q.defer();
var callsCompleted=0;
var requestData={};

if(type==='person'){
PersonAndOrgRequestFactory.getPersonRegistrationRequest(userId).
then(function(registrationRequest){
requestData.request=registrationRequest;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(requestData);
}
});
}else
{
PersonAndOrgRequestFactory.getOrgRegistrationRequest(organizationId).
then(function(registrationRequest){
requestData.request=registrationRequest;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(requestData);
}
});
}

CommonAPI.getPerson(userId).
then(function(personData){
requestData.personData=personData;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(requestData);
}
});

CommonAPI.getOrganization(organizationId).
then(function(organizationData){
requestData.organization=organizationData;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(requestData);
}
});

return defer.promise;
};

// Provided a decision ('approved' or 'denied') and the person request object
// Handles the approval/denial of the person request
PersonAndOrgRequestFactory.handleRequestApproval=function(decision,request){
var data=[['requestId',request.id]];

if(decision==='approved'){
API.cui.approvePersonRegistration({qs:data});
}else
if(decision==='denied'){
if(request.rejectReason){
data.push(['reason',request.rejectReason]);
return API.cui.denyPersonRegistration({qs:data});
}else
{
return API.cui.denyPersonRegistration({qs:data});
}
}else
{
throw new Error('Requires a decision of "approved" or "denied" and the request object.');
}
};

return PersonAndOrgRequestFactory;

}]);

angular.module('common').
factory('PersonRequest',['API', 'APIError', 'CommonAPI', '$q', function(API,APIError,CommonAPI,$q){
'use strict';

/*
		Use this service as a helper when dealing with person requests.

		Allows you to get a person's registration request or a wrapper call that also gets you the person's and their
		organization's data.
	*/

var personRequestFactory={};
var errorName='PersonRequestFactory.';

/****************************************
				Service Functions
	****************************************/

// Returns the registration request associated with the userId
personRequestFactory.getPersonRegistrationRequest=function(userId){
var defer=$q.defer();

API.cui.getPersonRegistrationRequest({qs:[['registrant.id',userId]]}).
done(function(registrationResponse){
defer.resolve(registrationResponse[0]);
}).
fail(function(err){
console.error('Failed getting user\'s registration request');
APIError.onFor(errorName+'getRegistrationRequest');
defer.reject(err);
});

return defer.promise;
};

/*
		Wrapper call for: 	PersonRequest.getPersonRegistrationRequest()
							CommonAPI.getPerson()
							CommonAPI.getOrganization()
	*/
personRequestFactory.getPersonRegistrationRequestData=function(userId,organizationId){
var defer=$q.defer();
var callsCompleted=0;
var requestData={};

personRequestFactory.getPersonRegistrationRequest(userId).
then(function(registrationRequest){
requestData.request=registrationRequest;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(requestData);
}
});

CommonAPI.getPerson(userId).
then(function(personData){
requestData.personData=personData;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(requestData);
}
});

CommonAPI.getOrganization(organizationId).
then(function(organizationData){
requestData.organization=organizationData;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(requestData);
}
});

return defer.promise;
};

// Provided a decision ('approved' or 'denied') and the person request object
// Handles the approval/denial of the person request
personRequestFactory.handleRequestApproval=function(decision,request){
var data=[['requestId',request.id]];

if(decision==='approved'){
API.cui.approvePersonRegistration({qs:data});
}else
if(decision==='denied'){
if(request.rejectReason){
data.push(['reason',request.rejectReason]);
return API.cui.denyPersonRegistration({qs:data});
}else
{
return API.cui.denyPersonRegistration({qs:data});
}
}else
{
throw new Error('Requires a decision of "approved" or "denied" and the request object.');
}
};

return personRequestFactory;

}]);

angular.module('common').
factory('Registration',['API', 'APIError', 'Base', '$q', function(API,APIError,Base,$q){

var self={};
var pub={};

// Helper functions to build out the person and request objects needed for registration
var build={
person:function person(registrationData){
var personData=Object.assign({},registrationData.profile);

personData.addresses[0].country=registrationData.userCountry.originalObject.code;
personData.organization={id:registrationData.organization.id};
personData.language=registrationData.profile.language.id;
personData.timezone=registrationData.profile.timezone.id;

if(personData.phones[0]){
personData.phones[0].type='main';
}

return personData;
},
passwordAccount:function passwordAccount(registrationData){
return{
version:'1',
username:registrationData.login.username,
password:registrationData.login.password,
passwordPolicy:registrationData.organization.passwordPolicy,
authenticationPolicy:registrationData.organization.authenticationPolicy};

},
securityQuestionAccount:function securityQuestionAccount(registrationData){
return{
version:'1',
questions:[{
question:{
id:registrationData.login.question1.id,
type:'question',
realm:registrationData.organization.realm},

answer:registrationData.login.challengeAnswer1,
index:1},

{
question:{
id:registrationData.login.question2.id,
type:'question',
realm:registrationData.organization.realm},

answer:registrationData.login.challengeAnswer2,
index:2}]};


},
walkupSubmit:function walkupSubmit(registrationData){
var _registrationData=Object.assign({},registrationData);

return{
person:this.person(_registrationData),
passwordAccount:this.passwordAccount(_registrationData),
securityQuestionAccount:this.securityQuestionAccount(_registrationData)};

},
InvitedSubmit:function InvitedSubmit(registrationData,inviteId){
var _registrationData=Object.assign({},registrationData);

return{
person:this.person(_registrationData),
passwordAccount:this.passwordAccount(_registrationData),
securityQuestionAccount:this.securityQuestionAccount(_registrationData),
inviteId:inviteId};

},
servicePackageRequest:function servicePackageRequest(personId,personRealm,packageData,requestReason){
var request={
registrant:{
id:personId,
type:'person',
realm:personRealm},

justification:requestReason||'User Walkup Registration'};


if(packageData&&packageData.selected){
request.packages=[];
angular.forEach(packageData.selected,function(servicePackage){
// userWalkup.applications.selected is an array of strings that looks like
// ['<appId>,<packageId>,<appName>']
request.packages.push({
id:servicePackage.split(',')[1],
type:'servicePackage'});

});
request.packages=_.uniqBy(request.packages,'id');
}

return request;
}


/**
     * this method makes sure to make the call but before it calls cui.initiateNonce
     * @param method method name
     * @param args method arguments
     * @returns {*} promise
     */};
self.makeNonceCall=function(method){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
var deferred=$.Deferred();
var tag="registration/self/makeNonceCall";

API.cui.initiateNonce().
then(function(res){

API.cui[method].apply(API.cui,args).
then(function(result){
deferred.resolve(result);
}).
fail(function(error){
deferred.reject(error);
});

}).
fail(function(error){
console.error(tag,error);
deferred.reject(error);
});

return deferred.promise();
};

/**
     * TODO: once the promise gets an error message, we are going to resolve as false. This is temporary.
     * Makes an api call to know if the registrating user's username or email address
     * appear already been taken.
     * @param stringParams a param array having either or both userName and emalAddress.
     * @returns {{promise, valid: (function(*=)), catch: (function(*))}}
     */
self.isUsernameOrEmailTaken=function(stringParams){
var tag="registration/self/isUsernameOrEmailTaken";

return{
promise:function(){
var defered=$q.defer();

if(stringParams){

self.makeNonceCall("validateUsernameEmailNonce",{qs:stringParams}).then(function(res){
defered.resolve(true);
}).fail(function(error){
defered.resolve(false);
console.error(tag+".error",error);
});
}else{
defered.resolve(true);
}

return defered.promise;
}(),
valid:function valid(res){
return res;
},
catch:function _catch(error){
// do something with the error here
console.error(tag+".catch","there is an error, :) ");
}};

};

pub.getOrganizations=function(){
return self.makeNonceCall("getOrganizationsNonce");
};

pub.getSecurityQuestions=function(){
return self.makeNonceCall("getSecurityQuestionsNonce");
};

// Returns organizations and security questions for the realm.
// Both must resolve for the walkup registration to work.
pub.initWalkupRegistration=function(pageSize){
var defer=$q.defer();
var data={};

APIError.offFor('RegistrationFactory.initWalkup');

API.cui.initiateNonce().
then(function(){
//  2-13-2017 filter resuts by status is not available for count now.
return API.cui.getOrganizationsCountNonce();
}).
then(function(res){
data.organizationCount=res;
return API.cui.getOrganizationsNonce({qs:[['page',1],['pageSize',pageSize],['status','active']]});
}).
then(function(res){
data.organizations=res;
return API.cui.getSecurityQuestionsNonce();
}).
then(function(res){
data.securityQuestions=res;
defer.resolve(data);
}).
fail(function(error){
APIError.onFor('RegistrationFactory.initWalkup');
defer.reject(error);
});

return defer.promise;
};
// validates invite and Returns Target organization
//Must resolve for the Invited registration to work.
pub.initInvitedRegistration=function(encodedString){
var defer=$q.defer();
var data={};

APIError.offFor('RegistrationFactory.initInvited');

API.cui.securedInitiate({invitationId:encodedString}).
then(function(res){
data.invitationData=res;
return API.cui.getOrganizationNonce({organizationId:res.targetOrganization.id});
}).
then(function(res){
data.organization=res;
return API.cui.getSecurityQuestionsNonce();
}).
then(function(res){
data.securityQuestions=res;
defer.resolve(data);
}).
fail(function(error){
APIError.onFor('RegistrationFactory.initInvited');
defer.reject(error);
});

return defer.promise;
};

pub.walkupSubmit=function(registrationData){
var defer=$q.defer();
var submitData=build.walkupSubmit(registrationData);

API.cui.initiateNonce().
then(function(){
return API.cui.postUserRegistrationNonce({data:submitData});
}).
then(function(res){
var packageRequestData=build.servicePackageRequest(res.person.id,res.person.realm,registrationData.applications,registrationData.requestReason);
return API.cui.postPersonRequestNonce({data:packageRequestData});
}).
then(function(res){
defer.resolve(res);
}).
fail(function(error){
defer.reject(error);
});

return defer.promise;
};

pub.invitedSubmit=function(registrationData,encodedString,invitationId){
var defer=$q.defer();
var submitData=build.InvitedSubmit(registrationData,invitationId);

API.cui.securedInitiate({invitationId:encodedString}).
then(function(){
return API.cui.postUserRegistrationNonce({qs:[['inviteId',invitationId]],data:submitData});
}).
then(function(res){
var packageRequestData=build.servicePackageRequest(res.person.id,res.person.realm,registrationData.applications,registrationData.requestReason);
return API.cui.postPersonRequestNonce({data:packageRequestData});
}).
then(function(res){
defer.resolve(res);
}).
fail(function(error){
defer.reject(error);
});

return defer.promise;
};

pub.getOrgAppsByPage=function(page,pageSize,organizationId){
return API.cui.getOrgAppsNonce({organizationId:organizationId,qs:[['page',page],['pageSize',pageSize]]});
};

pub.getOrgsByPageAndName=function(page,pageSize,name){
if(name!==undefined){
return self.makeNonceCall("getOrganizationsNonce",{qs:[['page',page],['pageSize',pageSize],['status','active'],['name',name]]});
}else
{
return self.makeNonceCall("getOrganizationsNonce",{qs:[['page',page],['pageSize',pageSize],['status','active']]});
}

};

pub.selectOrganization=function(organization,pageSize){
var deferred=$.Deferred();
var results={
grants:[]};


API.cui.initiateNonce().
then(function(res){
return API.cui.getOrgAppsCountNonce({organizationId:organization.id});
}).
then(function(res){
results.appCount=res;
return pub.getOrgAppsByPage(1,pageSize,organization.id);
}).
then(function(res){
res.forEach(function(grant){
if(grant.servicePackage.requestable)results.grants.push(grant);
});
return API.cui.getPasswordPoliciesNonce({policyId:organization.passwordPolicy.id});
}).
then(function(res){
results.passwordRules=res.rules;
deferred.resolve(results);
}).
fail(function(error){
deferred.reject(error);
});

return deferred.promise();
};

pub.getTac=function(packageId){
var deferred=$q.defer();
self.makeNonceCall("getOrgTacOfPackage",{packageId:packageId}).
then(function(res){
deferred.resolve(res);
}).
fail(function(err){
console.log("Error in fetching TaC for application "+packageId);
console.log(err);
deferred.reject(err);
});
return deferred.promise;
};

pub.isUsernameTaken=function(name){
return self.isUsernameOrEmailTaken([['userName',name]]);
};

pub.isEmailTaken=function(email){
return self.isUsernameOrEmailTaken([['emailAddress',email]]);
};

return pub;

}]);

angular.module('common').
service('SharedService',function(){
/*****
        this service serves as an instantiable class
        that can be extended to provide information throughout the app
        using the base controller

        How to use:
        angular.module('myModule')
        .factory/service/provider('MyProvider', function(SharedService){
            const MyProvider = Object.create(SharedService)
        })

        MyProvider now has an object that serves as a data holder for switchable loaders, error messages etc.

        methods
        .onFor(property:String, <message>:String)
            enables that property in the details object, setting the message associated with that property
            if you use onFor for multiple properties without using "offFor" to disable them
            there's a count that gets incremented, and that property will only be disabled once offFor
            is called on that property n times, where n is the amount of times it was enabled

        .offFor(property:String)

        .toggleFor(property:String, <message>:String)

        .for
            this holds a reference to the storage object, so that you can associate it with your base ctrl
    *****/

this.details={};

this.onFor=function(property,message){
if(this.details[property]){
this.details[property].count?
this.details[property].count+=1:
this.details[property].count=2;// count is only defined if there's more than 1
if(message){
this.details[property].message=message;
}
}else{
this.details[property]={
status:true,
message:message};

}
};

this.offFor=function(property){
if(!this.details[property]){
return;
}else if(!this.details[property].count||this.details[property].count===1){
delete this.details[property];
}else{
this.details[property].count-=1;
}
};

this.toggleFor=function(property,message){
if(this.details[property]){
delete this.details[property];
}else{
this.details[property]={
status:true,
message:message};

}
};

this.clearAll=function(){
for(var key in this.details){delete this.details[key];}
};

this.for=this.details;

return this;
});
angular.module('common').
factory('Sort',['$filter',function($filter){
return{
listSort:function listSort(listToSort,sortType,order){
listToSort.sort(function(a,b){
if(sortType==='alphabetically'){
if(a.name[0]){
a=$filter('cuiI18n')(a.name).toUpperCase(),
b=$filter('cuiI18n')(b.name).toUpperCase();
}else
{
a=a.name.given.toUpperCase(),
b=b.name.given.toUpperCase();
}
}else
if(sortType==='date'){
if(a.dateCreated){
a=a.dateCreated,b=b.dateCreated;
}else
{
a=a.creation,b=b.creation;
}
}else
{
a=a.status,b=b.status;
}

if(a<b){
if(order){
return 1;
}else{
return-1;
}
}else
if(a>b){
if(order){
return-1;
}else{
return 1;
}
}else{
return 0;
}
});
}};

}]);

angular.module('common').
factory('Theme',function(){

/*
	*	Utilize this factory when you need to set styles on the top-level element based on the current router state.
	*	
	*	Full documentation on how to utilize and or customize the application with this factory can be found in:
	*	`./docs/features/factories/Theme.md`
	*/

var activeTheme=void 0;
var defaultTheme=void 0;

var getTheme=function getTheme(){
return activeTheme;
};

var setTheme=function setTheme(cssClass){
activeTheme=cssClass;
};

var getDefaultTheme=function getDefaultTheme(){
return defaultTheme;
};

var setDefaultTheme=function setDefaultTheme(cssClass){
defaultTheme=cssClass;
};

var clearActiveTheme=function clearActiveTheme(){
activeTheme='';
};

var useDefaultTheme=function useDefaultTheme(){
activeTheme=defaultTheme;
};

var setActiveDefaultTheme=function setActiveDefaultTheme(cssClass){
defaultTheme=cssClass;
activeTheme=cssClass;
};

return{
get:getTheme,
set:setTheme,
getDefault:getDefaultTheme,
setDefault:setDefaultTheme,
useDefault:useDefaultTheme,
setActiveDefault:setActiveDefaultTheme,
clear:clearActiveTheme};


});

angular.module('common').
factory('Timezones',['$http', '$rootScope', '$translate', function($http,$rootScope,$translate){

var timezones=[];

var GetTimezones=function GetTimezones(locale){
return $http.get(appConfig.languageResources.url+'timezones/'+locale+'.json');
};

var setTimezones=function setTimezones(language){
language=language||'en';

if(language.indexOf('_')>-1){
language=language.split('_')[0];
}

GetTimezones(language).
then(function(res){
timezones.length=0;

res.data.forEach(function(timezone){
timezones.push(timezone);
});
}).
catch(function(err){
console.log(err);
});
};

var getTimezoneById=function getTimezoneById(id){
if(!id){
return'';
}

return _.find(timezones,function(timezone){
return timezone.id===id;
}).name;
};

$rootScope.$on('languageChange',function(e,args){
setTimezones(args);
});

setTimezones($translate.proposedLanguage());

return{
all:timezones,
timezoneById:getTimezoneById};

}]);

angular.module('common').
factory('User',['$rootScope', function($rootScope){

/*
        This factory is intended to store data/logic pertaining to the logged in user only.
        This data is populated right after logon (this can be found in the API.factory.js 
        inside the populateUserInfo method). The application will not run if those endpoints
        fail.
    */

var user={
entitlements:undefined,
roles:undefined};


return{
set:function set(newUser){
angular.merge(user,newUser);
},

get:function get(){return user.cuid||'[cuid]';},

setEntitlements:function setEntitlements(newEntitlements){
user.entitlements?user.entitlements=user.entitlements.concat(newEntitlements):user.entitlements=newEntitlements;
},

getEntitlements:function getEntitlements(){return user.entitlements;},

setRoles:function setRoles(newRoles){
user.roles?user.roles=user.roles.concat(newRoles):user.roles=newRoles;
},

getRoles:function getRoles(){return user.roles;},

user:user};


}]);

angular.module('common').
factory('UserHistory',['API', 'APIError', 'LocaleService', '$q', '$timeout', function(API,APIError,LocaleService,$q,$timeout){

var errorName='userHistoryFactory.';

var UserHistory={
getTodaysDate:function getTodaysDate(){
var today=new Date();
var dd=today.getDate();
var yyyy=today.getFullYear();
var mmm=today.toString().substring(4,7);
return dd+'-'+mmm+'-'+yyyy;
},

initStatusHistory:function initStatusHistory(userId){
var defer=$q.defer();

API.cui.getPersonDetailedStatusHistory({qs:[
['userId',userId],
['startDate','01-Jan-2016'],
['lastDate',UserHistory.getTodaysDate()]]}).

done(function(res){
defer.resolve(res);
}).
fail(function(err){
console.error('Failed getting user status information',err);
APIError.onFor(errorName+'initStatusHistory');
$timeout(function(){
APIError.offFor(errorName+'initStatusHistory');
},5000);
defer.reject(err);
});
return defer.promise;
},

initPasswordChangeHistory:function initPasswordChangeHistory(userId){
var defer=$q.defer();
API.cui.getPasswordCangeHistory({personId:userId}).
then(function(res){
defer.resolve(res);
}).
fail(function(err){
console.error('Failed getting Password change history',err);
APIError.onFor(errorName+'initPasswordChangeHistory');
$timeout(function(){
APIError.offFor(errorName+'initPasswordChangeHistory');
},5000);
defer.reject(err);
});
return defer.promise;
},

initUserHistory:function initUserHistory(userId,organizationId){
var defer=$q.defer();
var history={};
var callsCompleted=0;
var callsToComplete=2;

UserHistory.initStatusHistory(userId).
then(function(res){
history.statusHistory=res;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(history);
});

UserHistory.initPasswordChangeHistory(userId).
then(function(res){
history.passwordChangeHistory=res;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(history);
});

return defer.promise;
},

injectUI:function injectUI(history,$scope,personId){
history.fail=false;
history.success=false;
}};


return UserHistory;
}]);

angular.module('common').
factory('UserList',['API', 'APIError', 'APIHelpers', '$q', function(API,APIError,APIHelpers,$q){

var errorName='UserListFactory.';

var getUsers=function getUsers(opts){
var defer=$q.defer();

APIError.offFor(errorName+'getUsers');

API.cui.getPersons(opts).
done(function(personResponse){
defer.resolve(personResponse);
}).
fail(function(error){
console.error('Failed getting user list');
APIError.onFor(errorName+'getUsers');
defer.reject(error);
});

return defer.promise;
};

var getUserCount=function getUserCount(opts){
var defer=$q.defer();

APIError.offFor(errorName+'getUserCount');

API.cui.countPersons(opts).
done(function(countResponse){
defer.resolve(countResponse);
}).
fail(function(error){
console.error('Failed getting user count');
APIError.onFor(errorName+'getUserCount');
defer.reject(error);
});

return defer.promise;
};

return{
getUsers:getUsers,
getUserCount:getUserCount};


}]);

angular.module('common').
factory('UserProfile',['API', 'APIError', 'LocaleService', 'Timezones', '$filter', '$q', '$timeout', function(API,APIError,LocaleService,Timezones,$filter,$q,$timeout){

var errorName='userProfileFactory.';

var UserProfile={

setPhone:function setPhone(type,index){
var phone={};
phone.type=type;
phone.number="";
return phone;
},

getTodaysDate:function getTodaysDate(){
var today=new Date();
var dd=today.getDate();
var yyyy=today.getFullYear();
var mmm=today.toString().substring(4,7);
return dd+'-'+mmm+'-'+yyyy;
},

initUser:function initUser(userId){
var defer=$q.defer();
var user={};

API.cui.getPerson({personId:userId}).
done(function(res){
// If the person object has no addresses we need to initialize it
if(!res.addresses){
res.addresses=[{streets:[]}];
}
//If there is no streets in address we need to initialie it
else if(!res.addresses[0].streets){
res.addresses[0].streets=[];
};
user.user=Object.assign({},res);
user.tempUser=Object.assign({},res);
//When user doesnot have any phones(data issue)
if(!user.tempUser.phones){
user.tempUser.phones=[];
user.tempUser.phones[0]=UserProfile.setPhone("main",0);
user.tempUser.phones[1]=UserProfile.setPhone("mobile",1);
user.tempUser.phones[2]=UserProfile.setPhone("fax",2);
}else{
//When user have fax/mobile but not mobile
if(user.tempUser.phones[0]&&user.tempUser.phones[0].type!=="main"){
if(user.tempUser.phones[0].type==="fax"){
user.tempUser.phones[2]=angular.copy(user.tempUser.phones[0]);
user.tempUser.phones[0]=UserProfile.setPhone("main",0);
user.tempUser.phones[1]=UserProfile.setPhone("mobile",1);
}else if(user.tempUser.phones[0].type==="mobile"&&user.tempUser.phones[1]){
user.tempUser.phones[2]=angular.copy(user.tempUser.phones[1]);
user.tempUser.phones[1]=angular.copy(user.tempUser.phones[0]);
user.tempUser.phones[0]=UserProfile.setPhone("main",0);
}else
{
user.tempUser.phones[1]=angular.copy(user.tempUser.phones[0]);
user.tempUser.phones[0]=UserProfile.setPhone("main",0);
user.tempUser.phones[2]=UserProfile.setPhone("fax",2);
}
}else
if(user.tempUser.phones[1]){
if(user.tempUser.phones[1].type==="fax"){
user.tempUser.phones[2]=angular.copy(user.tempUser.phones[1]);
user.tempUser.phones[1]=UserProfile.setPhone("mobile",1);
}else{
if(!user.tempUser.phones[2]){
user.tempUser.phones[2]=UserProfile.setPhone("fax",2);
};
}
}else{
user.tempUser.phones[1]=UserProfile.setPhone("mobile",1);
user.tempUser.phones[2]=UserProfile.setPhone("fax",2);
}
}
angular.copy(user.tempUser,user.user);
defer.resolve(user);
}).
fail(function(err){
console.error('Failed getting user information',err);
APIError.onFor(errorName+'initUser');
$timeout(function(){
APIError.offFor(errorName+'initUser');
},5000);
defer.reject(err);
});
return defer.promise;
},

initSecurityQuestions:function initSecurityQuestions(userId){
var defer=$q.defer();
var securityQuestions={
userSecurityQuestions:{},
tempUserSecurityQuestions:{},
allSecurityQuestions:[],
allSecurityQuestionsDup:[]};


$q.all([
API.cui.getSecurityQuestionAccount({personId:userId}),
API.cui.getSecurityQuestions()]).

then(function(res){
angular.copy(res[0],securityQuestions.userSecurityQuestions);
angular.copy(res[0],securityQuestions.tempUserSecurityQuestions);
angular.copy(res[1],securityQuestions.allSecurityQuestions);
angular.copy(res[1],securityQuestions.allSecurityQuestionsDup);

securityQuestions.allSecurityQuestions.splice(0,1);

var numberOfQuestions=securityQuestions.allSecurityQuestions.length;
var numberOfQuestionsFloor=Math.floor(numberOfQuestions/2);

securityQuestions.allChallengeQuestions0=securityQuestions.allSecurityQuestions.slice(0,numberOfQuestionsFloor);
securityQuestions.allChallengeQuestions1=securityQuestions.allSecurityQuestions.slice(numberOfQuestionsFloor);

securityQuestions.challengeQuestionsTexts=UserProfile.selectTextsForQuestions(securityQuestions);

defer.resolve(securityQuestions);
}).
catch(function(err){
console.error('Failed getting security question data',err);
APIError.onFor(errorName+'initSecurityQuestions');
$timeout(function(){
APIError.offFor(errorName+'initSecurityQuestions');
},5000);
defer.reject(err);
});
return defer.promise;
},

selectTextsForQuestions:function selectTextsForQuestions(securityQuestions){
var challengeQuestionsTexts=[];

angular.forEach(securityQuestions.userSecurityQuestions.questions,function(userQuestion){
var question=_.find(securityQuestions.allSecurityQuestionsDup,function(question){
return question.id===userQuestion.question.id;
});
challengeQuestionsTexts.push($filter('cuiI18n')(question.question));
});
return challengeQuestionsTexts;
},

initPasswordPolicy:function initPasswordPolicy(organizationId){
var defer=$q.defer();
var passwordPolicy={};

API.cui.getOrganization({organizationId:organizationId}).
then(function(res){
passwordPolicy.organization=res;
return API.cui.getPasswordPolicy({policyId:res.passwordPolicy.id});
}).
then(function(res){
passwordPolicy.passwordRules=res.rules;
res.rules.forEach(function(rule){
if(rule.type==='history'){
passwordPolicy.numberOfPasswords=rule.numberOfPasswords;
}
});
defer.resolve(passwordPolicy);
}).
fail(function(err){
console.error('Failed getting password policy data',err);
APIError.onFor(errorName+'initPasswordPolicy');
$timeout(function(){
APIError.offFor(errorName+'initPasswordPolicy');
},5000);
defer.reject(err);
});
return defer.promise;
},

initRegisteredDate:function initRegisteredDate(userId){
var defer=$q.defer();
var lastDate=UserProfile.getTodaysDate();

API.cui.getPersonDetailedStatusHistory({qs:[
['userId',userId],
['startDate','01-Jan-2016'],
['lastDate',lastDate]]}).

then(function(res){
var activeStatusList=[];
res.forEach(function(status,index){
if(status.status==='ACTIVE'){
activeStatusList.push(status);
}
if(res.length-1===index){
_.orderBy(activeStatusList,['creation'],['asc']);
defer.resolve(activeStatusList[0].creation);
}

});
}).
fail(function(error){
console.error('initRegisteredDate: There was an issue retrieving the registered date.');
APIError.onFor(errorName+'initRegisteredDate');
$timeout(function(){
APIError.offFor(errorName+'initRegisteredDate');
},5000);
defer.reject(error);
});

return defer.promise;
},

initUserProfile:function initUserProfile(userId,organizationId){
var defer=$q.defer();
var profile={};
var callsCompleted=0;
var callsToComplete=4;

UserProfile.initUser(userId).
then(function(res){
angular.merge(profile,res);
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(profile);
});

UserProfile.initSecurityQuestions(userId).
then(function(res){
angular.merge(profile,res);
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(profile);
});

UserProfile.initPasswordPolicy(organizationId).
then(function(res){
angular.merge(profile,res);
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(profile);
});

UserProfile.initRegisteredDate(userId).
then(function(res){
profile['registeredDate']=res;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===callsToComplete)defer.resolve(profile);
});

return defer.promise;
},

buildPersonPasswordAccount:function buildPersonPasswordAccount(user,passwordAccount,organization){
return{
version:'1',
username:user.username,
currentPassword:passwordAccount.currentPassword,
password:passwordAccount.password,
passwordPolicy:organization.passwordPolicy,
authenticationPolicy:organization.authenticationPolicy};

},

injectUI:function injectUI(profile,$scope,personId){
var userId=void 0;

personId?
userId=personId:
userId=API.getUser();

profile.saving=false;
profile.fail=false;
profile.success=false;
profile.timezoneById=Timezones.timezoneById;
profile.toggleOffFunctions={};

profile.resetAllData=function(){
angular.copy(profile.userSecurityQuestions,profile.tempUserSecurityQuestions);
angular.copy(profile.user,profile.tempUser);
};

profile.toggleAllOff=function(){
angular.forEach(profile.toggleOffFunctions,function(toggleOff){
toggleOff();
});
profile.resetAllData();
};

profile.pushToggleOff=function(toggleOffObject){
if(!profile.toggleOffFunctions){
profile.toggleOffFunctions={};
}
profile.toggleOffFunctions[toggleOffObject.name]=toggleOffObject.function;
};

profile.resetPasswordFields=function(){
profile.userPasswordAccount={
currentPassword:'',
password:''};

profile.passwordRe='';
};

profile.checkIfRepeatedSecurityAnswer=function(securityQuestions,formObject){
securityQuestions.forEach(function(secQuestion,i){
var securityAnswerRepeatedIndex=_.findIndex(securityQuestions,function(secQuestionToCompareTo,z){
return z!==i&&secQuestion.answer&&secQuestionToCompareTo.answer&&secQuestion.answer.toUpperCase()===secQuestionToCompareTo.answer.toUpperCase();
});
if(securityAnswerRepeatedIndex>-1){
if(formObject['answer'+securityAnswerRepeatedIndex]){
formObject['answer'+securityAnswerRepeatedIndex].$setValidity('securityAnswerRepeated',false);
}
if(formObject['answer'+i]){
formObject['answer'+i].$setValidity('securityAnswerRepeated',false);
}
}else
{
if(formObject['answer'+i]){
formObject['answer'+i].$setValidity('securityAnswerRepeated',true);
}
}
});
};

profile.updatePerson=function(section,toggleOff){
var tempUserWithoutLastLogin=void 0;
if(section){
profile[section]={submitting:true};
}

if(!profile.userCountry){
profile.tempUser.addresses[0].country=profile.user.addresses[0].country;
}else{
profile.tempUser.addresses[0].country=profile.userCountry.originalObject.code;
}

// [7/20/2016] Note: Can't pass in 'activatedDate' anymore when updating a person
delete profile.tempUser.activatedDate;
// Can't pass lastLoginDate
tempUserWithoutLastLogin=Object.assign({},profile.tempUser);
if(tempUserWithoutLastLogin.lastLoginDate){
delete tempUserWithoutLastLogin.lastLoginDate;
};

API.cui.updatePerson({personId:userId,data:tempUserWithoutLastLogin}).
always(function(){
if(section){
profile[section].submitting=false;
}
$scope.$digest();
}).
done(function(){
angular.copy(profile.tempUser,profile.user);
LocaleService.setLocaleByDisplayName(appConfig.languages[profile.user.language]);
if(toggleOff){
toggleOff();
}
}).
fail(function(err){
console.error('Failed to update user profile:',err);
if(section){
profile[section].error=true;
}
});
};

profile.updatePassword=function(section,toggleOff){
if(section)profile[section]={submitting:true};
profile.lifetimeError=false;

API.cui.updatePersonPassword({
personId:userId,
data:UserProfile.buildPersonPasswordAccount(profile.user,profile.userPasswordAccount,profile.organization)}).

always(function(){
if(section)profile[section].submitting=false;
}).
done(function(){
if(toggleOff)toggleOff();
profile.passwordUpdateSuccess=true;
$timeout(function(){return profile.passwordUpdateSuccess=false;},5000);
profile.resetPasswordFields();
$scope.$digest();
}).
fail(function(err){
console.error('Error updating password',err);
if(err.responseJSON.apiMessage.indexOf('does not conform to policy')>1){
profile.lifetimeError=true;
}
if(section)profile[section].error=true;
$scope.$digest();
});
};

profile.saveChallengeQuestions=function(section,toggleOff){
if(section){
profile[section]={submitting:true};
}
profile.userSecurityQuestions=angular.copy(profile.tempUserSecurityQuestions);

API.cui.updateSecurityQuestionAccount({
personId:userId,
data:{
version:'1',
id:userId,
questions:profile.userSecurityQuestions.questions}}).


always(function(){
if(section){
profile[section].submitting=false;
}
}).
done(function(){
if(toggleOff){
toggleOff();
}
profile.challengeQuestionsTexts=UserProfile.selectTextsForQuestions(profile);
$scope.$digest();
}).
fail(function(err){
console.error('Error updating security questions',err);
if(section){
profile[section].error=true;
}
$scope.$digest();
});
};

profile.validatePassword=function(password,formObject,input){

var validSwitch=function validSwitch(input,isValidBoolean,type){
switch(input){
case'newPassword':
if(type==='history')
profile.validNewPasswordHistory=isValidBoolean;else

profile.validNewPasswordDisallowed=isValidBoolean;
case'newPasswordRe':
if(type==='history')
profile.validNewPasswordReHistory=isValidBoolean;else

profile.validNewPasswordReDisallowed=isValidBoolean;}

};

var validateData={
userId:userId,
organizationId:profile.user.organization.id,
password:password,
operations:['PASSWORD_SPECIFY']};


API.cui.validatePassword({data:validateData}).
then(function(res){
var validPasswordHistory=false;
var validateDisallowed=false;
// Sometimes disallowed words will not come in response, In that case need to set form object to true
var disallowedFlag=false;
res.forEach(function(rule){
if(rule.type==='HISTORY'&&rule.isPassed){
validPasswordHistory=true;
}
if(rule.type==='DISALLOWED_WORDS'){
disallowedFlag=true;
if(rule.isPassed){
validateDisallowed=true;
}
}
});
//History Validation
if(validPasswordHistory){
validSwitch(input,true,'history');
}else
{
validSwitch(input,false,'history');
}
//Disallowed words Validation
if(disallowedFlag===false||validateDisallowed===true){
validSwitch(input,true,'disallowed');
}else
{
validSwitch(input,false,'disallowed');
}
if(validPasswordHistory&&(disallowedFlag===false||validateDisallowed===true)){
formObject[input].$setValidity(input,true);
$scope.$digest();
}else
{
formObject[input].$setValidity(input,false);
$scope.$digest();
}
});
};
}};


return UserProfile;
}]);

angular.module('common').
factory('BuildPackageRequests',['API', function(API){

/*
        Helper factory for creating and sending service package requests.

        Usage: BuildPackageRequests(requestorId, requestorType, arrayOfServices)
        Return: Array of API service package request promises
        
        Notes:
            - RequestorType: Whether the requestor is a person or organization (expects 'person' or 'organization')
            - The reason for the request should be under service._reason
            - If no reason is provided and the service package requires a reason, returns undefined and attach
              an _error property (app._error = true) for that service.
            - This factory is not pure (alters the provided array of services)
    */

return function(requestorId,requestorType,arrayOfApps){
var numberOfApps=arrayOfApps.length;

if(!_.isArray(arrayOfApps)||numberOfApps===0){
throw new Error('The argument passed to BuildPackageRequests should be an array of 1 or more services.');
return undefined;
}

var error=false;

for(var i=0;i<numberOfApps;i+=1){
if(arrayOfApps[i].servicePackage.requestReasonRequired&&!arrayOfApps[i]._reason){
arrayOfApps[i]._error=true;
if(!error){
error=true;
}
}
}

if(error){
return undefined;
}

var packagesBeingRequested=[];
var packageRequests=[];

for(var _i2=0;_i2<numberOfApps;_i2+=1){
if(packagesBeingRequested.indexOf(arrayOfApps[_i2].servicePackage.id)>=0){
// If the service package is already being requested, append service to the request reason
// If the request doesn't have a reason here, then it is not required for this service package
if(arrayOfApps[_i2]._reason){
packageRequests[packagesBeingRequested.indexOf(arrayOfApps[_i2].servicePackage.id)].reason+=
'\n'+$filter('translate')('reason-im-requesting')+' '+$filter('cuiI18n')(arrayOfApps[_i2].name)+': '+arrayOfApps[_i2].name._reason;
}
}else
{
// Cache id's in seperate array to check for existing package requests without having to search through the array of requests.
packagesBeingRequested.push(arrayOfApps[_i2].servicePackage.id);
packageRequests.push({
requestor:{
id:requestorId,
type:requestorType},

servicePackage:{
id:arrayOfApps[_i2].servicePackage.id,
type:'servicePackage'},

reason:arrayOfApps[_i2]._reason||''});

}
}

return packageRequests.map(function(data){return API.cui.createPackageRequest({data:data});});

};
}]);

angular.module('common').
factory('AppRequests',['$filter',function($filter){
var appRequestsObject={},
appRequests={};

appRequests.set=function(newAppRequestsObject){
appRequestsObject=newAppRequestsObject;
};

appRequests.get=function(){
return appRequestsObject;
};

appRequests.clear=function(){
appRequestsObject={};
};

appRequests.buildReason=function(app,reason){
var tempApp={};
angular.copy(app,tempApp);
tempApp.reason=$filter('translate')('reason-im-requesting')+' '+$filter('cuiI18n')(tempApp.name)+': '+reason;
return tempApp;
};


appRequests.getPackageRequests=function(userId,arrayOfAppsBeingRequested){
var arrayOfPackagesBeingRequested=[],
arrayOfPackageRequests=[];
arrayOfAppsBeingRequested.forEach(function(app,i){
if(arrayOfPackagesBeingRequested.indexOf(app.servicePackage.id)>-1){// if we've parsed an app that belongs to the same pacakge
if(app.servicePackage.reasonRequired){
arrayOfPackageRequests.some(function(packageRequest,i){
return arrayOfPackageRequests[i].servicePackage.id===app.servicePackage.id?(arrayOfPackageRequests[i].reason=arrayOfPackageRequests[i].reason+('\n\n'+app.reason),true):false;// if we already build a package request for this pacakge then append the reason of why we need this other app
});
}
// if the reason isn't required then we don't need to do anything, we're already requesting this package
}else
{
arrayOfPackageRequests[i]={
'requestor':{
id:userId,
type:'person'},

servicePackage:{
id:app.servicePackage.id,
type:'servicePackage'},

reason:app.servicePackage.reasonRequired?app.reason:undefined};

arrayOfPackagesBeingRequested[i]=app.servicePackage.id;// save the pacakge id that we're requesting in a throwaway array, so it's easier to check if we're
// already requesting this package
}
});
return arrayOfPackageRequests;
};

return appRequests;
}]);
angular.module('common').
factory('ServicePackage',['API', 'APIError', '$q', function(API,APIError,$q){
'use strict';

/*
        This factory was originally used as a type of data storage for storing service package data. The use of this factory
        for storing data is now deprecated in favor of an actual data storage solution in our "DataStorage" factory. 
        The data storage features of this factory will be removed in a future version.

        The focus of this factory will transition to dealing with any other logic associated with service packages.
    */

var servicePackage={};
var errorName='ServicePackageFactory.';
var servicePackageStorage={};

/****************************************
                Helper Functions
    ****************************************/

// Returns services that are associated with a package id
var getPackageServices=function getPackageServices(packageId){
var defer=$q.defer();

API.cui.getPackageServices({packageId:packageId}).
done(function(packageServices){
defer.resolve(packageServices);
}).
fail(function(err){
console.error('Failed getting package services');
APIError.onFor(errorName+'getPackageServices');
defer.reject(err);
});
return defer.promise;
};

// Returns claims that are associated with a package id
var getPackageClaims=function getPackageClaims(packageId){
var defer=$q.defer();

API.cui.getPackageClaims({qs:[['packageId',packageId]]}).
done(function(packageClaims){
defer.resolve(packageClaims);
}).
fail(function(err){
console.error('Failed getting package claims');
APIError.onFor(errorName+'getPackageClaims');
defer.reject(err);
});
return defer.promise;
};

// Returns all data for a specified package id
var getPackageDetails=function getPackageDetails(packageId){
var defer=$q.defer();

API.cui.getPackage({packageId:packageId}).
done(function(packageData){
defer.resolve(packageData);
}).
fail(function(err){
console.error('Failed getting package details');
APIError.onFor(errorName+'getPackageDetails');
defer.reject(err);
});
return defer.promise;
};

/****************************************
                Service Functions
    ****************************************/

// Deprecated
servicePackage.set=function(userId,newServicePackageArray){
servicePackageStorage.userId=newServicePackageArray;
};

// Deprecated
servicePackage.get=function(userId){
return servicePackageStorage.userId;
};

// Deprecated
servicePackage.clear=function(){
servicePackageStorage={};
};

// Deprecated
servicePackage.checkStorage=function(userId){
if(servicePackageStorage.userId){
return true;
}
return false;
};

// This call wraps the getPackageServices(), getPackageClaims(), and getPackageDetails() calls
// Returns all relevant data associated with the provided packageId including its services, claims, and details
servicePackage.getPackageDetails=function(packageId){
var defer=$q.defer();
var packageDetails={};
var callsCompleted=0;

getPackageDetails(packageId).
then(function(packageData){
packageDetails.details=packageData;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(packageDetails);
}
});

getPackageServices(packageId).
then(function(packageServices){
packageDetails.services=packageServices;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(packageDetails);
}
});

getPackageClaims(packageId).
then(function(packageClaims){
packageDetails.claims=packageClaims;
}).
finally(function(){
callsCompleted+=1;
if(callsCompleted===3){
defer.resolve(packageDetails);
}
});

return defer.promise;
};

// Returns all packages for the specified userId with a pending status
servicePackage.getPersonPendingPackages=function(userId){
var defer=$q.defer();

API.cui.getPersonPendingServicePackages({qs:[
['requestor.id',userId],
['requestor.type','person']]}).

done(function(servicePackages){
defer.resolve(servicePackages);
}).
fail(function(err){
console.error('There was an error retrieving pending service packages');
APIError.onFor(errorName+'getPendingPackages');
defer.reject(err);
});

return defer.promise;
};

// This call wraps the service.getPersonPendingServicesPackages() and service.getPackageDetails() calls
// Returns all relevant data for a user's pending packages
servicePackage.getAllUserPendingPackageData=function(userId){
var defer=$q.defer();
var pendingPackageData=[];

servicePackage.getPersonPendingPackages(userId).
then(function(pendingPackages){
var packageDetailCalls=[];

pendingPackages.forEach(function(pendingPackage){
packageDetailCalls.push(
servicePackage.getPackageDetails(pendingPackage.servicePackage.id).
then(function(packageDetails){
angular.merge(pendingPackage,packageDetails);
pendingPackageData.push(pendingPackage);
}));

});

$q.all(packageDetailCalls).
then(function(){
cui.log('packageDetailCalls then',userId,pendingPackageData);
defer.resolve(pendingPackageData);
}).
catch(function(err){
cui.log('packageDetailCalls catch',err);
defer.reject(err);
});
}).
catch(function(err){
defer.reject(err);
});

return defer.promise;
};

// Handles the approval/denial of a package request
// The package request must have a property of "approval" with either "approved" or "denied"
// If the package is denied and the package request has an optional property of "rejectReason", appends the reason to the payload
servicePackage.handlePackageApproval=function(packageRequest){
var data=[['requestId',packageRequest.id]];

if(packageRequest.approval==='approved'){
return API.cui.approvePackage({qs:data});
}else
if(packageRequest.approval==='denied'){
if(packageRequest.rejectReason){
data.push(['justification',packageRequest.rejectReason]);
}
return API.cui.denyPackage({qs:data});
}else{
throw new Error('Package request object must contain "approval" of either "approved" or "denied"');
}
};

return servicePackage;

}]);

angular.module('applications',[]).
config(['$stateProvider',function($stateProvider){

var templateBase='app/modules/applications/';

var returnCtrlAs=function returnCtrlAs(name,asPrefix){return name+'Ctrl as '+(asPrefix||'')+(asPrefix?name[0].toUpperCase()+name.slice(1,name.length):name);};

var loginRequired=true;

$stateProvider.
state('applications',{
url:'/applications',
template:'<div ui-view class="cui-applications"></div>',
access:loginRequired,
abstract:true}).

state('applications.myApplications',{
url:'?page&pageSize&service.category',
templateUrl:templateBase+'myApplications/myApplications.html',
controller:returnCtrlAs('myApplications'),
access:loginRequired}).

state('applications.myApplicationDetails',{
url:'/details/:appId',
templateUrl:templateBase+'myApplications/myApplications-details.html',
controller:returnCtrlAs('myApplicationDetails'),
access:loginRequired}).

state('applications.newRequest',{
url:'/request?userId',
templateUrl:templateBase+'newRequestReview/newRequest.html',
controller:returnCtrlAs('newAppRequest'),
access:loginRequired}).

state('applications.search',{
url:'/search?name&category&page&pageSize',
templateUrl:templateBase+'search/applicationSearch.html',
controller:returnCtrlAs('applicationSearch'),
access:loginRequired}).

state('applications.reviewRequest',{
url:'/review',
templateUrl:templateBase+'newRequestReview/applicationReview.html',
controller:returnCtrlAs('applicationReview'),
access:loginRequired}).

state('applications.manageApplications',{
url:'/manage?name&page&pageSize&service.category&sortBy&grant.status&service.name',
templateUrl:templateBase+'myApplications/myApplications-manage.html',
controller:returnCtrlAs('manageApplications'),
access:loginRequired})

// seperating out as it is a seperate icon on in menu
.state('pendingAppRequests',{
url:'/pendingAppRequests?page&pageSize&sortBy&name',
templateUrl:templateBase+'pendingRequests/pendingRequests.html',
controller:returnCtrlAs('pendingAppRequests'),
access:loginRequired})

/*Organization Applications*/.
state('applications.orgApplications',{
url:'/organization',
template:'<div ui-view></div>',
abstract:true,
access:loginRequired})

/*        .state('applications.orgApplications.applicationList', {
            url: '?name&page&pageSize&service.category&sortBy&grant.status',
            templateUrl: templateBase + 'orgApplications/applicationList/orgApplications-applicationList.html',
            controller: returnCtrlAs('orgApplications'),
            access: loginRequired
        })
        .state('applications.orgApplications.applicationDetails', {
            url: '/application/:appId/details',
            templateUrl: templateBase + 'orgApplications/applicationDetails/orgApplications-applicationDetails.html',
            controller: returnCtrlAs('orgApplicationDetails'),
            access: loginRequired
        })*/.
state('applications.orgApplications.newGrant',{
url:'/application/:appId/new-grant',
templateUrl:templateBase+'orgApplications/newGrant/orgApplications-newGrant.html',
controller:returnCtrlAs('orgAppNewGrant'),
access:loginRequired});

/*        .state('applications.orgApplications.newRequest', {
            url: '/request',
            templateUrl: templateBase + 'orgApplications/appRequest/newRequest/appRequest-newRequest.html',
            controller: returnCtrlAs('orgAppRequest'),
            access: loginRequired
        })
        .state('applications.orgApplications.newRequestReview', {
            url: '/request/review',
            templateUrl: templateBase + 'orgApplications/appRequest/newRequestReview/appRequest-newRequestReview.html',
            controller: returnCtrlAs('orgAppRequestReview'),
            access: loginRequired
        })
        .state('applications.orgApplications.search', {
            url: '/search?name&category&page&pageSize',
            templateUrl: templateBase + 'orgApplications/search/orgApplications-search.html',
            controller: returnCtrlAs('orgAppSearch'),
            access: loginRequired
        });*/
}]);

angular.module('applications').
controller('myApplicationDetailsCtrl',['API', '$scope', '$stateParams', '$state', '$q', 'APIHelpers', 'Loader', 'APIError', 'DataStorage', function(API,$scope,$stateParams,$state,$q,APIHelpers,Loader,APIError,DataStorage){
var myApplicationDetails=this;
myApplicationDetails.relatedApps=[];

// HELPER FUNCTIONS START ------------------------------------------------------------------------
var getClaims=function getClaims(app){
var packageId=app.servicePackage.id;

Loader.onFor(loaderName+'claims');
API.cui.getPersonPackageClaims({grantee:API.getUser(),useCuid:true,packageId:packageId}).
then(function(res){
APIError.offFor(loaderName+'claims');
myApplicationDetails.claims=res;
}).
fail(function(err){
APIError.onFor(loaderName+'claims');
}).
always(function(){
Loader.offFor(loaderName+'claims');
$scope.$digest();
});
};

var getApp=function getApp(updating){
if(!updating){
Loader.onFor(loaderName+'app');
}
API.cui.getPersonGrantedApps(opts).
then(function(res){
APIError.offFor(loaderName+'app');
myApplicationDetails.app=Object.assign({},res[0]);
if(!updating){
getClaims(myApplicationDetails.app);
getRelatedApps(myApplicationDetails.app);
}
}).
fail(function(err){
APIError.onFor(loaderName+'app');
}).
done(function(){
Loader.offFor(loaderName+'app');
$scope.$digest();
});
};
var getRelatedApps=function getRelatedApps(app){
var packageId=app.servicePackage.id;
var qs=void 0;
if(app.servicePackage.parent){
qs=[['servicePackage.id',app.servicePackage.parent.id]];
}else{
qs=[['servicePackage.parentPackage.id',app.servicePackage.id]];
}
Loader.onFor(loaderName+'relatedApps');
var apiPromises=[
API.cui.getPersonRequestableApps({personId:API.getUser(),'qs':[['servicePackage.parentPackage.id',packageId]]}),
API.cui.getPersonGrantedApps({personId:API.getUser(),'qs':qs})];

$q.all(apiPromises).
then(function(res){
APIError.offFor(loaderName+'relatedApps');
myApplicationDetails.relatedApps=myApplicationDetails.relatedApps.concat(res[0]);
myApplicationDetails.relatedApps=myApplicationDetails.relatedApps.concat(res[1]);
}).
catch(function(err){
APIError.onFor(loaderName+'relatedApps');
}).
finally(function(){
Loader.offFor(loaderName+'relatedApps');
});
};
// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

var loaderName='myApplicationDetails.';

var qs={
'service.id':$stateParams.appId};


var opts={
personId:API.getUser(),
useCuid:true,
qs:APIHelpers.getQs(qs)};

myApplicationDetails.app=DataStorage.getType('myAppDetail');
if(myApplicationDetails.app&&myApplicationDetails.app.id===$stateParams.appId){
getClaims(myApplicationDetails.app);
getRelatedApps(myApplicationDetails.app);
// Update application detail for any new changes during reload
// Commenting out as API is not giving full details for service.id query parameter get
//it is relying on previous page details which has full details
// getApp(true)
}else
{
getApp(false);
}

// ON LOAD END -----------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START ----------------------------------------------------------------------

myApplicationDetails.goToDetails=function(application){
$state.go('applications.myApplicationDetails',{
'packageId':application.packageId,
'appId':application.id});

};

// ON CLICK FUNCTIONS END ------------------------------------------------------------------------

}]);

angular.module('applications').
controller('manageApplicationsCtrl',['API', 'APIError', 'APIHelpers', 'DataStorage', 'Loader', 'User', '$filter', '$pagination', '$q', '$scope', '$state', '$stateParams', function(API,APIError,APIHelpers,DataStorage,Loader,User,$filter,$pagination,$q,$scope,$state,$stateParams){

var manageApplications=this;
var userId=User.user.id;
var loaderName='manageApplications.';

var checkedLocalStorage=false;

// HELPER FUNCTIONS START ---------------------------------------------------------------------------------

var switchBetween=function switchBetween(property,firstValue,secondValue){
// helper function to switch a property between two values or set to undefined if values not passed
if(!firstValue){
manageApplications.search[property]=undefined;
return;
}
manageApplications.search[property]=manageApplications.search[property]===firstValue?
secondValue:
firstValue;
};

var getCountsOfStatus=function getCountsOfStatus(qsValue){
var opts={
personId:API.getUser(),
useCuid:true

//Assign query strings if any value passed 
//otherwise it will get full count
};if(qsValue){
opts.qs=[['grant.status',qsValue]];
}
API.cui.getPersonGrantedAppCount(opts).
then(function(res){
if(!qsValue){
manageApplications.popupCount=res;
}else if(qsValue==="active"){
manageApplications.activeCount=res;
}else
{
manageApplications.suspendedCount=res;
}
$scope.$digest();
}).
fail(function(err){

});
};

var getCountsOfcategories=function getCountsOfcategories(){
manageApplications.categories.forEach(function(category,index){
console.log($filter('cuiI18n')(category.name));
var opts={
personId:API.getUser(),
useCuid:true};

opts.qs=[['service.category',$filter('cuiI18n')(category.name)]];
API.cui.getPersonGrantedAppCount(opts).
then(function(res){
category.count=res;
if(index===manageApplications.categories.length-1){
$scope.$digest();
};
}).
fail(function(err){
console.log(err);
if(index===manageApplications.categories.length-1){
$scope.$digest();
};
});
});
};

// HELPER FUNCTIONS END -----------------------------------------------------------------------------------

// ON LOAD START ------------------------------------------------------------------------------------------

var loadStoredData=function loadStoredData(){
// Check DataStorage if this page has been loaded before. We initially populate this screen
// with data that was previously retrieved from the API while we redo calls to get the up to date data.
var storedData=DataStorage.getType('manageApplicationsList');

if(storedData){
Loader.onFor(loaderName+'apps');
manageApplications.list=storedData.appList;
manageApplications.count=storedData.appCount;
manageApplications.categories=storedData.categories;
Loader.offFor(loaderName+'apps');
}

checkedLocalStorage=true;
onLoad(false);
};

var onLoad=function onLoad(previouslyLoaded){
if(previouslyLoaded){
Loader.onFor(loaderName+'reloadingApps');
}else
{
checkedLocalStorage?Loader.onFor(loaderName+'updating'):Loader.onFor(loaderName+'apps');
manageApplications.search=Object.assign({},$stateParams);

Loader.onFor(loaderName+'categories');
API.cui.getPersonAppCategories({personId:API.getUser()}).
then(function(res){
APIError.offFor(loaderName+'categories');
manageApplications.categories=res;
getCountsOfcategories();
APIError.offFor(loaderName+'categories');
}).
fail(function(err){
APIError.onFor(loaderName+'categories');
}).
done(function(){
Loader.offFor(loaderName+'categories');
$scope.$digest();
});
}

manageApplications.search.pageSize=manageApplications.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];

var opts={
personId:API.getUser(),
useCuid:true,
qs:APIHelpers.getQs(manageApplications.search)};


var promises=[
API.cui.getPersonGrantedApps(opts),
API.cui.getPersonGrantedAppCount(opts)];


$q.all(promises).
then(function(res){
// manageApplications.list = Object.assign(res[0]).filter(x => x.hasOwnProperty('urls'))
manageApplications.count=res[1];
manageApplications.list=res[0];
// re-render pagination if available
manageApplications.reRenderPaginate&&manageApplications.reRenderPaginate();

var storageData={
appList:manageApplications.list,
appCount:manageApplications.count,
categories:manageApplications.categories};

DataStorage.setType('manageApplicationsList',storageData);
APIError.offFor(loaderName+'apps');
}).
catch(function(err){
APIError.onFor(loaderName+'apps');
}).
finally(function(){
if(previouslyLoaded){
Loader.offFor(loaderName+'reloadingApps');
}else
{
checkedLocalStorage?Loader.offFor(loaderName+'updating'):Loader.offFor(loaderName+'apps');
}
});
//Lazy loading of counts of applications based on status 
//to display in popover
getCountsOfStatus("active");
getCountsOfStatus("suspended");
//To getFull count
getCountsOfStatus(undefined);


};

loadStoredData();

// ON LOAD END --------------------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START -------------------------------------------------------------------------------

manageApplications.pageChange=function(newpage){
manageApplications.updateSearch('page',newpage);
};

manageApplications.updateSearchByName=function(){
manageApplications.updateSearch('name',manageApplications.search['service.name']);
};
manageApplications.updateSearch=function(updateType,updateValue){
switch(updateType){
case'alphabetic':
switchBetween('sortBy','+service.name','-service.name');
break;
case'date':
switchBetween('sortBy','+grant.instant','-grant.instant');
break;
case'status':
manageApplications.search.page=1;
manageApplications.search['grant.status']=updateValue;
break;
case'category':
manageApplications.search.page=1;
manageApplications.search['service.category']=$filter('cuiI18n')(updateValue);
break;
case'name':
manageApplications.search.page=1;
break;}


// doesn't change state, only updates the url
$state.transitionTo('applications.manageApplications',manageApplications.search,{notify:false});
onLoad(true);
};

manageApplications.goToDetails=function(application){
var opts={
appId:application.id};

DataStorage.setType('myAppDetail',application);
$state.go('applications.myApplicationDetails',opts);
};

// ON CLICK FUNCTIONS END ---------------------------------------------------------------------------------

}]);

angular.module('applications').
controller('myApplicationsCtrl',['API', 'APIError', 'APIHelpers', 'DataStorage', 'Loader', 'User', '$filter', '$pagination', '$q', '$scope', '$state', '$stateParams', function(API,APIError,APIHelpers,DataStorage,Loader,User,$filter,$pagination,$q,$scope,$state,$stateParams){
var myApplications=this;
var userId=User.user.id;
var loaderName='myApplications.';
var checkedLocalStorage=false;

// HELPER FUNCTIONS END -----------------------------------------------------------------------------------
var getCountsOfcategories=function getCountsOfcategories(){
myApplications.categories.forEach(function(category,index){
console.log($filter('cuiI18n')(category.name));
var opts={
personId:userId,
useCuid:true};

opts.qs=[['service.category',$filter('cuiI18n')(category.name)]];
API.cui.getPersonGrantedAppCount(opts).
then(function(res){
//Need to minus each category count with not displayble and other than active apps according to thier categories
category.count=res-(


Object.assign(myApplications.list).filter(function(x){return(
x.category&&$filter('cuiI18n')(x.category)===$filter('cuiI18n')(category.name));}).
length-

Object.assign(myApplications.viewList).filter(function(x){return(
x.category&&$filter('cuiI18n')(x.category)===$filter('cuiI18n')(category.name));}).
length);

if(index===myApplications.categories.length-1){
$scope.$digest();
};
}).
fail(function(err){
console.log(err);
if(index===myApplications.categories.length-1){
$scope.$digest();
};
});
});
};

// HELPER FUNCTIONS END -----------------------------------------------------------------------------------

// ON LOAD START ------------------------------------------------------------------------------------------
var loadStoredData=function loadStoredData(){
// Check DataStorage if this page has been loaded before. We initially populate this screen
// with data that was previously retrieved from the API while we redo calls to get the up to date data.
var storedData=DataStorage.getType('myApplicationsList');

if(storedData){
Loader.onFor(loaderName+'apps');
myApplications.list=storedData.appList;
myApplications.viewList=Object.assign(myApplications.list).filter(function(x){return x.servicePackage.displayable===true&&x.grant.status=='active';});
myApplications.count=storedData.appCount;
myApplications.categories=storedData.categories;
Loader.offFor(loaderName+'apps');
}

checkedLocalStorage=true;
onLoad(false);
};

var onLoad=function onLoad(previouslyLoaded){
if(previouslyLoaded){
Loader.onFor(loaderName+'reloadingApps');
}else
{
checkedLocalStorage?Loader.onFor(loaderName+'updating'):Loader.onFor(loaderName+'apps');
myApplications.search=Object.assign({},$stateParams);

Loader.onFor(loaderName+'categories');
API.cui.getPersonAppCategories({personId:API.getUser()}).
then(function(res){
APIError.offFor(loaderName+'categories');
myApplications.categories=res;
getCountsOfcategories();
APIError.offFor(loaderName+'categories');
}).
fail(function(err){
console.error('There was an error in fetcting user\'s app category details '+err);
APIError.onFor(loaderName+'categories');
}).
done(function(){
Loader.offFor(loaderName+'categories');
$scope.$digest();
});
}

myApplications.search.pageSize=myApplications.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];

var opts={
personId:API.getUser(),
useCuid:true,
qs:APIHelpers.getQs(myApplications.search)};

opts.qs.push(['grant.status','active']);
var promises=[
API.cui.getPersonGrantedApps(opts),
API.cui.getPersonGrantedAppCount(opts)];


$q.all(promises).
then(function(res){
myApplications.viewList=Object.assign(res[0]).filter(function(x){return x.servicePackage.displayable===true&&x.grant.status=='active';});
if(!previouslyLoaded){
myApplications.count=res[1];
}
myApplications.popupCount=myApplications.count-Object.assign(res[0]).filter(function(x){return x.servicePackage.displayable!==true||x.grant.status!=='active';}).length;
myApplications.list=res[0];
// re-render pagination if available
myApplications.reRenderPaginate&&myApplications.reRenderPaginate();

var storageData={
appList:myApplications.list,
appCount:myApplications.count,
categories:myApplications.categories};

DataStorage.setType('myApplicationsList',storageData);
APIError.offFor(loaderName+'apps');
}).
catch(function(err){
console.error('There was an error in fetcting user\'s granted applications '+err);
APIError.onFor(loaderName+'apps');
}).
finally(function(){
if(previouslyLoaded){
Loader.offFor(loaderName+'reloadingApps');
}else
{
checkedLocalStorage?Loader.offFor(loaderName+'updating'):Loader.offFor(loaderName+'apps');
}
});
};

loadStoredData();

// ON LOAD END --------------------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START -------------------------------------------------------------------------------

myApplications.pageChange=function(newpage){
myApplications.updateSearch('page',newpage);
};

myApplications.updateSearch=function(updateType,updateValue){
switch(updateType){
case'category':
myApplications.search.page=1;
myApplications.search['service.category']=$filter('cuiI18n')(updateValue);
break;}


// doesn't change state, only updates the url
$state.transitionTo('applications.myApplications',myApplications.search,{notify:false});
onLoad(true);
};
}]);

angular.module('applications').
controller('applicationReviewCtrl',['$scope','API','AppRequests','$timeout','$state','$q','localStorageService',function($scope,API,AppRequests,$timeout,$state,$q,localStorage){

var applicationReview=this;

if(Object.keys(AppRequests.get()).length===0&&localStorage.get('appsBeingRequested')){
AppRequests.set(localStorage.get('appsBeingRequested'));
}

var appRequests=angular.copy(AppRequests.get());
angular.forEach(appRequests,function(request){
if(request.bundledApps){
request.bundledApps.forEach(function(bundledApp){
if(appRequests[bundledApp.id]){
delete appRequests[bundledApp.id];
}
});
}
});
var appsBeingRequested=Object.keys(appRequests);

if(appsBeingRequested.length===0){
$state.go('applications.search');
}

// ON LOAD START ---------------------------------------------------------------------------------

applicationReview.appRequests=[];

for(var i=0;i<appsBeingRequested.length;i+=2){
var applicationGroup=[];
applicationGroup.push(appRequests[appsBeingRequested[i]]);
if(appRequests[appsBeingRequested[i+1]]){
applicationGroup.push(appRequests[appsBeingRequested[i+1]]);
}
//get Terms And Conditions for requested packages
applicationGroup.forEach(function(app){
if(app.servicePackage.personTacEnabled){
API.cui.getOrgTacOfPackage({packageId:app.servicePackage.id}).
then(function(res){
app.tac=res;
}).
fail(function(err){
console.log("There was an error fetching Tac");
console.log(err);
});
}
});
applicationReview.appRequests.push(applicationGroup);
}

applicationReview.numberOfRequests=0;
appsBeingRequested.forEach(function(){
applicationReview.numberOfRequests+=1;
});

// ON LOAD END ------------------------------------------------------------------------------------

// ON CLICK START ---------------------------------------------------------------------------------
var applicationRequestArray=void 0;

var requestsValid=function requestsValid(){
applicationRequestArray=[];
applicationReview.attempting=true;
var error=false;
applicationReview.appRequests.forEach(function(appRequestGroup,i){

appRequestGroup.forEach(function(appRequest,x){
if(appRequest.servicePackage.reasonRequired){
if(!appRequest.reason||appRequest.reason===''){
appRequest.reasonRequired=true;
applicationReview.attempting=false;
error=true;
}else
{
appRequest.reasonRequired=false;
applicationRequestArray[i+x]=AppRequests.buildReason(appRequest,appRequest.reason);
}
}else{
applicationRequestArray[i+x]=appRequest;
}
});
});
applicationReview.error=error;
if(error){
return false;
}else{
return true;
}
};

applicationReview.submit=function(){
if(!requestsValid()){
return;
}
var appRequests=AppRequests.getPackageRequests(API.getUser(),applicationRequestArray);

var requestsPromises=[];

appRequests.forEach(function(appRequest){
requestsPromises.push(API.cui.createPackageRequest({data:appRequest}));
});

$q.all(requestsPromises).
then(function(res){
applicationReview.attempting=false;
applicationReview.success=true;
AppRequests.clear();// clears app requests if the request goes through
localStorage.set('appsBeingRequested',{});
$timeout(function(){
$state.go('applications.myApplications');
},3000);
}).
catch(function(){
applicationReview.attempting=false;
applicationReview.error=true;
});
};

applicationReview.updateSearch=function(nameSearch){
applicationReview.search=nameSearch;
};

applicationReview.showTac=function(application){
if(application.tac){
applicationReview.tacContent=application.tac.tacText;
applicationReview.step=2;
}
};

// Error validation
applicationReview.customError={
email:{
email:function email(){
var EMAIL_REGEXP=/^[a-z0-9!#$%&*?_.-]+@[a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+[.][a-z0-9!#$%&*?_.-][a-z0-9!#$%&*?_.-]+/i;
if(applicationReview.extendedData&&applicationReview.extendedData.email){
return EMAIL_REGEXP.test(applicationReview.extendedData.email);
}else{
return true;
}
}}


// ON CLICK END -----------------------------------------------------------------------------------
};
}]);
angular.module('applications').
controller('newAppRequestCtrl',['API','$scope','$state','AppRequests','localStorageService','Loader','$pagination','APIHelpers','$stateParams',
function(API,$scope,$state,AppRequests,localStorage,Loader,$pagination,APIHelpers,$stateParams){

var newAppRequest=this;

newAppRequest.step="selectCategory";
newAppRequest.searchParams=Object.assign({},$stateParams);
newAppRequest.searchParams.pageSize=newAppRequest.searchParams.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];

// HELPER FUNCTIONS START ------------------------------------------------------------------------

// HELPER FUNCTIONS END ---------------------------------------------------------------------------

// ON LOAD START ----------------------------------------------------------------------------------------

// QIMS Customization Start
if(_.find(API.user.roles,function(role){return role==="QI Employee Birthright";})){
newAppRequest.step="selectUser";
newAppRequest.requestBy="yourself";
}


if(Object.keys(AppRequests.get()).length===0&&localStorage.get('appsBeingRequested')){
AppRequests.set(localStorage.get('appsBeingRequested'));
}
var appsBeingRequested=AppRequests.get();

newAppRequest.appsBeingRequested=[];
newAppRequest.numberOfRequests=0;

Object.keys(appsBeingRequested).forEach(function(appId){
// This sets the checkboxes back to marked when the user clicks back
newAppRequest.numberOfRequests+=1;
newAppRequest.appsBeingRequested.push(appsBeingRequested[appId]);
});

API.cui.getCategories().
then(function(res){
newAppRequest.categories=res;
newAppRequest.loadingDone=true;
$scope.$digest();
});

// ON LOAD END ------------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START -----------------------------------------------------------------------

newAppRequest.searchCallback=function(searchWord){
$state.go('applications.search',{name:searchWord});
};

newAppRequest.updateSearchParams=function(page){
newAppRequest.searchParams.page=page;
API.cui.getPersons({qs:APIHelpers.getQs(newAppRequest.searchParams)}).
then(function(res){
newAppRequest.userList=res;
Loader.offFor('newAppRequest.userList');
$scope.$digest();
}).
fail(function(err){
console.log('There was an error fetching persons'+err);

});
};

newAppRequest.userClick=function(user){
newAppRequest.step="selectCategory";
newAppRequest.searchParams.userId=user.id;
$state.transitionTo('applications.newRequest',newAppRequest.searchParams,{notify:false});
};
// ON CLICK FUNCTIONS END -------------------------------------------------------------------------

// WATCHERS---------------------------------------------

$scope.$watch("newAppRequest.requestBy",function(newValue){
if(newValue&&newValue==='others'){
if(!newAppRequest.userList){
Loader.onFor('newAppRequest.userList');
API.cui.countPersons().
then(function(count){
newAppRequest.userCount=count;
newAppRequest.updateSearchParams(1);
}).
fail(function(err){
console.log('There was an error fetching persons'+err);
});
}else
{
Loader.offFor('newAppRequest.userList');
}
}
},true);
}]);

angular.module('applications').
controller('pendingAppRequestsCtrl',['API', 'APIError', 'APIHelpers', 'DataStorage', 'Loader', '$filter', '$pagination', '$q', '$scope', '$state', '$stateParams', function(API,APIError,APIHelpers,DataStorage,Loader,$filter,$pagination,$q,$scope,$state,$stateParams){

var pendingAppRequests=this;
var loaderName='pendingAppRequests.';

var checkedLocalStorage=false;
// HELPER FUNCTIONS START ---------------------------------------------------------------------------------

var switchBetween=function switchBetween(property,firstValue,secondValue){
// helper function to switch a property between two values or set to undefined if values not passed
if(!firstValue){
pendingAppRequests.search[property]=undefined;
return;
}
pendingAppRequests.search[property]=pendingAppRequests.search[property]===firstValue?
secondValue:
firstValue;
};

// HELPER FUNCTIONS END ---------------------------------------------------------------------------------

// ON LOAD START ------------------------------------------------------------------------------------------

var loadStoredData=function loadStoredData(){
// Check DataStorage if this page has been loaded before. We initially populate this screen
// with data that was previously retrieved from the API while we redo calls to get the up to date data.
var storedData=DataStorage.getType('pendingAppRequestsList');

if(storedData){
Loader.onFor(loaderName+'apps');
pendingAppRequests.list=storedData.appList;
// Pagination not supported now 
// pendingAppRequests.count = storedData.appCount
Loader.offFor(loaderName+'apps');
}

checkedLocalStorage=true;
onLoad(false);
};

var onLoad=function onLoad(previouslyLoaded){
if(previouslyLoaded){
Loader.onFor(loaderName+'reloadingApps');
}else
{
checkedLocalStorage?Loader.onFor(loaderName+'updating'):Loader.onFor(loaderName+'apps');
pendingAppRequests.search=Object.assign({},$stateParams);
}
// Pagination not supported now 
// pendingAppRequests.search.pageSize = pendingAppRequests.search.pageSize || $pagination.getUserValue() || $pagination.getPaginationOptions()[0]

var opts={
personId:API.getUser(),
useCuid:true,
qs:APIHelpers.getQs(pendingAppRequests.search)};


var promises=[
API.cui.getPersonPendingApps(opts)
// Pagination not supported now 
// API.cui.getPersonGrantedAppCount(opts)
];

$q.all(promises).
then(function(res){
// Pagination not supported now 
// pendingAppRequests.count = res[1]
pendingAppRequests.list=res[0];
// re-render pagination if available
// Pagination not supported now
// pendingAppRequests.reRenderPaginate && pendingAppRequests.reRenderPaginate()

var storageData={
appList:pendingAppRequests.list
// appCount: pendingAppRequests.count, 
};
DataStorage.setType('pendingAppRequestsList',storageData);
APIError.offFor(loaderName+'apps');
}).
catch(function(err){
console.error('There was an error in fetcting user\'s pending applications '+err);
APIError.onFor(loaderName+'apps');
}).
finally(function(){
if(previouslyLoaded){
Loader.offFor(loaderName+'reloadingApps');
}else
{
checkedLocalStorage?Loader.offFor(loaderName+'updating'):Loader.offFor(loaderName+'apps');
}
});
};

loadStoredData();

// ON LOAD END ------------------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START -------------------------------------------------------------------------------

pendingAppRequests.pageChange=function(newpage){
pendingAppRequests.updateSearch('page',newpage);
};

pendingAppRequests.updateSearch=function(updateType,updateValue){
switch(updateType){
case'alphabetic':
switchBetween('sortBy','+service.name','-service.name');
break;
case'date':
switchBetween('sortBy','+requestedDate','-requestedDate');
break;
case'name':
// Pagination not supported now 
// myApplications.search.page = 1
pendingAppRequests.search['name']=updateValue;
break;}


// doesn't change state, only updates the url
$state.transitionTo('pendingAppRequests',pendingAppRequests.search,{notify:false});
onLoad(true);
};

pendingAppRequests.searchCallback=function(searchWord){
pendingAppRequests.updateSearch('name',searchWord);
};

// ON CLICK FUNCTIONS END -------------------------------------------------------------------------------
}]);
angular.module('applications').
controller('applicationSearchCtrl',['API','$scope','$stateParams','$state','AppRequests','localStorageService','$q','$pagination',function(API,$scope,$stateParams,$state,AppRequests,localStorage,$q,$pagination){
var applicationSearch=this;

if(Object.keys(AppRequests.get()).length===0&&localStorage.get('appsBeingRequested')){// If there's nothing in app memory and there's something in local storage
AppRequests.set(localStorage.get('appsBeingRequested'));
}
applicationSearch.packageRequests=AppRequests.get();
applicationSearch.appCheckbox={};

// HELPER FUNCTIONS START ------------------------------------------------------------------------

var processNumberOfRequestedApps=function processNumberOfRequestedApps(pkgRequest){
if(pkgRequest){
applicationSearch.numberOfRequests+=1;
}else{
applicationSearch.numberOfRequests-=1;
}
};

var updateViewList=function updateViewList(list){
var deferred=$q.defer();
applicationSearch.viewList=[];
var qs=[];
var apiPromises=[];
angular.forEach(list,function(app,parentIndex){
// Child App and Parent app requested by user
if(app.servicePackage.parent&&app.relatedApps){
var flag=false;
angular.forEach(app.relatedApps,function(realtedApp,index){
if(_.find(list,{id:realtedApp.id})){
flag=true;
}else
{
qs.push(['service.id',realtedApp.id]);
}
if(index===app.relatedApps.length-1&&qs.length!==0){
apiPromises.push(API.cui.getPersonRequestableApps({personId:API.getUser(),qs:qs}));
qs=[];
}
});
}else
{
applicationSearch.viewList.push(app);
}
});
$q.all(apiPromises).
then(function(res){
angular.forEach(res,function(app){var _applicationSearch$vi,_applicationSearch$li;
if(applicationSearch.search.name){
app[0].expanded=true;
}
(_applicationSearch$vi=applicationSearch.viewList).push.apply(_applicationSearch$vi,_toConsumableArray(app));
(_applicationSearch$li=applicationSearch.list).push.apply(_applicationSearch$li,_toConsumableArray(app));
});
deferred.resolve();
}).
catch(function(err){
console.log("There was an error loading parent requestable apps");
deferred.reject(err);
});
return deferred.promise;
};

// HELPER FUNCTIONS END --------------------------------------------------------------------------

// ON LOAD START ---------------------------------------------------------------------------------

var onLoad=function onLoad(previouslyLoaded){
if(previouslyLoaded){
applicationSearch.doneReloading=false;
}else
{// pre populate fields based on state params on first load
var numberOfRequests=0;
Object.keys(applicationSearch.packageRequests).forEach(function(appId){// Gets the list of package requests saved in memory
// This sets the checkboxes back to marked when the user clicks back after being in request review
applicationSearch.appCheckbox[appId]=true;
numberOfRequests+=1;
});
applicationSearch.numberOfRequests=numberOfRequests;

applicationSearch.search={};
applicationSearch.search.name=$stateParams.name;
applicationSearch.search.category=$stateParams.category;
applicationSearch.search.page=parseInt($stateParams.page,10);
applicationSearch.search.pageSize=parseInt($stateParams.pageSize,10);
}

var query=[];
if(applicationSearch.search.name){
query.push(['service.name',applicationSearch.search.name]);
}
if(applicationSearch.search.category){
query.push(['service.category',applicationSearch.search.category]);
}

applicationSearch.search.pageSize=applicationSearch.search.pageSize||$pagination.getUserValue()||$pagination.getPaginationOptions()[0];
query.push(['pageSize',String(applicationSearch.search.pageSize)]);

applicationSearch.search.page=applicationSearch.search.page||1;
query.push(['page',String(applicationSearch.search.page)]);

var opts={
personId:API.getUser(),
useCuid:true,
qs:query};


var promises=[API.cui.getPersonRequestableApps(opts),API.cui.getPersonRequestableCount(opts)];

$q.all(promises).
then(function(res){
applicationSearch.list=res[0];
applicationSearch.count=res[1];
updateViewList(res[0]).
then(function(){
applicationSearch.doneReloading=applicationSearch.doneLoading=true;
});
});
};
onLoad(false);

// ON LOAD END ------------------------------------------------------------------------------------

// ON CLICK FUNCTIONS START -----------------------------------------------------------------------

applicationSearch.pageChange=function(newpage){
applicationSearch.updateSearch('page',newpage);
};

applicationSearch.updateSearch=function(updateType,updateValue){
if(updateType!=='page'){
applicationSearch.search.page=1;
}

// doesn't change state, only updates the url
$state.transitionTo('applications.search',applicationSearch.search,{notify:false});
onLoad(true);
};

applicationSearch.toggleRequest=function(application){
if(!applicationSearch.packageRequests[application.id]){
applicationSearch.packageRequests[application.id]=application;
}else{
delete applicationSearch.packageRequests[application.id];
}
localStorage.set('appsBeingRequested',applicationSearch.packageRequests);
processNumberOfRequestedApps(applicationSearch.packageRequests[application.id]);
};

applicationSearch.saveRequestsAndCheckout=function(){
var qs=[];
//needed to set a flag for related apps to display in review page
angular.forEach(applicationSearch.packageRequests,function(request){
if(request.relatedApps){
request.relatedAppSelectedCount=0;
request.relatedApps.forEach(function(relatedApp){
if(_.find(applicationSearch.packageRequests,{id:relatedApp.id})){
relatedApp.selected=true;
request.relatedAppSelectedCount++;
}else
{
relatedApp.selected=false;
}
});
}
// If Selected Related app full details not available need to fetch it
if(!request.servicePackage){
qs.push(['service.id',request.id]);
}
});
if(qs.length!==0){
API.cui.getPersonRequestableApps({personId:API.getUser(),qs:qs}).
then(function(res){
res.forEach(function(app){
applicationSearch.packageRequests[app.id]=app;
});
AppRequests.set(applicationSearch.packageRequests);
$state.go('applications.reviewRequest');
});
}else
{
AppRequests.set(applicationSearch.packageRequests);
$state.go('applications.reviewRequest');
}
};

//Related apps will always appear inside body, So need to select parent if it is selected 
applicationSearch.checkRelatedAppsBody=function(relatedApp,parent){
if(_.find(applicationSearch.list,{id:relatedApp.id})){
applicationSearch.toggleRequest(_.find(applicationSearch.list,{id:relatedApp.id}));
}else
{
applicationSearch.list.push(relatedApp);
applicationSearch.toggleRequest(relatedApp);
}
applicationSearch.checkRelatedAndBundledApps(_.find(applicationSearch.list,{id:relatedApp.id}),parent);
};

//Deselect Child apps If it has any and select parent if checked from parent body 
applicationSearch.checkRelatedAndBundledApps=function(application,parent){
//if unchecked the checkbox
if(!applicationSearch.packageRequests[application.id]){
//if it is a parent then then deselect childs
if(!parent){
application.relatedApps&&application.relatedApps.forEach(function(relatedApp){
if(applicationSearch.appCheckbox[relatedApp.id]){
applicationSearch.appCheckbox[relatedApp.id]=!applicationSearch.appCheckbox[relatedApp.id];
applicationSearch.toggleRequest(_.find(applicationSearch.list,{id:relatedApp.id}));
}
});
applicationSearch.checkBundledApps(application,false);
}
}else{
if(parent){
if(!applicationSearch.appCheckbox[parent.id]){
applicationSearch.appCheckbox[parent.id]=true;
applicationSearch.toggleRequest(parent);
applicationSearch.checkBundledApps(parent,true);
}
}else
applicationSearch.checkBundledApps(application,true);
}
};

applicationSearch.checkBundledApps=function(application,check){
if(application.bundledApps){
application.bundledApps.forEach(function(bundledApp){
applicationSearch.appCheckbox[bundledApp.id]=check;
if(_.find(applicationSearch.list,{id:bundledApp.id}))
applicationSearch.toggleRequest(_.find(applicationSearch.list,{id:bundledApp.id}));
});
}
};
// ON CLICK FUNCTIONS END -------------------------------------------------------------------------

}]);

angular.element(document).ready(function(){
angular.module('app',['common','misc','registration','applications','organization','user','ngAnimate']);

angular.module('app').
config(['$urlRouterProvider',function($urlRouterProvider){

// Fixes infinite digest loop with ui-router (do NOT change unless absolutely required)
$urlRouterProvider.otherwise(function($injector){
var $state=$injector.get('$state');
$state.go('welcome');
});

}]);

angular.module('app').run(['$templateCache',function($templateCache){
'use strict';

$templateCache.put('app/common-templates/index/content.html',
"<snap-drawer ng-if=base.menu.mobile.enabled>\n"+
"  \n"+
"  <div ng-include=\"'app/common-templates/index/snap-menu-mobile.html'\"></div>\n"+
"</snap-drawer>\n"+
"\n"+
"<snap-content snap-opt-disable=\"'right'\" ng-class=base.theme.get()>\n"+
"  \n"+
"  <div disable-animate class=cui-desktop-menu ng-class=\"{'cui-desktop-menu--collapse' : base.menu.desktop.state==='closed'}\" ng-if=base.menu.desktop.enabled ng-include=\"'app/common-templates/index/snap-menu.html'\"></div>\n"+
"\n"+
"  \n"+
"  <div class=cui-nav__content-wrapper ng-class=\"{\n"+
"      'cui-desktop-menu--collapse' : base.menu.desktop.state==='closed', \n"+
"      'cui-nav__content-wrapper--full-width': !base.menu.desktop.enabled\n"+
"    }\">\n"+
"    <div class=\"cui-menu__toggle-button--desktop cui-menu__toggle-button-container active\" ng-click=base.menu.desktop.toggle() ng-class=\"{'active' : base.menu.desktop.state==='open'}\" ng-if=base.menu.desktop.enabled style=margin-right:20px>\n"+
"      <div class=cui-menu__toggle-button></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <header class=cui-header>\n"+
"      <div ng-include=\"'app/common-templates/index/header.html'\"></div>\n"+
"    </header>\n"+
"\n"+
"    \n"+
"    \n"+
"\n"+
"    \n"+
"    <div ui-view class=\"js-main-content dummy\" ng-cloak ng-class=\"{'js-main-content--search-open': searchEnabled}\"></div>\n"+
"    \n"+
"    <div class=cui-footer ng-include=\"'app/common-templates/index/footer.html'\"></div>\n"+
"  </div>\n"+
"</snap-content>\n");



$templateCache.put('app/common-templates/index/footer.html',
"  <div class=cui-footer__col><a href=https://www.quintilesims.com/ target=_blank class=cui-footer__link>QuintilesIMS</a></div>\n"+
"          <div class=cui-footer__col><a href=https://www.quintilesims.com/terms-of-use target=_blank class=cui-footer__link>{{'terms-of-service' | translate}}</a></div>\n"+
"          <div class=cui-footer__col><a href=https://www.quintilesims.com/privacy-statement target=_blank class=cui-footer__link>{{'privacy-policy' | translate}}</a></div>\n"+
"          <div class=cui-footer__col><a href=https://www.quintilesims.com/contact-us target=_blank class=cui-footer__link>{{'contact-us' | translate}}</a></div>\n"+
"          <div class=cui-footer__col ng-translate-language-select class=cui-footer__translate></div>\n"+
"\n"+
"\n"+
"<div class=cui-footer__col ng-translate-language-select class=cui-footer__translate></div>\n");



$templateCache.put('app/common-templates/index/header.html',
"<div class=cui-header__top>\n"+
"  <div class=\"menu-toggle menu-toggle--mobile\" snap-toggle=left ng-click=base.menu.mobile.toggle() ng-if=base.menu.mobile.enabled style=margin-right:20px>\n"+
"    <div class=menu-toggle--button></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"    <div class=cui-header__search-container ng-model=searchEnabled ng-if=base.accessByAnyAdmin()>\n"+
"        <a ui-sref=search><cui-icon cui-svg-icon=cui:search svg-class=cui-header__search-icon preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </a>\n"+
"    </div>\n"+
"\n"+
"  \n"+
"    <svg class=cui-header__svg-logo ng-class=\"{'cui-header__svg-logo_displaced': base.user.name.given}\" viewBox=\"0 0 640 124\">\n"+
"      <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=\"\"></use>\n"+
"    </svg>\n"+
"\n"+
"  <div class=cui-profile class-toggle toggled-class=cui-profile--active ng-click=toggleClass() off-click=toggleOff() ng-if=base.user.name.given>\n"+
"    \n"+
"    <span class=cui-profile__user-name>{{base.user.name.given}} {{base.user.name.surname}}</span>\n"+
"\n"+
"    \n"+
"    <div class=cui-profile__user-avatar cui-avatar cui-avatar-email=base.user.email cui-avatar-names=\"[base.user.name.given, base.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"\n"+
"    \n"+
"    <div id=cui-profile__popup class=cui-profile__user-menu>\n"+
"      <div class=cui-profile__menu-item ui-sref=user.profile({orgId:base.user.organization.id,userId:base.user.id})>\n"+
"        <a href=\"\" class=cui-profile__link>{{'cui-my-profile' | translate}}</a>\n"+
"        <div>\n"+
"          <cui-icon cui-svg-icon=cui:profile svg-class=cui-profile__link-icon use-class=svg viewbox=\"-2 -2 52 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"                \n"+
"      <div class=cui-profile__menu-item ng-click=base.logout()>\n"+
"        <a href=\"\" class=cui-profile__link>{{'log-out' | translate}}</a>\n"+
"        <div>\n"+
"          <cui-icon cui-svg-icon=cui:log-out svg-class=cui-profile__link-icon use-class=svg viewbox=\"-2 -2 52 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=fa:arrow459 svg-class=cui-profile__chevron use-class=svg viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"  </div>\n"+
"  <div ng-if=!base.user.name.given class=cui-profile>\n"+
"    <li class=cui-off-canvas__section ng-class=cui-off-canvas__section--active>\n"+
"      <a class=cui-off-canvas__section-link ui-sref=applications.myApplications disabled>\n"+
"         <span class=cui-styleguide__nav__name>{{'cui-login' | translate }}</span>\n"+
"      </a>\n"+
"    </li>\n"+
"  </div>\n"+
"  <div ng-if=!base.user.name.given class=cui-profile__mobile-login>\n"+
"    <li class=cui-off-canvas__section ng-class=cui-off-canvas__section--active>\n"+
"      <a class=cui-off-canvas__section-link ui-sref=applications.myApplications disabled>\n"+
"         <span class=cui-styleguide__nav__name>{{'cui-login' | translate }}</span>\n"+
"      </a>\n"+
"    </li>\n"+
"  </div>\n"+
"    \n"+
"  <div class=pending_notification class-toggle toggled-class=pending_notification--active ng-click=toggleClass() off-click=toggleOff() ng-if=base.user.name.given>\n"+
"    \n"+
"    <svg class=cursor__pointer width=22px height=24px viewBox=\"0 0 22 24\" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink>\n"+
"      \n"+
"      <title>Bell</title>\n"+
"      <desc>Created with Sketch.</desc>\n"+
"      <defs></defs>\n"+
"      <g id=Symbols stroke=none stroke-width=1 fill=none fill-rule=evenodd>\n"+
"          <g id=Notification-Icon transform=\"translate(1.000000, -3.000000)\" stroke-width=0.5 stroke=#FFFFFF fill=#FFFFFF>\n"+
"              <g id=Bell>\n"+
"                  <g transform=\"translate(0.000000, 3.000000)\">\n"+
"                      <path d=\"M0.196491532,19.1216063 C0.0879722556,19.1216063 0.0387030805,19.0412224 0.0846895705,18.9457112 L2.22984183,14.4903604 L2.22984183,7.9274928 C2.22984183,7.9274928 2.38475426,3.00517126 8.09891803,1.93174439 C8.09891803,1.93174439 9.69392945,-0.337757414 11.7378074,1.93174439 C11.7378074,1.93174439 16.5694189,2.6368854 17.3591617,7.91211909 L17.3591617,14.459613 L19.7582272,18.9445435 C19.8105363,19.0423326 19.7644283,19.1216063 19.6564496,19.1216063 L0.196491532,19.1216063 Z\" id=Shape></path>\n"+
"                      <path d=\"M7.5,21.1153846 L11.6357054,21.1153846 C11.6357054,21.1153846 11.7081548,23.5201737 9.68626795,23.5828833 C9.68626795,23.5828833 7.64581208,23.935581 7.5,21.1153846 L7.5,21.1153846 Z\" id=Shape></path>\n"+
"                  </g>\n"+
"              </g>\n"+
"          </g>\n"+
"      </g>\n"+
"    </svg>\n"+
"    <sup class=bell_badge ng-if=\"(base.user.pendingApps && base.user.pendingApps.length!=0)|| (base.user.totalCount&&base.user.totalCount!==0)\">\n"+
"      <svg width=7px height=7px viewBox=\"0 0 7 7\" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink>\n"+
"        \n"+
"        <title>bell-badge</title>\n"+
"        <desc>Created with Sketch.</desc>\n"+
"        <defs></defs>\n"+
"        <g id=Symbols stroke=none stroke-width=1 fill=none fill-rule=evenodd>\n"+
"            <g id=Notification-Icon transform=\"translate(-19.000000, 0.000000)\" fill=#FF4400>\n"+
"                <g id=bell-badge>\n"+
"                    <circle cx=22.8529412 cy=3.92307692 r=3></circle>\n"+
"                </g>\n"+
"            </g>\n"+
"        </g>\n"+
"      </svg>\n"+
"    </sup>\n"+
"    <div class=pending-content_wrapper>      \n"+
"      <div class=\"dummy pending-content__block\">\n"+
"        <div class=pending-content__title-container>\n"+
"          <h4 class=\"cui-action__title cui-action__title-small\" ng-if=base.canGrantAppToUser()>{{'pending'|translate}} {{'requests'|translate}}</h4>\n"+
"          <h4 class=\"cui-action__title cui-action__title-small\" ng-if=!base.canGrantAppToUser()>{{'pending'|translate}} {{'approval'|translate}}</h4>\n"+
"          \n"+
"          <div ng-click=\"base.pendingNotificationFlag=false\">\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"          </div>\n"+
"        </div>\n"+
"        <div ng-if=!base.canGrantAppToUser()> \n"+
"          <div class=pending-content__row ng-repeat=\"pendingApp in base.user.pendingApps\">\n"+
"            {{pendingApp|cuiI18n|capitalize}}\n"+
"          </div>\n"+
"          <div class=pending-content__row ng-if=\"base.user.pendingApps.length==0\">\n"+
"            {{'no-pending-apps'|translate}}\n"+
"          </div>\n"+
"        </div>\n"+
"        <div ng-if=base.canGrantAppToUser()>\n"+
"          <div class=pending-content__row ui-sref=organization.requests.usersRegistrationRequests ng-click=\"base.pendingNotificationFlag=false\">{{'user'|translate}}({{base.user.userRegistrationRequestsCount}})</div>\n"+
"          <div class=pending-content__row ui-sref=organization.requests.usersAppRequests ng-click=\"base.pendingNotificationFlag=false\"> {{'user'|translate}} {{'cui-applications'|translate}}({{base.user.userAppRequestsCount}})</div>\n"+
"          <div class=pending-content__row ui-sref=organization.requests.orgRegistrationRequests ng-click=\"base.pendingNotificationFlag=false\">{{'cui-org'|translate}}({{base.user.orgRegistrationRequestsCount}})</div>\n"+
"          <div class=pending-content__row ui-sref=organization.requests.orgAppRequests ng-click=\"base.pendingNotificationFlag=false\">{{'cui-org'|translate}} {{'cui-applications'|translate}}({{base.user.orgAppRequestsCount}})</div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/common-templates/index/snap-menu-mobile.html',
"<div class=\"cui-profile cui-profile--mobile\" class-toggle toggled-class=cui-profile--active ng-click=toggleClass() off-click=toggleOff() ng-if=base.user.name.given>\n"+
"  <div class=cui-profile__row>\n"+
"\n"+
"    \n"+
"    <span class=cui-profile__user-name>{{base.user.name.given}} {{base.user.name.surname}}</span>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=cui-media__image cui-avatar cui-avatar-email=base.user.email cui-avatar-names=\"[base.user.name.given, base.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=fa:arrow459 svg-class=cui-profile__chevron use-class=svg viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-profile__row>\n"+
"    <div id=cui-profile__popup class=cui-profile__user-menu style=\"display:block; opacity:1; position:relative\">\n"+
"\n"+
"      \n"+
"      <div class=cui-profile__menu-item ui-sref=user.profile>\n"+
"        <a href=\"\" class=cui-profile__link>{{'cui-my-profile' | translate}}</a>\n"+
"        <div>\n"+
"          <cui-icon cui-svg-icon=cui:profile svg-class=cui-profile__link-icon use-class=svg viewbox=\"-2 -2 52 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div class=cui-profile__menu-item ng-click=base.logout()>\n"+
"        <a href=\"\" class=cui-profile__link>{{'log-out' | translate}}</a>\n"+
"        <div>\n"+
"          <cui-icon cui-svg-icon=cui:log-out svg-class=cui-profile__link-icon use-class=svg viewbox=\"-2 -2 52 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<span class=snap-menu--option snap-close ui-sref=welcome ng-if=!base.user.id>\n"+
"  <span class=snap-menu__option-name>{{'welcome' | translate}}</span>\n"+
"  <div>\n"+
"    <cui-icon cui-svg-icon=fa:four29 svg-class=snap-menu__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </div>\n"+
"</span>\n"+
"\n"+
"\n"+
"<span class=snap-menu--option snap-close ui-sref=applications.myApplications ng-if=base.user.id>\n"+
"  <span class=snap-menu__option-name>{{'my-applications' | translate}}</span>\n"+
"  <div>\n"+
"    <cui-icon cui-svg-icon=cui:applications_v2 svg-class=snap-menu__icon viewbox=\"0 0 49 49\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </div>\n"+
"</span>\n"+
"\n"+
"\n"+
"<span class=snap-menu--option snap-close ui-sref=organization.profile({orgId:base.user.organization.id}) ng-if=base.user.id>\n"+
"  <span class=snap-menu__option-name>{{'my-organization' | translate}}</span>\n"+
"  <div>\n"+
"    <cui-icon cui-svg-icon=cui:organization svg-class=snap-menu__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </div>\n"+
"</span>\n"+
"\n"+
"\n"+
"<span class=snap-menu--option snap-close ui-sref=pendingAppRequests ng-if=base.user.id>\n"+
"  <span class=snap-menu__option-name>{{'cui-my-app-requests' | translate}}</span>\n"+
"  <div>\n"+
"    <cui-icon cui-svg-icon=cui:status-pending svg-class=snap-menu__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </div>\n"+
"</span>\n"+
"\n"+
"\n");



$templateCache.put('app/common-templates/index/snap-menu.html',
"\n"+
"<div class=cui-desktop-menu__option ui-sref=welcome ui-sref-active=active ng-if=!base.user.id ng-click=base.menu.desktop.close()>\n"+
"  <span class=cui-desktop-menu__option-name>{{'welcome' | translate}}</span>\n"+
"  <cui-icon cui-svg-icon=fa:four29 svg-class=cui-desktop-menu__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-desktop-menu__option ui-sref=applications.myApplications ui-sref-active-nested=active ng-if=base.user.id ng-click=base.menu.desktop.close()>\n"+
"  <span class=cui-desktop-menu__option-name>{{'my-applications' | translate}}</span>\n"+
"  <cui-icon cui-svg-icon=cui:applications_v2 svg-class=cui-desktop-menu__icon preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-desktop-menu__option ui-sref=organization.profile({orgId:base.user.organization.id}) ui-sref-active-nested=active ng-if=base.user.id ng-click=base.menu.desktop.close()>\n"+
"  <span class=cui-desktop-menu__option-name>{{'my-organization' | translate}}</span>\n"+
"  <cui-icon cui-svg-icon=cui:organization svg-class=cui-desktop-menu__icon preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-desktop-menu__option ui-sref=pendingAppRequests ui-sref-active-nested=active ng-if=base.user.id ng-click=base.menu.desktop.close()>\n"+
"  <span class=cui-desktop-menu__option-name>{{'cui-my-app-requests' | translate}}</span>\n"+
"  <cui-icon cui-svg-icon=cui:status-pending svg-class=cui-desktop-menu__icon preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"</div>\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n");



$templateCache.put('app/common-templates/index/whole-app-loader.html',
"<div style=\"position: absolute; left: 50%; top: 50%; display: inline-block; transform: translate(-50%,-50%); text-align: center\">\n"+
"  <h1>{{base.loader.for.wholeApp.message | translate}}</h1>\n"+
"  <br>\n"+
"  <div class=cui-loading style=display:inline-block></div>\n"+
"</div>\n");



$templateCache.put('app/common-templates/messages.html',
"<div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"<div class=cui-error__message ng-message=minlength>{{'cui-this-field-needs-to-be-longer' | translate}}</div>\n"+
"<div class=cui-error__message ng-message=tosRequired>{{'cui-you-need-to-agree-to-toc' | translate}}</div>\n"+
"<div class=cui-error__message ng-message=email>{{'cui-this-is-not-valid-email' | translate}}</div>\n"+
"<div class=cui-error__message ng-message=usernameTaken>{{'cui-error-username-exists' | translate}}</div>\n"+
"<div class=cui-error__message ng-message=emailTaken>{{'cui-error-email-exists' | translate}}</div>\n"+
"<div class=cui-error__message ng-message=answersMatch>{{'security-question-repeated' | translate}}</div>\n");



$templateCache.put('app/common-templates/partials/loader-content-sm.html',
"<div class=cui-loader__page>\n"+
"\n"+
"  <div class=cui-loader__row>\n"+
"    <div class=cui-loader__row-img></div>\n"+
"    <div class=cui-loader__row-items>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-loader__row>\n"+
"    <div class=cui-loader__row-img></div>\n"+
"    <div class=cui-loader__row-items>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-loader__row>\n"+
"    <div class=cui-loader__row-img></div>\n"+
"    <div class=cui-loader__row-items>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"</div>");



$templateCache.put('app/common-templates/partials/loader-content-vert.html',
"<div class=cui-loader__page>\n"+
"\n"+
"  <div class=cui-loader__row>\n"+
"    <div class=cui-loader__row-img></div>\n"+
"    <div class=cui-loader__row-items>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"</div>");



$templateCache.put('app/common-templates/partials/loader-content.html',
"<div class=cui-loader__page>\n"+
"\n"+
"  <div class=cui-loader__row>\n"+
"    <div class=cui-loader__row-img></div>\n"+
"    <div class=cui-loader__row-items>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-loader__row>\n"+
"    <div class=cui-loader__row-img></div>\n"+
"    <div class=cui-loader__row-items>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-loader__row>\n"+
"    <div class=cui-loader__row-img></div>\n"+
"    <div class=cui-loader__row-items>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"      <div class=cui-loader__row-item></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"</div>\n");



$templateCache.put('app/common-templates/partials/loader-updating.html',
"<div class=cui-action__action-container>\n"+
"	<div class=cui-loading--circle></div>\n"+
"</div>\n");



$templateCache.put('app/common-templates/password-validation-history/password-validation-bottom.html',
"<div class=cui-error__message ng-if=\"policies.requiredNumberOfCharClasses>1\">{{'password-rules' | translate:policies}}<br></div>\n"+
"\n"+
"<div class=cui-error__message ng-if=policies.allowLowerChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.lowercase}\"></div>\n"+
"    {{'password-lowercase' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-if=policies.allowUpperChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.uppercase}\"></div>\n"+
"    {{'password-uppercase' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-if=policies.allowNumChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.number}\"></div>\n"+
"    {{'password-number' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-if=policies.allowSpecialChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.special}\"></div>\n"+
"    {{'password-special' | translate}}\n"+
"</div>\n");



$templateCache.put('app/common-templates/password-validation-history/password-validation-top.html',
"<p>{{'passwords-must' | translate}}</p>\n"+
"\n"+
"<div class=cui-error__message ng-message=lowercaseNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.lowercaseNotAllowed}\"></div>\n"+
"    {{'lowercase-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=uppercaseNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.uppercaseNotAllowed}\"></div>\n"+
"    {{'uppercase-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=numberNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.numberNotAllowed}\"></div>\n"+
"    {{'numbers-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=specialNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass':!errors.specialNotAllowed}\"></div>\n"+
"    {{'special-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=disallowedWords>\n"+
"    <div class=cui-error__status></div> \n"+
"    {{'words-not-allowed' | translate:errors}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=disallowedChars>\n"+
"    <div class=cui-error__status></div>\n"+
"    {{'chars-not-allowed' | translate:errors}}\n"+
"</div>\n"+
"\n"+
"<div class=cui-error__message>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.length}\"></div>\n"+
"    {{'password-length' | translate:policies}}\n"+
"</div>\n");



$templateCache.put('app/common-templates/password-validation.html',
"<p>{{'passwords-must' | translate}}</p>\n"+
"\n"+
"<div class=cui-error__message ng-message=lowercaseNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.lowercaseNotAllowed}\"></div>\n"+
"    {{'lowercase-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=uppercaseNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.uppercaseNotAllowed}\"></div>\n"+
"    {{'uppercase-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=numberNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.numberNotAllowed}\"></div>\n"+
"    {{'numbers-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=specialNotAllowed>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass':!errors.specialNotAllowed}\"></div>\n"+
"    {{'special-not-allowed' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=disallowedWords>\n"+
"    <div class=cui-error__status></div> \n"+
"    {{'words-not-allowed' | translate:errors}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-message=disallowedChars>\n"+
"    <div class=cui-error__status></div>\n"+
"    {{'chars-not-allowed' | translate:policies}}\n"+
"</div>\n"+
"\n"+
"<div class=cui-error__message>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.length}\"></div>\n"+
"        {{'password-length' | translate:policies}}<br><br>\n"+
"</div>\n"+
"\n"+
"<div class=cui-error__message ng-if=policies.requiredNumberOfCharClasses>{{'password-rules' | translate:policies}}<br></div>\n"+
"\n"+
"<div class=cui-error__message ng-if=policies.allowLowerChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.lowercase}\"></div>\n"+
"    {{'password-lowercase' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-if=policies.allowUpperChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.uppercase}\"></div>\n"+
"    {{'password-uppercase' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-if=policies.allowNumChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.number}\"></div>\n"+
"    {{'password-number' | translate}}\n"+
"</div>\n"+
"<div class=cui-error__message ng-if=policies.allowSpecialChars>\n"+
"    <div class=cui-error__status ng-class=\"{'cui-error__status--pass': !errors.special}\"></div>\n"+
"    {{'password-special' | translate}}\n"+
"</div>\n");



$templateCache.put('app/common-templates/user-list/user-list-header.html',
"<div class=\"cui-flex-table__th cui-flex-table__th--c\">\n"+
"	<div class=cui-flex-table__avatar-col ng-click=scope.userListHeader.nameCallback()>{{'cui-name' | translate | lowercase}}</div>\n"+
"	<div class=cui-flex-table__mobile-stack>\n"+
"		<div class=cui-flex-table__left></div>\n"+
"		<div class=cui-flex-table__middle ng-click=scope.userListHeader.usernameCallback()>{{'username' | translate | lowercase}}</div>\n"+
"		<div class=cui-flex-table__middle ng-click=scope.userListHeader.registeredCallback()>{{'cui-registered' | translate | lowercase}}</div>\n"+
"		<div class=cui-flex-table__right ng-click=scope.userListHeader.statusCallback()>{{'status' | translate | lowercase}}</div>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/common-templates/user-list/user-list-row.html',
"<li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"    <div class=cui-flex-table__avatar-col>\n"+
"        <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[user.name.given, user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"    <div class=cui-flex-table__mobile-stack>\n"+
"        <div class=cui-flex-table__left><span class=cui-flex-table__title>{{user.name.given}} {{user.name.surname}}</span></div>\n"+
"        <div class=cui-flex-table__middle><span class=cui-mobile-only>{{'username' | translate | lowercase}}: &nbsp;</span>{{user.username}}</div>\n"+
"        <div class=cui-flex-table__middle><span class=cui-mobile-only>{{'cui-registered' | translate | lowercase}}: &nbsp;</span>{{user.creation | date:base.appConfig.dateFormat}}</div>\n"+
"        <div class=cui-flex-table__right>\n"+
"            <span ng-class=\"'cui-status--'+user.status\">{{user.status | translate}}</span>\n"+
"        </div>\n"+
"    </div>\n"+
"</li>\n");



$templateCache.put('app/modules/applications/myApplications/myApplications-details.html',
"<div class=cui-applications__app-details>\n"+
"  \n"+
"  <div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/applications/myApplications target=blank>here</a></div>\n"+
"  \n"+
"\n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-action>\n"+
"    <span class=cui-action__title ng-click=\"base.goBack('applications.manageApplications')\">{{'manage-applications' | translate}}</span>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"      \n"+
"      <svg ui-sref=applications.newRequest xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--new\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 48\">\n"+
"        <defs>\n"+
"          <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"          <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"            <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"            <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"            <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"          </filter>\n"+
"        </defs>\n"+
"        <g id=new-with-shadow stroke=none stroke-width=1 fill=none fill-rule=evenodd>\n"+
"          <g id=New-2 transform=\"translate(3.000000, 1.000000)\">\n"+
"              <g id=Oval-73>\n"+
"                <use fill=black fill-opacity=1 filter=url(#filter-2) xlink:href=#path-1></use>\n"+
"                <use fill=currentColor fill-rule=evenodd xlink:href=#path-1></use>\n"+
"              </g>\n"+
"              <path d=\"M22.1371429,17.5349883 L22.1371429,11.8697421 C22.1371429,10.7562937 21.2419442,9.86229506 20.1376608,9.86229506 L19.8623392,9.86229506 C18.7484919,9.86229506 17.8628571,10.7610597 17.8628571,11.8697421 L17.8628571,17.5349883 L12.197611,17.5349883 C11.0841625,17.5349883 10.1901639,18.4301869 10.1901639,19.5344704 L10.1901639,19.8097919 C10.1901639,20.9236392 11.0889286,21.809274 12.197611,21.809274 L17.8628571,21.809274 L17.8628571,27.4745202 C17.8628571,28.5879686 18.7580558,29.4819672 19.8623392,29.4819672 L20.1376608,29.4819672 C21.2515081,29.4819672 22.1371429,28.5832026 22.1371429,27.4745202 L22.1371429,21.809274 L27.802389,21.809274 C28.9158375,21.809274 29.8098361,20.9140754 29.8098361,19.8097919 L29.8098361,19.5344704 C29.8098361,18.4206231 28.9110714,17.5349883 27.802389,17.5349883 L22.1371429,17.5349883 Z\" id=Rectangle-352 fill=#FFFFFF fill-rule=evenodd></path>\n"+
"          </g>\n"+
"        </g>\n"+
"      </svg>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-applications__main-container cui-applications__main-container--full\">\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['myApplicationDetails.app']||base.loader.for['myApplicationDetails.claims']||base.loader.for['myApplicationDetails.relatedApps']\">\n"+
"      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"    <div ng-if=\"!base.loader.for['myApplicationDetails.app']\">\n"+
"      \n"+
"      <div class=\"cui-media cui-media--centered\">\n"+
"        \n"+
"        <div class=cui-media__image-container>\n"+
"          <a ng-href={{myApplicationDetails.app.mangledUrl}} target=_blank>\n"+
"            <div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=myApplicationDetails.app.name cui-avatar-cuii18n-filter cui-avatar=myApplicationDetails.app.iconUrl></div>\n"+
"          </a>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-media__body>\n"+
"          <h3 class=cui-media__title>{{myApplicationDetails.app.name | cuiI18n|capitalize}}</h3>\n"+
"          <span class=cui-media__content>{{ 'granted' | translate }}: {{myApplicationDetails.app.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"          <span ng-class=\"'cui-status--'+myApplicationDetails.app.grant.status\">{{myApplicationDetails.app.grant.status | lowercase|translate}}</span>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div class=\"cui-tabs class-toggle\">\n"+
"        <ul class=cui-tabs__nav ng-if=\"myApplicationDetails.claims.length>0\">\n"+
"          <li class=cui-tabs__tab-container><a class=cui-tabs__tab data-pane=tab1 ng-class=\"{'cui-tabs__tab--active':!myApplicationDetails.inClaims}\" ng-click=\"myApplicationDetails.inClaims=false\">{{'application-details' | translate}}</a></li>\n"+
"          <li class=cui-tabs__tab-container><a class=cui-tabs__tab data-pane=tab2 ng-class=\"{'cui-tabs__tab--active':myApplicationDetails.inClaims}\" ng-click=\"myApplicationDetails.inClaims=true\">{{'my-claims' | translate}}</a></li>\n"+
"        </ul>\n"+
"        <div class=cui-tabs__content>\n"+
"          \n"+
"          <div id=tab1 class=cui-tabs__tab-pane ng-class=\"{'cui-tabs__tab-pane--active':!myApplicationDetails.inClaims}\">\n"+
"            <div class=cui-applications__details>\n"+
"              \n"+
"              <div ng-if=\"(!myApplicationDetails.app.bundledApps || myApplicationDetails.app.bundledApps.length===0) && (myApplicationDetails.relatedApps.length===0)\">\n"+
"                <p>{{'no-bundled-or-related' | translate}}</p>\n"+
"              </div>\n"+
"              \n"+
"              <div ng-if=\"myApplicationDetails.app.bundledApps && myApplicationDetails.app.bundledApps.length!==0\">\n"+
"                <h4 class=\"h6 bold\">{{'bundled-applications' | translate}}</h4>\n"+
"                <div class=cui-media ng-repeat=\"application in myApplicationDetails.app.bundledApps\">\n"+
"                  <div class=cui-media__body>\n"+
"                    <a class=cui-media__link ng-click=myApplicationDetails.goToDetails(application)>{{application.name | cuiI18n}}</a>\n"+
"                    <span class=cui-media__content>{{ 'granted' | translate }}: {{myApplicationDetails.app.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"                  </div>\n"+
"                  <span class=cui-media__status ng-class=\"'cui-status--'+myApplicationDetails.app.grant.status\">{{application.status | lowercase|translate}}</span>  \n"+
"                </div>\n"+
"              </div>\n"+
"              \n"+
"              <div ng-if=\"myApplicationDetails.relatedApps.length!==0\">\n"+
"                <h4 class=\"h6 bold\">{{'related-applications' | translate}}</h4>\n"+
"                <div class=cui-applications__related-apps ng-repeat=\"application in myApplicationDetails.relatedApps\">\n"+
"                  <div class=cui-applications__related-app-col>\n"+
"                    <a class=cui-media__link ng-click=myApplicationDetails.goToDetails(application) ng-if=application.grant>{{application.name | cuiI18n}}</a> \n"+
"                    <span class=cui-media__content ng-if=!application.grant>{{application.name | cuiI18n}}</span>\n"+
"                    <span class=cui-media__content ng-if=application.grant>{{ 'granted' | translate }}: {{application.grant.instant| date:base.appConfig.dateFormat}}</span> \n"+
"                    <span class=cui-button ng-if=!application.grant>{{'request' | translate}}</span>\n"+
"                  </div>\n"+
"                  <span class=cui-media__status ng-class=\"'cui-status--'+application.status\" ng-if=application.status>{{application.grant.status | lowercase|translate}}</span>  \n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"\n"+
"          \n"+
"          <div id=tab2 class=cui-tabs__tab-pane ng-class=\"{'cui-tabs__tab-pane--active':myApplicationDetails.inClaims}\" ng-if=\"myApplicationDetails.claims.length>0\">\n"+
"            <p ng-if=\"!base.apiError.for['myApplicationDetails.claims'] && !myApplicationDetails.claims || myApplicationDetails.claims.length===0\">{{'cui-no-claims' | translate}}</p>\n"+
"            \n"+
"            <p style=color:red ng-if=\"base.apiError.for['myApplicationDetails.claims']\">{{'cui-claims-error' | translate}} {{'cui-try-again'|translate}}</p>\n"+
"            <span ng-repeat=\"claim in myApplicationDetails.claims.packageClaims\">\n"+
"              <h5 class=h6>{{claim.name | cuiI18n|capitalize}}</h5>\n"+
"              <p ng-repeat=\"claimValue in claim.claimValues\">{{claimValue.name | cuiI18n |capitalize}}</p>\n"+
"            </span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div class=cui-applications__desktop-tabs>\n"+
"\n"+
"        \n"+
"        <div class=\"cui-tile cui-applications__left\">\n"+
"          <h4 class=\"cui-tile__title cui-applications__title\">{{'bundled-applications' | translate}}</h4>\n"+
"          <div class=\"cui-tile__body cui-applications__details\">\n"+
"            \n"+
"            <div class=cui-applications__no-details ng-if=\"(!myApplicationDetails.app.bundledApps || myApplicationDetails.app.bundledApps.length===0)\">\n"+
"              <p>{{'no-bundled' | translate}}</p>\n"+
"            </div>\n"+
"            \n"+
"            <div class=cui-applications__bundled-apps ng-if=\"myApplicationDetails.app.bundledApps && myApplicationDetails.app.bundledApps.length!==0\">\n"+
"              \n"+
"              <div class=cui-applications__bundled-app ng-repeat=\"application in myApplicationDetails.app.bundledApps\">\n"+
"                <div class=cui-applications__related-app-col>\n"+
"                  <a class=\"cui-link bold\" ng-click=myApplicationDetails.goToDetails(application)>{{application.name | cuiI18n}}</a>\n"+
"                  <span class=cui-media__content>{{ 'granted' | translate | lowercase}}: {{myApplicationDetails.app.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"                </div>\n"+
"                <div class=cui-media__status ng-class=\"'cui-status--'+myApplicationDetails.app.grant.status\">{{myApplicationDetails.app.grant.status |lowercase|translate}}</div>  \n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"          <br>\n"+
"          <h4 class=\"cui-tile__title cui-applications__title\" ng-if=\"myApplicationDetails.relatedApps.length!==0\">{{'related-applications' | translate}}</h4>\n"+
"            <div class=\"cui-tile__body cui-applications__details\" ng-if=\"myApplicationDetails.relatedApps.length!==0\">\n"+
"            \n"+
"            <div class=cui-applications__related-apps>\n"+
"              \n"+
"                <div class=cui-applications__related-app ng-repeat=\"application in myApplicationDetails.relatedApps\">\n"+
"                  <div class=cui-applications__related-app-col>\n"+
"                    <a class=\"cui-link bold\" ng-click=myApplicationDetails.goToDetails(application) ng-if=application.grant>{{application.name | cuiI18n}}</a> \n"+
"                    <h5 class=bold ng-if=!application.grant>{{application.name | cuiI18n}}</h5>\n"+
"                    <span class=cui-media__content ng-if=application.grant>{{ 'granted' | translate }}: {{application.grant.instant | date:base.appConfig.dateFormat}}</span> \n"+
"                  </div>\n"+
"                  <div class=\"cui-button cui-button--small-rounded\" ng-if=!application.grant>{{'request' | translate}}</div>\n"+
"                  <div class=cui-media__status ng-class=\"'cui-status--'+application.status\" ng-if=application.grant>{{application.grant.status | lowercase|translate}}</div>  \n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"\n"+
"          \n"+
"          <div class=\"cui-tile cui-applications__right\" ng-if=\"myApplicationDetails.claims.length>0\">\n"+
"            <h4 class=\"cui-tile__title cui-tile__title--bg-light cui-applications__title\">{{'my-claims' | translate}}</h4>\n"+
"            <div class=\"cui-tile__body cui-applications__claims\">\n"+
"              <p class=cui-applications__no-claims ng-if=\"!base.apiError.for['myApplicationDetails.claims'] && !myApplicationDetails.claims || myApplicationDetails.claims.length===0\">{{'cui-no-claims' | translate}}</p>\n"+
"              \n"+
"              <p class=cui-applications__no-claims style=color:red ng-if=\"base.apiError.for['myApplicationDetails.claims']\">{{'cui-claims-error' | translate}} {{'cui-try-again'|translate}}</p>\n"+
"              <div class=cui-applications__claim ng-repeat=\"claim in myApplicationDetails.claims.packageClaims\">\n"+
"                <h5 class=\"cui-applications__claim-name h5\">{{claim.name | cuiI18n|capitalize}}</h5>\n"+
"                <p class=cui-applications__claim-val ng-repeat=\"claimValue in claim.claimValues\">{{claimValue.name | cuiI18n|capitalize}}</p>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n");



$templateCache.put('app/modules/applications/myApplications/myApplications-manage.html',
"\n"+
"<div class=code-info>The markup for this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/blob/master/app/modules/applications/myApplications/manageApplications.html target=blank>here</a> and the javascript <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/blob/master/app/modules/applications/myApplications/manageApplications.ctrl.js target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"<div class=cui-action>\n"+
"  <nav class=cui-breadcrumb>\n"+
"    <ul class=cui-breadcrumb__links>\n"+
"      \n"+
"      <li class=cui-breadcrumb__link>\n"+
"        <a ui-sref=applications.myApplications>{{'my-applications' | translate}}</a>\n"+
"      </li>\n"+
"      <li class=\"cui-breadcrumb__link cui-breadcrumb__link--current\">\n"+
"        <a ui-sref=applications.manageApplications>{{'manage-applications' | translate}}</a>\n"+
"      </li>\n"+
"    </ul>\n"+
"  </nav>\n"+
"  <cui-mobile-nav show-if=base.appMobileNav links=\"{\n"+
"    'applications.myApplications':{stateParams:{},label:('my-applications' | translate)},\n"+
"    'applications.manageApplications':{stateParams:{},label:('manage-applications' | translate)}\n"+
"  }\">\n"+
"</cui-mobile-nav>\n"+
"  <div class=cui-action__actions>\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"manageApplications.sortClicked =! manageApplications.sortClicked\" id=sort-button off-click=\"manageApplications.sortClicked=false\">\n"+
"      <cui-icon cui-svg-icon=fa:sort14 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#sort-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=manageApplications.sortClicked style=width:171px>\n"+
"        <div class=cui-popover__row>\n"+
"          <span ng-click=\"manageApplications.updateSearch('alphabetic')\">{{'cui-alphabetically' | translate}}</span>\n"+
"        </div>\n"+
"        <div class=cui-popover__row>\n"+
"          <span ng-click=\"manageApplications.updateSearch('date')\">{{'cui-by-date-added' | translate}}</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"manageApplications.refineClicked =! manageApplications.refineClicked\" id=refine-button off-click=\"manageApplications.refineClicked=false\">\n"+
"      <cui-icon cui-svg-icon=fa:filter10 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      <span class=cui-action__action-label>{{'refine' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#refine-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=manageApplications.refineClicked style=width:214px>\n"+
"        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"          <span ng-click=\"manageApplications.updateSearch('status')\">{{'all' | translate}}</span>\n"+
"          <span>({{manageApplications.popupCount}})</span>\n"+
"        </div>\n"+
"        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"          <span ng-click=\"manageApplications.updateSearch('status','active')\">{{'active' | translate}}</span>\n"+
"          <span>({{manageApplications.activeCount}})</span>\n"+
"        </div>\n"+
"        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"          <span ng-click=\"manageApplications.updateSearch('status','suspended')\">{{'suspended' | translate}}</span>\n"+
"          <span>({{manageApplications.suspendedCount}})</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"manageApplications.categoriesClicked =! manageApplications.categoriesClicked\" id=categories-button off-click=\"manageApplications.categoriesClicked=false\">\n"+
"      <cui-icon cui-svg-icon=cui:categories svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      <span class=cui-action__action-label>{{'categories' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#categories-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=manageApplications.categoriesClicked ng-click=\"manageApplications.categoriesClicked=false\" style=width:214px>\n"+
"        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"          <span ng-click=\"manageApplications.updateSearch('category')\">{{'all' | translate}}</span>\n"+
"          <span>({{manageApplications.popupCount}})</span>\n"+
"        </div>\n"+
"        <div class=\"cui-popover__row cui-popover--row__flex\" ng-repeat=\"category in manageApplications.categories\">\n"+
"          <span ng-click=\"manageApplications.updateSearch('category', category.name)\">{{category.name | cuiI18n}}</span>\n"+
"          <span>({{category.count}})</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <svg ui-sref=applications.newRequest xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--new\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 48\">\n"+
"      <defs>\n"+
"        <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"        <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"          <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"          <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"          <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"        </filter>\n"+
"      </defs>\n"+
"      <g id=new-with-shadow stroke=none stroke-width=1 fill=none fill-rule=evenodd>\n"+
"        <g id=New-2 transform=\"translate(3.000000, 1.000000)\">\n"+
"            <g id=Oval-73>\n"+
"              <use fill=black fill-opacity=1 filter=url(#filter-2) xlink:href=#path-1></use>\n"+
"              <use fill=currentColor fill-rule=evenodd xlink:href=#path-1></use>\n"+
"            </g>\n"+
"            <path d=\"M22.1371429,17.5349883 L22.1371429,11.8697421 C22.1371429,10.7562937 21.2419442,9.86229506 20.1376608,9.86229506 L19.8623392,9.86229506 C18.7484919,9.86229506 17.8628571,10.7610597 17.8628571,11.8697421 L17.8628571,17.5349883 L12.197611,17.5349883 C11.0841625,17.5349883 10.1901639,18.4301869 10.1901639,19.5344704 L10.1901639,19.8097919 C10.1901639,20.9236392 11.0889286,21.809274 12.197611,21.809274 L17.8628571,21.809274 L17.8628571,27.4745202 C17.8628571,28.5879686 18.7580558,29.4819672 19.8623392,29.4819672 L20.1376608,29.4819672 C21.2515081,29.4819672 22.1371429,28.5832026 22.1371429,27.4745202 L22.1371429,21.809274 L27.802389,21.809274 C28.9158375,21.809274 29.8098361,20.9140754 29.8098361,19.8097919 L29.8098361,19.5344704 C29.8098361,18.4206231 28.9110714,17.5349883 27.802389,17.5349883 L22.1371429,17.5349883 Z\" id=Rectangle-352 fill=#FFFFFF fill-rule=evenodd></path>\n"+
"        </g>\n"+
"      </g>\n"+
"    </svg>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"<div class=\"cui-action cui-action--alt\">\n"+
"  <div class=\"cui-input-button cui-input-button--alt-bg\" style=width:350px>\n"+
"      <input class=cui-input-button__input ng-model=\"manageApplications.search['service.name']\" focus-if placeholder=\"{{'search-by-app-name' | translate}}\" on-enter=manageApplications.updateSearchByName>\n"+
"      <button class=cui-input-button__button ng-click=manageApplications.updateSearchByName()>{{'search' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n"+
"<div class=cui-applications__main-container>\n"+
"  <div ng-include=\"'app/common-templates/partials/loader-updating.html'\" ng-if=\"base.loader.for['manageApplications.apps']\"></div>\n"+
"  <div class=cui-loading__container ng-if=\"base.loader.for['manageApplications.apps']\">\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  \n"+
"  \n"+
"  \n"+
"  <div ng-if=\"!base.loader.for['manageApplications.apps']\" style=position:relative>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['manageApplications.reloadingApps']\">\n"+
"      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <p ng-if=\"manageApplications.list.length===0\">{{'cui-no-applications' | translate}}</p>\n"+
"    <p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['manageApplications.apps']\">{{'error-generic'|translate}}</p>\n"+
"\n"+
"    <div class=\"cui-media cui-media--border cui-media--tr\" ng-repeat=\"application in manageApplications.list track by application.id\">\n"+
"      <div class=cui-media__image-container>\n"+
"        <a ng-href={{application.mangledUrl}} target=_blank><div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar=application.iconUrl></div></a>\n"+
"      </div>\n"+
"      <div class=\"cui-media__body cui-media__body--full\">\n"+
"        <div class=cui-media__title-container>\n"+
"          \n"+
"          \n"+
"          <h3 class=cui-media__title ng-click=manageApplications.goToDetails(application)>{{ application.name | cuiI18n }}</h3>\n"+
"        </div>\n"+
"        <span class=cui-media__content> {{application.category | cuiI18n}}</span>\n"+
"        <span class=cui-status ng-class=\" 'cui-status--'+application.grant.status \">{{ application.grant.status | lowercase |translate}}</span>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-paginate__container ng-if=\"!base.loader.for['manageApplications.apps']\">\n"+
"    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"    <results-per-page class=cui-paginate__select ng-model=manageApplications.search.pageSize></results-per-page>\n"+
"    <paginate class=cui-paginate results-per-page=manageApplications.search.pageSize count=manageApplications.count on-page-change=manageApplications.pageChange ng-model=manageApplications.search.page attach-rerender-to=\" manageApplications.reRenderPaginate\"></paginate>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/applications/myApplications/myApplications.html',
"\n"+
"<div class=code-info>The markup for this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/blob/master/app/modules/applications/myApplications/myApplications.html target=blank>here</a> and the javascript <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/blob/master/app/modules/applications/myApplications/myApplications.ctrl.js target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=cui-action>\n"+
"  <nav class=cui-breadcrumb>\n"+
"    <ul class=cui-breadcrumb__links>\n"+
"    \n"+
"      <li class=\"cui-breadcrumb__link cui-breadcrumb__link--current\">\n"+
"        <a ui-sref=applications.myApplications>{{'my-applications' | translate}}</a>\n"+
"      </li>\n"+
"      <li class=cui-breadcrumb__link>\n"+
"        <a ui-sref=applications.manageApplications>{{'manage-applications' | translate}}</a>\n"+
"      </li>\n"+
"    </ul>\n"+
"  </nav>\n"+
"  <cui-mobile-nav show-if=base.appMobileNav links=\"{\n"+
"    'applications.myApplications':{stateParams:{},label:('my-applications' | translate)},\n"+
"    'applications.manageApplications':{stateParams:{},label:('manage-applications' | translate)}\n"+
"  }\">\n"+
"</cui-mobile-nav>\n"+
"  <div class=cui-action__actions>\n"+
"    \n"+
"    <svg ui-sref=applications.newRequest xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--new\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 48\">\n"+
"      <defs>\n"+
"        <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"        <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"          <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"          <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"          <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"        </filter>\n"+
"      </defs>\n"+
"      <g id=new-with-shadow stroke=none stroke-width=1 fill=none fill-rule=evenodd>\n"+
"        <g id=New-2 transform=\"translate(3.000000, 1.000000)\">\n"+
"            <g id=Oval-73>\n"+
"              <use fill=black fill-opacity=1 filter=url(#filter-2) xlink:href=#path-1></use>\n"+
"              <use fill=currentColor fill-rule=evenodd xlink:href=#path-1></use>\n"+
"            </g>\n"+
"            <path d=\"M22.1371429,17.5349883 L22.1371429,11.8697421 C22.1371429,10.7562937 21.2419442,9.86229506 20.1376608,9.86229506 L19.8623392,9.86229506 C18.7484919,9.86229506 17.8628571,10.7610597 17.8628571,11.8697421 L17.8628571,17.5349883 L12.197611,17.5349883 C11.0841625,17.5349883 10.1901639,18.4301869 10.1901639,19.5344704 L10.1901639,19.8097919 C10.1901639,20.9236392 11.0889286,21.809274 12.197611,21.809274 L17.8628571,21.809274 L17.8628571,27.4745202 C17.8628571,28.5879686 18.7580558,29.4819672 19.8623392,29.4819672 L20.1376608,29.4819672 C21.2515081,29.4819672 22.1371429,28.5832026 22.1371429,27.4745202 L22.1371429,21.809274 L27.802389,21.809274 C28.9158375,21.809274 29.8098361,20.9140754 29.8098361,19.8097919 L29.8098361,19.5344704 C29.8098361,18.4206231 28.9110714,17.5349883 27.802389,17.5349883 L22.1371429,17.5349883 Z\" id=Rectangle-352 fill=#FFFFFF fill-rule=evenodd></path>\n"+
"        </g>\n"+
"      </g>\n"+
"    </svg>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"<div class=cui-action>\n"+
"  <h3 class=cui-action__title>{{'cui-all-applications' | translate}}</h3>\n"+
"  <div class=cui-action__actions>\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"myApplications.categoriesClicked =! myApplications.categoriesClicked\" id=categories-button off-click=\"myApplications.categoriesClicked=false\">\n"+
"      <cui-icon cui-svg-icon=cui:categories svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      <span class=cui-action__action-label>{{'categories' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#categories-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=myApplications.categoriesClicked ng-click=\"myApplications.categoriesClicked=false\" style=width:214px>\n"+
"        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"          <span ng-click=\"myApplications.updateSearch('category')\">{{'all' | translate}}</span>\n"+
"          <span>({{myApplications.popupCount}})</span>\n"+
"        </div>\n"+
"        <div class=\"cui-popover__row cui-popover--row__flex\" ng-repeat=\"category in myApplications.categories\">\n"+
"          <span ng-click=\"myApplications.updateSearch('category', category.name)\">{{category.name | cuiI18n}}</span>\n"+
"          <span>({{category.count}})</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>  \n"+
"</div>\n"+
"\n"+
"<div class=cui-applications__main-container>\n"+
"  <div ng-include=\"'app/common-templates/partials/loader-updating.html'\" ng-if=\"base.loader.for['myApplications.apps']\"></div>\n"+
"  <div class=cui-loading__container ng-if=\"base.loader.for['myApplications.apps']\">\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-loading__container ng-if=\"base.loader.for['myApplications.reloadingApps']\">\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <p ng-if=\"myApplications.list.length===0\">{{'cui-no-applications' | translate}}</p>\n"+
"  <p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['myApplications.apps']\">{{'error-generic'|translate}}</p>\n"+
"  <div class=cui-applications__manage-apps>\n"+
"    <div class=cui-tile ng-repeat=\"application in myApplications.viewList\" ng-class=\"{'last-item':($index+1)%5==0}\">\n"+
"      <div style=height:100%>\n"+
"        <div class=cui-tile__title>\n"+
"        </div>\n"+
"        <div class=cui-tile__body>\n"+
"          <div class=cui-media__manage>\n"+
"            <div class=cui-media__image-container>\n"+
"              <a ng-href={{application.mangledUrl}} target=_blank><div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar=application.iconUrl></div></a>\n"+
"            </div>\n"+
"            <div class=cui-media__title>{{application.name|cuiI18n}}</div>\n"+
"          </div>\n"+
"           \n"+
"          \n"+
"            <a class=\"cui-button cui-button--inverted\" ng-class=\"{'cui-button--error':!application.mangledUrl}\" ng-href={{application.mangledUrl}} target=_blank ng-if=application.mangledUrl>{{'launch'|translate}}</a>\n"+
"            <a class=\"cui-button cui-button--inverted\" ng-class=\"{'cui-button--error':!application.urls[0].value}\" ng-href={{application.urls[0].value}} target=_blank ng-if=!application.mangledUrl>{{'launch'|translate}}</a>\n"+
"            \n"+
"          \n"+
"        </div>     \n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-paginate__container ng-if=\"!base.loader.for['myApplications.apps']\">\n"+
"    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"    <results-per-page class=cui-paginate__select ng-model=myApplications.search.pageSize></results-per-page>\n"+
"    <paginate class=cui-paginate results-per-page=myApplications.search.pageSize count=myApplications.count on-page-change=myApplications.pageChange ng-model=myApplications.search.page attach-rerender-to=\" myApplications.reRenderPaginate\"></paginate>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/applications/newRequestReview/applicationReview.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/app/applications/mew-request&review target=blank>here</a> and the layout styles <a href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/scss/3-views/applications.scss class=cui-link target=blank>here</a></div>\n"+
"\n"+
"<ng-form name=reviewRequest novalidate ng-if=\"applicationReview.step!=2\">\n"+
"<div class=\"class-toggle cui-modal\" ng-if=applicationReview.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'your-app-request-in-review' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"<div class=cui-applications__review>\n"+
"    <div class=cui-action>\n"+
"        <div class=cui-action__title ng-click=\"base.goBack('applications.search')\">&#60; {{'new-request' | translate}}</div>\n"+
"        <div class=cui-action__actions>\n"+
"\n"+
"            \n"+
"\n"+
"            <svg ui-sref=applications.myApplications xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"                <defs>\n"+
"                  <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"                  <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"                    <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"                    <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"                    <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"                  </filter>\n"+
"                </defs>\n"+
"                <g id=close-with-shadow fill=none fill-rule=evenodd>\n"+
"                    <g id=Oval-73 transform=\"translate(3 1)\">\n"+
"                        <use fill=#000 filter=url(#filter-2) xlink:href=#path-1 />\n"+
"                        <use fill=currentColor xlink:href=#path-1 />\n"+
"                    </g>\n"+
"                    <path d=\"M26.022 20.672l4.006-4.006c.788-.787.787-2.052.006-2.833l-.195-.195c-.788-.787-2.05-.778-2.834.006L23 17.65l-4.006-4.006c-.787-.788-2.052-.787-2.833-.006l-.194.195c-.788.787-.778 2.05.006 2.833l4.006 4.006-4.006 4.006c-.788.787-.787 2.053-.006 2.833l.195.196c.788.788 2.05.778 2.834-.006L23 23.695l4.006 4.005c.787.788 2.052.787 2.833.006l.194-.195c.788-.786.778-2.048-.006-2.832l-4.006-4.006z\" fill=#fff />\n"+
"                </g>\n"+
"            </svg>\n"+
"        </div>\n"+
"    </div>\n"+
"\n"+
"    <div class=cui-applications__main-container style=position:relative>\n"+
"        <div class=cui-loading__container ng-if=applicationReview.attempting>\n"+
"          <div class=\"cui-loading cui-loading--center\"></div>\n"+
"        </div>\n"+
"        \n"+
"        \n"+
"          <div class=cui-wizard__field-row>\n"+
"            \n"+
"            <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"              <label>{{'cui-email' | translate}}</label>\n"+
"              \n"+
"              <div class=cui-error ng-messages=reviewRequest.email.$error ng-if=reviewRequest.email.$dirty>\n"+
"                <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"              </div>\n"+
"              \n"+
"                <div class=cui-error ng-if=\"reviewRequest.email.$error.email && reviewRequest.email.$dirty\">\n"+
"                    <div class=cui-error__message>{{'cui-this-is-not-valid-email' | translate}}</div>\n"+
"                </div>\n"+
"              <input type=text name=email class=cui-input ng-required=true custom-error=applicationReview.customError.email ng-model=applicationReview.extendedData.email>\n"+
"            </div>\n"+
"        </div>\n"+
"\n"+
"            \n"+
"        <div class=cui-wizard__field-row>\n"+
"            <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"              <label>{{'protocol' | translate}}</label>\n"+
"              <div class=cui-error ng-messages=reviewRequest.protocol.$error ng-if=reviewRequest.protocol.$dirty>\n"+
"                <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"              </div>\n"+
"              <input type=text ng-model=applicationReview.extendedData.protocol name=protocol class=cui-input ng-required=true>\n"+
"            </div>\n"+
"        </div>\n"+
"        <div>\n"+
"            <h3 class=\"h4 bold\">{{'requested-items' | translate}}:</h3>\n"+
"            <div class=cui-applications__review-apps>\n"+
"                <div class=cui-tile--headless ng-repeat=\"applicationGroup in applicationReview.appRequests\">\n"+
"                    <div ng-repeat=\"application in applicationGroup | filter:applicationReview.search\">\n"+
"                        <div class=cui-media>\n"+
"                          <div class=\"cui-media__image-container cui-media__image-container__flex-start\">\n"+
"                            <div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar=application.iconUrl></div>\n"+
"                          </div>\n"+
"                          <div class=cui-media__body>\n"+
"                            <h3 class=cui-media__title>{{application.name | cuiI18n}}</h3>\n"+
"                            <div class=cui-applications__review-checkbox__wrapper ng-if=application.servicePackage.personTacEnabled>\n"+
"                                <span class=\"cui-error h6\" ng-if=\"reviewRequest['checkbox'+application.id].$error.required&&(reviewRequest['checkbox'+application.id].$dirty||applicationReview.requestReasonRequired)\">{{'cui-tac-agree' | translate}}</span> \n"+
"                                <div class=cui-applications__review-checkbox__flex>\n"+
"                                    <span class=cui-checkbox_label__flex>{{'cui-accept'|translate}} <span class=cui-link ng-click=applicationReview.showTac(application)>{{'cui-tac'|translate}}</span> </span>  \n"+
"                                    <span class=cui-checkbox__container>\n"+
"                                        <input class=cui-checkbox name=\"{{'checkbox'+application.id}}\" type=checkbox ng-model=applicationReview.tacCheckbox[application.id] ng-required=true>\n"+
"                                        <label class=cui-checkbox__label ng-click=\"applicationReview.tacCheckbox[application.id]=!applicationReview.tacCheckbox[application.id]\"></label>\n"+
"                                    </span>\n"+
"                                </div>\n"+
"                            </div> \n"+
"                            <h3 ng-if=application.bundledApps class=\"cui-media__title cui-media__title-margin__top\">{{'bundled-applications' | translate}}</h3>\n"+
"                            <div ng-if=application.bundledApps ng-repeat=\"bundledApp in application.bundledApps\">\n"+
"                                <span>{{bundledApp.name|cuiI18n}}</span>\n"+
"                            </div> \n"+
"                            <h3 ng-if=\"application.relatedApps&&application.relatedAppSelectedCount>0\" class=\"cui-media__title cui-media__title-margin__top\">{{'cui-selected' | translate}} {{'related-applications'|translate}}</h3>\n"+
"                            <div ng-if=\"application.relatedApps&&application.relatedAppSelectedCount>0\" ng-repeat=\"relatedApp in application.relatedApps\">\n"+
"                                <span ng-if=relatedApp.selected>{{relatedApp.name|cuiI18n}}</span>\n"+
"                            </div>                              \n"+
"                          </div>\n"+
"                        </div>\n"+
"                        \n"+
"                        <div class=cui-applications__review-text-input>\n"+
"                            <label class=cui-text-area__label>{{'request-reason' | translate}}</label>\n"+
"                            <span class=\"cui-error h6\" ng-if=\"reviewRequest['text_area'+application.id].$error.required&&(reviewRequest['text_area'+application.id].$dirty||applicationReview.requestReasonRequired)\">{{'you-must-enter-a-reason' | translate}}</span>\n"+
"                            <textarea name=\"{{'text_area'+application.id}}\" ng-required=application.servicePackage.requestReasonRequired class=cui-text-area ng-model=application.reason></textarea>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-applications__submit-options>\n"+
"                <a class=cui-link ng-click=\"base.goBack('applications.search')\">{{'cui-cancel' | translate}}</a>\n"+
"                <button class=cui-button ng-class=\"{'cui-button--error' : !reviewRequest.$valid}\" ng-click=\"applicationReview.requestReasonRequired=true;reviewRequest.$valid&&applicationReview.submit()\">\n"+
"                    <span ng-if=!applicationReview.error>{{'submit-request' | translate}}</span>\n"+
"                    <span ng-if=\"applicationReview.error===true\">{{'cui-error-try-again' | translate}}</span>\n"+
"                </button>\n"+
"            </div>\n"+
"            \n"+
"\n"+
"        </div>\n"+
"    </div>\n"+
"</div>\n"+
"</ng-form>\n"+
"\n"+
"<div class=\"cui-applications__review cui-applications__main-container\" ng-if=\"applicationReview.step===2\">\n"+
"    <cui-icon cui-svg-icon=fa:chevron20 svg-class=\"cui-icon cui-icon--light-grey chevron chevron-left\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    <div class=cursor__pointer style=padding-top:3px;color:black ng-click=\"applicationReview.step=1\" translate> {{'cui-printer-friendly-tac'}}</div>\n"+
"    <div class=tac_wrapper>\n"+
"    {{applicationReview.tacContent}}\n"+
"    </div>\n"+
"    <div class=cui-applications__submit-options>\n"+
"        <a class=cui-link ng-click=\"applicationReview.step=1\">{{'cui-back-to-review' | translate}}</a>\n"+
"    </div>\n"+
"</div>");



$templateCache.put('app/modules/applications/newRequestReview/newRequest.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/app/applications/new-request%26review target=blank>here</a> and the layout styles <a href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/scss/3-views/applications.scss class=cui-link target=blank>here</a></div>\n"+
"\n"+
"\n"+
"<div class=cui-applications__new-request>\n"+
"    <div class=cui-action>\n"+
"        <div class=cui-action__title>{{'new-request'| translate}}</div>\n"+
"        <div class=cui-action__actions>\n"+
"\n"+
"            \n"+
"\n"+
"            <svg ui-sref=applications.myApplications xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"                <defs>\n"+
"                    <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"                    <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"                        <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"                        <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"                        <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"                    </filter>\n"+
"                </defs>\n"+
"                <g id=close-with-shadow fill=none fill-rule=evenodd>\n"+
"                    <g id=Oval-73 transform=\"translate(3 1)\">\n"+
"                        <use fill=#000 filter=url(#filter-2) xlink:href=#path-1 />\n"+
"                        <use fill=currentColor xlink:href=#path-1 />\n"+
"                    </g>\n"+
"                    <path d=\"M26.022 20.672l4.006-4.006c.788-.787.787-2.052.006-2.833l-.195-.195c-.788-.787-2.05-.778-2.834.006L23 17.65l-4.006-4.006c-.787-.788-2.052-.787-2.833-.006l-.194.195c-.788.787-.778 2.05.006 2.833l4.006 4.006-4.006 4.006c-.788.787-.787 2.053-.006 2.833l.195.196c.788.788 2.05.778 2.834-.006L23 23.695l4.006 4.005c.787.788 2.052.787 2.833.006l.194-.195c.788-.786.778-2.048-.006-2.832l-4.006-4.006z\" fill=#fff />\n"+
"                </g>\n"+
"            </svg>\n"+
"        </div>\n"+
"    </div>\n"+
"    <div ng-if=\"newAppRequest.step==='selectUser'\">\n"+
"        <div class=\"cui-action cui-action--alt\" disable-animate>\n"+
"          <div class=\"cui-radio cui-radio--basic-ltr\">\n"+
"              <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-yes ng-model=newAppRequest.requestBy value=yourself>\n"+
"              <label class=cui-radio__label for=radio-choice-basic-yes><span></span>Request for yourself</label>\n"+
"              <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-no ng-model=newAppRequest.requestBy value=others>\n"+
"              <label class=cui-radio__label for=radio-choice-basic-no><span></span>Request for others</label>\n"+
"          </div>&nbsp;\n"+
"          <button class=cui-button style=max-width:150px ng-if=\"newAppRequest.requestBy==='yourself'\" ng-click=newAppRequest.userClick(base.user)>{{'cui-next'|translate|capitalize}}</button>\n"+
"          \n"+
"        </div>\n"+
"          \n"+
"        <section class=cui-organization__main-container ng-if=\"newAppRequest.requestBy==='others'\">\n"+
"            \n"+
"            <div class=cui-loading__container ng-if=\"base.loader.for['newAppRequest.userList']\">\n"+
"              <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"            </div>\n"+
"\n"+
"            <cui-table-header headers=\"['cui-name', 'username', 'status']\" sorting=newAppRequest.sortBy sorting-callbacks=newAppRequest.sortingCallbacks>\n"+
"            </cui-table-header>\n"+
"\n"+
"            <cui-table-row ng-repeat=\"user in newAppRequest.userList track by user.id\" ng-click=newAppRequest.userClick(user)>\n"+
"              <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"                \n"+
"                <div class=cui-flex-table__avatar-col>\n"+
"                  <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[user.name.given, user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"                </div>\n"+
"                <div class=cui-flex-table__mobile-stack>\n"+
"                  \n"+
"                  <div class=cui-flex-table__left><span class=cui-flex-table__title>{{user.name.given}} {{user.name.surname}}</span></div>\n"+
"                  \n"+
"                  <div class=cui-flex-table__middle><span class=cui-mobile-only>{{'username' | translate | lowercase}}: &nbsp;</span>{{user.username}}</div>\n"+
"                  \n"+
"                  <div class=cui-flex-table__right>\n"+
"                    <span class=cui-mobile-only>{{'apps' | translate}} ({{user.appCount}}) &nbsp;</span>\n"+
"                    <span ng-class=\"'cui-status--'+user.status\">{{user.status}}</span>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </li>\n"+
"            </cui-table-row>\n"+
"\n"+
"            \n"+
"            <div class=cui-paginate__container ng-if=\"!base.loader.for['newAppRequest.userList']\">\n"+
"              <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"              <results-per-page class=cui-paginate__select ng-model=newAppRequest.searchParams.pageSize></results-per-page>\n"+
"              <paginate class=cui-paginate results-per-page=newAppRequest.searchParams.pageSize count=newAppRequest.userCount on-page-change=newAppRequest.updateSearchParams ng-model=newAppRequest.searchParams.page attach-rerender-to=newAppRequest.reRenderPagination></paginate>\n"+
"            </div>\n"+
"\n"+
"        </section>\n"+
"    </div>\n"+
"    <div ng-if=\"newAppRequest.step==='selectCategory'\">\n"+
"    <div class=\"cui-action cui-action--alt\">\n"+
"        <h3 class=cui-action__title>{{'select-applications'| translate}}</h3>\n"+
"        <div class=cui-action__actions>\n"+
"            <svg cui-icon ng-click=\"newAppRequest.requestPopover=!newAppRequest.requestPopover\" off-click=\"newAppRequest.requestPopover=false\" xmlns=http://www.w3.org/2000/svg id=cui-applications__requested-apps class=\"cui-icon cui-icon--folder\" ng-class=\"{'cui-action__icon--active': newAppRequest.numberOfRequests != 0}\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 40 33\">\n"+
"              <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#folder></use>\n"+
"            </svg>\n"+
"            <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': newAppRequest.numberOfRequests != 0}\">{{newAppRequest.numberOfRequests}}</sup>\n"+
"            \n"+
"            <div cui-popover class=\"cui-action__popover cui-popover--positionless\" target=#cui-applications__requested-apps pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=newAppRequest.requestPopover>\n"+
"                <span class=cui-action__popover-title>{{'collected-items-for-request'| translate}}</span>\n"+
"                <div class=cui-action__popover-section>\n"+
"                    <span ng-if=\"newAppRequest.appsBeingRequested.length === 0\">{{'no-selected-apps'| translate}}<br></span>\n"+
"                    <ul ng-if=\"newAppRequest.appsBeingRequested.length > 0\">\n"+
"                        <li ng-repeat=\"application in newAppRequest.appsBeingRequested\">{{application.name| cuiI18n}}</li>\n"+
"                    </ul>\n"+
"                </div>\n"+
"                <span ng-if=\"newAppRequest.appsBeingRequested.length > 0\" class=cui-action__popover-button ui-sref=applications.reviewRequest>{{'submit-request'| translate}}</span>\n"+
"            </div>\n"+
"        </div>\n"+
"    </div>\n"+
"    <div class=cui-applications__main-container>\n"+
"        <div>\n"+
"            <div class=cui-applications__search-options>\n"+
"                <div class=cui-input-button>\n"+
"                    <input type=text class=cui-input-button__input ng-model=newAppRequest.search placeholder=\"{{'search-by-app-name'| translate}}\" on-enter=newAppRequest.searchCallback focus-if>\n"+
"                    <button class=cui-input-button__button ui-sref=applications.search({name:newAppRequest.search})>{{'go'| translate}}</button>\n"+
"                </div>\n"+
"                <div class=cui-applications__center-text>{{'or'| translate}}</div>\n"+
"                <a class=cui-link ui-sref=applications.search>{{'show-all'| translate}}</a>\n"+
"            </div>\n"+
"            <div style=position:relative>\n"+
"                <div ng-if=!newAppRequest.loadingDone> \n"+
"                    <div ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"                </div>\n"+
"\n"+
"\n"+
"\n"+
"                <div ng-repeat=\"category in newAppRequest.categories\" ng-if=newAppRequest.loadingDone>\n"+
"                    <div class=cui-applications__categories ui-sref=\"applications.search({category:'{{ category.name | cuiI18n }}' })\">\n"+
"                        <h4 class=cui-applications__category>{{ category.name | cuiI18n }}</h4>\n"+
"                        <div>\n"+
"                            <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                        </div>\n"+
"                        \n"+
"                    </div>\n"+
"                </div>\n"+
"            </div>\n"+
"        </div>\n"+
"    </div>\n"+
"    <div>\n"+
"</div>\n"+
"</div></div>");



$templateCache.put('app/modules/applications/pendingRequests/pendingRequests.html',
"\n"+
"<div class=code-info>The markup for this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/blob/master/app/modules/applications/pendingRequests/pendingRequests.html target=blank>here</a> and the javascript <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/blob/master/app/modules/applications/pendingRequests/pendingRequests.ctrl.js target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=cui-action>\n"+
"  \n"+
"  <div class=cui-action__title>{{'pending' | translate}} {{'requests' | translate}}</div>\n"+
"  <div class=cui-action__actions>\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"pendingAppRequests.sortClicked =! pendingAppRequests.sortClicked\" id=sort-button off-click=\"pendingAppRequests.sortClicked=false\">\n"+
"      <cui-icon cui-svg-icon=fa:sort14 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#sort-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=pendingAppRequests.sortClicked style=width:171px>\n"+
"        \n"+
"        <div class=cui-popover__row>\n"+
"          <span ng-click=\"pendingAppRequests.updateSearch('date')\">{{'date-submitted' | translate}}</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"<div class=cui-applications__main-container>\n"+
"  <div class=cui-applications__search-options>\n"+
"      <div class=cui-input-button style=width:350px>\n"+
"          <input type=text class=cui-input-button__input ng-model=pendingAppRequests.search.name placeholder=\"{{'search-by-app-name'| translate}}\" on-enter=pendingAppRequests.searchCallback focus-if>\n"+
"          <button class=cui-input-button__button ng-click=\"pendingAppRequests.updateSearch('name',pendingAppRequests.search.name)\">{{'go'| translate}}</button>\n"+
"      </div>\n"+
"  </div>\n"+
"  <div class=cui-loading__container ng-if=\"base.loader.for['pendingAppRequests.apps']\">\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  <p class=cui-error ng-if=\"!base.loader.for['pendingAppRequests.apps'] && base.apiError.for['pendingAppRequests.apps']\">{{'cui-pending-requests-error'|translate}} {{'cui-try-again'|translate}}\n"+
"  </p>\n"+
"    <div ng-if=\"!base.loader.for['pendingAppRequests.apps']\" style=\"position:relative; min-height:400px\">\n"+
"    	\n"+
"    	<p ng-if=\"!base.loader.for['pendingAppRequests.reloadingApps']&& pendingAppRequests.list.length===0 &&(pendingAppRequests.search.name===undefined || pendingAppRequests.search.name==='')\">{{'no-pending-apps' | translate}}</p>\n"+
"      \n"+
"      <p ng-if=\"!base.loader.for['pendingAppRequests.reloadingApps']&&pendingAppRequests.list.length===0 && (pendingAppRequests.search.name!==undefined && pendingAppRequests.search.name!=='')\">{{'no-requests-by-name' | translate}}</p>\n"+
"    	\n"+
"	    <div class=cui-loading__container ng-if=\"base.loader.for['pendingAppRequests.reloadingApps']\">\n"+
"	      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"	    </div>\n"+
"    	<table class=\"cui-table cui-table--borderless\" ng-if=\"pendingAppRequests.list.length!==0\">\n"+
"		  <thead>\n"+
"		    <tr>\n"+
"		      <th class=cui-media__title scope=col>{{'request-type'|translate}}</th>\n"+
"		      <th class=cui-media__title scope=col>\n"+
"		            {{'application'|translate}}</th>\n"+
"		      <th class=cui-media__title scope=col>\n"+
"		            {{'phase'|translate}}</th>\n"+
"		        <th class=cui-media__title scope=col>\n"+
"		            {{'date-submitted'|translate}}</th>\n"+
"		    </tr>\n"+
"		  </thead>\n"+
"		  <tbody>\n"+
"		    <tr class=cui-media--tr ng-repeat=\"appRequest in pendingAppRequests.list track by $index\">\n"+
"		      <td data-label=\"{{'request-type'|translate}}\" scope=row>{{appRequest.requestType}}</td>\n"+
"		      <td data-label=\"{{'request'|translate}}\">{{appRequest.name|cuiI18n}}</td>\n"+
"		      <td data-label=\"{{'phase'|translate}}\" ng-bind=appRequest.currentPhase></td>\n"+
"		      <td data-label=\"{{'date-submitted'|translate}}\">{{appRequest.requestedDate|date}}</td>\n"+
"		    </tr>\n"+
"		  </tbody>\n"+
"		</table>\n"+
"    </div>\n"+
"    \n"+
"\n"+
"</div>");



$templateCache.put('app/modules/applications/search/applicationSearch.html',
"\n"+
"<div class=code-info>Markup for this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/app/applications/search target=blank>here</a> and the layout styles <a href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/scss/3-views/applications.scss class=cui-link target=blank>here</a></div>\n"+
"\n"+
"\n"+
"<div class=\"cui-applications__search cui-applications__search-results\">\n"+
"    <div class=cui-action>\n"+
"        <div class=cui-action__title>{{'new-request' | translate}}</div>\n"+
"        <div class=cui-action__actions>\n"+
"\n"+
"            \n"+
"\n"+
"            <svg ui-sref=applications.myApplications xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"                <defs>\n"+
"                  <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"                  <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"                    <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"                    <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"                    <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"                  </filter>\n"+
"                </defs>\n"+
"                <g id=close-with-shadow fill=none fill-rule=evenodd>\n"+
"                    <g id=Oval-73 transform=\"translate(3 1)\">\n"+
"                        <use fill=#000 filter=url(#filter-2) xlink:href=#path-1 />\n"+
"                        <use fill=currentColor xlink:href=#path-1 />\n"+
"                    </g>\n"+
"                    <path d=\"M26.022 20.672l4.006-4.006c.788-.787.787-2.052.006-2.833l-.195-.195c-.788-.787-2.05-.778-2.834.006L23 17.65l-4.006-4.006c-.787-.788-2.052-.787-2.833-.006l-.194.195c-.788.787-.778 2.05.006 2.833l4.006 4.006-4.006 4.006c-.788.787-.787 2.053-.006 2.833l.195.196c.788.788 2.05.778 2.834-.006L23 23.695l4.006 4.005c.787.788 2.052.787 2.833.006l.194-.195c.788-.786.778-2.048-.006-2.832l-4.006-4.006z\" fill=#fff />\n"+
"                </g>\n"+
"            </svg>\n"+
"        </div>\n"+
"    </div>\n"+
"    <div class=\"cui-action cui-action--alt\">\n"+
"        <div class=\"cui-action__title cui-action__title-link\" ui-sref=applications.newRequest>&#60; {{'categories' | translate}}</div>\n"+
"        <span class=cui-action__title ng-if=applicationSearch.search.category> {{applicationSearch.search.category}}</span>\n"+
"        <div class=\"cui-input-button cui-input-button--alt-bg\">\n"+
"            <input class=cui-input-button__input ng-model=applicationSearch.search.name focus-if placeholder=\"{{'filter-list' | translate}}\" on-enter=applicationSearch.updateSearch>\n"+
"            <button class=cui-input-button__button ng-click=\"applicationSearch.updateSearch('name')\">{{'filter' | translate}}</button>\n"+
"        </div>\n"+
"        <div class=cui-action__actions>\n"+
"            <svg cui-icon id=cui-applications__requested-apps ng-click=\"applicationSearch.requestPopover=!applicationSearch.requestPopover\" off-click=\"applicationSearch.requestPopover=false\" xmlns=http://www.w3.org/2000/svg id=cui-applications__requested-apps class=cui-icon--folder ng-class=\"{'cui-action__icon--active': applicationSearch.numberOfRequests != 0}\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 40 33\">\n"+
"              <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#folder></use>\n"+
"            </svg>\n"+
"            <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': applicationSearch.numberOfRequests != 0}\">{{applicationSearch.numberOfRequests}}</sup>\n"+
"\n"+
"            <div cui-popover class=\"cui-action__popover cui-popover--positionless\" target=#cui-applications__requested-apps pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=applicationSearch.requestPopover>\n"+
"              <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"              <div class=cui-action__popover-section>\n"+
"                <span ng-if=\"applicationSearch.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"                <ul ng-if=\"applicationSearch.numberOfRequests > 0\">\n"+
"                    <li ng-repeat=\"(applicationId,application) in applicationSearch.packageRequests\">{{application.name | cuiI18n}}</li>\n"+
"                </ul>\n"+
"              </div>\n"+
"              <span ng-if=\"applicationSearch.numberOfRequests > 0\" class=cui-action__popover-button ui-sref=applications.reviewRequest>{{'submit-request' | translate}}</span>\n"+
"            </div>\n"+
"        </div>\n"+
"    </div>\n"+
"    <div class=cui-applications__main-container>\n"+
"        <div class=cui-loading__container ng-if=!applicationSearch.doneReloading>\n"+
"            <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"        </div>\n"+
"        <p class=cui-users__password-success style=\"margin:20px; text-align:center\" ng-if=\"applicationSearch.viewList.length===0\">{{'no-apps-found' |translate}} <span ng-if=applicationSearch.search.name>{{'refine-search' |translate}}</span> </p>\n"+
"        \n"+
"\n"+
"        <cui-expandable class=cui-expandable ng-repeat=\"application in applicationSearch.viewList track by application.id\" ng-class=\"application.expanded?'expanded':''\" ng-if=applicationSearch.doneReloading transition-speed=150>\n"+
"            <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\">\n"+
"                <div class=cui-applications__expandable-info ng-click=toggleExpand()>\n"+
"                    <h3 class=cui-expandable__title-left>{{application.name | cuiI18n}}</h3>\n"+
"                </div>\n"+
"                <div class=cui-expandable__title-end>\n"+
"                    <span class=cui-checkbox__container>\n"+
"                        <input class=cui-checkbox type=checkbox ng-model=applicationSearch.appCheckbox[application.id]>\n"+
"                        <label class=cui-checkbox__label ng-click=\"applicationSearch.appCheckbox[application.id]=!applicationSearch.appCheckbox[application.id]; applicationSearch.toggleRequest(application);applicationSearch.checkRelatedAndBundledApps(application)\"></label>\n"+
"                    </span>\n"+
"                </div>\n"+
"                <svg cui-icon xmlns=http://www.w3.org/2000/svg class=\"cui-icon cui-icon--light-grey chevron\" ng-class=\"{'cui-hide__opacity': (!application.bundledApps || application.bundledApps.length===0) && (application.servicePackage.parent || (!application.relatedApps || application.relatedApps.length===0))}\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\" ng-click=toggleExpand()>\n"+
"                  <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#chevron18></use>\n"+
"                </svg>\n"+
"                \n"+
"            </cui-expandable-title>\n"+
"            <cui-expandable-body class=cui-expandable__body>\n"+
"                <div class=cui-expandable__body-pane ng-if=\"(application.bundledApps && application.bundledApps.length!==0) || (!application.servicePackage.parent && (application.relatedApps && application.relatedApps.length!==0))\">\n"+
"                    <span class=cui-expandable__body-close ng-click=collapse()>\n"+
"                        <svg xmlns=http://www.w3.org/2000/svg class=cui-icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"                          <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"                        </svg>\n"+
"                    </span>\n"+
"                    <span ng-if=\"(!application.bundledApps || application.bundledApps.length===0) && (application.servicePackage.parent || (!application.relatedApps || application.relatedApps.length===0))\">{{'no-bundled-or-related' | translate}}</span>\n"+
"                    <div class=cui-expandable__pane-col ng-if=\"application.bundledApps && application.bundledApps.length > 0\">\n"+
"                        <h4 class=cui-expandable__pane-title>{{'bundled-applications' | translate}}</h4>\n"+
"                        <div class=cui-expandable__pane-content>\n"+
"                            <span class=cui-expandable__pane-content-item ng-repeat=\"bundledApp in application.bundledApps\">\n"+
"                                {{bundledApp.name | cuiI18n}}\n"+
"                            </span>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                    <div class=cui-expandable__pane-col ng-if=\"!application.servicePackage.parent && application.relatedApps && application.relatedApps.length > 0\">\n"+
"                        <h4 class=cui-expandable__pane-title>{{'related-applications' | translate}}</h4>\n"+
"                        <div class=cui-expandable__pane-content>\n"+
"                            <span class=cui-expandable__pane-content-item ng-repeat=\"relatedApp in application.relatedApps\">\n"+
"                                <span class=cui-checkbox_label__flex>{{relatedApp.name | cuiI18n}} </span>  \n"+
"                                <span class=cui-checkbox__container>\n"+
"                                    <input class=cui-checkbox type=checkbox ng-model=applicationSearch.appCheckbox[relatedApp.id]>\n"+
"                                    <label class=cui-checkbox__label ng-click=\"applicationSearch.appCheckbox[relatedApp.id]=!applicationSearch.appCheckbox[relatedApp.id];applicationSearch.checkRelatedAppsBody(relatedApp,application)\"></label>\n"+
"                                </span>\n"+
"                            </span>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </cui-expandable-body>\n"+
"        </cui-expandable>\n"+
"\n"+
"        \n"+
"\n"+
"        <div class=cui-paginate__container ng-if=applicationSearch.doneLoading>\n"+
"                <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"                <results-per-page class=cui-paginate__select ng-model=applicationSearch.search.pageSize></results-per-page>\n"+
"                <paginate class=cui-paginate results-per-page=applicationSearch.search.pageSize count=applicationSearch.count on-page-change=applicationSearch.pageChange ng-model=applicationSearch.search.page attach-rerender-to=\" applicationSearch.reRenderPaginate\"></paginate>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"\n"+
"        <div class=cui-applications__search-button>\n"+
"            <button class=cui-button ng-class=\"{'cui-button--error' : applicationSearch.numberOfRequests===0}\" ng-click=\"applicationSearch.numberOfRequests != 0 && applicationSearch.saveRequestsAndCheckout()\">{{'review-request' | translate}}</button>\n"+
"        </div>\n"+
"\n"+
"    </div>\n"+
"</div>\n"+
"\n");



$templateCache.put('app/modules/common/auth/auth.html',
"<div ui-view></div>");



$templateCache.put('app/modules/misc/search/search.html',
"\n"+
"<main class=global-search>\n"+
"    <section class=cui-action>\n"+
"    <div class=cui-action__title>{{'search' | translate}}</div>\n"+
"    </section>\n"+
"    \n"+
"    <div class=\"cui-action cui-action--alt\">\n"+
"      <div class=\"cui-radio cui-radio--basic-ltr\" ng-if=base.accessToSecurityAndExchangeAdmins()>\n"+
"          <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-yes ng-model=search.searchType value=people ng-change=search.searchNow(true)>\n"+
"          <label class=cui-radio__label for=radio-choice-basic-yes><span></span>{{'people' | translate}}</label>\n"+
"          <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-no ng-model=search.searchType value=organizations ng-change=search.searchNow(true)>\n"+
"          <label class=cui-radio__label for=radio-choice-basic-no><span></span>{{'organizations' | translate}}</label>\n"+
"      </div>&nbsp;\n"+
"      <div class=\"cui-input-button cui-input-button--alt-bg\" style=width:350px>\n"+
"          <input class=cui-input-button__input ng-model=search.searchterms focus-if placeholder=\"{{'search' | translate}}\" on-enter=search.searchNow>\n"+
"          <button class=cui-input-button__button ng-click=search.searchNow(true)>{{'search' | translate}}</button>\n"+
"      </div>\n"+
"    </div>\n"+
"    <section class=cui-organization__main-container>\n"+
"            \n"+
"        <div class=cui-loading__container ng-if=\"base.loader.for['search.loading']\">\n"+
"          <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"        </div>\n"+
"        \n"+
"        <p class=cui-users__password-success ng-if=search.noRecords>{{'no-records'|translate}} {{'refine-search' | translate}}</p>\n"+
"        \n"+
"        <p class=cui-users__password-success style=color:red ng-if=search.pageError>{{'error-generic' | translate}}</p>\n"+
"        <div ng-if=\"!base.loader.for['search.loading'] && !search.pageError && !search.noRecords\">\n"+
"            \n"+
"            <section class=cui-action ng-if=\"1==2\">\n"+
"                <h3 class=cui-sr-only>{{'org-dir-filters' | translate}}</h3>\n"+
"                <div class=cui-loading__container ng-if=\"search.loading \">\n"+
"                    <div class=\"cui-loader cui-loader--content\" ng-include=\" 'app/common-templates/partials/loader-content-header.html' \"></div>\n"+
"                </div>\n"+
"                <span class=\"cui-action__title cui-desktop-only\">{{search.organization.name | cuiI18n}}</span>\n"+
"                <span class=\"cui-action__title cui-mobile-only\">{{search.orgPersonCount}} People</span>\n"+
"                <div class=cui-action__actions>\n"+
"                    \n"+
"                    <div ng-show=\"1==2\" class=cui-action__action-container ng-click=\"search.sortClicked=!search.sortClicked \" id=\"sort-button \" off-click=\"search.sortClicked=false \">\n"+
"                        <svg xmlns=\"http://www.w3.org/2000/svg \" class=cui-action__icon preserveAspectRatio=\"xMidYMid meet \" viewBox=\"0 0 216 146 \">\n"+
"                            <use xlink:href=\"node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#sort14 \"></use>\n"+
"                        </svg>\n"+
"                        <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"                        \n"+
"                        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=\"#sort-button \" pointer-height=\"13 \" pointer-width=\"10 \" popover-positions=\"[{position: 'bottom',contentOffset: '-40px'}, 'any'] \" ng-if=\"search.sortClicked \" style=width:171px>\n"+
"                            <div class=cui-popover__row>\n"+
"                                <span ng-click=\"search.actionCallbacks.sort( 'person.name') \">{{'cui-alphabetically' | translate}}</span>\n"+
"                            </div>\n"+
"                            <div class=cui-popover__row>\n"+
"                                <span ng-click=\"search.actionCallbacks.sort( 'person.username') \">{{'username' | translate}}</span>\n"+
"                            </div>\n"+
"                            <div class=cui-popover__row>\n"+
"                                <span ng-click=\"search.actionCallbacks.sort( 'person.status') \">{{'status' | translate}}</span>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                    \n"+
"                    <div ng-show=\"1==2 \" class=cui-action__action-container ng-click=\"search.refineClicked=!search.refineClicked \" id=\"refine-button \" off-click=\"search.refineClicked=false \">\n"+
"                        <svg xmlns=\"http://www.w3.org/2000/svg \" class=cui-action__icon preserveAspectRatio=\"xMidYMid meet \" viewBox=\"0 0 216 146 \">\n"+
"                            <use xlink:href=\"node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#filter10 \"></use>\n"+
"                        </svg>\n"+
"                        <span class=cui-action__action-label>{{'refine' | translate}}</span>\n"+
"                        \n"+
"                        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=\"#refine-button \" pointer-height=\"13 \" pointer-width=\"10 \" popover-positions=\"[{position: 'bottom',contentOffset: '-70px'}, 'any'] \" ng-if=\"search.refineClicked \" style=width:214px>\n"+
"                            <div class=cui-popover__row ng-repeat=\"status in search.statusData \" ng-click=\"search.actionCallbacks.refine(status.value) \">\n"+
"                                <span>{{status.value | translate}} ({{status.count}})</span>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                    \n"+
"                    <div ng-show=\"1==2 \" class=cui-action__action-container ng-click=\"search.organizationsClicked=!search.organizationsClicked \" id=\"organizations-button \" off-click=\"search.organizationsClicked=false \">\n"+
"                        <svg xmlns=\"http://www.w3.org/2000/svg \" class=cui-action__icon preserveAspectRatio=\"xMidYMid meet \" viewBox=\"0 0 216 146 \">\n"+
"                            <use xlink:href=\"node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#nine10 \"></use>\n"+
"                        </svg>\n"+
"                        <span class=cui-action__action-label>{{'organizations' | translate}}</span>\n"+
"                        \n"+
"                        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=\"#organizations-button \" pointer-height=\"13 \" pointer-width=\"10 \" popover-positions=\"[{position: 'bottom',contentOffset: '-70px'}, 'any'] \" ng-if=\"search.organizationsClicked \" style=width:214px>\n"+
"                            <div class=cui-popover__row ng-if=\"!orgs \">\n"+
"                                <span>{{'cui-no-org-divisions' | translate}}!</span>\n"+
"                            </div>\n"+
"                            <div class=cui-popover__row ng-if=\"orgs \" ng-repeat=\"organization in orgs | orderBy: 'name' track by organization.id \">\n"+
"                                <span ng-click=\"search.getOrgMembers(organization);search.organizationsClicked=false \">{{organization.name | cuiI18n}}</span>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </section>\n"+
"            <section ng-if=\"search.searchType==='people'\">\n"+
"                <h1>{{'people'|translate}}</h1>\n"+
"                \n"+
"                <cui-table-header headers=\"[ 'cui-name', 'username', 'status'] \" sorting=\"search.sortBy \" sorting-callbacks=\"search.sortingCallbacks \">\n"+
"                </cui-table-header>\n"+
"                <cui-table-row ng-repeat=\"user in search.users track by user.id \" ng-click=\"search.userClick(user) \">\n"+
"                    <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"                        \n"+
"                        <div class=cui-flex-table__avatar-col>\n"+
"                            <div class=cui-profile__user-avatar aria-hidden=\"true \" cui-avatar cui-avatar-names=\"[user.name.given, user.name.surname] \" cui-avatar-color-class-prefix=\"cui-avatar__color \" cui-avatar-color-count=\"5 \"></div>\n"+
"                        </div>\n"+
"                        <div class=cui-flex-table__mobile-stack>\n"+
"                            \n"+
"                            <div class=cui-flex-table__left><span class=cui-flex-table__title>{{user.name.given}} {{user.name.surname}}</span></div>\n"+
"                            \n"+
"                            <div class=cui-flex-table__middle><span class=cui-mobile-only>{{'username' | translate | lowercase}}: &nbsp;</span>{{user.username}}</div>\n"+
"                            \n"+
"                            <div class=cui-flex-table__right>\n"+
"                                <span class=cui-mobile-only>{{'apps' | translate}} ({{user.appCount}}) &nbsp;</span>\n"+
"                                <span ng-class=\" 'cui-status--'+user.status \">{{user.status|lowercase|translate}}</span>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                    </li>\n"+
"                </cui-table-row>\n"+
"                \n"+
"                <div class=cui-paginate__container>\n"+
"                    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"                    <results-per-page class=cui-paginate__select ng-model=\"search.searchParams.pageSize \"></results-per-page>\n"+
"                    <paginate class=cui-paginate results-per-page=\"search.searchParams.pageSize \" count=search.personCount on-page-change=search.updateSearchParams ng-model=\"search.searchParams.page \" attach-rerender-to=\"search.reRenderPagination \"></paginate>\n"+
"                </div>\n"+
"            </section>\n"+
"            <section ng-if=\"search.searchType==='organizations'\">\n"+
"                <h1>{{'organizations'|translate}}</h1>\n"+
"                \n"+
"                <cui-table-header headers=\"[ 'cui-name','status'] \" sorting=\"search.sortBy \" sorting-callbacks=\"search.sortingCallbacks \">\n"+
"                </cui-table-header>\n"+
"                <cui-table-row ng-repeat=\"org in search.orgs track by org.id \" ng-click=\"search.orgClick(org) \">\n"+
"                    <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"                        \n"+
"                        <div class=cui-flex-table__avatar-col>\n"+
"                            <div class=cui-profile__user-avatar aria-hidden=\"true \" cui-avatar cui-avatar-names=\"[org.name[0].text] \" cui-avatar-color-class-prefix=\"cui-avatar__color \" cui-avatar-color-count=\"5 \"></div>\n"+
"                        </div>\n"+
"                        <div class=cui-flex-table__mobile-stack>\n"+
"                            \n"+
"                            <div class=cui-flex-table__left><span class=cui-flex-table__title>{{org.name}}</span></div>\n"+
"                            \n"+
"                            <div class=cui-flex-table__right>\n"+
"                                <span class=cui-mobile-only>{{'apps' | translate}} ({{org.appCount}}) &nbsp;</span>\n"+
"                                <span ng-class=\" 'cui-status--'+user.status \">{{org.status}}</span>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                    </li>\n"+
"                </cui-table-row>\n"+
"                \n"+
"                <div class=cui-paginate__container>\n"+
"                    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"                    <results-per-page class=cui-paginate__select ng-model=\"search.searchParams.pageSize \"></results-per-page>\n"+
"                    <paginate class=cui-paginate results-per-page=\"search.searchParams.pageSize \" count=search.count on-page-change=\"search.updateSearchParams \" ng-model=\"search.searchParams.page \" attach-rerender-to=\"search.reRenderPagination \"></paginate>\n"+
"                </div>\n"+
"            </section>\n"+
"        </div>\n"+
"    </section>\n"+
"</main>\n");



$templateCache.put('app/modules/misc/status/status-404.html',
"<div class=cui-tile>\n"+
"	<div class=cui-tile__title>{{'cui-page-not-found' | translate}}</div>\n"+
"	<div class=cui-tile__body>\n"+
"		<div class=misc-body>\n"+
"			<h1>{{'cui-page-not-found' | translate}}.</h1>\n"+
"			<div class=cui-card__image-container>\n"+
"				<cui-icon cui-svg-icon=cui:ask-file svg-class=cui-card__icon use-class=cui-card__icon x=0px y=0px width=88px height=88px viewbox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"			<p>{{'cui-page-not-found-content' | translate}}</p>\n"+
"		</div>\n"+
"		<button class=cui-card__button ui-sref=welcome>{{ 'cui-home' | translate }}</button>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/misc/status/status-loadError.html',
"<div class=cui-tile>\n"+
"	<div class=cui-tile__title>Error Loading Data</div>\n"+
"	<div class=cui-tile__body>\n"+
"		<div class=misc-body>\n"+
"			<h1>Error Loading Data</h1>\n"+
"			<div class=cui-card__image-container>\n"+
"				<cui-icon cui-svg-icon=cui:warning svg-class=cui-card__icon use-class=cui-card__icon x=0px y=0px width=88px height=88px viewbox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"			<p>There was an issue loading the data for this page. Please try again.</p>\n"+
"		</div>\n"+
"		<button class=cui-card__button ui-sref=welcome>{{ 'cui-home' | translate }}</button>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/misc/status/status-notAuth.html',
"<div class=cui-tile>\n"+
"	<div class=cui-tile__title>{{'cui-access-denied' | translate}}</div>\n"+
"	<div class=cui-tile__body>\n"+
"		<div class=misc-body>\n"+
"			<h1>{{'cui-access-denied' | translate}}.</h1>\n"+
"			<div class=cui-card__image-container>\n"+
"				<cui-icon cui-svg-icon=cui:not-authorized svg-class=cui-card__icon use-class=cui-card__icon x=0px y=0px width=88px height=88px viewbox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"			<p>{{'cui-access-denied-content' | translate}}</p>\n"+
"		</div>\n"+
"		<button class=cui-card__button ui-sref=welcome>{{ 'cui-home' | translate }}</button>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/misc/status/status-pendingStatus.html',
"<div class=cui-tile>\n"+
"	<div class=cui-tile__title>{{'cui-registration-status' | translate}}</div>\n"+
"	<div class=cui-tile__body>\n"+
"		<div class=misc-body>\n"+
"			<h1>{{'cui-pending-status' | translate}}...</h1>\n"+
"			<div class=cui-card__image-container>\n"+
"				<cui-icon cui-svg-icon=cui:status-pending svg-class=cui-card__icon use-class=cui-card__icon x=0px y=0px width=88px height=88px viewbox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"			<p>{{'cui-pending-status-content' | translate}}</p>\n"+
"			<p>{{'cui-thank-you' | translate}}!</p>\n"+
"		</div>\n"+
"		<button class=cui-card__button ui-sref=welcome>{{ 'cui-home' | translate }}</button>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/misc/status/status-success.html',
"<div class=cui-tile>\n"+
"	<div class=cui-tile__title>{{'cui-request-submitted' | translate}}</div>\n"+
"	<div class=cui-tile__body>\n"+
"		<div class=misc-body>\n"+
"			<h1>{{'cui-success' | translate}}!</h1>\n"+
"			<div class=cui-card__image-container>\n"+
"				<cui-icon cui-svg-icon=cui:success svg-class=cui-card__icon use-class=cui-card__icon x=0px y=0px width=88px height=88px viewbox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"			<p>{{'cui-success-content' | translate}}</p>\n"+
"			<p>{{'cui-check-your' | translate}} <a ui-sref=applications.myApplications>{{'cui-registration-status-lower' | translate}}</a>.</p>\n"+
"		</div>\n"+
"		<button class=cui-card__button ui-sref=welcome>{{ 'cui-home' | translate }}</button>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/misc/status/status.html',
"<div ui-view></div>\n");



$templateCache.put('app/modules/misc/welcome/welcome.html',
"\n"+
"\n"+
"<div class=welcome-wrapper>\n"+
"\n"+
"    \n"+
"    <div class=welcome-title>\n"+
"        <h1>{{ 'welcome-title' | translate }}:</h1>\n"+
"    </div>\n"+
"\n"+
"    <div class=cui-card__container>\n"+
"        \n"+
"        <div class=cui-card ng-if=false>\n"+
"            <div class=cui-card__image-container>\n"+
"                <div>\n"+
"                    <cui-icon cui-svg-icon=cui:skyscraper svg-class=cui-card__icon use-class=cui-icon__ref viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-card__content>\n"+
"                <p class=cui-card__content-header>{{ 'cui-new-TLO' | translate }}</p>\n"+
"                <p>{{ 'cui-new-TLO-description' | translate }}</p>\n"+
"            </div>\n"+
"            <button class=cui-card__button ui-sref=registration.tlo>{{ 'cui-sign-up' | translate }}</button>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-card ng-if=false>\n"+
"            <div class=cui-card__image-container>\n"+
"                <div>\n"+
"                    <cui-icon cui-svg-icon=cui:division svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-card__content>\n"+
"                <p class=cui-card__content-header id=newDivision-header>{{ 'cui-new-division' | translate }}</p>\n"+
"                <p>{{ 'cui-new-division-description-start' | translate }} <a href=\"\" class=cui-link ng-click=\"welcome.divisionPopover = true\">{{ 'cui-security-administrator' | translate }}</a>* {{ 'cui-new-division-description-end' | translate }}</p>\n"+
"            </div>\n"+
"            <button class=cui-card__button ui-sref=registration.division>{{ 'cui-sign-up' | translate }}</button>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-styeguide__popover-container ng-if=welcome.divisionPopover off-click=\"welcome.divisionPopover=false\" tether target=#newDivision-header attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"15px 145px\">\n"+
"            <div class=\"cui-popover cui-popover--dark cui-popover--top cui-popover__new-division\">\n"+
"                <p>{{ 'cui-welcome-popover' | translate }}</p>\n"+
"                <p class=cui-popover_link><a href=\"\" ng-click=\"welcome.divisionPopover = false\">{{'cool-got-it'| translate}}!</a></p>\n"+
"            </div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-card>\n"+
"            <div class=cui-card__image-container>\n"+
"                <div>\n"+
"                    <cui-icon cui-svg-icon=cui:user svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-card__content>\n"+
"                <p class=cui-card__content-header>{{ 'cui-new-user' | translate }}</p>\n"+
"                <p>{{ 'cui-new-user-description' | translate }}</p>\n"+
"            </div>\n"+
"            <button class=cui-card__button ui-sref=registration.walkup>{{ 'cui-sign-up' | translate }}</button>\n"+
"        </div>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/applications/appRequest/newRequest/appRequest-newRequest.html',
"<div class=cui-applications__new-request>\n"+
"	\n"+
"	\n"+
"	<div class=cui-action>\n"+
"		\n"+
"		<div class=cui-action__title ui-sref=organization.applications({orgId:orgAppRequest.stateParamsOrgId})>&lt; {{'organization-applications' | translate}} &#8211; {{'new-request' | translate}}</div>\n"+
"		\n"+
"		<div class=cui-action__actions>\n"+
"			<svg ui-sref=organization.applications({orgId:orgAppRequest.stateParamsOrgId}) xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"				<use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close></use>\n"+
"			</svg>\n"+
"		</div>\n"+
"	</div>\n"+
"\n"+
"	\n"+
"	<div class=\"cui-action cui-action--alt\">\n"+
"		<h3 class=cui-action__title>{{'select-applications' | translate}}</h3>\n"+
"		\n"+
"		<div class=cui-action__actions>\n"+
"			<svg ng-click=\"orgAppRequest.requestPopover=!orgAppRequest.requestPopover\" off-click=\"orgAppRequest.requestPopover=false\" xmlns=http://www.w3.org/2000/svg id=cui-applications__requested-apps class=\"cui-icon cui-icon--folder\" ng-class=\"{'cui-action__icon--active': orgAppRequest.numberOfOrgRequests != 0}\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 40 33\">\n"+
"				<use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#folder></use>\n"+
"			</svg>\n"+
"			<sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': orgAppRequest.numberOfOrgRequests != 0}\">{{orgAppRequest.numberOfOrgRequests}}</sup>\n"+
"			\n"+
"			<div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=orgAppRequest.requestPopover constraints=\"[{to:'scrollParent',attachment:'together',pin:['right']}]\">\n"+
"				<span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"				<div class=cui-action__popover-section>\n"+
"					<span ng-if=\"orgAppRequest.orgAppsBeingRequested.length===0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"					<ul ng-if=\"orgAppRequest.orgAppsBeingRequested.length > 0\">\n"+
"						<li ng-repeat=\"application in orgAppRequest.orgAppsBeingRequested\">{{application.name | cuiI18n}}</li>\n"+
"					</ul>\n"+
"				</div>\n"+
"				<span ng-if=\"orgAppRequest.orgAppsBeingRequested.length > 0\" class=cui-action__popover-button>{{'submit-request' | translate}}</span>\n"+
"			</div>\n"+
"		</div>\n"+
"	</div>\n"+
"\n"+
"	<div class=cui-applications__main-container>\n"+
"		<div>\n"+
"\n"+
"			\n"+
"			<div class=cui-applications__search-options>\n"+
"				\n"+
"				<div class=cui-input-button>\n"+
"					<input type=text class=cui-input-button__input ng-model=orgAppRequest.search placeholder=\"{{'search-by-app-name' | translate}}\" on-enter=orgAppRequest.searchCallback focus-if>\n"+
"					<button class=cui-input-button__button ui-sref=organization.search({orgId:orgAppRequest.stateParamsOrgId,name:orgAppRequest.search})>{{'go' | translate}}</button>\n"+
"				</div>\n"+
"				<div class=cui-applications__center-text>{{'or' | translate}}</div>\n"+
"				\n"+
"				<button class=\"cui-button cui-button--full-width\" ui-sref=organization.search()>{{'show-all' | translate}}</button>\n"+
"			</div>\n"+
"\n"+
"			\n"+
"			<div style=position:relative>\n"+
"\n"+
"				\n"+
"				<div ng-if=base.loader.orgAppRequest.loading>\n"+
"					<div class=cui-loading__container>\n"+
"						<div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"					</div>\n"+
"				</div>\n"+
"\n"+
"				\n"+
"				<div ng-repeat=\"category in orgAppRequest.categories\" ng-if=!base.loader.orgAppRequest.loading>\n"+
"					<div class=cui-applications__categories ui-sref=\"organization.search({orgId:orgAppRequest.stateParamsOrgId,category:'{{category.name | cuiI18n}}'})\">\n"+
"						<h4 class=cui-applications__category>{{category.name | cuiI18n}}</h4>\n"+
"						<svg xmlns=http://www.w3.org/2000/svg class=\"cui-icon cui-icon--light-grey\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"							<use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#chevron18></use>\n"+
"						</svg>\n"+
"					</div>\n"+
"				</div>\n"+
"			</div>\n"+
"		</div>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/applications/appRequest/newRequestReview/appRequest-newRequestReview.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/app/applications/mew-request&review target=blank>here</a> and the layout styles <a href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/scss/3-views/applications.scss class=cui-link target=blank>here</a></div>\n"+
"\n"+
"<ng-form name=reviewRequest novalidate ng-if=\"orgAppRequestReview.step!=2\">\n"+
"<div class=\"class-toggle cui-modal\" ng-if=orgAppRequestReview.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'your-app-request-in-review' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"<div class=cui-applications__review>\n"+
"    <div class=cui-action>\n"+
"        \n"+
"        <div class=cui-action__title ng-click=\"base.goBack('organization.search',{orgId:orgAppRequestReview.stateParamsOrgId})\">&lt; {{'organization-applications' | translate}} &#8211; {{'new-request' | translate}}</div>\n"+
"        <div class=cui-action__actions>\n"+
"\n"+
"            \n"+
"\n"+
"            <svg ui-sref=organization.search({orgId:orgAppRequestReview.stateParamsOrgId}) xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"                <defs>\n"+
"                  <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"                  <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"                    <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"                    <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"                    <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"                  </filter>\n"+
"                </defs>\n"+
"                <g id=close-with-shadow fill=none fill-rule=evenodd>\n"+
"                    <g id=Oval-73 transform=\"translate(3 1)\">\n"+
"                        <use fill=#000 filter=url(#filter-2) xlink:href=#path-1 />\n"+
"                        <use fill=currentColor xlink:href=#path-1 />\n"+
"                    </g>\n"+
"                    <path d=\"M26.022 20.672l4.006-4.006c.788-.787.787-2.052.006-2.833l-.195-.195c-.788-.787-2.05-.778-2.834.006L23 17.65l-4.006-4.006c-.787-.788-2.052-.787-2.833-.006l-.194.195c-.788.787-.778 2.05.006 2.833l4.006 4.006-4.006 4.006c-.788.787-.787 2.053-.006 2.833l.195.196c.788.788 2.05.778 2.834-.006L23 23.695l4.006 4.005c.787.788 2.052.787 2.833.006l.194-.195c.788-.786.778-2.048-.006-2.832l-4.006-4.006z\" fill=#fff />\n"+
"                </g>\n"+
"            </svg>\n"+
"        </div>\n"+
"    </div>\n"+
"    <div class=cui-applications__main-container style=position:relative>\n"+
"        <div class=cui-loading__container ng-if=orgAppRequestReview.attempting>\n"+
"          <div class=\"cui-loading cui-loading--center\"></div>\n"+
"        </div>\n"+
"        <div>\n"+
"            <h3 class=\"h4 bold\">{{'requested-items' | translate}}:</h3>\n"+
"            <div class=cui-applications__review-apps>\n"+
"                <div class=cui-tile--headless ng-repeat=\"applicationGroup in orgAppRequestReview.appRequests\">\n"+
"                    <div ng-repeat=\"request in applicationGroup | filter:applicationReview.search\">\n"+
"                        <div class=cui-media>\n"+
"                          <div class=\"cui-media__image-container cui-media__image-container__flex-start\">\n"+
"                            <div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=request.name cui-avatar-cuii18n-filter cui-avatar=request.iconUrl></div>\n"+
"                          </div>\n"+
"                          <div class=cui-media__body>\n"+
"                            <h3 class=cui-media__title>{{request.name | cuiI18n}}</h3>\n"+
"                            <span class=cui-media__content>{{'owning-org' | translate}}: {{request.owningOrganization.name}}</span>\n"+
"                            <div class=cui-applications__review-checkbox__wrapper ng-if=request.servicePackage.personTacEnabled>\n"+
"                                <span class=\"cui-error h6\" ng-if=\"reviewRequest['checkbox'+request.id].$error.required&&(reviewRequest['checkbox'+request.id].$dirty||orgAppRequestReview.requestReasonRequired)\">{{'cui-tac-agree' | translate}}</span> \n"+
"                                <div class=cui-applications__review-checkbox__flex>\n"+
"                                    <span class=cui-checkbox_label__flex>{{'cui-accept'|translate}} <span class=cui-link ng-click=orgAppRequestReview.showTac(request)>{{'cui-tac'|translate}}</span> </span>  \n"+
"                                    <span class=cui-checkbox__container>\n"+
"                                        <input class=cui-checkbox name=\"{{'checkbox'+request.id}}\" type=checkbox ng-model=orgAppRequestReview.tacCheckbox[request.id] ng-required=true>\n"+
"                                        <label class=cui-checkbox__label ng-click=\"orgAppRequestReview.tacCheckbox[request.id]=!orgAppRequestReview.tacCheckbox[request.id]\"></label>\n"+
"                                    </span>\n"+
"                                </div>\n"+
"                            </div> \n"+
"                            <h3 ng-if=request.bundledApps class=\"cui-media__title cui-media__title-margin__top\">{{'bundled-applications' | translate}}</h3>\n"+
"                            <div ng-if=request.bundledApps ng-repeat=\"bundledApp in request.bundledApps\">\n"+
"                                <span>{{bundledApp.name|cuiI18n}}</span>\n"+
"                            </div> \n"+
"                            <h3 ng-if=\"request.relatedApps&&request.relatedAppSelectedCount>0\" class=\"cui-media__title cui-media__title-margin__top\">{{'cui-selected' | translate}} {{'related-applications'|translate}}</h3>\n"+
"                            <div ng-if=\"request.relatedApps&&request.relatedAppSelectedCount>0\" ng-repeat=\"relatedApp in request.relatedApps\">\n"+
"                                <span ng-if=relatedApp.selected>{{relatedApp.name|cuiI18n}}</span>\n"+
"                            </div>                              \n"+
"                          </div>\n"+
"                        </div>\n"+
"                        \n"+
"                        <div class=cui-applications__review-text-input>\n"+
"                            <label class=cui-text-area__label>{{'request-reason' | translate}}</label>\n"+
"                            <span class=\"cui-error h6\" ng-if=\"reviewRequest['text_area'+request.id].$error.required&&(reviewRequest['text_area'+request.id].$dirty||orgAppRequestReview.requestReasonRequired)\">{{'you-must-enter-a-reason' | translate}}</span>\n"+
"                            <textarea name=\"{{'text_area'+request.id}}\" ng-required=request.servicePackage.requestReasonRequired class=cui-text-area ng-model=request._reason></textarea>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-applications__submit-options>\n"+
"                <a class=cui-link ng-click=\"base.goBack('organization.search',{orgId:orgAppRequestReview.stateParamsOrgId})\">{{'cui-cancel' | translate}}</a>\n"+
"                <button class=cui-button ng-class=\"{'cui-button--error' : !reviewRequest.$valid}\" ng-click=\"orgAppRequestReview.requestReasonRequired=true;reviewRequest.$valid&&orgAppRequestReview.submit()\">\n"+
"                    <span ng-if=!orgAppRequestReview.error>{{'submit-request' | translate}}</span>\n"+
"                    <span ng-if=\"orgAppRequestReview.error===true\">{{'cui-error-try-again' | translate}}</span>\n"+
"                </button>\n"+
"            </div>\n"+
"            \n"+
"\n"+
"        </div>\n"+
"    </div>\n"+
"</div>\n"+
"</ng-form>\n"+
"\n"+
"<div class=\"cui-applications__review cui-applications__main-container\" ng-if=\"orgAppRequestReview.step===2\">\n"+
"    <cui-icon cui-svg-icon=fa:chevron20 svg-class=\"cui-icon cui-icon--light-grey chevron chevron-left\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    <div class=cursor__pointer style=padding-top:3px;color:black ng-click=\"orgAppRequestReview.step=1\" translate> {{'cui-printer-friendly-tac'}}</div>\n"+
"    <div class=tac_wrapper>\n"+
"    {{orgAppRequestReview.tacContent}}\n"+
"    </div>\n"+
"    <div class=cui-applications__submit-options>\n"+
"        <a class=cui-link ng-click=\"orgAppRequestReview.step=1\">{{'cui-back-to-review' | translate}}</a>\n"+
"    </div>\n"+
"</div>");



$templateCache.put('app/modules/organization/applications/applicationDetails/organization-applicationDetails.html',
"<div ui-sref=applications.orgApplications.applicationList ng-if=orgApplicationDetails.success class=\"class-toggle cui-modal\" toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border viewbox=\"-1 -1 48 48\" class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'cui-org-app-suspend-success'|translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"\n"+
"	\n"+
"	\n"+
"	<section class=cui-action>\n"+
"		 	\n"+
"	\n"+
"    	<nav ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\" onload=\"orgId=orgApplicationDetails.stateParamsOrgId\"></nav>\n"+
"    	<nav ng-include=\"'app/modules/organization/partials/mobileNav.html'\"></nav>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"	    \n"+
"	    \n"+
"	<svg ui-sref=organization.newRequest({orgId:orgApplicationDetails.stateParamsOrgId}) xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--new\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"		<use xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#new></use>\n"+
"	</svg>\n"+
"	   \n"+
"</div>\n"+
"    </section>\n"+
"    <div class=cui-action>\n"+
"		\n"+
"		<div class=cui-action__title ng-if=\"orgApplicationDetails.stateParamsOrgId==base.user.organization.id\" ui-sref=organization.applications({orgId:orgApplicationDetails.stateParamsOrgId})>&lt; {{'cui-back' | translate}}</div>\n"+
"		<div class=cui-action__title ng-if=\"orgApplicationDetails.stateParamsOrgId!=base.user.organization.id\" ui-sref=organization.directory.orgDetails({orgId:orgApplicationDetails.stateParamsOrgId})>&lt; {{'cui-back' | translate}}</div>\n"+
"	</div>\n"+
"<div class=cui-loading__container ng-if=\"base.loader.for['orgApplicationDetails.app']\">\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=org-Application--top ng-if=\"!base.loader.for['orgApplicationDetails.app']\">\n"+
"\n"+
"	<div class=\"cui-media cui-media--centered\">\n"+
"	\n"+
"	<div class=cui-media__image-container>\n"+
"  	<a target=_blank><div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=orgApplicationDetails.application.name cui-avatar-cuii18n-filter cui-avatar=orgApplicationDetails.application.iconUrl></div></a>\n"+
"	</div>\n"+
"\n"+
"	<div class=org-Application--top__mobile-stack>\n"+
"		\n"+
"		<p class=\"org-Application--text org-Application--name\">{{orgApplicationDetails.application.name | cuiI18n}}</p>\n"+
"		\n"+
"		<p class=org-Application--text>Granted: {{orgApplicationDetails.application.creation | date:base.appConfig.dateFormat}}</p>\n"+
"	  \n"+
"	  	<p class=\"org-application--text cui-media__content\" ng-if=\"orgApplicationDetails.application.grant.status==='active'\">{{orgApplicationDetails.application.grant.status|lowercase|translate}}\n"+
"		  	<svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"		  		<use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#unlock3></use>\n"+
"		  	</svg>\n"+
"		</p>\n"+
"		  \n"+
"		  <p class=\"org-Application--text cui-media__content\" ng-if=\"orgApplicationDetails.application.grant.status==='locked'\">{{orgApplicationDetails.application.grant.status|lowercase|translate}}\n"+
"		  	<svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"		    	<use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#lock24></use>\n"+
"		    </svg>\n"+
"		  </p>\n"+
"	  </div>\n"+
"	  <br>\n"+
"	  \n"+
"        <p class=cui-error ng-if=orgApplicationDetails.suspendError><b>{{'cui-error-try-again' | translate}}</b></p>\n"+
"		<div class=org-Application--controls>\n"+
"		  	\n"+
"		  	<button ng-class=\"(orgApplicationDetails.showPopup==true)? 'cui-button cui-button--small':'cui-button cui-button--inverted'\" ng-click=\"orgApplicationDetails.showPopup=true\">{{'suspend-app' | translate}}</button>\n"+
"		  	\n"+
"		  	<button class=\"cui-button cui-button--inverted\" ng-click=orgApplicationDetails.newGrants()>{{'new-grants' | translate}}</button>\n"+
"	  	</div>\n"+
"	  	\n"+
"	  <br>\n"+
"     \n"+
"    \n"+
"	  	<cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg-org-suspend\" ng-if=orgApplicationDetails.showPopup>\n"+
"            \n"+
"\n"+
"                 <div class=cui-action__actions>\n"+
"			\n"+
"			<svg xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" ng-click=\"orgApplicationDetails.showPopup=false\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"				<use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close></use>\n"+
"			</svg>\n"+
"		</div>\n"+
"             \n"+
"			\n"+
"            <div class=cui-expandable__body-row>\n"+
"            	<p>{{'cui-org-app-suspend-msg1'|translate}}</p>\n"+
"            </div>\n"+
"            <div class=cui-expandable__body-row>\n"+
"            	<p>{{'cui-org-app-suspend-msg2'|translate}} <b>{{orgApplicationDetails.application.name | cuiI18n}}</b> {{'cui-from'|translate}} <b>{{orgApplicationDetails.organization.name}}</b> ?</p>\n"+
"            </div>\n"+
"            <div class=cui-expandable__body-row>\n"+
"		        <table>\n"+
"				  <tbody>\n"+
"				    <tr>\n"+
"				      <td scope=row><div class=\"cui-button cui-button--small\" ng-click=\"orgApplicationDetails.showPopup=false\">{{'cui-cancel' | translate}}\n"+
"		        	 	</div></td>\n"+
"				      <td><div class=\"cui-button cui-button--small\" ng-click=orgApplicationDetails.suspendApplication()>{{'yes'|translate}}, {{'suspend'|translate}}</div></td>\n"+
"				    </tr>\n"+
"				  </tbody>\n"+
"				</table>\n"+
"			 </div>\n"+
"        </cui-expandable-body>\n"+
"	</div>\n"+
"</div>\n"+
"\n"+
"\n"+
"\n"+
"		\n"+
"		\n"+
"		\n"+
"		\n"+
"\n"+
"\n"+
"<div class=\"cui-applications__main-container cui-applications__main-container--full\">\n"+
"      <div class=cui-applications__desktop-tabs>\n"+
"\n"+
"        \n"+
"        <div class=\"cui-tile cui-applications__left\">\n"+
"          <h4 class=\"cui-tile__title cui-applications__title\">{{'bundled-applications' | translate}}</h4>\n"+
"          <div class=\"cui-tile__body cui-applications__details\">\n"+
"            \n"+
"            <div class=cui-applications__no-details ng-if=\"(!orgApplicationDetails.application.bundledApps || orgApplicationDetails.application.bundledApps.length==0)\">\n"+
"              <p>{{'no-bundled-or-related' | translate}}</p>\n"+
"            </div>\n"+
"                        \n"+
"              <div class=cui-applications__bundled-app ng-repeat=\"application in orgApplicationDetails.application.bundledApps\">\n"+
"                <div class=cui-applications__related-app-col>\n"+
"                  <a class=\"cui-link bold\" ng-click=orgApplicationDetails.goToDetails(application)>{{application.name | cuiI18n}}</a>\n"+
"                  <span class=cui-media__content>{{ 'granted' | translate | lowercase}}: {{orgApplicationDetails.application.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"                </div>\n"+
"                <div class=cui-media__status ng-class=\"'cui-status--'+nyApplicationDetails.application.grant.status\">{{orgApplicationDetails.application.grant.status | lowercase|translate}}</div>  \n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"\n"+
"          \n"+
"          <div class=\"cui-tile cui-applications__right\">\n"+
"          	<h4 class=\"cui-tile__title cui-applications__title\">{{'related-applications' | translate}}</h4>\n"+
"          	<div class=\"cui-tile__body cui-applications__details\">\n"+
"          	\n"+
"          	 <div class=cui-applications__no-details ng-if=\"(!orgApplicationDetails.application.relatedApps || orgApplicationDetails.application.relatedApps.length==0)\">\n"+
"              <p>{{'no-bundled-or-related' | translate}}</p>\n"+
"            </div>\n"+
"                <div class=cui-applications__related-app ng-repeat=\"application in orgApplicationDetails.application.relatedApps\">\n"+
"                  <div class=cui-applications__related-app-col>\n"+
"                    <a class=\"cui-link bold\" ng-click=orgApplicationDetails.goToDetails(application) ng-if=application.status>{{application.name | cuiI18n}}</a> \n"+
"                    <h5 class=bold ng-if=!application.status>{{application.name | cuiI18n}}</h5>\n"+
"                    <span class=cui-media__content>{{ 'granted' | translate }}: {{orgApplicationDetails.application.grant.instant | date:base.appConfig.dateFormat}}</span> \n"+
"                  </div>\n"+
"                  <div class=\"cui-button cui-button--small-rounded\" ng-if=!application.status>{{'request' | translate}}</div>\n"+
"                  <div class=cui-media__status ng-class=\"'cui-status--'+application.status\" ng-if=application.status>{{orgApplicationDetails.application.grant.status | lowercase|translate}}</div>  \n"+
"                </div>\n"+
"              </div>\n"+
"                </div>\n"+
"          </div>\n"+
"</div>\n"+
"        \n"+
"\n"+
"\n"+
"<div class=\"org-Application--bundled-related mobile\">\n"+
"	<div class=cui-tabs>\n"+
"		<ul class=cui-tabs__nav>\n"+
"			<li class=cui-tabs__tab-container>\n"+
"				<a class=\"cui-tabs__tab cui-tabs__tab--active\" data-pane=tab1 ng-click=\"orgApplicationDetails.mobileTabs('bundled')\">{{'bundled-applications' | translate}}</a>\n"+
"			</li>\n"+
"			<li class=cui-tabs__tab-container>\n"+
"				<a class=cui-tabs__tab data-pane=tab2 ng-click=\"orgApplicationDetails.mobileTabs('related')\">{{'related-applications' | translate}}</a>\n"+
"			</li>\n"+
"		</ul>\n"+
"\n"+
"		<div class=cui-tabs__content>\n"+
"			<div id=tab1 class=\"cui-tabs__tab-pane cui-tabs__tab-pane--active\" ng-if=orgApplicationDetails.mobileTabs.bundled>\n"+
"				<div class=\"org-Application--bundled-related__bundled cui-tile\">\n"+
"					<p class=cui-tile__text ng-repeat=\"application in orgApplicationDetails.application.bundledApps\">\n"+
"						<span>{{application.name | cuiI18n}} {{orgApplicationDetails.application.grant.status|lowercase|translate}}</span>\n"+
"						<span class=active>{{'active' | translate}}</span>\n"+
"					</p>\n"+
"				</div>\n"+
"			</div>\n"+
"			<div id=tab2 class=\"cui-tabs__tab-pane cui-tabs__tab-pane--active\" ng-if=orgApplicationDetails.mobileTabs.related>\n"+
"				<div class=\"org-Application--bundled-related__related cui-tile\">\n"+
"					<p class=cui-tile__text ng-repeat=\"application in orgApplicationDetails.application.relatedApps\">\n"+
"						<span>{{application.name | cuiI18n}}</span> \n"+
"						<button class=cui-button ng-if=application.requestable ng-click=orgApplicationDetails.requestRelatedApp(application)>{{'request' | translate}}</button>\n"+
"					</p>\n"+
"				</div>\n"+
"			</div>\n"+
"		</div>\n"+
"	</div>\n"+
"</div>\n"+
"\n"+
"\n"+
"\n"+
"\n"+
"	\n"+
"	\n"+
"\n"+
"	    \n"+
"\n"+
"	      \n"+
"	      \n"+
"\n"+
"	    \n"+
"\n"+
"	      \n"+
"	      \n"+
"\n"+
"	    \n"+
"\n"+
"  			\n"+
"  			\n"+
"    		\n"+
"    		\n"+
"\n"+
"		\n"+
"		\n"+
"		\n"+
" \n"+
"		\n"+
"		\n"+
"\n"+
"					\n"+
"					\n"+
"\n"+
"						\n"+
"						\n"+
"						\n"+
"						\n"+
"					\n"+
"					\n"+
"						\n"+
"						\n"+
"\n"+
"		  	\n"+
"		  	\n"+
"			  		\n"+
"			  	\n"+
"\n"+
"		  	\n"+
"				\n"+
"			  	\n"+
"			  	\n"+
"			\n"+
"		  \n"+
"		  	\n"+
"		  	\n"+
"\n"+
"\n"+
"		  \n"+
"		 ");



$templateCache.put('app/modules/organization/applications/organization-applications.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/app/applications/org-applications target=blank>here</a></div>\n"+
"\n"+
"\n"+
"  \n"+
"  <section class=cui-action>\n"+
"    <nav ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\" onload=\"orgId=organizationApplications.stateParamsOrgId\"></nav>\n"+
"    <nav ng-if=!organizationApplications.loading ng-include=\"'app/modules/organization/partials/mobileNav.html'\" ng-init=\"orgName=organizationApplications.organization.name\"></nav>\n"+
"  </section>\n"+
"  \n"+
"  <section class=cui-action>\n"+
"    <h3 class=cui-sr-only>{{'org-dir-filters' | translate}}</h3>\n"+
"    <div class=cui-loading__container ng-if=organizationApplications.loading>\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content-header.html'\"></div>\n"+
"    </div>\n"+
"    <span class=\"cui-action__title cui-desktop-only\">{{organizationApplications.organization.name}}</span>\n"+
"    <div class=\"cui-action cui-action--alt\">\n"+
"      <div class=\"cui-input-button cui-input-button--alt-bg\" style=width:350px>\n"+
"          <input class=cui-input-button__input ng-model=\"organizationApplications.search['name']\" focus-if placeholder=\"{{'search-by-app-name' | translate}}\" on-enter=organizationApplications.updateSearchByName>\n"+
"          <button class=cui-input-button__button ng-click=organizationApplications.updateSearchByName()>{{'search' | translate}}</button>\n"+
"      </div>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"\n"+
"    \n"+
"    \n"+
"      \n"+
"     \n"+
"\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"organizationApplications.refineClicked =! organizationApplications.refineClicked\" id=refine-button off-click=\"organizationApplications.refineClicked=false\">\n"+
"      <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"        <use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#filter10></use>\n"+
"      </svg>\n"+
"      <span class=cui-action__action-label>{{'refine' | translate}}</span>\n"+
"      \n"+
"      \n"+
"        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#refine-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=organizationApplications.refineClicked style=width:214px>\n"+
"         <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"organizationApplications.updateSearch('status')\">{{'all' | translate}}</span>\n"+
"         </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"organizationApplications.updateSearch('status','active')\">{{'active' | translate}}</span>\n"+
"         </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"organizationApplications.updateSearch('status','suspended')\">{{'suspended' | translate}}</span>\n"+
"         </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"organizationApplications.updateSearch('status','pending')\">{{'pending' | translate}}</span>\n"+
"         </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"organizationApplications.categoriesClicked =! organizationApplications.categoriesClicked\" id=categories-button off-click=\"organizationApplications.categoriesClicked=false\">\n"+
"      <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 48\">\n"+
"        <use xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#categories></use>\n"+
"      </svg>\n"+
"      <span class=cui-action__action-label>{{'categories' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--top cui-popover__categories-popover\" target=#categories-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom'}, 'any']\" ng-if=organizationApplications.categoriesClicked>\n"+
"        <p ng-click=\"organizationApplications.updateSearch('category')\">{{'all' | translate}}</p>\n"+
"        <div ng-repeat=\"category in organizationApplications.categories\">\n"+
"          <p ng-click=\"organizationApplications.updateSearch('category',category.name)\">{{category.name | cuiI18n}}</p>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-action__action-container ui-sref=organization.requests.newOrgGrant({orgId:organizationApplications.stateParamsOrgId}) ng-if=base.canGrantAppToOrg()>\n"+
"    <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\" style=height:3em>\n"+
"        <use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#plus26></use>\n"+
"      </svg>\n"+
"      <span class=cui-action__action-label>{{'new-grant' | translate}}</span>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div ng-if=\"organizationApplications.stateParamsOrgId==base.user.organization.id\" class=cui-action__action-container ui-sref=organization.newRequest()>\n"+
"      <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\" style=height:3em>\n"+
"        <use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#plus26></use>\n"+
"      </svg>\n"+
"      <span class=cui-action__action-label>{{'request-app' | translate}}</span>\n"+
"    </div>\n"+
"    \n"+
"  </div>\n"+
"  </section>\n"+
"\n"+
"\n"+
"<div class=cui-applications__main-container>\n"+
"  \n"+
"  <div class=cui-loading__container ng-if=organizationApplications.loading>\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"\n"+
"  <div ng-if=!organizationApplications.loading>\n"+
"\n"+
"    \n"+
"    <p ng-if=\"organizationApplications.appList.length===0\">{{'cui-no-applications' | translate}}</p>\n"+
"    <p class=cui-error ng-if=organizationApplications.loadingError>{{'error-generic' |translate}}</p>\n"+
"    \n"+
"    <div class=\"cui-media cui-media--border cui-media--tr\" ng-repeat=\"application in organizationApplications.appList\" ng-click=organizationApplications.goToDetails(application)>\n"+
"      <div class=cui-media__image-container>\n"+
"        <a ng-href={{application.mangledUrl}} target=_blank><div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar=application.iconUrl></div></a>\n"+
"      </div>\n"+
"      <div class=\"cui-media__body cui-media__body--full\">\n"+
"        <div class=cui-media__title-container>\n"+
"          \n"+
"          <h3 class=cui-media__title ng-bind=\"application.name | cuiI18n\"></h3>\n"+
"        </div>\n"+
"        <span class=cui-media__content ng-if=application.category> {{application.category | cuiI18n}}</span>\n"+
"        <span class=cui-status ng-class=\"'cui-status--'+application.grant.status\" ng-bind=\"application.grant.status | lowercase\"></span>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container ng-if=!organizationApplications.loading>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=organizationApplications.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=organizationApplications.search.pageSize count=organizationApplications.count on-page-change=organizationApplications.pageChange ng-model=organizationApplications.search.page attach-rerender-to=organizationApplications.reRenderPaginate></paginate>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/applications/search/orgApplications-search.html',
"<div class=cui-applications__search>\n"+
"  \n"+
"  \n"+
"  <div class=cui-action>\n"+
"    \n"+
"    <div class=cui-action__title ui-sref=organization.applications({orgId:orgAppSearch.stateParamsOrgId})>&lt; {{'organization-applications' | translate}} &#8211; {{'new-request' | translate}}</div>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"      <svg xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" ui-sref=organization.applications({orgId:orgAppSearch.stateParamsOrgId}) preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"      	<use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close></use>\n"+
"      </svg>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-action cui-action--alt\">\n"+
"    \n"+
"    <div class=cui-action__title ng-if=!orgAppSearch.search.category ui-sref=organization.newRequest()>&#60; {{'categories' | translate}}</div>\n"+
"\n"+
"    \n"+
"    <span class=cui-action__title ng-if=orgAppSearch.search.category ui-sref=organization.newRequest()>&#60; {{orgAppSearch.search.category}}</span>\n"+
"    <div class=\"cui-input-button cui-input-button--alt-bg\">\n"+
"      <input class=cui-input-button__input ng-model=orgAppSearch.search.name focus-if placeholder=\"{{'filter-list' | translate}}\" on-enter=orgAppSearch.updateSearch>\n"+
"      <button class=cui-input-button__button ng-click=\"orgAppSearch.updateSearch('name')\">{{'filter' | translate}}</button>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"      <svg ng-click=\"orgAppSearch.requestPopover=!orgAppSearch.requestPopover\" off-click=\"orgAppSearch.requestPopover=false\" xmlns=http://www.w3.org/2000/svg id=cui-applications__requested-apps class=cui-icon--folder ng-class=\"{'cui-action__icon--active': orgAppSearch.numberOfRequests != 0}\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 40 33\">\n"+
"        <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#folder></use>\n"+
"      </svg>\n"+
"      <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': orgAppSearch.numberOfRequests != 0}\">{{orgAppSearch.numberOfRequests}}</sup>\n"+
"      \n"+
"      <div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=orgAppSearch.requestPopover>\n"+
"        <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"        <div class=cui-action__popover-section>\n"+
"          <span ng-if=\"orgAppSearch.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"          <ul ng-if=\"orgAppSearch.numberOfRequests > 0\">\n"+
"            <li ng-repeat=\"(applicationId,application) in orgAppSearch.packageRequests\">{{application.name | cuiI18n}}</li>\n"+
"          </ul>\n"+
"        </div>\n"+
"        <span ng-if=\"orgAppSearch.numberOfRequests > 0\" class=cui-action__popover-button ui-sref=\"\">{{'submit-request' | translate}}</span>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-applications__main-container>\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['orgAppSearch.loading']\">\n"+
"      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <cui-expandable class=cui-expandable ng-repeat=\"application in orgAppSearch.viewList track by application.id\" ng-if=!base.loader.orgAppSearch.loading transition-speed=150>\n"+
"      \n"+
"      <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\">\n"+
"        <div class=cui-applications__expandable-info ng-click=toggleExpand()>\n"+
"          <h3 class=cui-expandable__title-left>{{application.name | cuiI18n}}</h3>\n"+
"        </div>\n"+
"        <div class=cui-expandable__title-end>\n"+
"          <span class=cui-checkbox__container>\n"+
"            <input class=cui-checkbox type=checkbox ng-model=orgAppSearch.appCheckbox[application.id]>\n"+
"            <label class=cui-checkbox__label ng-click=\"orgAppSearch.appCheckbox[application.id]=!orgAppSearch.appCheckbox[application.id]; orgAppSearch.toggleRequest(application)\"></label>\n"+
"          </span>\n"+
"        </div>\n"+
"      </cui-expandable-title>\n"+
"      \n"+
"      <cui-expandable-body class=cui-expandable__body>\n"+
"        <div class=cui-expandable__body-pane>\n"+
"          <span class=cui-expandable__body-close ng-click=collapse()>\n"+
"            <svg xmlns=http://www.w3.org/2000/svg class=cui-icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"              <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"            </svg>\n"+
"          </span>\n"+
"          <span ng-if=\"(!application.bundledApps || application.bundledApps.length===0) && (!application.relatedApps || application.relatedApps.length===0)\">{{'no-bundled-or-related' | translate}}</span>\n"+
"          <div class=cui-expandable__pane-col ng-if=\"application.bundledApps && application.bundledApps.length > 0\">\n"+
"            <h4 class=cui-expandable__pane-title>{{'bundled-applications' | translate}}</h4>\n"+
"            <div class=cui-expandable__pane-content>\n"+
"              <span class=cui-expandable__pane-content-item ng-repeat=\"bundledApp in application.bundledApps\">\n"+
"                {{bundledApp.name | cuiI18n}}\n"+
"              </span>\n"+
"            </div>\n"+
"          </div>\n"+
"          <div class=cui-expandable__pane-col ng-if=\"application.relatedApps && application.relatedApps.length > 0\">\n"+
"            <h4 class=cui-expandable__pane-title>{{'related-applications' | translate}}</h4>\n"+
"            <div class=cui-expandable__pane-content>\n"+
"              <span class=cui-expandable__pane-content-item ng-repeat=\"relatedApp in application.relatedApps\">\n"+
"                <span>{{relatedApp.name | cuiI18n}} </span>\n"+
"                <span class=cui-checkbox__container>\n"+
"                  <input class=cui-checkbox type=checkbox ng-model=orgAppSearch.appCheckbox[relatedApp.id]>\n"+
"                  <label class=cui-checkbox__label ng-click=\"orgAppSearch.appCheckbox[relatedApp.id]=!orgAppSearch.appCheckbox[relatedApp.id]; orgAppSearch.checkRelatedAppsBody(relatedApp,application)\"></label>\n"+
"                </span>\n"+
"              </span>\n"+
"            </div>\n"+
"          </div>\n"+
"        </div>\n"+
"      </cui-expandable-body>\n"+
"    </cui-expandable>\n"+
"\n"+
"    \n"+
"    <p ng-if=\"orgAppSearch.list.length===0\" align=center>{{'cui-no-details' | translate}}</p>\n"+
"\n"+
"  </div>\n"+
"\n"+
"  <div class=cui-paginate__container ng-if=\"!base.loader.for['orgAppSearch.loading']\">\n"+
"    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"    <results-per-page class=cui-paginate__select ng-model=orgAppSearch.search.pageSize></results-per-page>\n"+
"    <paginate class=cui-paginate results-per-page=orgAppSearch.search.pageSize count=orgAppSearch.count on-page-change=orgAppSearch.pageChange ng-model=orgAppSearch.search.page attach-rerender-to=\" orgAppSearch.reRenderPaginate\"></paginate>\n"+
"  </div>\n"+
"  <div class=cui-applications__search-button>\n"+
"    <button class=cui-button ng-class=\"{'cui-button--error' : orgAppSearch.numberOfRequests===0}\" ng-click=\"orgAppSearch.numberOfRequests != 0 && orgAppSearch.saveRequestsAndCheckout()\">{{'review-request' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/org-details/directory-orgDetails.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/directory target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=\"cui-organization cui-organization__user-details\">\n"+
"  \n"+
"  <ng-include src=\"'app/modules/organization/directory/org-details/sections/headers/orgDetails-header.html'\" onload=\"orgId=orgDetails.prevState.params.orgId\"></ng-include>\n"+
"\n"+
"  <div class=cui-organization__details-container>\n"+
"    \n"+
"    <div class=cui-organization__details-col>\n"+
"\n"+
"      \n"+
"      <div ng-include=\"'app/modules/organization/directory/org-details/sections/headers/orgDetails-header-left.html'\"></div>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=orgDetails.profileDesktop ng-if=\"orgDetails.profileUsersSwitch==='profile'\">\n"+
"        <div ui-view=profile></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=orgDetails.profileMobile ng-if=\"orgDetails.mobileHandler==='profile'\">\n"+
"        <div ui-view=profile></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=orgDetails.usersDesktop ng-if=\"orgDetails.profileUsersSwitch==='users'\">\n"+
"        <div ui-view=users></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=orgDetails.usersMobile ng-if=\"orgDetails.mobileHandler==='users'\">\n"+
"        <div ui-view=users></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=orgDetails.applicationsMobile ng-if=\"orgDetails.mobileHandler==='apps'\">\n"+
"        <div ui-view=applications></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=orgDetails.hierarchyMobile ng-if=\"orgDetails.mobileHandler==='hierarchy'\">\n"+
"        <div ui-view=hierarchy></div>\n"+
"      </cui-resize-handler>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-organization__details-col>\n"+
"\n"+
"      \n"+
"      <div ng-include=\"'app/modules/organization/directory/org-details/sections/headers/orgDetails-header-right.html'\"></div>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=orgDetails.applicationsDesktop ng-if=\"orgDetails.appsHierarchySwitch==='apps'\">\n"+
"        <div ui-view=applications></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=orgDetails.hierarchyDesktop ng-if=\"orgDetails.appsHierarchySwitch==='hierarchy'\">\n"+
"        <div ui-view=hierarchy></div>\n"+
"      </cui-resize-handler>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/applications/orgDetails-applications.html',
" <div class=cui-loading__container--user-details ng-if=\"base.loader.for['orgDetailsApps.init']\">\n"+
"  <div class=\"cui-loader cui-loader--content-sm\" ng-include=\"'app/common-templates/partials/loader-content-sm.html'\"></div>\n"+
"</div>\n"+
" \n"+
"  <section class=cui-action ng-if=\"!base.loader.for['orgDetailsApps.init']\">\n"+
"    <h3 class=cui-sr-only>{{'org-dir-filters' | translate}}</h3>\n"+
"    <div class=cui-loading__container ng-if=orgDetailsApps.loading>\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content-header.html'\"></div>\n"+
"    </div>\n"+
"    \n"+
"    <div class=\"cui-action cui-action--alt\">\n"+
"      <div class=\"cui-input-button cui-input-button--alt-bg\" style=width:350px>\n"+
"          <input class=cui-input-button__input ng-model=\"orgDetailsApps.search['name']\" focus-if placeholder=\"{{'search-by-app-name' | translate}}\" on-enter=orgDetailsApps.updateSearchByName>\n"+
"          <button class=cui-input-button__button ng-click=orgDetailsApps.updateSearchByName()>{{'search' | translate}}</button>\n"+
"      </div>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"orgDetailsApps.refineClicked =! orgDetailsApps.refineClicked\" id=refine-button-apps off-click=\"orgDetailsApps.refineClicked=false\">\n"+
"      <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"        <use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#filter10></use>\n"+
"      </svg>\n"+
"      <span class=cui-action__action-label>{{'refine' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#refine-button-apps pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=orgDetailsApps.refineClicked style=width:214px>\n"+
"         <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsApps.updateSearch('status')\">{{'all' | translate}}</span>\n"+
"         </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsApps.updateSearch('status','active')\">{{'active' | translate}}</span>\n"+
"         </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsApps.updateSearch('status','suspended')\">{{'suspended' | translate}}</span>\n"+
"         </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsApps.updateSearch('status','pending')\">{{'pending' | translate}}</span>\n"+
"         </div>\n"+
"        \n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-action__action-container ng-click=\"orgDetailsApps.categoriesClicked =! orgDetailsApps.categoriesClicked\" id=categories-button off-click=\"orgDetailsApps.categoriesClicked=false\">\n"+
"      <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 48\">\n"+
"        <use xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#categories></use>\n"+
"      </svg>\n"+
"      <span class=cui-action__action-label>{{'categories' | translate}}</span>\n"+
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--top cui-popover__categories-popover\" target=#categories-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom'}, 'any']\" ng-if=orgDetailsApps.categoriesClicked>\n"+
"        <p ng-click=\"orgDetailsApps.updateSearch('category')\">{{'all' | translate}}</p>\n"+
"        <div ng-repeat=\"category in orgDetailsApps.categories\">\n"+
"          <p ng-click=\"orgDetailsApps.updateSearch('category',category.name)\">{{category.name | cuiI18n}}</p>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"  </section>\n"+
"\n"+
"\n"+
"<div class=cui-applications__main-container>\n"+
"  \n"+
"\n"+
"\n"+
"  <div ng-if=\"!base.loader.for['orgDetailsApps.init']\">\n"+
"\n"+
"    \n"+
"    <p ng-if=\"orgDetailsApps.appList.length===0\">{{'cui-no-applications' | translate}}</p>\n"+
"    <p class=cui-error ng-if=orgDetailsApps.loadingError>{{'error-generic' |translate}}</p>\n"+
"    \n"+
"    <div class=\"cui-media cui-media--border cui-media--tr\" ng-repeat=\"application in orgDetailsApps.appList\" ng-click=orgDetailsApps.goToDetails(application)>\n"+
"      <div class=cui-media__image-container>\n"+
"        <a ng-href={{application.mangledUrl}} target=_blank><div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar=application.iconUrl></div></a>\n"+
"      </div>\n"+
"      <div class=\"cui-media__body cui-media__body--full\">\n"+
"        <div class=cui-media__title-container>\n"+
"          \n"+
"          <h3 class=cui-media__title ng-bind=\"application.name | cuiI18n\"></h3>\n"+
"        </div>\n"+
"        <span class=cui-media__content ng-if=application.category> {{application.category | cuiI18n}}</span>\n"+
"        <span class=cui-status ng-class=\"'cui-status--'+application.grant.status\" ng-bind=\"application.grant.status | lowercase\"></span>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container ng-if=!orgDetailsApps.loading>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=orgDetailsApps.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=orgDetailsApps.search.pageSize count=orgDetailsApps.count on-page-change=orgDetailsApps.pageChange ng-model=orgDetailsApps.search.page attach-rerender-to=orgDetailsApps.reRenderPaginate></paginate>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/headers/orgDetails-breadcrumb.html',
"<ul class=cui-breadcrumb__links>\n"+
"  <li class=\"cui-breadcrumb__link cui-breadcrumb__link--current\">\n"+
"    <span class=cui-breadcrumb__mobile-link class=active><span class=cui-mobile-only>{{orgDetails.user.organization.realm}}\n"+
"  </span></span></li>\n"+
"  <div class=\"cui-popover cui-popover--menu cui-breadcrumb__popover cui-popover--top cui-popover__categories-popover\" tether target=#breadcrumb-button attachment=\"top left\" target-attachment=\"bottom left\" offset=\"-10px 0\" ng-if=orgDirectory.breadcrumbClicked>\n"+
"    <li class=\"cui-breadcrumb__link cui-popover__row\">\n"+
"      <a class=cui-breadcrumb__mobile-link ui-sref=organization.hierarchy({orgId:orgId})>{{'cui-org-hierarchy' | translate}}</a> \n"+
"    </li>\n"+
"    <li class=\"cui-breadcrumb__link cui-popover__row\">\n"+
"      <a class=cui-breadcrumb__mobile-link ui-sref=organization.profile({orgId:orgId})>{{'cui-org-profile' | translate}}</a> \n"+
"    </li> \n"+
"    <li class=\"cui-breadcrumb__link cui-popover__row\">\n"+
"      <a class=cui-breadcrumb__mobile-link ui-sref=organization.users({orgId:orgId})>{{'roles' | translate}}</a>\n"+
"    </li>\n"+
"  </div>\n"+
"</ul>\n"+
"\n"+
"\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/headers/orgDetails-header-left.html',
"<div class=cui-organization__profile-left-header>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-desktop-only\" ng-click=\"orgDetails.profileUsersSwitch='profile'\" id=profile-button off-click=\"\">\n"+
"    <div ng-class=\"{'cui-action__icon--active':orgDetails.profileUsersSwitch=='profile'}\">\n"+
"      <cui-icon cui-svg-icon=fa:nine10 svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'profile-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-desktop-only\" ng-click=\"orgDetails.profileUsersSwitch='users'\" id=users-button>\n"+
"    <div ng-class=\"{'cui-action__icon--active':orgDetails.profileUsersSwitch=='users'}\">\n"+
"      <cui-icon cui-svg-icon=cui:profile svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 -1 48 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'users-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" ng-click=\"orgDetails.mobileHandler='profile'\" id=profile-button>\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=fa:nine10 ng-class=\"{ 'cui-action__icon--active':orgDetails.profileSwitch=='profile'}\" svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'profile-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" ng-click=\"orgDetails.mobileHandler='users'\" id=users-button>\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=cui:profile ng-class=\"{ 'cui-action__icon--active':orgDetails.profileSwitch=='users'}\" svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 -1 48 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'users-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" id=applications-button ng-click=\"orgDetails.mobileHandler='apps'\">\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=cui:applications_v2 ng-class=\"{ 'cui-action__icon--active':orgDetails.profileSwitch=='apps'}\" svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 50\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'apps-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" id=hierarchy-button ng-click=\"orgDetails.mobileHandler='hierarchy'\">\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=cui:division ng-class=\"{ 'cui-action__icon--active':orgDetails.profileSwitch=='hierarchy'}\" svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'hierarchy-upper' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/headers/orgDetails-header-right.html',
"<div class=\"cui-organization__profile-right-header cui-desktop-only\">\n"+
"\n"+
"  \n"+
"  <div class=cui-organization__profile-header-item id=applications-button ng-click=\"orgDetails.appsHierarchySwitch='apps'\">\n"+
"    <div ng-class=\"{ 'cui-action__icon--active':orgDetails.appsHierarchySwitch=='apps'}\">\n"+
"      <cui-icon cui-svg-icon=cui:applications_v2 svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 50\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'apps-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-organization__profile-header-item id=applications-button ng-click=\"orgDetails.appsHierarchySwitch='hierarchy'\">\n"+
"    <div ng-class=\"{ 'cui-action__icon--active':orgDetails.appsHierarchySwitch=='hierarchy'}\">\n"+
"      <cui-icon cui-svg-icon=cui:division svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'hierarchy-upper' | translate}}</span>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-organization__profile-header-items--right ng-if=false>\n"+
"    \n"+
"    <div class=cui-organization__profile-header-item id=sort-button ng-click=\"orgDetails.sortClicked=!orgDetails.sortClicked\" off-click=\"orgDetails.sortClicked=false\" ng-if=orgDetails.appsHierarchySwitch>\n"+
"      <div>\n"+
"        <cui-icon cui-svg-icon=fa:sort14 svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"      <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"    </div>\n"+
"    \n"+
"    <div class=\"cui-popover cui-popover--top cui-popover__sort-popover\" tether target=#sort-button attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"-10px 0\" ng-if=orgDetails.sortClicked>\n"+
"      <p ng-click=\"\">{{'cui-alphabetically' | translate}}</p>\n"+
"      <p ng-click=\"\">{{'cui-by-date-added' | translate}}</p>\n"+
"    </div>\n"+
"    \n"+
"    \n"+
"    <div class=cui-organization__profile-header-item id=categories-button ng-click=\"orgDetails.categoriesClicked=!orgDetails.categoriesClicked\" off-click=\"orgDetails.categoriesClicked=false\" ng-if=orgDetails.appsHierarchySwitch>\n"+
"      <div>\n"+
"        <cui-icon cui-svg-icon=cui:categories svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"      <span class=cui-action__action-label>{{'categories' | translate}}</span>\n"+
"    </div>\n"+
"    \n"+
"    <div class=\"cui-popover cui-popover--top cui-popover__categories-popover\" tether target=#categories-button attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"-10px 0\" ng-if=orgDetails.categoriesClicked>\n"+
"      <p ng-click=\"\">TODO!</p>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/headers/orgDetails-header.html',
"<div class=cui-action>\n"+
"  <nav ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\"></nav>\n"+
"  \n"+
"  <span class=\"cui-action__title cui-mobile-only\" ng-click=\"base.goBack('organization.directory.userList',orgDetails.prevState.params)\">&#60; {{'directory' | translate}}</span>\n"+
"  <div class=cui-action__actions ng-include=\"'app/modules/organization/partials/invite-actions.html'\" ng-if=false></div>\n"+
"</div>\n"+
"\n"+
"<div>\n"+
"  \n"+
"  <div class=cui-loading__container ng-if=\"base.loader.for['orgDetails.orgInfo']\">\n"+
"    <div class=\"cui-loader cui-loader--content cui-loader--content-vert\" ng-include=\"'app/common-templates/partials/loader-content-vert.html'\"></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-media--centered ng-if=\"!base.loader.for['orgDetails.orgInfo']\">\n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=\"cui-profile__user-avatar cui-media__image\" cui-avatar cui-avatar-names=[orgDetails.organization.name] cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-email=orgDetails.organization.email></div>\n"+
"    </div>\n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{orgDetails.organization.name}}</h3>\n"+
"      \n"+
"      <p class=cui-media__content>{{'cui-registered' | translate}}: {{orgDetails.organization.creation | date:base.appConfig.dateFormat}}</p>\n"+
"      \n"+
"      <div class=cui-media__content>\n"+
"        <span class=cui-media__content--dark>{{'status' | translate}}:</span>\n"+
"        <span class=cui-status ng-class=\" 'cui-status--'+orgDetails.organization.status \">{{orgDetails.organization.status}}</span>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  \n"+
"  <div class=cui-media__button-container>\n"+
"    \n"+
"    \n"+
"\n"+
"\n"+
"    \n"+
"\n"+
"      \n"+
"\n"+
"    \n"+
"    \n"+
"\n"+
"    \n"+
"     <button class=\"cui-button cui-button--inverted\" ng-if=base.canGrantAppToOrg() ng-disabled=\"orgDetails.organization.status!=='active'\" ui-sref=organization.requests.newOrgGrant({orgId:orgId}) ng-class=\"(orgDetails.organization.status!=='active')?'cui-button--error':''\">{{'new-grants' | translate}}</button>\n"+
"\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<ng-include ng-if=orgDetails.suspend.begun src=\"'app/modules/organization/directory/org-details/sections/headers/partials/suspend-user.html'\">\n"+
"</ng-include>\n"+
"\n"+
"\n"+
"<ng-include ng-if=orgDetails.unsuspend.begun src=\"'app/modules/organization/directory/org-details/sections/headers/partials/unsuspend-user.html'\">\n"+
"</ng-include>\n"+
"<br>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/headers/partials/suspend-user.html',
"<div class=\"cui-users__address-container user-details__password-reset show-address\">\n"+
"  {{'cui-suspend-confirm' | translate}}*\n"+
"\n"+
"  <div class=cui-server-error ng-if=\"base.apiError.for['userDetails.suspend']\">\n"+
"    <div class=cui-server-error__container>\n"+
"      <span>{{ 'suspend-error' | translate }}</span>\n"+
"    </div>\n"+
"    <svg xmlns=http://www.w3.org/2000/svg class=cui-server-error__close ng-click=\"base.apiError.for['userDetails.suspend'] = !base.apiError.for['userDetails.suspend']\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\" aria-label=\"{{'cui-close' | translate}}\">\n"+
"      <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"    </svg>\n"+
"  </div>\n"+
"\n"+
"  <textarea class=\"cui-text-area jlr-text-area--black-text\" ng-required=true style=\"margin: 20px\" ng-model=userDetails.user.suspendReason placeholder=\"{{'request-reason' | translate}}\"></textarea>\n"+
"\n"+
"<div class=cui-organization__submit-row disable-animate>\n"+
"      <span ng-click=userDetails.suspend.cancel() class=cursor__pointer style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.suspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.suspend'] && !base.apiError.for['userDetails.suspend'] && !userDetails.suspend.success\" ng-click=\"userDetails.user.suspendReason.length>0&&userDetails.suspend.confirm()\" style=margin:5px>{{'yes' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"base.loader.for['userDetails.suspend']\">\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.suspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.suspend'] && base.apiError.for['userDetails.suspend'] && !userDetails.suspend.success \" ng-click=\"userDetails.user.suspendReason.length>0&&userDetails.suspend.confirm()\">{{'cui-error-try-again' | translate}}</button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.suspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.suspend'] && !base.apiError.for['userDetails.suspend'] && userDetails.suspend.success\">{{'cui-success' | translate}}</button>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/headers/partials/unsuspend-user.html',
"<div class=\"cui-users__address-container user-details__password-reset show-address\">\n"+
"  <p>{{'cui-unsuspend-confirm' | translate}}</p>\n"+
"\n"+
"  \n"+
"  <div class=cui-server-error ng-if=\"base.apiError.for['userDetails.unsuspend']\">\n"+
"    <div class=cui-server-error__container>\n"+
"      <span>{{ 'unsuspend-error' | translate }}</span>\n"+
"    </div>\n"+
"    <svg xmlns=http://www.w3.org/2000/svg class=cui-server-error__close ng-click=\"base.apiError.for['userDetails.unsuspend'] = !base.apiError.for['userDetails.unsuspend']\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\" aria-label=\"{{'cui-close' | translate}}\">\n"+
"      <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"    </svg>\n"+
"  </div>\n"+
"\n"+
"  <textarea class=\"cui-text-area jlr-text-area--black-text\" style=\"width: 100%; margin-bottom: 20px\" ng-model=userDetails.user.unsuspendReason placeholder=\"{{'request-reason' | translate}}\"></textarea>\n"+
"\n"+
"  \n"+
"    <div class=cui-organization__submit-row disable-animate>\n"+
"      <span ng-click=userDetails.unsuspend.cancel() class=cursor__pointer style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.unsuspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.unsuspend'] && !base.apiError.for['userDetails.unsuspend'] && !userDetails.unsuspend.success\" ng-click=\"userDetails.user.unsuspendReason.length>0&&userDetails.unsuspend.confirm()\" style=margin:5px>{{'yes' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"base.loader.for['userDetails.unsuspend']\">\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.unsuspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.unsuspend'] && base.apiError.for['userDetails.unsuspend'] && !userDetails.unsuspend.success\" ng-click=\"userDetails.user.unsuspendReason.length>0&&userDetails.unsuspend.confirm()\">{{'cui-error-try-again' | translate}}</button>\n"+
"       <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.unsuspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.unsuspend'] && !base.apiError.for['userDetails.unsuspend'] && userDetails.unsuspend.success\">{{'cui-success' | translate}}</button>\n"+
"    </div>\n"+
"</div>");



$templateCache.put('app/modules/organization/directory/org-details/sections/hierarchy/orgDetails-hierarchy.html',
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['orgDetailsHierarchy.loading']\">\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"<div ng-if=\"!base.loader.for['orgDetailsHierarchy.loading']\">\n"+
"  \n"+
"    <div class=cui-tree ng-if=orgDetailsHierarchy.organizationHierarchy cui-tree-alt=orgDetailsHierarchy.organizationHierarchy cui-tree-alt-leaf-display=\"(object.name | cuiI18n)\" cui-tree-alt-leaf-click-callback=orgDetailsHierarchy.goToOrgPrfile cui-tree-alt-toggle-expand-callback=orgDetailsHierarchy.toggleExpand></div>\n"+
"\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/profile/orgDetails-profile.html',
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['orgDetailsProfile.init']\">\n"+
"  <div class=\"cui-loader cui-loader--content-sm\" ng-include=\"'app/common-templates/partials/loader-content-sm.html'\"></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['orgDetailsProfile.init']\">{{'error-generic' | translate}}</p>\n"+
"<div class=org-details__container ng-if=\"!base.loader.for['orgDetailsProfile.init'] && orgDetailsProfile.organization\">\n"+
"  <div class=cui-organization__row>\n"+
"    <div class=cui-organization__info-block>\n"+
"      <div class=cui-organization__admin-block-wrapper>\n"+
"\n"+
"        \n"+
"        <div class=\"cui-field-val cui-field-val--stack cui-organization__admin-block cui-organization__admin-block__right\">\n"+
"          <h4 class=cui-field-val__field>{{'cui-address' | translate}}: </h4>\n"+
"          <span class=cui-field-val__val>{{orgDetailsProfile.organization.addresses[0].streets[0]}}</span>\n"+
"          <span class=cui-field-val__val>{{orgDetailsProfile.organization.addresses[0].city}}</span>\n"+
"          <span class=cui-field-val__val>{{orgDetailsProfile.organization.addresses[0].state}}, {{orgDetailsProfile.organization.addresses[0].postal}}</span>\n"+
"          <span class=cui-field-val__val>{{orgDetailsProfile.organization.phones[0].number}}</span>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=\"cui-organization__admin-block cui-organization__admin-block__right\">\n"+
"          <h4 class=cui-field-val__field>{{'cui-info' | translate}}:</h4>\n"+
"          <div class=cui-field-val ng-if=orgDetailsProfile.organization.url>\n"+
"            <span class=cui-field-val__field>{{'url' | translate}}: </span>\n"+
"            <span class=cui-field-val__val><a class=cui-link ng-href={{orgDetailsProfile.organization.url}}>{{orgDetailsProfile.organization.url}}</a></span>\n"+
"          </div>\n"+
"          <div class=cui-field-val ng-if=orgDetailsProfile.passwordPolicy>\n"+
"            <span class=cui-field-val__field>{{'cui-password-policy' | translate}}: </span>\n"+
"            <span class=cui-field-val__val>{{orgDetailsProfile.passwordPolicy.name}}</span>\n"+
"          </div>\n"+
"          <div class=cui-field-val ng-if=orgDetailsProfile.authenticationPolicy>\n"+
"            <span class=cui-field-val__field>{{'cui-authentication-policy' | translate}}: </span>\n"+
"            <span class=cui-field-val__val>{{orgDetailsProfile.authenticationPolicy.name}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=\"cui-organization__admin-block cui-organization__admin-block__right\" ng-if=orgDetailsProfile.organization.attributes>\n"+
"          <h4 class=cui-field-val__field>{{'cui-more-information' | translate}}:</h4>\n"+
"          <div class=cui-field-val ng-repeat=\" attribute in orgDetailsProfile.organization.attributes\">\n"+
"            <span class=cui-field-val__field>{{attribute.name}}: </span>\n"+
"            <span class=cui-field-val__val>{{attribute.value}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"        \n"+
"        \n"+
"        <h4 class=cui-field-val__field ng-if=\"orgDetailsProfile.securityAdmins&&orgDetailsProfile.securityAdmins.length!==0\">{{'cui-security-admin' | translate}}</h4>\n"+
"        <div class=cui-organization__admin-block ng-repeat=\"admin in orgDetailsProfile.securityAdmins track by admin.id\">\n"+
"          \n"+
"          <div class=cui-field-val>\n"+
"            <span class=cui-field-val__field>{{'cui-name' | translate}}: </span>\n"+
"            <span class=cui-field-val__val>{{admin.name.given}} {{admin.name.surname}}</span>\n"+
"          </div>\n"+
"          \n"+
"          <div class=cui-field-val>\n"+
"            <span class=cui-field-val__field>{{'username' | translate}}: </span>\n"+
"            <span class=cui-field-val__val>{{admin.username}}</span>\n"+
"          </div>\n"+
"          \n"+
"          <div class=cui-field-val>\n"+
"            <span class=cui-field-val__field>{{'title' | translate}}: </span>\n"+
"            <span class=cui-field-val__val>{{admin.title}}</span>\n"+
"          </div>\n"+
"          \n"+
"          <div class=cui-field-val>\n"+
"            <span class=cui-field-val__field>{{'cui-phone' | translate}}: </span>\n"+
"            <span class=cui-field-val__val>{{admin.phones[0].number}}</span>\n"+
"          </div>\n"+
"          \n"+
"          <div class=cui-field-val>\n"+
"            <span class=cui-field-val__field>{{'cui-email' | translate}}: </span>\n"+
"            <span class=cui-field-val__val><a class=cui-link href=mailto:{{admin.email}}>{{admin.email}}</a></span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n"+
"\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/profile/sections-profile/address.html',
"<ng-form name=address>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'cui-address' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"      \n"+
"      <div ng-if=!toggled>\n"+
"        <div class=cui-field-val__val>{{userDetailsProfile.user.addresses[0].streets[0]}} </div>\n"+
"        <div class=cui-field-val__val ng-if=userDetailsProfile.user.addresses[0].streets[1]>{{userDetailsProfile.user.addresses[0].streets[1]}}</div>\n"+
"        <div class=cui-field-val__val>{{userDetailsProfile.user.addresses[0].city}}</div>\n"+
"        <div class=cui-field-val__val>{{userDetailsProfile.user.addresses[0].state}}<span ng-if=\"userDetailsProfile.user.addresses[0].state && userDetailsProfile.user.addresses[0].postal\">, </span>{{userDetailsProfile.user.addresses[0].postal}}</div>\n"+
"        <div class=cui-field-val__val>{{base.countries.getCountryByCode(userDetailsProfile.user.addresses[0].country).name}}</div>\n"+
"      </div>\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'address','function':toggleOff})\">\n"+
"        \n"+
"        <label for=\"{{'cui-street-address' | translate}}\">{{'cui-street-address' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-street-address' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].streets[0]>\n"+
"        \n"+
"        <label for=\"{{'cui-address-2' | translate}}\">{{'cui-address-2' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-address-2' | translate}}\" ng-model=userDetailsProfile.tempUser.addresses[0].streets[1] class=cui-input>\n"+
"        \n"+
"        <label for=\"{{'cui-city' | translate}}\">{{'cui-city' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-city' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].city>\n"+
"        \n"+
"        <div class=cui-form__field-row>\n"+
"          <div class=\"cui-form__field-container cui-form__field-container--half\">\n"+
"            <label for=\"{{'cui-state' | translate}}\">{{'cui-state' | translate}}</label>\n"+
"            <input type=text name=\"{{'cui-state' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].state>\n"+
"          </div>\n"+
"          \n"+
"          <div class=\"cui-form__field-container cui-form__field-container--half\">\n"+
"            <label for=\"{{'cui-zip' | translate}}\">{{'cui-zip' | translate}}</label>\n"+
"            <input type=text name=\"{{'cui-zip' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].postal>\n"+
"          </div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-wizard__field-container>\n"+
"          <label for=country>{{\"cui-country\" | translate}}</label>\n"+
"          <div class=cui-error ng-messages=user.country.$error ng-if=user.country.$touched>\n"+
"            <div ng-messages-include=app/angular-templates/messages.html></div>\n"+
"          </div>\n"+
"          <div auto-complete input-name=country pause=100 selected-object=userDetailsProfile.userCountry initial-value=base.countries.getCountryByCode(userDetailsProfile.tempUser.addresses[0].country) local-data=base.countries.list search-fields=name title-field=name input-class=cui-input match-class=highlight auto-match=true></div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=\"userDetailsProfile.resetTempObject(userDetailsProfile.user, userDetailsProfile.tempUser); toggleOff()\">{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"userDetailsProfile.updatePerson('address',toggleOff);\">\n"+
"            <span ng-if=\"!userDetailsProfile.address || !userDetailsProfile.address.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.address.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.address.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/profile/sections-profile/basic-info.html',
"<ng-form name=basicInfo>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'basic-info' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=!toggled>\n"+
"        <div class=cui-field-val>\n"+
"          <span class=cui-field-val__field>{{'cui-org' | translate}}:</span>\n"+
"          <span class=cui-field-val__val>{{userDetailsProfile.organization.name}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-field-val>\n"+
"          <span class=cui-field-val__field>{{'cui-name' | translate}}:</span>\n"+
"          <span class=cui-field-val__val>{{userDetailsProfile.user.name.given}} {{userDetailsProfile.user.name.surname}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-field-val>\n"+
"          <span class=cui-field-val__field>{{'cui-email' | translate}}:</span>\n"+
"          <span class=cui-field-val__val>{{userDetailsProfile.user.email}} </span>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'basicInfo','function':toggleOff})\">\n"+
"        \n"+
"        <label for=firstName>{{'cui-first-name' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.firstName.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=text name=firstName class=cui-input ng-model=userDetailsProfile.tempUser.name.given ng-required=true focus-if=toggled>\n"+
"        \n"+
"        <label for=lastName>{{'cui-last-name' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.lastName.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=text name=lastName class=cui-input ng-model=userDetailsProfile.tempUser.name.surname ng-required=true>\n"+
"        \n"+
"        <label for=email>{{'cui-email' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.email.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=email name=email class=cui-input ng-model=userDetailsProfile.tempUser.email ng-required=true>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"basicInfo.$valid && userDetailsProfile.updatePerson('basicInfo',toggleOff);\" ng-class=\"{'cui-button--error':!basicInfo.$valid}\">\n"+
"            <span ng-if=\"!userDetailsProfile.basicInfo || !userDetailsProfile.basicInfo.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.basicInfo.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.basicInfo.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/profile/sections-profile/challenge-questions.html',
"<ng-form name=challengeQuestions>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'challenge-questions' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"      <div ng-if=!toggled>\n"+
"        <div ng-repeat=\"question in userDetailsProfile.challengeQuestionsTexts\">\n"+
"          <span class=cui-field-val__field>{{$index+1}}:</span>\n"+
"          <span class=cui-field-val__val>{{question}}</span>\n"+
"          <br>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'challengeQuestions','function':toggleOff})\">\n"+
"        <div ng-repeat=\"question in userDetailsProfile.tempUserSecurityQuestions.questions\">\n"+
"          <b>{{'cui-challenge-question' | translate}} {{$index+1}}</b>\n"+
"          <select class=\"cui-input cui-input--full cui-select\" ng-model=question.question.id ng-options=\"question.id as (question.question | cuiI18n) for question in userDetailsProfile['allChallengeQuestions' + $index]\"></select>\n"+
"          {{'cui-answer' | translate}}\n"+
"          <div class=cui-error ng-messages=\"challengeQuestions['answer' + $index].$error\">\n"+
"            <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"          </div>\n"+
"          <input type=text ng-model=question.answer class=cui-input ng-class=\"{'cui-input--error':!challengeQuestions['answer'+$index].$valid}\" name=answer{{$index}} ng-change=userDetailsProfile.checkIfRepeatedSecurityAnswer(userDetailsProfile.tempUserSecurityQuestions.questions,challengeQuestions) ng-required=true>\n"+
"          <br><br>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"userDetailsProfile.saveChallengeQuestions('challengeQuestions',toggleOff);\" ng-class=\"{'cui-button--error':!challengeQuestions.$valid}\">\n"+
"            <span ng-if=\"( !userDetailsProfile.challengeQuestions || !userDetailsProfile.challengeQuestions.submitting ) && !userDetailsProfile.challengeQuestions.error\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.challengeQuestions.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.challengeQuestions.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/profile/sections-profile/password.html',
"<ng-form name=password>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'password-reset' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=userDetailsProfile.resetPasswordFields();toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'password','function':toggleOff})\">\n"+
"\n"+
"        \n"+
"        <label for=currentPassword>{{'current-password' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=password.currentPassword.$error ng-if=password.currentPassword.$touched>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=password name=currentPassword class=cui-input ng-model=userDetailsProfile.userPasswordAccount.currentPassword ng-required=true focus-if=toggled>\n"+
"\n"+
"        \n"+
"        <div class=cui-input__password-holder>\n"+
"          <label for=newPassword>{{'cui-enter-new-password' | translate}}: </label>\n"+
"          <input class=cui-input name=newPassword type=password ng-model=userDetailsProfile.userPasswordAccount.password ng-required=true ng-class=\"{'cui-input--error': password.newPassword.$touched && password.newPassword.$invalid}\" password-validation=userDetailsProfile.passwordRules>\n"+
"          \n"+
"          <div password-popover ng-messages=password.newPassword.$error ng-messages-multiple ng-if=password.newPassword.$invalid class=cui-error__password>\n"+
"            <div ng-messages-include=app/common-templates/password-validation.html></div>\n"+
"          </div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <label for=newPasswordRe>{{'cui-re-enter-new-password' | translate}}: </label>\n"+
"        <div class=cui-error ng-if=\"password.newPasswordRe.$touched && password.newPasswordRe.$error.match\">\n"+
"          <div class=cui-error__message>{{'password-mismatch' | translate}}</div>\n"+
"        </div>\n"+
"        <input class=\"cui-input cui-field-val__val\" type=password ng-model=userDetailsProfile.passwordRe name=newPasswordRe match=userDetailsProfile.userPasswordAccount.password>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=userDetailsProfile.resetPasswordFields();toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"password.$valid && userDetailsProfile.updatePassword('password',toggleOff);\" ng-class=\"{'cui-button--error':!password.$valid}\">\n"+
"            <span ng-if=\"(!userDetailsProfile.password || !userDetailsProfile.password.submitting) && !userDetailsProfile.password.error\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.password.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.password.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/profile/sections-profile/phone-fax.html',
"<ng-form name=phoneFax>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'cui-phone-fax' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"\n"+
"      <div ng-if=!toggled ng-repeat=\"phone in userDetailsProfile.user.phones\">\n"+
"        <span class=cui-field-val__field>{{phone.type}}:</span>\n"+
"        <span class=cui-field-val__val>{{phone.number}}</span>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled>\n"+
"        \n"+
"        <div ng-repeat=\"phone in userDetailsProfile.tempUser.phones\">\n"+
"          <label>{{phone.type}}</label>\n"+
"          <div ng-messages=\"phoneFax['phone'+$index].$error\" class=cui-error>\n"+
"            <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"          </div>\n"+
"          <input class=cui-input type=text ng-model=phone.number name=phone{{$index}} ng-required=true>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"phoneFax.$valid && userDetailsProfile.updatePerson('phoneFax',toggleOff);\" ng-class=\"{'cui-button--error':!phoneFax.$valid}\">\n"+
"            <span ng-if=\"!userDetailsProfile.phoneFax || !userDetailsProfile.phoneFax.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.phoneFax.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.phoneFax.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/profile/sections-profile/timezone-language.html',
"<ng-form name=timezoneLanguage>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'timezone-and-language' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"      <div ng-if=!toggled>\n"+
"        <span class=cui-field-val__field>{{'cui-timezone' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{userDetailsProfile.timezoneById(userDetailsProfile.user.timezone)}}</span><br>\n"+
"        <span class=cui-field-val__field>{{'cui-language' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{base.languages[userDetailsProfile.user.language]}}</span>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'timezoneLangauge','function':toggleOff})\">\n"+
"        \n"+
"        <label for=timezone>{{'cui-timezone' | translate}}</label>\n"+
"        <select class=\"cui-input cui-select\" ng-model=userDetailsProfile.tempUser.timezone ng-options=\"timezone.id as timezone.name for timezone in base.timezones\"></select>\n"+
"        \n"+
"        <label for=language>{{'cui-language' | translate}}</label>\n"+
"        <select class=\"cui-input cui-select\" ng-model=userDetailsProfile.tempUser.language ng-options=\"languageCode as languageName for (languageCode,languageName) in base.languages\"></select>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"userDetailsProfile.updatePerson('timezoneLanguage',toggleOff);\">\n"+
"            <span ng-if=\"!userDetailsProfile.timezoneLanguage || !userDetailsProfile.timezoneLanguage.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.timezoneLanguage.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.timezoneLanguage.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/org-details/sections/users/orgDetails-users.html',
"<main class=\"cui-organization cui-organization-dir\">\n"+
"  \n"+
"  \n"+
"  <section class=cui-action ng-if=!orgDetailsUsers.loading>\n"+
"    <h3 class=cui-sr-only>{{'org-dir-filters' | translate}}</h3>\n"+
"    <div class=cui-loading__container ng-if=orgDetailsUsers.loading>\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content-header.html'\"></div>\n"+
"    </div>\n"+
"   \n"+
"    <span class=\"cui-action__title cui-mobile-only\">{{orgDetailsUsers.orgPersonCount}} People</span>\n"+
"    <div class=\"cui-input-button cui-input-button--alt-bg\">\n"+
"      <input class=cui-input-button__input ng-model=orgDetailsUsers.search.fullName focus-if placeholder=\"{{'cui-search-user-name' | translate}}\" on-enter=orgDetailsUsers.updateSearchByName>\n"+
"      <button class=cui-input-button__button ng-click=\"orgDetailsUsers.updateSearchByName('name')\">{{'search' | translate}}</button>\n"+
"    </div>\n"+
"    <div class=cui-action__actions>\n"+
"      \n"+
"      <div class=cui-action__action-container ng-click=\"orgDetailsUsers.refineClicked=!orgDetailsUsers.refineClicked\" id=refine-button-users off-click=\"orgDetailsUsers.refineClicked=false\">\n"+
"        <cui-icon cui-svg-icon=fa:filter10 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        <span class=cui-action__action-label>{{'refine' | translate}}</span>\n"+
"        \n"+
"        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#refine-button-users pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=orgDetailsUsers.refineClicked style=width:214px>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.refine('all')\">{{'all' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.refine('active')\">{{'active' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.refine('pending')\">{{'pending' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.refine('locked')\">{{'locked' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.refine('suspended')\">{{'suspended' | translate}}</span>\n"+
"            \n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-show=\"1==2\" class=cui-action__action-container ng-click=\"orgDetailsUsers.sortClicked=!orgDetailsUsers.sortClicked\" id=sort-button off-click=\"orgDetailsUsers.sortClicked=false\">\n"+
"        <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"          <use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#sort14></use>\n"+
"        </svg>\n"+
"        <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"        \n"+
"        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#sort-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" ng-if=orgDetailsUsers.sortClicked style=width:171px>\n"+
"          <div class=cui-popover__row>\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.sort('name')\">{{'cui-alphabetically' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=cui-popover__row>\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.sort('username')\">{{'username' | translate}}</span>  \n"+
"          </div>\n"+
"          <div class=cui-popover__row>\n"+
"            <span ng-click=\"orgDetailsUsers.actionCallbacks.sort('status')\">{{'status' | translate}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </section>\n"+
"\n"+
"  \n"+
"  <section class=cui-organization__main-container>\n"+
"    <h3 class=cui-sr-only>{{'org-dir-list'}}</h3>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['orgDetailsUsers.userList']\">\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"    </div>\n"+
"\n"+
"    <cui-table-header headers=\"['cui-name', 'username', 'status']\" sorting=orgDetailsUsers.sortBy sorting-callbacks=orgDetailsUsers.sortingCallbacks>\n"+
"      </cui-table-header>\n"+
"      <p ng-if=\"orgDetailsUsers.userList.length===0\">{{'cui-no-details' | translate}}</p>\n"+
"\n"+
"    <cui-table-row ng-repeat=\"user in orgDetailsUsers.userList track by user.id\" ng-click=orgDetailsUsers.userClick(user)>\n"+
"      <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"        \n"+
"        <div class=cui-flex-table__avatar-col>\n"+
"          <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[user.name.given, user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"        </div>\n"+
"        <div class=cui-flex-table__mobile-stack>\n"+
"          \n"+
"          <div class=cui-flex-table__left><span class=cui-flex-table__title>{{user.name.given}} {{user.name.surname}}</span></div>\n"+
"          \n"+
"          <div class=cui-flex-table__middle><span class=cui-mobile-only>{{'username' | translate | lowercase}}: &nbsp;</span>{{user.username}}</div>\n"+
"          \n"+
"          <div class=cui-flex-table__right>\n"+
"            <span class=cui-mobile-only>{{'apps' | translate}} ({{user.appCount}}) &nbsp;</span>\n"+
"            <span ng-class=\"'cui-status--'+user.status\">{{user.status}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </li>\n"+
"    </cui-table-row>\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=orgDetailsUsers.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=orgDetailsUsers.search.pageSize count=orgDetailsUsers.userCount on-page-change=orgDetailsUsers.updateSearchParams ng-model=orgDetailsUsers.search.page attach-rerender-to=orgDetailsUsers.reRenderPagination></paginate>\n"+
"    </div>\n"+
"\n"+
"  </section>\n"+
"</main>\n");



$templateCache.put('app/modules/organization/directory/user-app-details/directory-userAppDetails.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/applications/myApplications target=blank>here</a></div>\n"+
"  \n"+
"<div class=\"cui-applications__app-details cui-organization__user-details\">\n"+
"\n"+
"\n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-action>\n"+
"    <span class=cui-action__title ng-click=\"base.goBack('organization.directory.userDetails',userAppDetails.prevState.params)\">&#60; {{'user-details' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div>\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['userAppDetails.app']||base.loader.for['userAppDetails.claims']||base.loader.for['userAppDetails.relatedApps']\">\n"+
"      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"    <div ng-if=\"!base.loader.for['userAppDetails.app']\">\n"+
"      <div ng-include=\"'app/modules/organization/directory/user-app-details/sections/header-main.html'\"></div>\n"+
"\n"+
"      <div class=user-app-details__container>\n"+
"        \n"+
"        <div class=\"cui-tabs class-toggle\">\n"+
"          <ul class=cui-tabs__nav ng-if=\"userAppDetails.relatedApps.length!==0\">\n"+
"            <li class=cui-tabs__tab-container><a class=cui-tabs__tab data-pane=tab1 ng-class=\"{'cui-tabs__tab--active':!userAppDetails.inClaims}\" ng-click=\"userAppDetails.inClaims=false\">{{'bundled-applications' | translate}}</a></li>\n"+
"            <li class=cui-tabs__tab-container><a class=cui-tabs__tab data-pane=tab2 ng-class=\"{'cui-tabs__tab--active':userAppDetails.inClaims}\" ng-click=\"userAppDetails.inClaims=true\">{{'related-applications' | translate}}</a></li>\n"+
"          </ul>\n"+
"          <div class=cui-tabs__content>\n"+
"            \n"+
"            <div id=tab1 class=cui-tabs__tab-pane ng-class=\"{'cui-tabs__tab-pane--active':!userAppDetails.inClaims}\">\n"+
"              <div class=cui-applications__details>\n"+
"                \n"+
"                <div ng-if=\"(!userAppDetails.app.bundledApps || userAppDetails.app.bundledApps.length===0)\">\n"+
"                  <p>{{'no-bundled' | translate}}</p>\n"+
"                </div>\n"+
"                \n"+
"                <div ng-if=\"userAppDetails.app.bundledApps && userAppDetails.app.bundledApps.length!==0\">\n"+
"                  <h4 class=\"h6 bold\">{{'bundled-applications' | translate}}</h4>\n"+
"                  <div class=cui-media ng-repeat=\"application in userAppDetails.app.bundledApps\">\n"+
"                    <div class=cui-media__body>\n"+
"                      <a class=cui-media__link ng-click=userAppDetails.goToDetails(application)>{{application.name | cuiI18n}}</a>\n"+
"                      <span class=cui-media__content>{{ 'granted' | translate }}: {{userAppDetails.app.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"                    </div>\n"+
"                    <span class=cui-media__status ng-class=\"'cui-status--'+userAppDetails.app.grant.status\">{{application.status | lowercase}}</span>  \n"+
"                  </div>\n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"\n"+
"            \n"+
"            <div id=tab2 class=cui-tabs__tab-pane ng-class=\"{'cui-tabs__tab-pane--active':userAppDetails.inClaims}\" ng-if=\"userAppDetails.relatedApps.length>0\">\n"+
"              \n"+
"              <div ng-if=\"userAppDetails.relatedApps.length!==0\">\n"+
"                <h4 class=\"h6 bold\">{{'related-applications' | translate}}</h4>\n"+
"                <div class=cui-applications__related-apps ng-repeat=\"application in userAppDetails.relatedApps\">\n"+
"                  <div class=cui-applications__related-app-col>\n"+
"                    <a class=cui-media__link ng-click=userAppDetails.goToDetails(application) ng-if=application.grant>{{application.name | cuiI18n}}</a> \n"+
"                    <span class=cui-media__content ng-if=!application.grant>{{application.name | cuiI18n}}</span>\n"+
"                    <span class=cui-media__content ng-if=application.grant>{{ 'granted' | translate }}: {{application.grant.instant| date:base.appConfig.dateFormat}}</span> \n"+
"                    <span class=cui-button ng-if=!application.grant>{{'request' | translate}}</span>\n"+
"                  </div>\n"+
"                  <span class=cui-media__status ng-class=\"'cui-status--'+application.status\" ng-if=application.status>{{application.grant.status | lowercase}}</span>  \n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-applications__desktop-tabs>\n"+
"\n"+
"          \n"+
"          <div class=\"cui-tile cui-applications__left\">\n"+
"            <h4 class=\"cui-tile__title cui-applications__title\">{{'bundled-applications' | translate}}</h4>\n"+
"            <div class=\"cui-tile__body cui-applications__details\">\n"+
"              \n"+
"              <div class=cui-applications__no-details ng-if=\"(!userAppDetails.app.bundledApps || userAppDetails.app.bundledApps.length===0)\">\n"+
"                <p>{{'no-bundled' | translate}}</p>\n"+
"              </div>\n"+
"              \n"+
"              <div class=cui-applications__bundled-apps ng-if=\"userAppDetails.app.bundledApps && userAppDetails.app.bundledApps.length!==0\">\n"+
"                \n"+
"                <div class=cui-applications__bundled-app ng-repeat=\"application in userAppDetails.app.bundledApps\">\n"+
"                  <div class=cui-applications__related-app-col>\n"+
"                    <a class=\"cui-link bold\" ng-click=userAppDetails.goToDetails(application)>{{application.name | cuiI18n}}</a>\n"+
"                    <span class=cui-media__content>{{ 'granted' | translate | lowercase}}: {{userAppDetails.app.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"                  </div>\n"+
"                  <div class=cui-media__status ng-class=\"'cui-status--'+userAppDetails.app.grant.status\">{{userAppDetails.app.grant.status |lowercase}}</div>  \n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"            <br>\n"+
"          </div>\n"+
"\n"+
"            \n"+
"            <div class=\"cui-tile cui-applications__right\" ng-if=\"userAppDetails.relatedApps&&userAppDetails.relatedApps.length!==0\">\n"+
"              <h4 class=\"cui-tile__title cui-applications__title\" ng-if=\"userAppDetails.relatedApps.length!==0\">{{'related-applications' | translate}}</h4>\n"+
"              <div class=\"cui-tile__body cui-applications__details\" ng-if=\"userAppDetails.relatedApps.length!==0\">\n"+
"                \n"+
"                <div class=cui-applications__related-apps>\n"+
"                \n"+
"                  <div class=cui-applications__related-app ng-repeat=\"application in userAppDetails.relatedApps\">\n"+
"                    <div class=cui-applications__related-app-col>\n"+
"                      <a class=\"cui-link bold\" ng-click=userAppDetails.goToDetails(application) ng-if=application.grant>{{application.name | cuiI18n}}</a> \n"+
"                      <h5 class=bold ng-if=!application.grant>{{application.name | cuiI18n}}</h5>\n"+
"                      <span class=cui-media__content ng-if=application.grant>{{ 'granted' | translate }}: {{application.grant.instant | date:base.appConfig.dateFormat}}</span> \n"+
"                    </div>\n"+
"                    <div class=\"cui-button cui-button--small-rounded\" ng-if=!application.grant>{{'request' | translate}}</div>\n"+
"                    <div class=cui-media__status ng-class=\"'cui-status--'+application.status\" ng-if=application.grant>{{application.grant.status | lowercase}}</div>  \n"+
"                  </div>\n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"\n"+
"        </div>\n"+
"      </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n");



$templateCache.put('app/modules/organization/directory/user-app-details/sections/header-main.html',
"\n"+
"<div class=\"cui-media cui-media--centered\">\n"+
"  \n"+
"  <div class=cui-media__image-container>\n"+
"    <a ng-href={{userAppDetails.app.mangledUrl}} target=_blank>\n"+
"      <div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=userAppDetails.app.name cui-avatar-cuii18n-filter cui-avatar=userAppDetails.app.iconUrl></div>\n"+
"    </a>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-media__body>\n"+
"    <h3 class=cui-media__title>{{userAppDetails.app.name | cuiI18n|capitalize}}</h3>\n"+
"    <span class=cui-media__content>{{ 'granted' | translate }}: {{userAppDetails.app.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"    \n"+
"    <div class=cui-media__content><span class=cui-media__content--dark>{{'status' | translate}}:</span>  <span ng-class=\"'cui-status--'+userAppDetails.app.grant.status\">{{userAppDetails.app.grant.status | lowercase}}</span></div>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"<div class=cui-media__button-container disable-animate>\n"+
"  <button class=\"cui-button cui-button--inverted\" ng-if=\"userAppDetails.app.grant.status=='active'\" ng-click=\"userAppDetails.toggleDropDown('suspend')\">{{'suspend-app' | translate}}</button>\n"+
"  <button class=\"cui-button cui-button--inverted\" ng-if=\"userAppDetails.app.grant.status=='suspended'\" ng-click=\"userAppDetails.toggleDropDown('unsuspend')\">{{'unsuspend-app' | translate}}</button>\n"+
"  <button class=\"cui-button cui-button--inverted\" ng-if=\"userAppDetails.app.grant.status=='suspended'&&!base.loader.for['userAppDetails.remove']\" ng-click=\"userAppDetails.toggleDropDown('remove'); userAppDetails.removeApp()\">\n"+
"    <span ng-if=\"!base.apiError.for['userAppDetails.remove']\">{{'remove-app' | translate}}</span>\n"+
"    <span ng-if=\"base.apiError.for['userAppDetails.remove']\">{{'cui-error-try-again' | translate}}</span>\n"+
"  </button>\n"+
"  <button class=\"cui-button cui-button--inverted\" ng-if=\"userAppDetails.app.grant.status=='suspended'&&base.loader.for['userAppDetails.remove']\"><div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"  </button>\n"+
"  <button class=\"cui-button cui-button--inverted\" ng-if=\"userAppDetails.packageClaims.length!==0\" ng-click=\"userAppDetails.toggleDropDown('claims')\">{{'modify-claims' | translate}}</button>\n"+
"  \n"+
"</div>\n"+
"<div ng-include=\"'app/modules/organization/directory/user-app-details/sections/modify-claims.html'\"></div>\n"+
"<div ng-include=\"'app/modules/organization/directory/user-app-details/sections/suspend-body.html'\"></div>\n"+
"<div ng-include=\"'app/modules/organization/directory/user-app-details/sections/unsuspend-body.html'\"></div>\n");



$templateCache.put('app/modules/organization/directory/user-app-details/sections/modify-claims.html',
"<div class=\"cui-expandable__body cui-expandable__body--alt-bg\" ng-if=userAppDetails.dropDown.claims>\n"+
"  \n"+
"  <div class=cui-expandable__body-col>\n"+
"    <div class=cui-expandable__body-header>{{'claims' | translate}}:</div>\n"+
"    <p ng-if=\"userAppDetails.packageClaims.length===0\">{{'cui-package-no-claims' | translate}}.</p>\n"+
"    <div ng-if=\"userAppDetails.packageClaims.length>0\" ng-repeat=\"claim in userAppDetails.packageClaims\">\n"+
"      <h3 class=bold>{{claim.name | cuiI18n}}</h3>\n"+
"      <ul class=cui-checkbox__group>\n"+
"        <div class=cui-checkbox__group ng-repeat=\"claimValue in claim.claimValues\">\n"+
"          <li class=cui-checkbox__container>\n"+
"            <input class=cui-checkbox type=checkbox ng-model=userAppDetails.claimSelection[claim.claimId][claimValue.claimValueId] id=\"{{claimValue.name | cuiI18n}}\">\n"+
"            <label class=cui-checkbox__label for=\"{{claimValue.name | cuiI18n}}\">{{claimValue.name | cuiI18n}}</label>\n"+
"          </li>\n"+
"        </div>\n"+
"      </ul>\n"+
"      \n"+
"    </div>\n"+
"  </div>\n"+
"  <div class=cui-organization__submit-row disable-animate>\n"+
"    <span ng-click=\"userAppDetails.dropDown.claims=false\" class=cursor__pointer style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"    <button class=cui-button ng-if=\"!base.loader.for['userAppDetails.modifyClaims'] && !base.apiError.for['userAppDetails.modifyClaims'] && !userAppDetails.modifyClaimsSuccess\" ng-click=userAppDetails.modifyClaims() style=margin:5px>{{'cui-update' | translate}}</button>\n"+
"    <button class=cui-button ng-if=\"base.loader.for['userAppDetails.modifyClaims']\">\n"+
"      <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"    </button>\n"+
"    <button class=cui-button ng-if=\"!base.loader.for['userAppDetails.modifyClaims'] && base.apiError.for['userAppDetails.modifyClaims']\" ng-click=userAppDetails.modifyClaims()>{{'cui-error-try-again' | translate}}</button>\n"+
"    <button class=cui-button ng-if=\"!base.loader.for['userAppDetails.modifyClaims'] && userAppDetails.modifyClaimsSuccess\">{{'cui-success' | translate}}</button>\n"+
"  </div>\n"+
"</div>");



$templateCache.put('app/modules/organization/directory/user-app-details/sections/suspend-body.html',
"<div class=\"cui-expandable__body cui-expandable__body--alt-bg\" ng-if=userAppDetails.dropDown.suspend>\n"+
"  <ng-form name=suspendApp novalidate>\n"+
"    <p>{{'cui-suspend-confirm' |translate}}</p>\n"+
"    <div class=cui-applications__review-text-input>\n"+
"      <p class=\"cui-error h6\" ng-if=suspendApp.reason.$error.required&&suspendApp.reason.$dirty>{{'cui-this-field-is-required' | translate}}</p>\n"+
"      <textarea name=reason class=cui-text-area ng-required=true ng-model=userAppDetails.suspendReason placeholder=\"{{'reason'|translate}}({{'required'|translate}})\"></textarea>\n"+
"    </div>\n"+
"    <div class=cui-organization__submit-row disable-animate>\n"+
"      <span ng-click=\"userAppDetails.dropDown.suspend=false\" class=cursor__pointer style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : !suspendApp.$valid}\" ng-if=\"!base.loader.for['userAppDetails.suspend'] && !base.apiError.for['userAppDetails.suspend']\" ng-click=suspendApp.$valid&&userAppDetails.suspendApp() style=margin:5px>{{'suspend' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"base.loader.for['userAppDetails.suspend']\">\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : !suspendApp.$valid}\" ng-if=\"!base.loader.for['userAppDetails.suspend'] && base.apiError.for['userAppDetails.suspend']\" ng-click=suspendApp.$valid&&userAppDetails.suspendApp()>{{'cui-error-try-again' | translate}}</button>\n"+
"    </div>\n"+
"  </ng-form>\n"+
"</div>");



$templateCache.put('app/modules/organization/directory/user-app-details/sections/unsuspend-body.html',
"<div class=\"cui-expandable__body cui-expandable__body--alt-bg\" ng-if=userAppDetails.dropDown.unsuspend>\n"+
"  <ng-form name=unsuspendApp novalidate>\n"+
"    <p>{{'cui-unsuspend-confirm' |translate}}</p>\n"+
"    <div class=cui-applications__review-text-input>\n"+
"      <p class=\"cui-error h6\" ng-if=unsuspendApp.reason.$error.required&&unsuspendApp.reason.$dirty>{{'cui-this-field-is-required' | translate}}</p>\n"+
"      <textarea name=reason class=cui-text-area ng-required=true ng-model=userAppDetails.unsuspendReason placeholder=\"{{'reason'|translate}}({{'required'|translate}})\"></textarea>\n"+
"    </div>\n"+
"    <div class=cui-organization__submit-row disable-animate>\n"+
"      <span ng-click=\"userAppDetails.dropDown.unsuspend=false\" class=cursor__pointer style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : !unsuspendApp.$valid}\" ng-if=\"!base.loader.for['userAppDetails.unsuspend'] && !base.apiError.for['userAppDetails.unsuspend'] &&!userAppDetails.unsuspendAppSuccess\" ng-click=unsuspendApp.$valid&&userAppDetails.unsuspendApp() style=margin:5px>{{'unsuspend' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"base.loader.for['userAppDetails.unsuspend']\">\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : !unsuspendApp.$valid}\" ng-if=\"!base.loader.for['userAppDetails.unsuspend'] && base.apiError.for['userAppDetails.unsuspend']\" ng-click=unsuspendApp.$valid&&userAppDetails.unsuspendApp()>{{'cui-error-try-again' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"!base.loader.for['userAppDetails.unsuspend'] && userAppDetails.unsuspendAppSuccess\">{{'cui-success' | translate}}</button>\n"+
"    </div>\n"+
"  </ng-form>\n"+
"</div>");



$templateCache.put('app/modules/organization/directory/user-details/directory-userDetails.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/directory target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=\"cui-organization cui-organization__user-details\">\n"+
"  \n"+
"  <ng-include src=\"'app/modules/organization/directory/user-details/sections/headers/userDetails-header.html'\" onload=\"orgId=userDetails.prevState.params.orgId ; label='user-details'\"></ng-include>\n"+
"\n"+
"  <div class=cui-organization__details-container>\n"+
"    \n"+
"    <div class=cui-organization__details-col>\n"+
"\n"+
"      \n"+
"      <div ng-include=\"'app/modules/organization/directory/user-details/sections/headers/userDetails-header-left.html'\"></div>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=userDetails.profileDesktop ng-if=\"userDetails.profileRolesSwitch==='profile'\">\n"+
"        <div ui-view=profile></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=userDetails.profileMobile ng-if=\"userDetails.mobileHandler==='profile'\">\n"+
"        <div ui-view=profile></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=userDetails.rolesDesktop ng-if=\"userDetails.profileRolesSwitch==='roles'\">\n"+
"        <div ui-view=roles></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=userDetails.rolesMobile ng-if=\"userDetails.mobileHandler==='roles'\">\n"+
"        <div ui-view=roles></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=userDetails.applicationsMobile ng-if=\"userDetails.mobileHandler==='apps'\">\n"+
"        <div ui-view=applications></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler mobile show-if=userDetails.historyMobile ng-if=\"userDetails.mobileHandler==='history'\">\n"+
"        <div ui-view=history></div>\n"+
"      </cui-resize-handler>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-organization__details-col>\n"+
"\n"+
"      \n"+
"      <div ng-include=\"'app/modules/organization/directory/user-details/sections/headers/userDetails-header-right.html'\"></div>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=userDetails.applicationsDesktop ng-if=\"userDetails.appsHistorySwitch==='apps'\">\n"+
"        <div ui-view=applications></div>\n"+
"      </cui-resize-handler>\n"+
"\n"+
"      \n"+
"      <cui-resize-handler desktop show-if=userDetails.historyDesktop ng-if=\"userDetails.appsHistorySwitch==='history'\">\n"+
"        <div ui-view=history></div>\n"+
"      </cui-resize-handler>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/applications/userDetails-applications.html',
"\n"+
"<div class=cui-loading__container--user-details ng-if=userDetailsApps.loading>\n"+
"  <div class=\"cui-loader cui-loader--content-sm\" ng-include=\"'app/common-templates/partials/loader-content-sm.html'\"></div>\n"+
"</div>\n"+
"\n"+
"<div ng-if=!userDetailsApps.loading>\n"+
"  <div style=position:relative>\n"+
"\n"+
"  	\n"+
"  	<div ng-if=\"userDetailsApps.appList.length===0\">\n"+
"			<p>{{'cui-user-no-apps'|translate}}!</p>\n"+
"  	</div>\n"+
"\n"+
"  	\n"+
"  	<ul ng-if=\"userDetailsApps.appList.length!==0\">\n"+
"	    <li class=\"cui-flex-table__tr cui-flex-table__tr--b\" ng-repeat=\"application in userDetailsApps.appList track by $index\">\n"+
"	    	\n"+
"	      <div class=cui-flex-table__avatar-col>\n"+
"	        <a ng-href={{application.mangledUrl}} target=_blank><div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar></div></a>\n"+
"	      </div>\n"+
"\n"+
"				\n"+
"        <div class=cui-flex-table__left--stacked>\n"+
"          <h3 class=cui-flex-table__title ng-click=userDetailsApps.goToDetails(application)>{{application.name | cuiI18n}}</h3>\n"+
"          <span ng-if=\"application.grant.status!=='pending'\" class=cui-flex-table__subtitle-info>{{ 'granted' | translate }}: {{application.grant.instant | date:base.appConfig.dateFormat}}</span>\n"+
"          <span class=\"cui-status cui-mobile-only\" ng-class=\" 'cui-status--'+application.grant.status \">{{application.grant.status | lowercase}}</span>\n"+
"        </div>\n"+
"        <div class=\"cui-flex-table__middle cui-desktop-only\">\n"+
"          <span class=cui-media__content> {{application.category | cuiI18n}}</span>\n"+
"        </div>\n"+
"        <div class=\"cui-flex-table__right cui-flex-table__right--stacked\">\n"+
"          <span class=\"cui-status cui-desktop-only\" ng-class=\" 'cui-status--'+application.grant.status \">{{application.grant.status | lowercase}}</span>\n"+
"          <span class=cui-flex-table__review ng-if=\"application.grant.status==='pending'\" ui-sref=organization.requests.pendingRequests({userId:userDetails.user.id,orgId:userDetails.user.organization.id})>{{'cui-review' | translate}}</span>\n"+
"        </div>\n"+
"	    </li>\n"+
"	  </ul>\n"+
"</div>\n"+
"</div>");



$templateCache.put('app/modules/organization/directory/user-details/sections/headers/partials/specify-password.html',
"\n"+
"<div class=\"cui-users__address-container user-details__password-reset show-address\" ng-if=userDetails.specifyPassword.begun>\n"+
"  <div class=cui-users__field>\n"+
"    <span class=cui-field-val__field>{{'specify-password' | translate}}</span>\n"+
"    <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon ng-click=userDetails.specifyPassword.cancel() preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\" aria-label=\"{{'cui-close' | translate}}\">\n"+
"      <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"    </svg>\n"+
"  </div>\n"+
"\n"+
"  <ng-form name=password>\n"+
"\n"+
"    \n"+
"    <div class=cui-input__password-holder ng-init=\"userDetails.specifyPassword.form = password\">\n"+
"      <label for=newPassword>{{'cui-enter-new-password' | translate}}:</label>\n"+
"      <input id=password-input class=cui-input name=newPassword type=password ng-model=userDetails.specifyPassword.newPassword ng-required=true ng-class=\"{'cui-input--error': password.newPassword.$touched && password.newPassword.$invalid}\" password-validation=userDetails.passwordPolicy.rules ng-focus=\"userDetails.specifyPassword.rulesPopover=true\" ng-blur=\"userDetails.specifyPassword.rulesPopover=false\" ng-change=\"userDetails.specifyPassword.validate(userDetails.specifyPassword.newPassword, password, 'newPassword')\">\n"+
"      \n"+
"      <div cui-popover target=#password-input popover-positions=\"[{position:'right'},{position:'bottom'}]\" ng-if=userDetails.specifyPassword.rulesPopover>\n"+
"        \n"+
"          \n"+
"     \n"+
"            <div password-popover ng-messages=password.newPassword.$error ng-messages-multiple class=cui-error__password>\n"+
"            \n"+
"            <div ng-messages-include=app/common-templates/password-validation-history/password-validation-top.html></div>\n"+
"            \n"+
"            <div class=cui-error__message ng-if=!userDetails.validNewPasswordDisallowed>\n"+
"              <br>\n"+
"              <span translate=disallowed-password-rule></span>\n"+
"            </div><br>\n"+
"            \n"+
"            <div class=cui-error__message>\n"+
"              <div class=cui-error__status ng-class=\"{'cui-error__status--pass': userDetails.specifyPassword.validNewPassword}\"></div>\n"+
"              <span translate=cui-password-history-rule translate-value-number-of-passwords={{userDetails.numberOfPasswords}}></span>\n"+
"            </div><br>\n"+
"            \n"+
"            <div ng-messages-include=app/common-templates/password-validation-history/password-validation-bottom.html></div>\n"+
"          </div>\n"+
"      </div>\n"+
"\n"+
"    </div>\n"+
"\n"+
"    \n"+
"\n"+
"      <label for=newPasswordRe>{{'cui-re-enter-new-password' | translate}}:</label>\n"+
"      <div class=cui-error ng-if=\"password.newPasswordRe.$touched && password.newPasswordRe.$error.match\">\n"+
"        <div class=cui-error__message>{{'password-mismatch' | translate}}</div>\n"+
"      </div>\n"+
"      <input class=cui-input type=password ng-model=userDetails.specifyPassword.newPasswordConfirm name=newPasswordRe match=userDetails.specifyPassword.newPassword>\n"+
"      <div class=cui-error style=\"text-align: right\" ng-if=userDetails.lifetimeError>\n"+
"        <div class=cui-error__message>{{'cannot-change-password'| translate}}</div>\n"+
"      </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-server-error ng-if=\"base.apiError.for['userDetails.specifyPassword']\">\n"+
"      <div class=cui-server-error__container>\n"+
"        <svg xmlns=http://www.w3.org/2000/svg class=cui-server-error__close ng-click=userDetails.specifyPassword.reset() preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\" aria-label=\"{{'cui-close' | translate}}\">\n"+
"          <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"        </svg>\n"+
"        <span>{{'cui-error-try-again' | translate}}</span>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <cui-button loading-if=\"base.loader.for['userDetails.specifyPassword']\" success-if=userDetails.specifyPassword.success button-click=userDetails.specifyPassword.confirm()>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error': password.$invalid}\" ng-disabled=password.$invalid>\n"+
"        {{'specify-password' | translate}}\n"+
"      </button>\n"+
"    </cui-button>\n"+
"\n"+
"  </ng-form>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/headers/partials/suspend-user.html',
"<div class=\"cui-users__address-container user-details__password-reset show-address\">\n"+
"  {{'cui-suspend-confirm' | translate}}*\n"+
"\n"+
"  <div class=cui-server-error ng-if=\"base.apiError.for['userDetails.suspend']\">\n"+
"    <div class=cui-server-error__container>\n"+
"      <span>{{ 'suspend-error' | translate }}</span>\n"+
"    </div>\n"+
"    <svg xmlns=http://www.w3.org/2000/svg class=cui-server-error__close ng-click=\"base.apiError.for['userDetails.suspend'] = !base.apiError.for['userDetails.suspend']\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\" aria-label=\"{{'cui-close' | translate}}\">\n"+
"      <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"    </svg>\n"+
"  </div>\n"+
"\n"+
"  <textarea class=\"cui-text-area jlr-text-area--black-text\" ng-required=true style=\"margin: 20px\" ng-model=userDetails.user.suspendReason placeholder=\"{{'request-reason' | translate}}\"></textarea>\n"+
"\n"+
"<div class=cui-organization__submit-row disable-animate>\n"+
"      <span ng-click=userDetails.suspend.cancel() class=cursor__pointer style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.suspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.suspend'] && !base.apiError.for['userDetails.suspend'] && !userDetails.suspend.success\" ng-click=\"userDetails.user.suspendReason.length>0&&userDetails.suspend.confirm()\" style=margin:5px>{{'yes' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"base.loader.for['userDetails.suspend']\">\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.suspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.suspend'] && base.apiError.for['userDetails.suspend'] && !userDetails.suspend.success \" ng-click=\"userDetails.user.suspendReason.length>0&&userDetails.suspend.confirm()\">{{'cui-error-try-again' | translate}}</button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.suspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.suspend'] && !base.apiError.for['userDetails.suspend'] && userDetails.suspend.success\">{{'cui-success' | translate}}</button>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/headers/partials/unsuspend-user.html',
"<div class=\"cui-users__address-container user-details__password-reset show-address\">\n"+
"  <p>{{'cui-unsuspend-confirm' | translate}}</p>\n"+
"\n"+
"  \n"+
"  <div class=cui-server-error ng-if=\"base.apiError.for['userDetails.unsuspend']\">\n"+
"    <div class=cui-server-error__container>\n"+
"      <span>{{ 'unsuspend-error' | translate }}</span>\n"+
"    </div>\n"+
"    <svg xmlns=http://www.w3.org/2000/svg class=cui-server-error__close ng-click=\"base.apiError.for['userDetails.unsuspend'] = !base.apiError.for['userDetails.unsuspend']\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\" aria-label=\"{{'cui-close' | translate}}\">\n"+
"      <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"    </svg>\n"+
"  </div>\n"+
"\n"+
"  <textarea class=\"cui-text-area jlr-text-area--black-text\" style=\"width: 100%; margin-bottom: 20px\" ng-model=userDetails.user.unsuspendReason placeholder=\"{{'request-reason' | translate}}\"></textarea>\n"+
"\n"+
"  \n"+
"    <div class=cui-organization__submit-row disable-animate>\n"+
"      <span ng-click=userDetails.unsuspend.cancel() class=cursor__pointer style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.unsuspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.unsuspend'] && !base.apiError.for['userDetails.unsuspend'] && !userDetails.unsuspend.success\" ng-click=\"userDetails.user.unsuspendReason.length>0&&userDetails.unsuspend.confirm()\" style=margin:5px>{{'yes' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"base.loader.for['userDetails.unsuspend']\">\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.unsuspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.unsuspend'] && base.apiError.for['userDetails.unsuspend'] && !userDetails.unsuspend.success\" ng-click=\"userDetails.user.unsuspendReason.length>0&&userDetails.unsuspend.confirm()\">{{'cui-error-try-again' | translate}}</button>\n"+
"       <button class=cui-button ng-class=\"{'cui-button--error' : userDetails.user.unsuspendReason.length==0}\" ng-if=\"!base.loader.for['userDetails.unsuspend'] && !base.apiError.for['userDetails.unsuspend'] && userDetails.unsuspend.success\">{{'cui-success' | translate}}</button>\n"+
"    </div>\n"+
"</div>");



$templateCache.put('app/modules/organization/directory/user-details/sections/headers/userDetails-breadcrumb.html',
"<ul class=cui-breadcrumb__links>\n"+
"  <li class=\"cui-breadcrumb__link cui-breadcrumb__link--current\">\n"+
"    <span class=cui-breadcrumb__mobile-link class=active><span class=cui-mobile-only>{{userDetails.user.organization.realm}}\n"+
"  </span></span></li>\n"+
"  <div class=\"cui-popover cui-popover--menu cui-breadcrumb__popover cui-popover--top cui-popover__categories-popover\" tether target=#breadcrumb-button attachment=\"top left\" target-attachment=\"bottom left\" offset=\"-10px 0\" ng-if=orgDirectory.breadcrumbClicked>\n"+
"    <li class=\"cui-breadcrumb__link cui-popover__row\">\n"+
"      <a class=cui-breadcrumb__mobile-link ui-sref=organization.hierarchy({orgId:orgId})>{{'cui-org-hierarchy' | translate}}</a> \n"+
"    </li>\n"+
"    <li class=\"cui-breadcrumb__link cui-popover__row\">\n"+
"      <a class=cui-breadcrumb__mobile-link ui-sref=organization.profile({orgId:orgId})>{{'cui-org-profile' | translate}}</a> \n"+
"    </li> \n"+
"    <li class=\"cui-breadcrumb__link cui-popover__row\">\n"+
"      <a class=cui-breadcrumb__mobile-link ui-sref=organization.roles({orgId:orgId})>{{'roles' | translate}}</a>\n"+
"    </li>\n"+
"  </div>\n"+
"</ul>\n"+
"\n"+
"\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/headers/userDetails-header-left.html',
"<div class=cui-organization__profile-left-header>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-desktop-only\" ng-click=\"userDetails.profileRolesSwitch='profile'\" id=profile-button off-click=\"\">\n"+
"    <div ng-class=\"{'cui-action__icon--active':userDetails.profileRolesSwitch=='profile'}\">\n"+
"      <cui-icon cui-svg-icon=cui:profile svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 -1 48 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'profile-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-desktop-only\" ng-click=\"userDetails.profileRolesSwitch='roles'\" id=roles-button>\n"+
"    <div ng-class=\"{'cui-action__icon--active':userDetails.profileRolesSwitch=='roles'}\">\n"+
"      <cui-icon cui-svg-icon=cui:roles svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'roles-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" ng-click=\"userDetails.mobileHandler='profile'\" id=profile-button>\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=cui:profile ng-class=\"{ 'cui-action__icon--active':userDetails.profileSwitch=='profile'}\" svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 -1 48 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'profile-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" ng-click=\"userDetails.mobileHandler='roles'\" id=roles-button>\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=cui:roles ng-class=\"{ 'cui-action__icon--active':userDetails.profileSwitch=='roles'}\" svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'roles-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" id=applications-button ng-click=\"userDetails.mobileHandler='apps'\">\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=cui:applications_v2 ng-class=\"{ 'cui-action__icon--active':userDetails.profileSwitch=='apps'}\" svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 50\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'apps-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=\"cui-organization__profile-header-item cui-mobile-only\" id=applications-button ng-click=\"userDetails.mobileHandler='history'\" ng-if=false>\n"+
"    <div>\n"+
"      <cui-icon cui-svg-icon=cui:history ng-class=\"{ 'cui-action__icon--active':userDetails.profileSwitch=='history'}\" svg-class=\"cui-action__icon cui-action__icon--history\" use-class=cui-card__icon viewbox=\"0 0 48 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'history-upper' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/headers/userDetails-header-right.html',
"<div class=\"cui-organization__profile-right-header cui-desktop-only\">\n"+
"\n"+
"  \n"+
"  <div class=cui-organization__profile-header-item id=applications-button ng-click=\"userDetails.appsHistorySwitch='apps'\">\n"+
"    <div ng-class=\"{ 'cui-action__icon--active':userDetails.appsHistorySwitch=='apps'}\">\n"+
"      <cui-icon cui-svg-icon=cui:applications_v2 svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 50\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'apps-upper' | translate}}</span>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-organization__profile-header-item id=applications-button ng-click=\"userDetails.appsHistorySwitch='history'\" ng-if=false>\n"+
"    <div ng-class=\"{ 'cui-action__icon--active':userDetails.appsHistorySwitch=='history'}\">\n"+
"      <cui-icon cui-svg-icon=cui:history svg-class=\"cui-action__icon cui-action__icon--history\" use-class=cui-card__icon viewbox=\"0 0 48 52\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-action__action-label>{{'history-upper' | translate}}</span>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-organization__profile-header-items--right ng-if=false>\n"+
"    \n"+
"    <div class=cui-organization__profile-header-item id=sort-button ng-click=\"userDetails.sortClicked=!userDetails.sortClicked\" off-click=\"userDetails.sortClicked=false\" ng-if=userDetails.appsHistorySwitch>\n"+
"      <div>\n"+
"        <cui-icon cui-svg-icon=fa:sort14 svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"      <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"    </div>\n"+
"    \n"+
"    <div class=\"cui-popover cui-popover--top cui-popover__sort-popover\" tether target=#sort-button attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"-10px 0\" ng-if=userDetails.sortClicked>\n"+
"      <p ng-click=\"\">{{'cui-alphabetically' | translate}}</p>\n"+
"      <p ng-click=\"\">{{'cui-by-date-added' | translate}}</p>\n"+
"    </div>\n"+
"    \n"+
"    \n"+
"    <div class=cui-organization__profile-header-item id=categories-button ng-click=\"userDetails.categoriesClicked=!userDetails.categoriesClicked\" off-click=\"userDetails.categoriesClicked=false\" ng-if=userDetails.appsHistorySwitch>\n"+
"      <div>\n"+
"        <cui-icon cui-svg-icon=cui:categories svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </div>\n"+
"      <span class=cui-action__action-label>{{'categories' | translate}}</span>\n"+
"    </div>\n"+
"    \n"+
"    <div class=\"cui-popover cui-popover--top cui-popover__categories-popover\" tether target=#categories-button attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"-10px 0\" ng-if=userDetails.categoriesClicked>\n"+
"      <p ng-click=\"\">TODO!</p>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/headers/userDetails-header.html',
"<div class=cui-action>\n"+
"  <nav ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\"></nav>\n"+
"  \n"+
"  <nav ng-include=\"'app/modules/organization/partials/mobileNav.html'\"></nav>\n"+
"  \n"+
"  <div class=cui-action__actions ng-include=\"'app/modules/organization/partials/invite-actions.html'\" ng-if=false></div>\n"+
"</div>\n"+
"    \n"+
"    <div class=cui-action__title ng-if=\"userDetails.stateParamsOrgId==base.user.organization.id\" ui-sref=organization.directory.userList({orgId:userDetails.stateParamsOrgId})>&lt; {{'cui-back' | translate}}</div>\n"+
"    <div class=cui-action__title ng-if=\"userDetails.stateParamsOrgId!=base.user.organization.id\" ui-sref=organization.directory.orgDetails({orgId:userDetails.stateParamsOrgId})>&lt; {{'cui-back' | translate}}</div>\n"+
"\n"+
"\n"+
"<div class=cui-loading__container ng-if=\"base.loader.for['userDetails.userInfo']\">\n"+
"  <div class=\"cui-loader cui-loader--content cui-loader--content-vert\" ng-include=\"'app/common-templates/partials/loader-content-vert.html'\"></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-media--centered>\n"+
"  <div class=cui-media__image-container ng-if=\"!base.loader.for['userDetails.userInfo']\">\n"+
"    <div class=\"cui-profile__user-avatar cui-media__image\" cui-avatar cui-avatar-names=\"[userDetails.user.name.given, userDetails.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-email=userDetails.user.email></div>\n"+
"  </div>\n"+
"  <div class=cui-media__body ng-if=!userDetails.loading>\n"+
"    \n"+
"    <h3 class=cui-media__title>{{userDetails.user.name.given}} {{userDetails.user.name.surname}}</h3>\n"+
"    \n"+
"    <p class=\"cui-media__content cui-media__content--bold\">{{'userID' | translate}}: {{userDetails.user.username}}</p>\n"+
"    \n"+
"    <p class=cui-media__content>{{'cui-registered' | translate}}: {{userDetails.user.creation | date:base.appConfig.dateFormat}}</p>\n"+
"    \n"+
"    <div class=cui-media__content>\n"+
"      <span class=cui-media__content--dark>{{'status' | translate}}:</span>\n"+
"      <span class=cui-status ng-class=\" 'cui-status--'+userDetails.user.status \">{{userDetails.user.status}}</span>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=cui-media__button-container>\n"+
"  \n"+
"  <button class=\"cui-button cui-button--inverted\" ng-click=userDetails.suspend(userDetails.user.id) ng-if=\"userDetails.user.status==='active'\" cui-access=\"{requiredEntitlements:['Suspend User']}\" user-entitlements=base.user.entitlements>\n"+
"          {{'suspend' | translate}}\n"+
"  </button>\n"+
"\n"+
"\n"+
"  \n"+
"\n"+
"  <cui-button disable-animate ng-if=\"userDetails.passwordAccount.locked&&(userDetails.user.status==='active'||userDetails.user.status==='locked')\" loading-if=\"base.loader.for['userDetails.unlockUser']\" success-if=userDetails.unlockUserSuccess error-if=\"base.apiError.for['userDetails.unlockUser']\" button-click=userDetails.unlockUser() loading-message=\"{{'cui-button-loading-text'|translate}}\" error-message=\"{{'cui-error-try-again'|translate}}\">\n"+
"      <button class=\"cui-button cui-button--inverted\">\n"+
"        {{'cui-unlock' | translate}}\n"+
"      </button>\n"+
"    </cui-button>\n"+
"\n"+
"  \n"+
"  <button class=\"cui-button cui-button--inverted\" ng-click=userDetails.unsuspend(userDetails.user.id) ng-if=\"userDetails.user.status==='suspended'\" cui-access=\"{requiredEntitlements:['Suspend User']}\" user-entitlements=base.user.entitlements>\n"+
"          {{'unsuspend' | translate}}\n"+
"  </button>\n"+
"\n"+
"  \n"+
"  <button class=\"cui-button cui-button--inverted\" id=password-reset ng-click=userDetails.specifyPassword() cui-access=\"{requiredEntitlements:['Specify User Password']}\" user-entitlements=base.user.entitlements>\n"+
"          {{'specify-password' | translate}}\n"+
"  </button>\n"+
"\n"+
"  \n"+
"  <button class=\"cui-button cui-button--inverted\" id=password-specify ng-click=userDetails.resetPassword()>\n"+
"          {{'password-reset' | translate}}\n"+
"  </button>\n"+
"\n"+
"  \n"+
"   <button class=\"cui-button cui-button--inverted\" ng-if=base.canGrantAppToUser() ng-disabled=\"userDetails.user.status!=='active'\" ui-sref=organization.requests.newGrant({userId:userDetails.user.id,orgId:orgId}) ng-class=\"(userDetails.user.status!=='active')?'cui-button--error':''\">{{'new-grants' | translate}}</button>\n"+
"\n"+
"</div>\n"+
"\n"+
"\n"+
"<ng-include ng-if=userDetails.suspend.begun src=\"'app/modules/organization/directory/user-details/sections/headers/partials/suspend-user.html'\">\n"+
"</ng-include>\n"+
"\n"+
"\n"+
"<ng-include ng-if=userDetails.unsuspend.begun src=\"'app/modules/organization/directory/user-details/sections/headers/partials/unsuspend-user.html'\">\n"+
"</ng-include>\n"+
"\n"+
"\n"+
"<ng-include ng-if=userDetails.specifyPassword.begun src=\"'app/modules/organization/directory/user-details/sections/headers/partials/specify-password.html'\">\n"+
"</ng-include>\n"+
"<br>\n"+
"<cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg-org-suspend\" ng-if=userDetails.resetPassword.begun>\n"+
"\n"+
"<div class=cui-action__actions>\n"+
"      \n"+
"      <svg xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" ng-click=\"userDetails.resetPassword.begun=false\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 53\">\n"+
"        <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close></use>\n"+
"      </svg>\n"+
"    </div>\n"+
"    <div class=cui-expandable__body-row>\n"+
"      <p>{{'cui-pwd-reset-msg1'|translate}}  <b>{{userDetails.resetPasswordValue.password}}</b> </p>\n"+
"    </div>\n"+
"      <div class=cui-expandable__body-row>\n"+
"      <p>{{'cui-pwd-reset-msg2'|translate}}</p>\n"+
"    </div>\n"+
"</cui-expandable-body>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/history/userDetails-history.html',
"\n"+
"<div class=cui-loading__container--user-details ng-if=userDetailsHistory.loading>\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"<div ng-if=!userDetailsHistory.loading>\n"+
"	\n"+
"	<div>\n"+
"		\n"+
"		<div>\n"+
"			<h3>{{'cui-user-status-history'|translate}}</h3>\n"+
"		</div>\n"+
"		\n"+
"		<p ng-if=\"userDetailsHistory.personStatusHistory.length===0\">{{'cui-no-status-history'|translate}}</p>\n"+
"		<div ng-repeat=\"status in userDetailsHistory.personStatusHistory\">\n"+
"			<p>{{status}}</p>\n"+
"		</div>\n"+
"	<div>\n"+
"\n"+
"	\n"+
"	<div>\n"+
"		\n"+
"		<div class=cui-action>\n"+
"		<span class=cui-action__title>{{'cui-app-history'|translate}}</span>\n"+
"  		<div class=cui-action__actions>\n"+
"    		\n"+
"    		<div class=cui-action__action-container id=sort-button ng-click=\"userDetailsHistory.sortClicked=!userDetailsHistory.sortClicked\" off-click=\"userDetailsHistory.sortClicked=false\">\n"+
"          <div>\n"+
"            <cui-icon cui-svg-icon=fa:sort14 svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"          </div>\n"+
"      		\n"+
"      		<span class=cui-action__action-label>{{'sort'|translate}}</span>\n"+
"      		\n"+
"      		<div class=\"cui-popover cui-popover--top cui-popover__sort-popover\" tether target=#sort-button attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"-10px 0\" ng-if=userDetailsHistory.sortClicked>\n"+
"        		<p>{{'cui-alphabetically' | translate}}</p>\n"+
"        		<p>{{'cui-by-date-added' | translate}}</p>\n"+
"      		</div>\n"+
"    		</div>\n"+
"    		\n"+
"    		<div class=cui-action__action-container id=refine-button ng-click=\"userDetailsHistory.refineClicked=!userDetailsHistory.refineClicked\" off-click=\"userDetailsHistory.refineClicked=false\">\n"+
"                    \n"+
"          <div>\n"+
"            <cui-icon cui-svg-icon=fa:filter10 svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"          </div>\n"+
"					\n"+
"      		<span class=cui-action__action-label>{{'refine'|translate}}</span>\n"+
"      		\n"+
"      		<div class=\"cui-popover cui-popover--top cui-popover__sort-popover\" tether target=#refine-button attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"-10px 0\" ng-if=userDetailsHistory.refineClicked>\n"+
"        		<p>TODO: REFINE</p>\n"+
"      		</div>\n"+
"    		</div>\n"+
"  		</div>\n"+
"		</div>\n"+
"		\n"+
"		<div>\n"+
"			<p>API Blocker: Application History List</p>\n"+
"		</div>\n"+
"	</div>\n"+
"</div>\n"+
"</div></div>");



$templateCache.put('app/modules/organization/directory/user-details/sections/profile/sections-profile/address.html',
"<ng-form name=address>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'cui-address' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"      \n"+
"      <div ng-if=!toggled>\n"+
"        <div class=cui-field-val__val>{{userDetailsProfile.user.addresses[0].streets[0]}} </div>\n"+
"        <div class=cui-field-val__val ng-if=userDetailsProfile.user.addresses[0].streets[1]>{{userDetailsProfile.user.addresses[0].streets[1]}}</div>\n"+
"        <div class=cui-field-val__val>{{userDetailsProfile.user.addresses[0].city}}</div>\n"+
"        <div class=cui-field-val__val>{{userDetailsProfile.user.addresses[0].state}}<span ng-if=\"userDetailsProfile.user.addresses[0].state && userDetailsProfile.user.addresses[0].postal\">, </span>{{userDetailsProfile.user.addresses[0].postal}}</div>\n"+
"        <div class=cui-field-val__val>{{base.countries.getCountryByCode(userDetailsProfile.user.addresses[0].country).name}}</div>\n"+
"      </div>\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'address','function':toggleOff})\">\n"+
"        \n"+
"        <label for=\"{{'cui-street-address' | translate}}\">{{'cui-street-address' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-street-address' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].streets[0]>\n"+
"        \n"+
"        <label for=\"{{'cui-address-2' | translate}}\">{{'cui-address-2' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-address-2' | translate}}\" ng-model=userDetailsProfile.tempUser.addresses[0].streets[1] class=cui-input>\n"+
"        \n"+
"        <label for=\"{{'cui-city' | translate}}\">{{'cui-city' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-city' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].city>\n"+
"        \n"+
"        <div class=cui-form__field-row>\n"+
"          <div class=\"cui-form__field-container cui-form__field-container--half\">\n"+
"            <label for=\"{{'cui-state' | translate}}\">{{'cui-state' | translate}}</label>\n"+
"            <input type=text name=\"{{'cui-state' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].state>\n"+
"          </div>\n"+
"          \n"+
"          <div class=\"cui-form__field-container cui-form__field-container--half\">\n"+
"            <label for=\"{{'cui-zip' | translate}}\">{{'cui-zip' | translate}}</label>\n"+
"            <input type=text name=\"{{'cui-zip' | translate}}\" class=cui-input ng-model=userDetailsProfile.tempUser.addresses[0].postal>\n"+
"          </div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-wizard__field-container>\n"+
"          <label for=country>{{\"cui-country\" | translate}}</label>\n"+
"          <div class=cui-error ng-messages=user.country.$error ng-if=user.country.$touched>\n"+
"            <div ng-messages-include=app/angular-templates/messages.html></div>\n"+
"          </div>\n"+
"          <div auto-complete input-name=country pause=100 selected-object=userDetailsProfile.userCountry initial-value=base.countries.getCountryByCode(userDetailsProfile.tempUser.addresses[0].country) local-data=base.countries.list search-fields=name title-field=name input-class=cui-input match-class=highlight auto-match=true></div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=\"userDetailsProfile.resetTempObject(userDetailsProfile.user, userDetailsProfile.tempUser); toggleOff()\">{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"userDetailsProfile.updatePerson('address',toggleOff);\">\n"+
"            <span ng-if=\"!userDetailsProfile.address || !userDetailsProfile.address.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.address.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.address.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/profile/sections-profile/basic-info.html',
"<ng-form name=basicInfo>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'basic-info' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=!toggled>\n"+
"        <div class=cui-field-val>\n"+
"          <span class=cui-field-val__field>{{'cui-org' | translate}}:</span>\n"+
"          <span class=cui-field-val__val>{{userDetailsProfile.organization.name}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-field-val>\n"+
"          <span class=cui-field-val__field>{{'cui-name' | translate}}:</span>\n"+
"          <span class=cui-field-val__val>{{userDetailsProfile.user.name.given}} {{userDetailsProfile.user.name.surname}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-field-val>\n"+
"          <span class=cui-field-val__field>{{'cui-email' | translate}}:</span>\n"+
"          <span class=cui-field-val__val>{{userDetailsProfile.user.email}} </span>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'basicInfo','function':toggleOff})\">\n"+
"        \n"+
"        <label for=firstName>{{'cui-first-name' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.firstName.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=text name=firstName class=cui-input ng-model=userDetailsProfile.tempUser.name.given ng-required=true focus-if=toggled>\n"+
"        \n"+
"        <label for=lastName>{{'cui-last-name' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.lastName.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=text name=lastName class=cui-input ng-model=userDetailsProfile.tempUser.name.surname ng-required=true>\n"+
"        \n"+
"        <label for=email>{{'cui-email' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.email.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=email name=email class=cui-input ng-model=userDetailsProfile.tempUser.email ng-required=true>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"basicInfo.$valid && userDetailsProfile.updatePerson('basicInfo',toggleOff);\" ng-class=\"{'cui-button--error':!basicInfo.$valid}\">\n"+
"            <span ng-if=\"!userDetailsProfile.basicInfo || !userDetailsProfile.basicInfo.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.basicInfo.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.basicInfo.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/profile/sections-profile/challenge-questions.html',
"<ng-form name=challengeQuestions>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'challenge-questions' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"      <div ng-if=!toggled>\n"+
"        <div ng-repeat=\"question in userDetailsProfile.challengeQuestionsTexts\">\n"+
"          <span class=cui-field-val__field>{{$index+1}}:</span>\n"+
"          <span class=cui-field-val__val>{{question}}</span>\n"+
"          <br>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'challengeQuestions','function':toggleOff})\">\n"+
"        <div ng-repeat=\"question in userDetailsProfile.tempUserSecurityQuestions.questions\">\n"+
"          <b>{{'cui-challenge-question' | translate}} {{$index+1}}</b>\n"+
"          <select class=\"cui-input cui-input--full cui-select\" ng-model=question.question.id ng-options=\"question.id as (question.question | cuiI18n) for question in userDetailsProfile['allChallengeQuestions' + $index]\"></select>\n"+
"          {{'cui-answer' | translate}}\n"+
"          <div class=cui-error ng-messages=\"challengeQuestions['answer' + $index].$error\">\n"+
"            <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"          </div>\n"+
"          <input type=text ng-model=question.answer class=cui-input ng-class=\"{'cui-input--error':!challengeQuestions['answer'+$index].$valid}\" name=answer{{$index}} ng-change=userDetailsProfile.checkIfRepeatedSecurityAnswer(userDetailsProfile.tempUserSecurityQuestions.questions,challengeQuestions) ng-required=true>\n"+
"          <br><br>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"userDetailsProfile.saveChallengeQuestions('challengeQuestions',toggleOff);\" ng-class=\"{'cui-button--error':!challengeQuestions.$valid}\">\n"+
"            <span ng-if=\"( !userDetailsProfile.challengeQuestions || !userDetailsProfile.challengeQuestions.submitting ) && !userDetailsProfile.challengeQuestions.error\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.challengeQuestions.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.challengeQuestions.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/profile/sections-profile/password.html',
"<ng-form name=password>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'password-reset' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=userDetailsProfile.resetPasswordFields();toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'password','function':toggleOff})\">\n"+
"\n"+
"        \n"+
"        <label for=currentPassword>{{'current-password' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=password.currentPassword.$error ng-if=password.currentPassword.$touched>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=password name=currentPassword class=cui-input ng-model=userDetailsProfile.userPasswordAccount.currentPassword ng-required=true focus-if=toggled>\n"+
"\n"+
"        \n"+
"        <div class=cui-input__password-holder>\n"+
"          <label for=newPassword>{{'cui-enter-new-password' | translate}}: </label>\n"+
"          <input class=cui-input name=newPassword type=password ng-model=userDetailsProfile.userPasswordAccount.password ng-required=true ng-class=\"{'cui-input--error': password.newPassword.$touched && password.newPassword.$invalid}\" password-validation=userDetailsProfile.passwordRules>\n"+
"          \n"+
"          <div password-popover ng-messages=password.newPassword.$error ng-messages-multiple ng-if=password.newPassword.$invalid class=cui-error__password>\n"+
"            <div ng-messages-include=app/common-templates/password-validation.html></div>\n"+
"          </div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <label for=newPasswordRe>{{'cui-re-enter-new-password' | translate}}: </label>\n"+
"        <div class=cui-error ng-if=\"password.newPasswordRe.$touched && password.newPasswordRe.$error.match\">\n"+
"          <div class=cui-error__message>{{'password-mismatch' | translate}}</div>\n"+
"        </div>\n"+
"        <input class=\"cui-input cui-field-val__val\" type=password ng-model=userDetailsProfile.passwordRe name=newPasswordRe match=userDetailsProfile.userPasswordAccount.password>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=userDetailsProfile.resetPasswordFields();toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"password.$valid && userDetailsProfile.updatePassword('password',toggleOff);\" ng-class=\"{'cui-button--error':!password.$valid}\">\n"+
"            <span ng-if=\"(!userDetailsProfile.password || !userDetailsProfile.password.submitting) && !userDetailsProfile.password.error\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.password.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.password.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/profile/sections-profile/phone-fax.html',
"<ng-form name=phoneFax>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'cui-phone-fax' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"\n"+
"      <div ng-if=!toggled ng-repeat=\"phone in userDetailsProfile.user.phones\">\n"+
"        <span class=cui-field-val__field>{{phone.type}}:</span>\n"+
"        <span class=cui-field-val__val>{{phone.number}}</span>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled>\n"+
"        \n"+
"        <div ng-repeat=\"phone in userDetailsProfile.tempUser.phones\">\n"+
"          <label>{{phone.type}}</label>\n"+
"          <div ng-messages=\"phoneFax['phone'+$index].$error\" class=cui-error>\n"+
"            <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"          </div>\n"+
"          <input class=cui-input type=text ng-model=phone.number name=phone{{$index}} ng-required=true>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"phoneFax.$valid && userDetailsProfile.updatePerson('phoneFax',toggleOff);\" ng-class=\"{'cui-button--error':!phoneFax.$valid}\">\n"+
"            <span ng-if=\"!userDetailsProfile.phoneFax || !userDetailsProfile.phoneFax.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.phoneFax.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.phoneFax.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/profile/sections-profile/timezone-language.html',
"<ng-form name=timezoneLanguage>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'timezone-and-language' | translate}}</span>\n"+
"        <span class=cui-link href=\"\" ng-if=!toggled ng-click=userDetailsProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        <div ng-if=toggled ng-click=toggleOff()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon use-class=cui-card__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\" aria-label=\"{{'cui-close' | translate}}\"></cui-icon>\n"+
"        </div>\n"+
"        \n"+
"      </div>\n"+
"      <div ng-if=!toggled>\n"+
"        <span class=cui-field-val__field>{{'cui-timezone' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{userDetailsProfile.timezoneById(userDetailsProfile.user.timezone)}}</span><br>\n"+
"        <span class=cui-field-val__field>{{'cui-language' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{base.languages[userDetailsProfile.user.language]}}</span>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userDetailsProfile.pushToggleOff({'name':'timezoneLangauge','function':toggleOff})\">\n"+
"        \n"+
"        <label for=timezone>{{'cui-timezone' | translate}}</label>\n"+
"        <select class=\"cui-input cui-select\" ng-model=userDetailsProfile.tempUser.timezone ng-options=\"timezone.id as timezone.name for timezone in base.timezones\"></select>\n"+
"        \n"+
"        <label for=language>{{'cui-language' | translate}}</label>\n"+
"        <select class=\"cui-input cui-select\" ng-model=userDetailsProfile.tempUser.language ng-options=\"languageCode as languageName for (languageCode,languageName) in base.languages\"></select>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-click=\"userDetailsProfile.updatePerson('timezoneLanguage',toggleOff);\">\n"+
"            <span ng-if=\"!userDetailsProfile.timezoneLanguage || !userDetailsProfile.timezoneLanguage.submitting\">{{'cui-update' | translate}}</span>\n"+
"            <div class=cui-loading--medium-ctr ng-if=userDetailsProfile.timezoneLanguage.submitting></div>\n"+
"            <span ng-if=userDetailsProfile.timezoneLanguage.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/profile/userDetails-profile.html',
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['userDetailsProfile.initProfile']\">\n"+
"  <div class=\"cui-loader cui-loader--content-sm\" ng-include=\"'app/common-templates/partials/loader-content-sm.html'\"></div>\n"+
"</div>\n"+
"\n"+
"<ng-form name=edit novalidate ng-if=\"!base.loader.for['userDetailsProfile.initProfile']\">\n"+
"	\n"+
"  <div class=cui-users__info-block ng-if=userDetailsProfile.user>\n"+
"    <div ng-include=\"'app/modules/organization/directory/user-details/sections/profile/sections-profile/basic-info.html'\"></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-users__info-block ng-if=userDetailsProfile.passwordRules>\n"+
"    <div ng-include=\"'app/modules/organization/directory/user-details/sections/profile/sections-profile/password.html'\"></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-users__info-block ng-if=\"userDetailsProfile.userSecurityQuestions && userDetailsProfile.allSecurityQuestions\">\n"+
"    <div ng-include=\"'app/modules/organization/directory/user-details/sections/profile/sections-profile/challenge-questions.html'\"></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-users__info-block ng-if=userDetailsProfile.user>\n"+
"    <div ng-include=\"'app/modules/organization/directory/user-details/sections/profile/sections-profile/address.html'\"></div>\n"+
"  </div>\n"+
"\n"+
"	\n"+
"  <div class=cui-users__info-block ng-if=userDetailsProfile.user>\n"+
"    <div ng-include=\"'app/modules/organization/directory/user-details/sections/profile/sections-profile/phone-fax.html'\"></div>\n"+
"  </div>\n"+
"\n"+
"	\n"+
"  <div class=cui-users__info-block ng-if=userDetailsProfile.user>\n"+
"    <div ng-include=\"'app/modules/organization/directory/user-details/sections/profile/sections-profile/timezone-language.html'\"></div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/directory/user-details/sections/roles/userDetails-roles.html',
"\n"+
"<div class=cui-loading__container--user-details ng-if=userDetailsRoles.loading>\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"<div class=\"class-toggle cui-modal\" ng-if=userDetailsRoles.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'your-assign-role-success' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"\n"+
"<div ng-if=!userDetailsRoles.loading>\n"+
"	\n"+
"	<div class=cui-users__profile-info>\n"+
"		\n"+
"		<div class=cui-action>\n"+
"			<div class=cui-action__title>{{'cui-assigned-roles'|translate}}</div>\n"+
"		</div>\n"+
"		\n"+
"		<div ng-repeat=\"role in userDetailsRoles.assignedRoles | orderBy:'name' track by role.roleId\">\n"+
"			<p ng-if=\"userDetailsRoles.assignedRoles.length===0\">{{'cui-no-roles-assigned'|translate}}</p>\n"+
"			<span>{{role.name}}</span>\n"+
"		</div>\n"+
"	</div>\n"+
"	        \n"+
"        <div class=cui-users__profile-info>\n"+
"            <div class=cui-action>\n"+
"                <div class=cui-action__title>{{'cui-available-roles'|translate}}</div>\n"+
"            </div>\n"+
"            \n"+
"            <div class=cui-media__content ng-if=\"userDetailsRoles.rolesGrantable.length===0&&!userDetailsRoles.grantedHistoryError\">{{'cui-no-details'|translate}}</div>\n"+
"            <p class=cui-users__password-success style=color:red ng-if=userDetailsRoles.grantedHistoryError><b>{{'error-generic'|translate}}</b></p>\n"+
"      \n"+
"        <cui-expandable class=cui-expandable ng-repeat=\"roles in userDetailsRoles.rolesGrantable\" ng-class=\"application.expanded?'expanded':''\" transition-speed=150>\n"+
"            <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\">\n"+
"               \n"+
"                <span class=cui-checkbox__container>\n"+
"                    <input class=cui-checkbox type=checkbox id=\"{{'checkbox-'+roles.roleId}}\" ng-model=userDetailsRoles.appCheckbox[roles.roleId]>\n"+
"                    <label for=\"{{'checkbox-'+roles.roleId}}\" class=cui-checkbox__label ng-click=userDetailsRoles.checkrequest(roles.roleId)></label>\n"+
"                </span>\n"+
"                \n"+
"                <div class=cui-applications__expandable-info ng-click=toggleExpand()>\n"+
"                    <h3 class=cui-expandable__title-left>{{roles.name}}</h3>\n"+
"                </div>\n"+
"                <svg cui-icon xmlns=http://www.w3.org/2000/svg class=\"cui-icon cui-icon--light-grey chevron\" ng-class=cui-hide__opacity preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\" ng-click=toggleExpand()>\n"+
"                  <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#chevron18></use>\n"+
"                </svg>\n"+
"            </cui-expandable-title>\n"+
"            <cui-expandable-body class=cui-expandable__body>\n"+
"                <div class=cui-expandable__body-pane>\n"+
"                    <span class=cui-expandable__body-close ng-click=collapse()>\n"+
"                        <svg xmlns=http://www.w3.org/2000/svg class=cui-icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"                          <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"                        </svg>\n"+
"                    </span>\n"+
"                    <div class=cui-expandable__pane-col ng-if=\"roles.privileges && roles.privileges.length > 0\">\n"+
"                        <h4 class=cui-expandable__pane-title>{{'privileges' | translate}}:</h4>\n"+
"                        <span ng-if=\"(!roles.privileges || roles.privileges.length===0)\">{{'cui-no-details' | translate}}</span>\n"+
"                        <div class=cui-expandable__pane-content>\n"+
"                            <span class=cui-expandable__pane-content-item ng-repeat=\"privileges in roles.privileges\">\n"+
"                                {{privileges.privilegeName}}\n"+
"                            </span>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </cui-expandable-body>\n"+
"        </cui-expandable>\n"+
"            <div class=cui-applications__submit-options ng-if=\"userDetailsRoles.rolesGrantable.length>0&&!userDetailsRoles.grantedHistoryError\">\n"+
"                <button class=cui-button ng-class=\"{'cui-button--error' : !userDetailsRoles.appCheckboxValid }\" ng-click=userDetailsRoles.appCheckboxValid&&userDetailsRoles.assignRoles()>\n"+
"                    <span ng-if=!userDetailsRoles.rolessubmitError>{{'submit-request' | translate}}</span>\n"+
"                    <span ng-if=\"userDetailsRoles.rolessubmitError===true\">{{'cui-error-try-again' | translate}}</span>\n"+
"                </button>\n"+
"            </div>\n"+
"        </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/directory/user-list/directory-userList.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/directory target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<main class=\"cui-organization cui-organization-dir\">\n"+
"  <h2 class=cui-sr-only>{{'organization-directory' | translate}}</h2>\n"+
"\n"+
"  \n"+
"  <section class=cui-action>\n"+
"    <h3 class=cui-sr-only>{{'org-nav-invite-links' | translate}}</h3>\n"+
"    <nav ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\" onload=\"orgId=orgDirectory.stateParamsOrgId\"></nav>\n"+
"    <nav ng-if=\"!base.loader.for['orgDirectory.userList']\" ng-include=\"'app/modules/organization/partials/mobileNav.html'\" ng-init=\"orgName=orgDirectory.organization.name\"></nav>\n"+
"  </section>\n"+
"\n"+
"  \n"+
"  <section class=cui-action ng-if=!orgDirectory.loading>\n"+
"    <h3 class=cui-sr-only>{{'org-dir-filters' | translate}}</h3>\n"+
"    <div class=cui-loading__container ng-if=orgDirectory.loading>\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content-header.html'\"></div>\n"+
"    </div>\n"+
"    <span class=\"cui-action__title cui-desktop-only\">{{orgDirectory.organization.name}}</span>\n"+
"    <span class=\"cui-action__title cui-mobile-only\">{{orgDirectory.orgPersonCount}} People</span>\n"+
"    <div class=\"cui-input-button cui-input-button--alt-bg\">\n"+
"      <input class=cui-input-button__input ng-model=orgDirectory.search.fullName focus-if placeholder=\"{{'cui-search-user-name' | translate}}\" on-enter=orgDirectory.updateSearchByName>\n"+
"      <button class=cui-input-button__button ng-click=\"orgDirectory.updateSearchByName('name')\">{{'search' | translate}}</button>\n"+
"    </div>\n"+
"    <div class=cui-action__actions>\n"+
"      \n"+
"      <div class=cui-action__action-container ng-click=\"orgDirectory.refineClicked=!orgDirectory.refineClicked\" id=refine-button off-click=\"orgDirectory.refineClicked=false\">\n"+
"        <cui-icon cui-svg-icon=fa:filter10 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        <span class=cui-action__action-label>{{'refine' | translate}}</span>\n"+
"        \n"+
"        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#refine-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=orgDirectory.refineClicked style=width:214px>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDirectory.actionCallbacks.refine('all')\">{{'all' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDirectory.actionCallbacks.refine('active')\">{{'active' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDirectory.actionCallbacks.refine('pending')\">{{'pending' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDirectory.actionCallbacks.refine('locked')\">{{'locked' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"            <span ng-click=\"orgDirectory.actionCallbacks.refine('suspended')\">{{'suspended' | translate}}</span>\n"+
"            \n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-show=\"1==1\" class=cui-action__action-container ng-click=\"orgDirectory.sortClicked=!orgDirectory.sortClicked\" id=sort-button off-click=\"orgDirectory.sortClicked=false\">\n"+
"        <svg xmlns=http://www.w3.org/2000/svg class=cui-action__icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"          <use xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#sort14></use>\n"+
"        </svg>\n"+
"        <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"        \n"+
"        <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#sort-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" ng-if=orgDirectory.sortClicked style=width:171px>\n"+
"          <div class=cui-popover__row>\n"+
"            <span ng-click=\"orgDirectory.actionCallbacks.sort('name')\">{{'cui-alphabetically' | translate}}</span>\n"+
"          </div>\n"+
"          \n"+
"          \n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      \n"+
"        \n"+
"        \n"+
"\n"+
"      \n"+
"\n"+
"      \n"+
"        \n"+
"        \n"+
"    </div>\n"+
"  </section>\n"+
"\n"+
"  \n"+
"  <section class=cui-organization__main-container>\n"+
"    <h3 class=cui-sr-only>{{'org-dir-list'}}</h3>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['orgDirectory.userList']\">\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"    </div>\n"+
"\n"+
"    <cui-table-header headers=\"['cui-name', 'username', 'status']\" sorting=orgDirectory.sortBy sorting-callbacks=orgDirectory.sortingCallbacks>\n"+
"      </cui-table-header>\n"+
"\n"+
"    <cui-table-row ng-repeat=\"user in orgDirectory.userList track by user.id\" ng-click=orgDirectory.userClick(user)>\n"+
"      <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"        \n"+
"        <div class=cui-flex-table__avatar-col>\n"+
"          <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[user.name.given, user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"        </div>\n"+
"        <div class=cui-flex-table__mobile-stack>\n"+
"          \n"+
"          <div class=cui-flex-table__left><span class=cui-flex-table__title>{{user.name.given}} {{user.name.surname}}</span></div>\n"+
"          \n"+
"          <div class=cui-flex-table__middle><span class=cui-mobile-only>{{'username' | translate | lowercase}}: &nbsp;</span>{{user.username}}</div>\n"+
"          \n"+
"          <div class=cui-flex-table__right>\n"+
"            <span class=cui-mobile-only>{{'apps' | translate}} ({{user.appCount}}) &nbsp;</span>\n"+
"            <span ng-class=\"'cui-status--'+user.status\">{{user.status}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </li>\n"+
"    </cui-table-row>\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=orgDirectory.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=orgDirectory.search.pageSize count=orgDirectory.userCount on-page-change=orgDirectory.updateSearchParams ng-model=orgDirectory.search.page attach-rerender-to=orgDirectory.reRenderPagination></paginate>\n"+
"    </div>\n"+
"\n"+
"  </section>\n"+
"</main>\n");



$templateCache.put('app/modules/organization/hierarchy/organization-hierarchy.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/hierarchy target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=\"cui-organization cui-organization-dir\">\n"+
"\n"+
"  \n"+
"  <section class=cui-action>\n"+
"    <nav ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\" onload=\"orgId=orgHierarchy.stateParamsOrgId\"></nav>\n"+
"    <nav ng-if=\"!base.loader.for['orgHierarchy.loading']\" ng-include=\"'app/modules/organization/partials/mobileNav.html'\" ng-init=\"orgName=orgHierarchy.organizationHierarchy[0].name[0].text\"></nav>\n"+
"    \n"+
"  </section>\n"+
"\n"+
"  \n"+
"  <div class=cui-organization__main-container>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['orgHierarchy.loading']\">\n"+
"      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <h3 class=cui-organization__page-title ng-if=\"base.user.organization.id!=orgHierarchy.organizationHierarchy[0].id\" ui-sref=organization.profile({orgId:base.user.organization.id})>&lt; {{base.user.organization.name}}</h3>\n"+
"\n"+
"    \n"+
"    \n"+
"    <div disable-animate class=cui-link ng-if=!orgHierarchy.expanded ng-click=orgHierarchy.toggleAll(orgHierarchy.expanded)>{{'expand-all'|translate}}</div>\n"+
"    <div disable-animate class=cui-link ng-if=orgHierarchy.expanded ng-click=orgHierarchy.toggleAll(orgHierarchy.expanded)>{{'collapse-all'|translate}}</div>\n"+
"    <div class=cui-tree ng-if=orgHierarchy.organizationHierarchy cui-tree-alt=orgHierarchy.organizationHierarchy cui-tree-alt-leaf-display=\"(object.name | cuiI18n)\" cui-tree-alt-leaf-click-callback=orgHierarchy.goToOrgPrfile cui-tree-alt-toggle-expand-callback=orgHierarchy.toggleExpand></div>\n"+
"    \n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/invitation/division/division.html',
"  <div class=\"class-toggle cui-modal\" ng-if=division.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'cui-invite-division-success' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"<ng-form name=edit novalidate>\n"+
"  <div class=cui-users__edit> \n"+
"\n"+
"    <div class=cui-users__main-container>\n"+
"      \n"+
"      <div class=cui-loading__container ng-if=division.loader>\n"+
"        <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"      </div>\n"+
"      <span class=cui-field-val__field>{{'cui-invite-division'|translate}} </span>\n"+
"        <div class=cui-action__actions>\n"+
"            <svg ui-sref=organization.profile({orgId:division.stateParamsOrgId}) xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"            <defs>\n"+
"                <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"                <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"                    <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"                    <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"                    <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"                </filter>\n"+
"            </defs>\n"+
"            <g id=close-with-shadow fill=none fill-rule=evenodd>\n"+
"                <g id=Oval-73 transform=\"translate(3 1)\">\n"+
"                    <use fill=#000 filter=url(#filter-2) xlink:href=#path-1 />\n"+
"                    <use fill=currentColor xlink:href=#path-1 />\n"+
"                </g>\n"+
"                <path d=\"M26.022 20.672l4.006-4.006c.788-.787.787-2.052.006-2.833l-.195-.195c-.788-.787-2.05-.778-2.834.006L23 17.65l-4.006-4.006c-.787-.788-2.052-.787-2.833-.006l-.194.195c-.788.787-.778 2.05.006 2.833l4.006 4.006-4.006 4.006c-.788.787-.787 2.053-.006 2.833l.195.196c.788.788 2.05.778 2.834-.006L23 23.695l4.006 4.005c.787.788 2.052.787 2.833.006l.194-.195c.788-.786.778-2.048-.006-2.832l-4.006-4.006z\" fill=#fff />\n"+
"            </g>\n"+
"          </svg>\n"+
"        </div>\n"+
"\n"+
"      <div class=cui-users__profile>\n"+
"        \n"+
"        <div class=cui-users__profile-info ng-if=!division.selectOrgFromList>\n"+
"\n"+
"          <div class=cui-users__info-block>\n"+
"              <div class=cui-users__info-block>\n"+
"                <div class=cui-field-val>\n"+
"                     <span class=cui-field-val__field>{{division.userSelectedOrg.originalObject.name}}</span>\n"+
"                <span class=cui-field-val__val><nav class=cui-breadcrumb>\n"+
"                <ul class=cui-breadcrumb__links>\n"+
"                  <li class=cui-breadcrumb__link>\n"+
"                    <a class=cui-link ng-click=\"division.selectOrgFromList=true\">\n"+
"                      {{'change-org' | translate}}\n"+
"                    </a>\n"+
"                  </li>\n"+
"                </ul>\n"+
"              </nav></span></div>\n"+
"\n"+
"      <p class=cui-users__password-success style=color:red ng-if=division.sendInvitationError>{{'error-generic' | translate}}</p><br>   \n"+
"  <div class=cui-users__info-block>\n"+
"    \n"+
"    <div class=cui-error ng-if=!division.userSelectedOrg>\n"+
"        <div class=cui-error__message>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"     <div auto-complete input-name=country pause=100 placeholder=\"{{'cui-invite-user-select' | translate}}\" selected-object=division.userSelectedOrg local-data=division.organizationList search-fields=name title-field=name input-class=cui-input match-class=highlight auto-match=true field-required=division.userSelectedOrg></div>\n"+
"  </div>\n"+
"  <div class=cui-users__info-block>\n"+
"    <span class=cui-field-val__field>{{'cui-email'|translate}} {{'cui-subject'|translate}}* <input type=text name=emailSubject placeholder=\"{{'cui-division-sub'|translate}} {{division.userSelectedOrg.originalObject.name}}\" class=cui-input ng-disabled=true></span>\n"+
"    </div>\n"+
"    <div class=cui-users__info-block>\n"+
"      <span class=cui-field-val__field>{{'cui-email'|translate}} {{'cui-address'|translate}}{{'cui-es'}}* \n"+
"        <div class=cui-error ng-if=division.emailAddressError>\n"+
"          <div class=cui-error__message>{{'cui-this-is-not-valid-email' | translate}}</div>\n"+
"        </div>\n"+
"    <textarea name=emailAddress ng-required=true class=cui-text-area style=\"min-width: 800px\" ng-model=division.emailAddress placeholder=\"{{'cui-email-recipt'|translate}}\"></textarea></span>   \n"+
"   \n"+
"    </div>\n"+
"    \n"+
"\n"+
"    \n"+
"          </div>\n"+
"        </div>\n"+
"        <div class=cui-applications__submit-options align=right>\n"+
"                <a class=cui-link ng-click=\"base.goBack('invitation.inviteSelect')\">{{'cui-cancel' | translate}}</a>\n"+
"                <button class=cui-button ng-class=\"{'cui-button--error' : !edit.$valid}\" ng-click=edit.$valid&&division.sendInvitation()>\n"+
"                    <span ng-if=!division.sendInvitationError>{{'cui-send-invitation' | translate}}</span>\n"+
"                    <span ng-if=\"division.sendInvitationError===true\">{{'cui-error-try-again' | translate}}</span>\n"+
"                </button>\n"+
"            </div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-users__profile-info ng-if=division.selectOrgFromList>\n"+
"          <div class=cui-users__info-block>\n"+
"            \n"+
"            <div class=cui-tree cui-tree=division.organizationHierarchyRoot cui-tree-leaf-display=\"(object.name | cuiI18n)\" cui-tree-leaf-click-callback=division.goToOrgPrfile></div>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/invitation/invitation.html',
"<div class=welcome-wrapper>\n"+
"\n"+
"    \n"+
"    <div class=welcome-title>\n"+
"        <h1>{{ 'cui-invite-verbiage' | translate }}:</h1>\n"+
"    </div>\n"+
"\n"+
"    <div class=cui-card__container>\n"+
"\n"+
"         \n"+
"        <div class=cui-card>\n"+
"            <div class=cui-card__image-container>\n"+
"                <div>\n"+
"                    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n"+
"                    <!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n"+
"                    <svg version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=48px height=48px viewBox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" xml:space=preserve>\n"+
"                    <g id=user>\n"+
"                        <path d=\"M23.667,29.482c-5.285,0-8.976-6.333-9.868-8.938c-0.044-0.027-0.092-0.056-0.138-0.085\n"+
"                            c-0.349-0.216-0.579-0.359-0.733-0.633c-1.275-2.256-1.611-4.064-0.998-5.375c0.29-0.619,0.725-0.998,1.112-1.226\n"+
"                            c0-0.978,0.074-2.818,0.547-4.605c0.02-0.072,1.916-6.761,10.079-6.761c8.163,0,10.059,6.689,10.078,6.756\n"+
"                            c0.474,1.791,0.548,3.631,0.548,4.61c0.387,0.229,0.822,0.607,1.111,1.226c0.613,1.311,0.277,3.119-0.997,5.375\n"+
"                            c-0.156,0.274-0.386,0.417-0.734,0.634c-0.046,0.029-0.094,0.057-0.138,0.085C32.643,23.148,28.95,29.482,23.667,29.482z\n"+
"                             M14.573,18.672c0.043,0.027,0.093,0.057,0.143,0.088c0.436,0.271,0.781,0.485,0.907,0.921c0.476,1.653,3.695,7.8,8.044,7.8\n"+
"                            c4.348,0,7.568-6.148,8.044-7.799c0.126-0.438,0.471-0.651,0.907-0.922c0.05-0.031,0.099-0.061,0.143-0.088\n"+
"                            c1.155-2.107,0.977-3.042,0.843-3.351c-0.158-0.364-0.491-0.454-0.529-0.463c-0.468-0.113-0.819-0.552-0.793-1.033\n"+
"                            c0.001-0.024,0.123-2.46-0.469-4.694c-0.058-0.207-1.55-5.272-8.145-5.272c-6.647,0-8.132,5.224-8.146,5.277\n"+
"                            c-0.593,2.241-0.468,4.665-0.467,4.689c0.027,0.502-0.323,0.947-0.817,1.038c-0.014,0.004-0.347,0.094-0.505,0.458\n"+
"                            C13.597,15.63,13.419,16.565,14.573,18.672z\"/>\n"+
"                        <path d=\"M23.667,45.973c-11.963,0-20.625-1.835-20.71-1.854c-0.478-0.103-0.812-0.537-0.789-1.025\n"+
"                            c0.455-9.559,6.409-12.526,10.848-13.926c3.438-1.085,5.237-2.84,5.255-2.858c0.392-0.388,1.026-0.386,1.414,0.007\n"+
"                            c0.389,0.392,0.386,1.025-0.007,1.414c-0.086,0.086-2.166,2.115-6.06,3.344c-4.295,1.355-8.731,3.763-9.394,11.253\n"+
"                            c2.425,0.446,9.841,1.645,19.443,1.645c9.614,0,17.02-1.198,19.443-1.644c-0.662-7.49-5.098-9.898-9.393-11.253\n"+
"                            c-3.896-1.229-5.974-3.258-6.06-3.344c-0.393-0.389-0.396-1.022-0.007-1.414c0.388-0.393,1.019-0.396,1.412-0.009\n"+
"                            c0.024,0.023,1.858,1.787,5.257,2.86c4.438,1.4,10.392,4.368,10.847,13.926c0.023,0.488-0.311,0.922-0.789,1.025\n"+
"                            C44.291,44.138,35.63,45.973,23.667,45.973z\"/>\n"+
"                    </g>\n"+
"                    </svg>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-card__content>\n"+
"                <p class=cui-card__content-header>{{ 'cui-new-user' | translate }}</p>\n"+
"                \n"+
"                <button class=cui-card__button ui-sref=invitation.inviteUser>{{ 'select' | translate }}</button>\n"+
"            </div>\n"+
"            \n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-card ng-if=true>\n"+
"            <div class=cui-card__image-container>\n"+
"                <div>\n"+
"                    <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n"+
"<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n"+
"<svg width=48px height=48px viewBox=\"0 0 48 48\" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink xmlns:sketch=http://www.bohemiancoding.com/sketch/ns>\n"+
"    \n"+
"\n"+
"    <g id=New-Division>\n"+
"        <g id=division transform=\"translate(0.105138, 0.453626)\">\n"+
"            <path d=\"M36.2486891,32.2207888 L36.2486891,25.6384794 C36.2486891,23.8239561 34.9364669,22.3473247 33.323974,22.3473247 L9.92625351,22.3473247 C8.31376058,22.3473247 7.00153843,23.8239561 7.00153843,25.6384794 L7.00153843,32.2207888 L5.05172838,32.2207888 L5.05172838,25.6384794 C5.05172838,22.6139082 7.23844035,20.1532216 9.92625351,20.1532216 L33.323974,20.1532216 C36.0117872,20.1532216 38.1984991,22.6139082 38.1984991,25.6384794 L38.1984991,32.2207888 L36.2486891,32.2207888 Z\" id=Fill-1></path>\n"+
"            <path d=\"M20.6502087,12.4738607 L22.6000188,12.4738607 L22.6000188,32.2207888 L20.6502087,32.2207888 L20.6502087,12.4738607 L20.6502087,12.4738607 Z\" id=Fill-2></path>\n"+
"            <path d=\"M25.5247338,13.5709123 L17.7254937,13.5709123 C16.1130008,13.5709123 14.8007786,12.0942809 14.8007786,10.2797576 L14.8007786,3.6974482 C14.8007786,1.88292492 16.1130008,0.406293523 17.7254937,0.406293523 L25.5247338,0.406293523 C27.1372267,0.406293523 28.4494489,1.88292492 28.4494489,3.6974482 L28.4494489,10.2797576 C28.4494489,12.0942809 27.1372267,13.5709123 25.5247338,13.5709123 L25.5247338,13.5709123 L25.5247338,13.5709123 Z M17.7254937,2.60039664 C17.1873461,2.60039664 16.7505886,3.0929728 16.7505886,3.6974482 L16.7505886,10.2797576 C16.7505886,10.884233 17.1873461,11.3768091 17.7254937,11.3768091 L25.5247338,11.3768091 C26.0628814,11.3768091 26.4996389,10.884233 26.4996389,10.2797576 L26.4996389,3.6974482 C26.4996389,3.0929728 26.0628814,2.60039664 25.5247338,2.60039664 L17.7254937,2.60039664 L17.7254937,2.60039664 L17.7254937,2.60039664 Z\" id=Fill-3></path>\n"+
"            <path d=\"M24.5498288,43.1913044 L18.7003987,43.1913044 C17.0879058,43.1913044 15.7756836,41.714673 15.7756836,39.9001497 L15.7756836,34.4148919 C15.7756836,32.6003686 17.0879058,31.1237372 18.7003987,31.1237372 L24.5498288,31.1237372 C26.1623217,31.1237372 27.4745439,32.6003686 27.4745439,34.4148919 L27.4745439,39.9001497 C27.4745439,41.714673 26.1623217,43.1913044 24.5498288,43.1913044 L24.5498288,43.1913044 L24.5498288,43.1913044 Z M18.7003987,33.3178403 C18.1622511,33.3178403 17.7254937,33.8104165 17.7254937,34.4148919 L17.7254937,39.9001497 C17.7254937,40.5046251 18.1622511,40.9972013 18.7003987,40.9972013 L24.5498288,40.9972013 C25.0879764,40.9972013 25.5247338,40.5046251 25.5247338,39.9001497 L25.5247338,34.4148919 C25.5247338,33.8104165 25.0879764,33.3178403 24.5498288,33.3178403 L18.7003987,33.3178403 L18.7003987,33.3178403 L18.7003987,33.3178403 Z\" id=Fill-4></path>\n"+
"            <path d=\"M40.1483092,43.1913044 L34.298879,43.1913044 C32.6863861,43.1913044 31.374164,41.714673 31.374164,39.9001497 L31.374164,34.4148919 C31.374164,32.6003686 32.6863861,31.1237372 34.298879,31.1237372 L40.1483092,31.1237372 C41.760802,31.1237372 43.0730243,32.6003686 43.0730243,34.4148919 L43.0730243,39.9001497 C43.0730243,41.714673 41.760802,43.1913044 40.1483092,43.1913044 L40.1483092,43.1913044 L40.1483092,43.1913044 Z M34.298879,33.3178403 C33.7607314,33.3178403 33.323974,33.8104165 33.323974,34.4148919 L33.323974,39.9001497 C33.323974,40.5046251 33.7607314,40.9972013 34.298879,40.9972013 L40.1483092,40.9972013 C40.6864567,40.9972013 41.1232142,40.5046251 41.1232142,39.9001497 L41.1232142,34.4148919 C41.1232142,33.8104165 40.6864567,33.3178403 40.1483092,33.3178403 L34.298879,33.3178403 L34.298879,33.3178403 L34.298879,33.3178403 Z\" id=Fill-5></path>\n"+
"            <path d=\"M8.95134844,43.1913044 L3.10191834,43.1913044 C1.48942543,43.1913044 0.177203274,41.714673 0.177203274,39.9001497 L0.177203274,34.4148919 C0.177203274,32.6003686 1.48942543,31.1237372 3.10191834,31.1237372 L8.95134844,31.1237372 C10.5638414,31.1237372 11.8760635,32.6003686 11.8760635,34.4148919 L11.8760635,39.9001497 C11.8760635,41.714673 10.5638414,43.1913044 8.95134844,43.1913044 L8.95134844,43.1913044 L8.95134844,43.1913044 Z M3.10191834,33.3178403 C2.56377077,33.3178403 2.12701332,33.8104165 2.12701332,34.4148919 L2.12701332,39.9001497 C2.12701332,40.5046251 2.56377077,40.9972013 3.10191834,40.9972013 L8.95134844,40.9972013 C9.48949602,40.9972013 9.92625351,40.5046251 9.92625351,39.9001497 L9.92625351,34.4148919 C9.92625351,33.8104165 9.48949602,33.3178403 8.95134844,33.3178403 L3.10191834,33.3178403 L3.10191834,33.3178403 L3.10191834,33.3178403 Z\" id=Fill-6></path>\n"+
"        </g>\n"+
"    </g>\n"+
"           \n"+
"</svg>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-card__content>\n"+
"                <p class=cui-card__content-header id=newDivision-header>{{ 'cui-new-division' | translate }}</p>\n"+
"               \n"+
"               <button class=cui-card__button ui-sref=invitation.division>{{ 'select' | translate }}</button>\n"+
"            </div>\n"+
"            \n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-card ng-if=true>\n"+
"            <div class=cui-card__image-container>\n"+
"                <div>\n"+
"                    <?xml version=\"1.0\" encoding=\"utf-8\"?>\n"+
"<svg version=1.1 xmlns:x=&ns_extend; xmlns:i=&ns_ai; xmlns:graph=&ns_graphs; xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=48px height=48px viewBox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" xml:space=preserve>\n"+
"<g id=skyscraper>\n"+
"    <g>\n"+
"        <path d=\"M46.96,31.001C46.982,30.836,47,30.671,47,30.5c0-1.115-0.413-2.171-1.154-2.99\n"+
"            C45.947,27.181,46,26.841,46,26.5c0-1.051-0.48-2.028-1.264-2.681C44.909,23.402,45,22.955,45,22.5c0-1.93-1.57-3.5-3.5-3.5\n"+
"            c-0.171,0-0.335,0.027-0.5,0.051V5c0-0.459-0.313-0.858-0.758-0.97l-12-3c-0.375-0.096-0.778,0.04-1.023,0.345l-8,10\n"+
"            C19.077,11.553,19,11.772,19,12v5.018c-0.011,0.334-0.013,0.659-0.018,0.987l-6.838-0.994c-0.034-0.005-0.069-0.001-0.103-0.003\n"+
"            C12.026,17.008,12.014,17,12,17c-0.011,0-0.02,0.006-0.031,0.006c-0.119,0.003-0.234,0.025-0.343,0.069\n"+
"            c-0.016,0.007-0.03,0.016-0.046,0.024c-0.089,0.042-0.171,0.098-0.246,0.166c-0.019,0.017-0.039,0.032-0.057,0.051\n"+
"            c-0.01,0.011-0.023,0.018-0.033,0.029l-6,6.931C5.087,24.458,5,24.69,5,24.931V45H3c-0.553,0-1,0.447-1,1s0.447,1,1,1h43\n"+
"            c0.553,0,1-0.447,1-1s-0.447-1-1-1h-4v-4.046C42.166,40.973,42.331,41,42.5,41c2.481,0,4.5-2.019,4.5-4.5\n"+
"            c0-0.903-0.266-1.766-0.76-2.5c0.494-0.734,0.76-1.597,0.76-2.5C47,31.336,46.983,31.176,46.96,31.001z M11,42.334\n"+
"            c-0.363-0.77-0.696-1.579-1-2.411V22c0-0.047-0.02-0.086-0.026-0.131L11,20.683V42.334z M13,19.156l5.984,0.87\n"+
"            c0.005,0.238,0.009,0.478,0.016,0.712V45h-6V19.156z M21,33.042c1.924,6.222,4.737,10.156,6.258,11.958H21V33.042z\n"+
"             M23.936,8.681L25,7.351v30.338c-0.359-0.74-0.714-1.542-1.058-2.403C23.97,35.194,24,35.101,24,35V9\n"+
"            C24,8.887,23.97,8.782,23.936,8.681z M28,3.601V42.69c-0.319-0.43-0.669-0.93-1.038-1.501C26.975,41.125,27,41.067,27,41V5\n"+
"            c0-0.042-0.019-0.078-0.024-0.119L28,3.601z M22,11.101v17.772c-0.529-2.448-0.896-5.186-1-8.223v-8.299L22,11.101z M8,24.148\n"+
"            v8.413c-0.696-3.483-0.967-6.251-1-6.605v-0.653L8,24.148z M7,37.084c0.758,2.762,1.781,5.593,3.145,7.916H7V37.084z M40,45H30\n"+
"            V3.531l9,2.25V20c0,0.017,0.009,0.03,0.009,0.047C38.387,20.679,38,21.545,38,22.5c0,0.179,0.014,0.356,0.041,0.53\n"+
"            C36.327,23.255,35,24.726,35,26.5c0,0.675,0.19,1.318,0.547,1.874C35.187,29.028,35,29.751,35,30.5\n"+
"            c0,0.616,0.126,1.218,0.37,1.777C34.5,33.115,34,34.266,34,35.5c0,2.481,2.019,4.5,4.5,4.5c0.354,0,0.704-0.042,1.047-0.124\n"+
"            c0.142,0.125,0.299,0.228,0.453,0.333V45z M44.966,31.183C44.98,31.287,45,31.392,45,31.5c0,0.675-0.269,1.309-0.755,1.785\n"+
"            c-0.192,0.188-0.301,0.446-0.301,0.715s0.108,0.526,0.301,0.715C44.731,35.191,45,35.825,45,36.5c0,1.379-1.121,2.5-2.5,2.5\n"+
"            c-0.729,0-1.423-0.33-1.905-0.906c-0.194-0.232-0.478-0.358-0.767-0.358c-0.128,0-0.258,0.024-0.381,0.075\n"+
"            C39.143,37.937,38.823,38,38.5,38c-1.379,0-2.5-1.121-2.5-2.5c0-0.863,0.444-1.654,1.189-2.117\n"+
"            c0.234-0.146,0.398-0.384,0.452-0.655c0.055-0.271-0.007-0.554-0.169-0.778C37.164,31.519,37,31.018,37,30.5\n"+
"            c0-0.709,0.308-1.239,0.565-1.559c0.328-0.406,0.288-0.996-0.092-1.354C37.168,27.298,37,26.912,37,26.5\n"+
"            c0-0.827,0.673-1.5,1.5-1.5c0.472,0,0.909,0.223,1.198,0.611c0.188,0.253,0.485,0.402,0.802,0.402h0.001\n"+
"            c0.316,0,0.613-0.15,0.802-0.404c0.027-0.036,0.057-0.069,0.086-0.103c0.221-0.247,0.306-0.588,0.225-0.909\n"+
"            c-0.08-0.322-0.314-0.583-0.626-0.697C40.396,23.685,40,23.121,40,22.5c0-0.827,0.673-1.5,1.5-1.5s1.5,0.673,1.5,1.5\n"+
"            c0,0.462-0.212,0.795-0.389,0.993c-0.222,0.248-0.306,0.588-0.225,0.909c0.08,0.322,0.314,0.583,0.626,0.697\n"+
"            C43.604,25.315,44,25.879,44,26.5c0,0.258-0.071,0.51-0.213,0.75c-0.254,0.432-0.149,0.984,0.245,1.294\n"+
"            C44.647,29.026,45,29.739,45,30.5c0,0.108-0.02,0.213-0.04,0.354C44.945,30.951,44.951,31.085,44.966,31.183z\"/>\n"+
"        <path d=\"M40.255,34.033c-0.098-0.026-0.269-0.083-0.32-0.179c-0.072-0.134-0.031-0.403,0.008-0.52\n"+
"            c0.184-0.516-0.082-1.084-0.597-1.273c-0.518-0.188-1.093,0.074-1.284,0.593c-0.043,0.116-0.402,1.161,0.098,2.121\n"+
"            c0.213,0.409,0.661,0.948,1.586,1.191C39.831,35.989,39.916,36,40.001,36c0.442,0,0.848-0.297,0.966-0.745\n"+
"            C41.107,34.721,40.789,34.174,40.255,34.033z\"/>\n"+
"        <path d=\"M41.242,28.03c-0.535-0.138-1.125,0.175-1.26,0.712c-0.134,0.536,0.146,1.063,0.681,1.197\n"+
"            c0.003,0.001,0.213,0.11,0.469,0.557C41.316,30.819,41.653,31,42.001,31c0.168,0,0.339-0.042,0.495-0.132\n"+
"            c0.479-0.274,0.646-0.885,0.372-1.364C42.208,28.349,41.457,28.083,41.242,28.03z\"/>\n"+
"    </g>\n"+
"</g>\n"+
"</svg>\n"+
"                </div>\n"+
"            </div>\n"+
"            <div class=cui-card__content>\n"+
"                <p class=cui-card__content-header>{{ 'cui-new-TLO' | translate }}</p>\n"+
"                \n"+
"                <button class=cui-card__button ui-sref=invitation.tlo>{{ 'select' | translate }}</button>\n"+
"            </div>\n"+
"            \n"+
"        </div>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/invitation/tlo/tlo.html',
"  <div class=\"class-toggle cui-modal\" ng-if=tlo.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'cui-invite-tlo-success' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"<ng-form name=edit novalidate>\n"+
"  <div class=cui-users__edit> \n"+
"    <div class=cui-users__main-container>\n"+
"      \n"+
"      <div class=cui-loading__container ng-if=tlo.loader>\n"+
"        <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"      </div>\n"+
"   \n"+
"      <span class=cui-field-val__field>{{'cui-invite-tlo'|translate}} </span>\n"+
"      <div class=cui-action__actions>\n"+
"          <svg ui-sref=organization.profile({orgId:tlo.stateParamsOrgId}) xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"          <defs>\n"+
"            <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"            <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"                <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"                <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"                <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"            </filter>\n"+
"          </defs>\n"+
"          <g id=close-with-shadow fill=none fill-rule=evenodd>\n"+
"              <g id=Oval-73 transform=\"translate(3 1)\">\n"+
"                  <use fill=#000 filter=url(#filter-2) xlink:href=#path-1 />\n"+
"                  <use fill=currentColor xlink:href=#path-1 />\n"+
"              </g>\n"+
"              <path d=\"M26.022 20.672l4.006-4.006c.788-.787.787-2.052.006-2.833l-.195-.195c-.788-.787-2.05-.778-2.834.006L23 17.65l-4.006-4.006c-.787-.788-2.052-.787-2.833-.006l-.194.195c-.788.787-.778 2.05.006 2.833l4.006 4.006-4.006 4.006c-.788.787-.787 2.053-.006 2.833l.195.196c.788.788 2.05.778 2.834-.006L23 23.695l4.006 4.005c.787.788 2.052.787 2.833.006l.194-.195c.788-.786.778-2.048-.006-2.832l-4.006-4.006z\" fill=#fff />\n"+
"          </g>\n"+
"          </svg>\n"+
"      </div>\n"+
"\n"+
"      <div class=cui-users__profile>\n"+
"        \n"+
"        <div class=cui-users__profile-info>\n"+
"          <div class=cui-users__info-block>\n"+
"            <div class=cui-users__info-block>\n"+
"              \n"+
"                     <p class=cui-users__password-success style=color:red ng-if=tlo.sendInvitationError>{{'error-generic' | translate}}</p><br>    \n"+
"            <div class=cui-users__info-block>\n"+
"                <span class=cui-field-val__field>{{'cui-email'|translate}} {{'cui-subject'|translate}}* <input type=text name=emailSubject ng-model=tlo.emailSubject class=cui-input ng-disabled=true placeholder=\"{{'cui-tlo-sub'|translate}}\"></span>\n"+
"            </div>\n"+
"            <div class=cui-users__info-block>\n"+
"              \n"+
"              <span class=cui-field-val__field>{{'cui-email'|translate}} {{'cui-address'|translate}}{{'cui-es'|translate}}* \n"+
"                <div class=cui-error ng-if=tlo.emailAddressError>\n"+
"                  <div class=cui-error__message>{{'cui-this-is-not-valid-email' | translate}}</div>\n"+
"                </div>\n"+
"                <textarea name=emailAddress ng-required=true class=cui-text-area style=\"min-width: 800px\" ng-model=tlo.emailAddress placeholder=\"{{'cui-email-recipt'|translate}}\"></textarea></span>   \n"+
"            </div>\n"+
"          </div>\n"+
"        </div>\n"+
"        <div class=cui-applications__submit-options align=right>\n"+
"          <a class=cui-link ng-click=\"base.goBack('invitation.inviteSelect')\">{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-class=\"{'cui-button--error' : !edit.$valid}\" ng-click=edit.$valid&&tlo.sendInvitation()>\n"+
"              <span ng-if=!tlo.sendInvitationError>{{'cui-send-invitation' | translate}}</span>\n"+
"              <span ng-if=\"tlo.sendInvitationError===true\">{{'cui-error-try-again' | translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/invitation/user/user.html',
"  <div class=\"class-toggle cui-modal\" ng-if=user.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'cui-invite-user-success' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"<ng-form name=edit novalidate>\n"+
"  <div class=cui-users__edit> \n"+
"\n"+
"    <div class=cui-users__main-container>\n"+
"      \n"+
"      <div class=cui-loading__container ng-if=user.loader>\n"+
"        <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"      </div>\n"+
"      \n"+
"      <span class=cui-field-val__field>{{'cui-invite-user'|translate}}</span>\n"+
"      <div class=cui-action__actions>\n"+
"          <svg ui-sref=organization.profile({orgId:user.stateParamsOrgId}) xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"          <defs>\n"+
"              <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"              <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"                  <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"                  <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"                  <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"              </filter>\n"+
"          </defs>\n"+
"          <g id=close-with-shadow fill=none fill-rule=evenodd>\n"+
"              <g id=Oval-73 transform=\"translate(3 1)\">\n"+
"                  <use fill=#000 filter=url(#filter-2) xlink:href=#path-1 />\n"+
"                  <use fill=currentColor xlink:href=#path-1 />\n"+
"              </g>\n"+
"              <path d=\"M26.022 20.672l4.006-4.006c.788-.787.787-2.052.006-2.833l-.195-.195c-.788-.787-2.05-.778-2.834.006L23 17.65l-4.006-4.006c-.787-.788-2.052-.787-2.833-.006l-.194.195c-.788.787-.778 2.05.006 2.833l4.006 4.006-4.006 4.006c-.788.787-.787 2.053-.006 2.833l.195.196c.788.788 2.05.778 2.834-.006L23 23.695l4.006 4.005c.787.788 2.052.787 2.833.006l.194-.195c.788-.786.778-2.048-.006-2.832l-4.006-4.006z\" fill=#fff />\n"+
"          </g>\n"+
"          </svg>\n"+
"      </div>\n"+
"      <div class=cui-users__profile>\n"+
"        \n"+
"        <div class=cui-users__profile-info ng-if=!user.selectOrgFromList>\n"+
"              <div class=cui-field-val ng-if=user.userSelectedOrg.originalObject.name>\n"+
"                  <span class=cui-field-val__field>{{user.userSelectedOrg.originalObject.name}}</span>\n"+
"                  <span class=cui-field-val__val><nav class=cui-breadcrumb>\n"+
"                      <ul class=cui-breadcrumb__links>\n"+
"                        <li class=cui-breadcrumb__link>\n"+
"                          <a class=cui-link ng-click=\"user.selectOrgFromList=true\">\n"+
"                            {{'change-org' | translate}}\n"+
"                          </a>\n"+
"                        </li>\n"+
"                      </ul>\n"+
"                    </nav>\n"+
"                  </span>\n"+
"              </div>\n"+
"              \n"+
"              <p class=cui-users__password-success style=color:red ng-if=user.sendInvitationError>{{'error-generic' | translate}}</p>\n"+
"              <div class=cui-users__info-block>\n"+
"\n"+
"                     <div class=cui-error ng-if=!user.userSelectedOrg>\n"+
"                      <div class=cui-error__message>{{'cui-this-field-is-required' | translate}}</div>\n"+
"                    </div>\n"+
"                    <div auto-complete input-name=country pause=100 placeholder=\"{{'cui-invite-user-select' | translate}}\" selected-object=user.userSelectedOrg local-data=user.organizationList search-fields=name title-field=name input-class=cui-input match-class=highlight auto-match=true field-required=user.userSelectedOrg></div>\n"+
"              </div>\n"+
"              <div class=cui-users__info-block>\n"+
"                  <span class=cui-field-val__field>{{'cui-email'|translate}} {{'cui-subject'|translate}}* <input type=text name=emailSubject placeholder=\"{{'cui-invite-user-sub'|translate}} {{user.userSelectedOrg.originalObject.name}}\" class=cui-input ng-disabled=true></span>\n"+
"              </div>\n"+
"              <div class=cui-users__info-block>\n"+
"                  <span class=cui-field-val__field>{{'cui-email'|translate}} {{'cui-address' |translate}}{{'cui-es'|translate}}* \n"+
"                    <div class=cui-error ng-if=user.emailAddressError>\n"+
"                      <div class=cui-error__message>{{'cui-this-is-not-valid-email' | translate}}</div>\n"+
"                    </div>\n"+
"                  \n"+
"                <textarea name=emailAddress ng-required=true class=cui-text-area style=\"min-width: 800px\" ng-model=user.emailAddress placeholder=\"{{'cui-email-recipt'|translate}}\"></textarea></span>        \n"+
"              </div>\n"+
"          \n"+
"          <div class=cui-applications__submit-options align=right>\n"+
"          <a class=cui-link ng-click=\"base.goBack('invitation.inviteSelect')\">{{'cui-cancel' | translate}}</a>\n"+
"          <button class=cui-button ng-class=\"{'cui-button--error' : !edit.$valid}\" ng-click=edit.$valid&&user.sendInvitation()>\n"+
"              <span ng-if=!user.sendInvitationError>{{'cui-send-invitation' | translate}}</span>\n"+
"              <span ng-if=\"user.sendInvitationError===true\">{{'cui-error-try-again' | translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"        </div>\n"+
"         \n"+
"        <div class=cui-users__profile-info ng-if=user.selectOrgFromList>\n"+
"          <div class=cui-users__info-block>\n"+
"            \n"+
"            <div class=cui-tree cui-tree=user.organizationHierarchyRoot cui-tree-leaf-display=\"(object.name | cuiI18n)\" cui-tree-leaf-click-callback=user.goToOrgPrfile></div>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/partials/breadcrumbs.html',
"<nav class=cui-breadcrumb>\n"+
"  <ul class=cui-breadcrumb__links>\n"+
"    <li class=cui-breadcrumb__link>\n"+
"      <a ui-sref=organization.profile({orgId:base.user.organization.id}) ui-sref-active-for=organization.profile>\n"+
"        {{'cui-org-profile' | translate}}\n"+
"      </a>\n"+
"    </li>\n"+
"    <li class=cui-breadcrumb__link ng-if=base.accessByAnyAdmin()>\n"+
"      <a ui-sref=organization.hierarchy({orgId:base.user.organization.id}) ui-sref-active-for=organization.hierarchy>\n"+
"        {{'cui-org-hierarchy' | translate}}\n"+
"      </a>\n"+
"    </li>\n"+
"    <li class=cui-breadcrumb__link ng-if=base.accessByAnyAdmin()>\n"+
"      <a ui-sref=organization.directory.userList({orgId:base.user.organization.id}) ui-sref-active-for=organization.directory>\n"+
"        {{'directory' | translate}}\n"+
"      </a>\n"+
"    </li>\n"+
"    <li class=cui-breadcrumb__link ng-if=base.accessByAnyAdmin()>\n"+
"       \n"+
"      <a ui-sref=organization.applications({orgId:base.user.organization.id}) ui-sref-active-for=organization.applications>\n"+
"        {{'cui-applications' | translate}}\n"+
"      </a>\n"+
"    </li>\n"+
"    \n"+
"  </ul>\n"+
"</nav>\n");



$templateCache.put('app/modules/organization/partials/close-with-shadow.html',
"<svg xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--close\" ng-if=\"base.user.organization.id!==prevStateParams.orgId\" ng-click=base.goBack(prevState.name,prevState.params) preserveAspectRatio=\"xMidYMid meet\" viewBox=\"3 0 42 42\" href=\"#/organization/user-details?userID=%5BS-3RDWAVE-DEV01%5DS-3RDWAVE-DEV01_ADMIN\">\n"+
"  <defs>\n"+
"    <ellipse id=path-1 cx=20 cy=19.6721311 rx=20 ry=19.6721311></ellipse>\n"+
"    <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"      <feOffset dx=0 dy=2 in=SourceAlpha result=shadowOffsetOuter1></feOffset>\n"+
"      <feGaussianBlur stdDeviation=1.5 in=shadowOffsetOuter1 result=shadowBlurOuter1></feGaussianBlur>\n"+
"      <feColorMatrix values=\"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.15 0\" type=matrix in=shadowBlurOuter1></feColorMatrix>\n"+
"    </filter>\n"+
"  </defs>\n"+
"  <use class=cui-icon__ref xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-with-shadow></use>\n"+
"</svg>");



$templateCache.put('app/modules/organization/partials/invite-actions.html',
"<div class=cui-action__action-container id=invitation-button ng-click=\"orgDirectory.invitationClicked=!orgDirectory.invitationClicked\" off-click=\"orgDirectory.invitationClicked=false\">\n"+
"  <svg xmlns=http://www.w3.org/2000/svg class=\"cui-action__icon cui-action__icon--invite\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 48 48\">\n"+
"    <defs>\n"+
"      <ellipse id=path-1 cx=20 cy=19.672 rx=20 ry=19.672 />\n"+
"      <filter x=-50% y=-50% width=200% height=200% filterUnits=objectBoundingBox id=filter-2>\n"+
"        <feOffset dy=3 in=SourceAlpha result=shadowOffsetOuter1 />\n"+
"        <feGaussianBlur stdDeviation=2 in=shadowOffsetOuter1 result=shadowBlurOuter1 />\n"+
"        <feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.27 0\" in=shadowBlurOuter1 />\n"+
"      </filter>\n"+
"    </defs>\n"+
"    <use xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#invite></use>\n"+
"  </svg>\n"+
"  \n"+
"  <div class=\"cui-popover cui-popover--top cui-popover__sort-popover\" tether target=#invitation-button attachment=\"top middle\" target-attachment=\"bottom middle\" offset=\"-10px 0\" ng-if=orgDirectory.invitationClicked>\n"+
"    <p>{{'invite-user' | translate}}</p>\n"+
"    <p>{{'invite-division' | translate}}</p>\n"+
"  </div>\n"+
"</div>");



$templateCache.put('app/modules/organization/partials/mobileNav.html',
"<cui-mobile-nav show-if=base.orgMobileNav links=\"{\n"+
"		'organization.profile':{stateParams:{orgId:orgId},label:('cui-org-profile' | translate)},\n"+
"		'organization.hierarchy':{stateParams:{orgId:orgId},label:('cui-org-hierarchy' | translate)},\n"+
"		'organization.directory.userList':{stateParams:{orgId:orgId},label:('directory' | translate)},\n"+
"		'organization.applications':{stateParams:{orgId:orgId},label:('cui-applications' | translate)}\n"+
"	}\" label=label|translate>\n"+
"</cui-mobile-nav>");



$templateCache.put('app/modules/organization/profile/organization-profile.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/profile target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=\"cui-organization cui-organization-dir\">\n"+
"  \n"+
"  <div class=cui-action>\n"+
"    <nav ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\" onload=\"orgId=orgProfile.stateParamsOrgId\"></nav>\n"+
"    <nav ng-if=\"!base.loader.for['orgProfile.init']\" ng-include=\"'app/modules/organization/partials/mobileNav.html'\" ng-init=\"orgName=orgProfile.organization.name\"></nav>\n"+
"    \n"+
"              <div class=cui-action__actions>\n"+
"                <div class=cui-action__action-container ng-if=base.accessByAnyAdmin() ng-click=\"orgProfile.granted.sortClicked =! orgProfile.granted.sortClicked\" id=sort-buttons off-click=\"orgProfile.granted.sortClicked=false\">\n"+
"               \n"+
"              <svg version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:xlink=http://www.w3.org/1999/xlink x=0px y=0px width=48px height=48px viewBox=\"0 0 48 48\" enable-background=\"new 0 0 48 48\" xml:space=preserve>\n"+
"              <g id=mail-open>\n"+
"                <path d=\"M43,47H5c-1.7,0-3-1.3-3-3V21.3c0-1.1,0.5-2.1,1.2-2.9l4-3.8L8.6,16l-4,3.8C4.2,20.2,4,20.7,4,21.3V44\n"+
"                  c0,0.6,0.4,1,1,1h38c0.6,0,1-0.4,1-1V21.3c0-0.5-0.2-1.1-0.6-1.4l-4-3.8l1.4-1.4l4,3.8c0.8,0.8,1.2,1.8,1.2,2.9V44\n"+
"                  C46,45.7,44.7,47,43,47z\"/>\n"+
"                <path d=M30.3,7.4l-5-4.7c-0.8-0.7-2-0.7-2.8,0l-5,4.7L16.3,6l5-4.7c1.5-1.5,4-1.5,5.5,0l5,4.7L30.3,7.4z />\n"+
"                <path d=\"M3.7,46.7l-1.4-1.4l13.4-13.4c0.6-0.6,1.3-0.9,2.1-0.9h13.3c0.8,0,1.6,0.3,2.2,1l12.4,13.4l-1.5,1.4\n"+
"                  L31.9,33.3c-0.2-0.2-0.5-0.3-0.7-0.3H17.8c-0.3,0-0.5,0.1-0.7,0.3L3.7,46.7z\"/>\n"+
"                \n"+
"                  <rect x=1.3 y=27 transform=\"matrix(0.7926 0.6097 -0.6097 0.7926 19.042 1.427599e-002)\" width=16.4 height=2 />\n"+
"                <rect x=38.5 y=20.6 transform=\"matrix(0.6726 0.74 -0.74 0.6726 33.6509 -20.0629)\" width=2 height=14.9 />\n"+
"                <path d=M41,27h-2V9c0-0.6-0.4-1-1-1H10C9.4,8,9,8.4,9,9v18H7V9c0-1.7,1.3-3,3-3h28c1.7,0,3,1.3,3,3V27z />\n"+
"                <path d=M20,15h-6c-0.6,0-1-0.4-1-1s0.4-1,1-1h6c0.6,0,1,0.4,1,1S20.6,15,20,15z />\n"+
"                <path d=M34,19H14c-0.6,0-1-0.4-1-1s0.4-1,1-1h20c0.6,0,1,0.4,1,1S34.6,19,34,19z />\n"+
"                <path d=M34,23H14c-0.6,0-1-0.4-1-1s0.4-1,1-1h20c0.6,0,1,0.4,1,1S34.6,23,34,23z />\n"+
"              </g>\n"+
"              </svg>\n"+
"                \n"+
"                <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#sort-buttons pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=orgProfile.granted.sortClicked style=width:191px>\n"+
"                  <div class=cui-popover__row>\n"+
"                    <span ui-sref=invitation.inviteUser>{{'cui-new-user' | translate}}</span>\n"+
"                  </div>\n"+
"                  <div class=cui-popover__row>\n"+
"                     <span ui-sref=invitation.division>{{'cui-new-division' | translate}}</span>\n"+
"                  </div>\n"+
"                  <div class=cui-popover__row>\n"+
"                     <span ui-sref=invitation.tlo>{{'cui-new-TLO' | translate}}</span>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </div>\n"+
"              </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-organization__main-container>\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['orgProfile.init']\">\n"+
"        <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['orgProfile.init']\">{{'error-generic' | translate}}</p>\n"+
"\n"+
"    \n"+
"    <div ng-if=\"!base.loader.for['orgProfile.init'] && orgProfile.organization\">\n"+
"      <h3 class=cui-organization__page-title>{{orgProfile.organization.name}}</h3>\n"+
"      <h4 class=cui-field-val__field ng-if=orgProfile.securityAdmins>{{'cui-security-admin' | translate}}</h4>\n"+
"\n"+
"      <div class=cui-organization__row>\n"+
"        \n"+
"        <div class=cui-organization__info-block>\n"+
"          <div class=cui-organization__admin-block-wrapper ng-if=orgProfile.securityAdmins>\n"+
"            <div class=cui-organization__admin-block ng-repeat=\"admin in orgProfile.securityAdmins track by admin.id\">\n"+
"              \n"+
"              <div class=cui-field-val>\n"+
"                <span class=cui-field-val__field>{{'cui-name' | translate}}: </span>\n"+
"                <span class=cui-field-val__val>{{admin.name.given}} {{admin.name.surname}}</span>\n"+
"              </div>\n"+
"              \n"+
"              <div class=cui-field-val>\n"+
"                <span class=cui-field-val__field>{{'username' | translate}}: </span>\n"+
"                <span class=cui-field-val__val>{{admin.username}}</span>\n"+
"              </div>\n"+
"              \n"+
"              <div class=cui-field-val>\n"+
"                <span class=cui-field-val__field>{{'title' | translate}}: </span>\n"+
"                <span class=cui-field-val__val>{{admin.title}}</span>\n"+
"              </div>\n"+
"              \n"+
"              <div class=cui-field-val>\n"+
"                <span class=cui-field-val__field>{{'cui-phone' | translate}}: </span>\n"+
"                <span class=cui-field-val__val>{{admin.phones[0].number}}</span>\n"+
"              </div>\n"+
"              \n"+
"              <div class=cui-field-val>\n"+
"                <span class=cui-field-val__field>{{'cui-email' | translate}}: </span>\n"+
"                <span class=cui-field-val__val><a class=cui-link href=mailto:{{admin.email}}>{{admin.email}}</a></span>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"\n"+
"          \n"+
"          <div class=cui-organization__admin-block-wrapper>\n"+
"            <div class=\"cui-field-val cui-field-val--stack cui-organization__admin-block cui-organization__admin-block__right\">\n"+
"              <h4 class=cui-field-val__field>{{'cui-address' | translate}}: </h4>\n"+
"              <span class=cui-field-val__val>{{orgProfile.organization.addresses[0].streets[0]}}</span>\n"+
"              <span class=cui-field-val__val>{{orgProfile.organization.addresses[0].city}}</span>\n"+
"              <span class=cui-field-val__val>{{orgProfile.organization.addresses[0].state}}, {{orgProfile.organization.addresses[0].postal}}</span>\n"+
"              <span class=cui-field-val__val>{{orgProfile.organization.phones[0].number}}</span>\n"+
"            </div>\n"+
"\n"+
"            \n"+
"            <div class=\"cui-organization__admin-block cui-organization__admin-block__right\">\n"+
"              \n"+
"              <div class=cui-field-val ng-if=orgProfile.organization.url>\n"+
"                <span class=cui-field-val__field>{{'url' | translate}}: </span>\n"+
"                <span class=cui-field-val__val><a class=cui-link ng-href={{orgProfile.organization.url}}>{{orgProfile.organization.url}}</a></span>\n"+
"              </div>\n"+
"              <div class=cui-field-val ng-if=orgProfile.passwordPolicy>\n"+
"                <span class=cui-field-val__field>{{'cui-password-policy' | translate}}: </span>\n"+
"                <span class=cui-field-val__val>{{orgProfile.passwordPolicy.name}}</span>\n"+
"              </div>\n"+
"              <div class=cui-field-val ng-if=orgProfile.authenticationPolicy>\n"+
"                <span class=cui-field-val__field>{{'cui-authentication-policy' | translate}}: </span>\n"+
"                <span class=cui-field-val__val>{{orgProfile.authenticationPolicy.name}}</span>\n"+
"              </div>\n"+
"            </div>\n"+
"            \n"+
"            <div class=\"cui-organization__admin-block cui-organization__admin-block__right\" ng-if=orgProfile.organization.attributes>\n"+
"              <h4 class=cui-field-val__field>{{'cui-more-information' | translate}}:</h4>\n"+
"              <div class=cui-field-val ng-repeat=\" attribute in orgProfile.organization.attributes\">\n"+
"                <span class=cui-field-val__field>{{attribute.name}}: </span>\n"+
"                <span class=cui-field-val__val>{{attribute.value}}</span>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/newGrant/claims/claims.html',
"<div class=\"class-toggle cui-modal\" ng-if=newGrantClaims.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'grants-assigned' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"<ng-form name=grantApp novalidate>\n"+
"<div class=cui-org-claims>\n"+
"<div class=cui-applications>\n"+
"  <div class=cui-action>\n"+
"    <div class=cui-action__title ng-hide=\"base.loader.for['newGrantClaims.user']\" ng-click=\"base.goBack('organization.directory.userDetails',newGrantClaims.prevState.params)\">\n"+
"      &#60; {{newGrantClaims.user.name.given}} {{newGrantClaims.user.name.surname}} - {{'new-grant' | translate}}\n"+
"    </div>\n"+
"    <div class=cui-action__actions>\n"+
"      <ng-include onload=\"prevState=newGrantClaims.prevState\" src=\"'app/modules/organization/partials/close-with-shadow.html'\"></ng-include>\n"+
"    </div>\n"+
"  </div>\n"+
"  <section class=\"cui-action cui-action--alt\">\n"+
"    <h2 class=cui-action__title ng-click=\"base.goBack('organization.requests.newGrantSearch',newGrantClaims.prevState.params)\">\n"+
"      &#60; {{'select-claims'|translate}}\n"+
"    </h2>\n"+
"    <div class=cui-action__actions>\n"+
"      <div class=flex_row id=cui-applications__requested-apps ng-click=\"newGrantClaims.requestPopover=!newGrantClaims.requestPopover\" off-click=\"newGrantClaims.requestPopover=false\">\n"+
"        <cui-icon cui-svg-icon=cui:folder id=cui-applications__requested-apps svg-class=\"cui-icon cui-icon--folder\" use-class=cui-icon__ref viewbox=\"0 0 40 33\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': newGrantClaims.numberOfRequests != 0}\">{{newGrantClaims.numberOfRequests}}</sup>\n"+
"      </div>\n"+
"        \n"+
"        <div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=newGrantClaims.requestPopover constraints=\"[{to:'scrollParent',attachment:'together',pin:['right']}]\">\n"+
"          <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"          <div class=cui-action__popover-section>\n"+
"            <span ng-if=\"newGrantClaims.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"            <ul ng-if=\"newGrantClaims.numberOfRequests > 0\">\n"+
"                <li ng-repeat=\"application in newGrantClaims.appsBeingRequestedforPopup\">{{application.name | cuiI18n}}</li>\n"+
"                <li ng-repeat=\"package in newGrantClaims.packagesBeingRequested\">{{packages.name | cuiI18n}}</li>\n"+
"            </ul>\n"+
"          </div>\n"+
"        </div>\n"+
"    </div>\n"+
"  </section>\n"+
"  <div class=cui-organization__main-container>\n"+
"  <div>\n"+
"    <div class=cui-org-claims__claim ng-repeat=\"(applicationId, application) in newGrantClaims.appsBeingRequested\" ng-init=\"index=$index\">\n"+
"\n"+
"      <div class=cui-media>\n"+
"        \n"+
"        <div class=cui-media__image-container>\n"+
"          <div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar=application.iconUrl>\n"+
"          </div>\n"+
"        </div>\n"+
"\n"+
"        <div class=cui-media__body>\n"+
"\n"+
"          \n"+
"          <h3 class=cui-media__title>{{application.name | cuiI18n}}</h3>\n"+
"          <h3 ng-if=application.bundledApps class=\"cui-media__title cui-media__title-margin__top\">{{'bundled-applications' | translate}}</h3>\n"+
"          <div ng-if=application.bundledApps ng-repeat=\"bundledApp in application.bundledApps\">\n"+
"              <span>{{bundledApp.name|cuiI18n}}</span>\n"+
"          </div> \n"+
"          <div class=cui-applications__review-text-input>\n"+
"            <h3 class=\"cui-media__title cui-media__title-margin__top\">{{'grant-reason' | translate}}</h3>\n"+
"            <div class=cui-error ng-messages=\"grantApp['text_area'+application.id].$error\" ng-if=\"grantApp['text_area'+application.id].$dirty\">\n"+
"              <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"            </div>\n"+
"            <div class=cui-wizard__field-row>\n"+
"              <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"                <textarea name=\"{{'text_area'+application.id}}\" class=cui-text-area ng-model=newGrantClaims.packageRequests[application.servicePackage.id].reason ng-required=true></textarea>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"          \n"+
"  \n"+
"  \n"+
"\n"+
"            \n"+
"  \n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div class=cui-org-claims__row>\n"+
"        \n"+
"        \n"+
"        <div ng-if=\"base.loader.for['newGrantClaims.claims' + index]\">\n"+
"          \n"+
"        </div>\n"+
"        <div class=cui-org-claims__col ng-if=\"!base.loader.for['newGrantClaims.claims' + index]\" ng-repeat=\"claim in newGrantClaims['claims' + index]\">\n"+
"          <h3 class=bold>{{claim.name | cuiI18n}}</h3>\n"+
"          <ul class=cui-checkbox__group>\n"+
"            <div class=cui-checkbox__group ng-repeat=\"claimValue in claim.claimValues\">\n"+
"              <li class=cui-checkbox__container>\n"+
"                <input class=cui-checkbox type=checkbox ng-model=\"newGrantClaims.packageRequests[\n"+
"                application.servicePackage.id].claims[claim.claimId][claimValue.claimValueId]\" id=\"{{claimValue.name | cuiI18n}}\">\n"+
"                <label class=cui-checkbox__label for=\"{{claimValue.name | cuiI18n}}\">{{claimValue.name | cuiI18n}}</label>\n"+
"              </li>\n"+
"            </div>\n"+
"          </ul>\n"+
"        </div>\n"+
"\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <button disable-animate class=cui-button ng-class=\"{'cui-button--error':!grantApp.$valid}\" ng-if=\"!base.loader.for['newGrantClaims.submit'] && !newGrantClaims.error\" ng-click=grantApp.$valid&&newGrantClaims.submit()>{{'submit-grant-update' | translate}}</button>\n"+
"    <button disable-animate class=cui-button ng-if=\"base.loader.for['newGrantClaims.submit']\">\n"+
"      <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"    </button>\n"+
"    <button disable-animate class=cui-button ng-class=\"{'cui-button--error':!grantApp.$valid}\" ng-if=\"!base.loader.for['newGrantClaims.submit'] && newGrantClaims.error\" ng-click=grantApp.$valid&&newGrantClaims.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"\n"+
"  </div> \n"+
"  </div>\n"+
"</div>\n"+
"</div>\n"+
"<ng-form>\n"+
"\n"+
"</ng-form></ng-form>");



$templateCache.put('app/modules/organization/requests/newGrant/requests-newGrant.html',
"<main class=cui-organization__new-request>\n"+
"  <div class=cui-action ng-hide=\"base.loader.for['newGrant.user']\">\n"+
"    <span class=\"cui-action__title cui-action__title--dark\" ng-click=\"base.goBack('organization.directory.userDetails',newGrant.prevState.params)\">&#60; {{newGrant.user.name.given}} {{newGrant.user.name.surname}} - {{'new-grant' | translate}}</span>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"      <ng-include src=\"'app/modules/organization/partials/close-with-shadow.html'\" onload=\"prevState=newGrant.prevState\"></ng-include>\n"+
"    </div>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-applications__new-request>\n"+
"      <section class=\"cui-action cui-action--alt\">\n"+
"          <h2 class=cui-action__title>{{'select-applications' | translate}}</h2>\n"+
"          <div class=cui-action__actions>\n"+
"              <div class=flex_row id=cui-applications__requested-apps ng-click=\"newGrant.requestPopover=!newGrant.requestPopover\" off-click=\"newGrant.requestPopover=false\">\n"+
"                <cui-icon cui-svg-icon=cui:folder id=cui-applications__requested-apps svg-class=\"cui-icon cui-icon--folder\" use-class=cui-icon__ref viewbox=\"0 0 40 33\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': newGrant.numberOfRequests != 0}\">{{newGrant.numberOfRequests}}</sup>\n"+
"              </div>\n"+
"                \n"+
"                <div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=newGrant.requestPopover constraints=\"[{to:'scrollParent',attachment:'together',pin:['right']}]\">\n"+
"                  <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"                  <div class=cui-action__popover-section>\n"+
"                    <span ng-if=\"newGrant.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"                    <ul ng-if=\"newGrant.numberOfRequests > 0\">\n"+
"                        <li ng-repeat=\"application in newGrant.appsBeingRequested\">{{application.name | cuiI18n}}</li>\n"+
"                        <li ng-repeat=\"package in newGrant.packagesBeingRequested\">{{packages.name | cuiI18n}}</li>\n"+
"                    </ul>\n"+
"                  </div>\n"+
"                  <span ng-if=\"newGrant.numberOfRequests > 0\" class=cui-action__popover-button ng-click=newGrant.goToClaimSelection()>{{'submit-request' | translate}}</span>\n"+
"                </div>\n"+
"          </div>\n"+
"      </section>\n"+
"      <section class=cui-applications__main-container>\n"+
"        \n"+
"          \n"+
"          <div class=cui-applications__search-options>\n"+
"              <div class=cui-input-button>\n"+
"                  \n"+
"                  <input type=text class=cui-input-button__input id=search-by-text ng-model=newGrant.search placeholder=\"{{'search-by-app-name' | translate}}\" on-enter=newGrant.searchCallback focus-if>\n"+
"                  <button class=cui-input-button__button ng-click=newGrant.searchCallback(newGrant.search)>{{'go' | translate}}</button>\n"+
"              </div>\n"+
"              <div class=cui-applications__center-text>{{'or' | translate}}</div>\n"+
"              <a class=cui-link ng-click=newGrant.searchCallback()>{{'show-all' | translate}}</a>\n"+
"          </div>\n"+
"          <section>\n"+
"              <h3 class=cui-sr-only>{{'cui-browse-by-category' | translate}}</h3>\n"+
"              <p class=cui-error ng-if=newGrant.categoryError>{{'error-generic'|translate}}</p>\n"+
"              <div ng-repeat=\"category in newGrant.categories\" ng-if=\"!base.loader.for['newGrant.categories']\">\n"+
"                  <section class=cui-applications__categories ng-click=\"newGrant.searchCallback({type:'category', value:category.name})\">\n"+
"                      <h4 class=cui-applications__category>{{ category.name | cuiI18n }}</h4>\n"+
"                      <cui-icon cui-svg-icon=cui:chevron18 svg-class=\"cui-icon cui-icon--light-grey\" use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                  </section>\n"+
"              </div>\n"+
"          </section>\n"+
"      </section>\n"+
"  </div>\n"+
"</main>");



$templateCache.put('app/modules/organization/requests/newGrant/search/search.html',
"<main class=cui-organization__new-request-search>\n"+
"    <h2 class=cui-sr-only>{{'cui-new-grant-search-results' | translate}}</h2>\n"+
"    <section class=cui-action>\n"+
"        <h3 class=cui-sr-only>{{'cui-username-close'|translate}}</h3>\n"+
"        <div class=cui-action__title ng-click=\"base.goBack('organization.directory.userDetails',newGrantSearch.prevState.params)\">\n"+
"          <span ng-if=\"!base.loader.for['newGrantSearch.user']\">\n"+
"            &#60; {{newGrantSearch.user.name.given}} {{newGrantSearch.user.name.surname}} - {{'new-grant' | translate}}\n"+
"          </span>\n"+
"        </div>\n"+
"        <div class=cui-action__actions>\n"+
"           <ng-include onload=\"prevState=newGrantSearch.prevState\" src=\"'app/modules/organization/partials/close-with-shadow.html'\"></ng-include>\n"+
"        </div>\n"+
"    </section>\n"+
"    <section class=\"cui-action cui-action--alt\">\n"+
"        <h3 class=cui-sr-only>{{'cui-back-navigation-requests'|translate}}</h3>\n"+
"        <div class=cui-action__title ng-if=!newGrantSearch.search.category ng-click=\"base.goBack('organization.requests.newGrant',newGrantSearch.prevState.params)\">&#60; {{'categories' | translate}}</div>\n"+
"        <span class=cui-action__title ng-if=newGrantSearch.search.category ng-click=\"base.goBack('organization.requests.newGrant',newGrantSearch.prevState.params)\">&#60; {{newGrantSearch.search.category}}</span>\n"+
"        <div class=cui-action__actions>\n"+
"            <div class=flex_row ng-click=\"newGrantSearch.requestPopover=!newGrantSearch.requestPopover\" off-click=\"newGrantSearch.requestPopover=false\" id=cui-applications__requested-apps>\n"+
"                <cui-icon cui-svg-icon=cui:folder svg-class=cui-icon--folder use-class=cui-icon__ref ng-class=\"{'cui-action__icon--active': newGrantSearch.numberOfRequests != 0}\" viewbox=\"0 0 40 33\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': newGrantSearch.numberOfRequests != 0}\">{{newGrantSearch.numberOfRequests}}</sup>\n"+
"            </div>\n"+
"            <div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=newGrantSearch.requestPopover>\n"+
"              <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"              <div class=cui-action__popover-section>\n"+
"                <span ng-if=\"newGrantSearch.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"                <ul ng-if=\"newGrantSearch.numberOfRequests > 0\">\n"+
"                    <li ng-repeat=\"application in newGrantSearch.appsBeingRequested\">{{application.name | cuiI18n}}</li>\n"+
"                    <li ng-repeat=\"package in newGrantSearch.packagesBeingRequested\">{{package.name | cuiI18n}}</li>\n"+
"                </ul>\n"+
"              </div>\n"+
"              <span ng-if=\"newGrantSearch.numberOfRequests > 0\" class=cui-action__popover-button ng-click=newGrantSearch.goToClaimSelection()>{{'submit-request' | translate}}</span>\n"+
"            </div>\n"+
"        </div>\n"+
"    </section>\n"+
"    <section class=cui-applications__main-container>\n"+
"        <h3 class=cui-sr-only>Search Results</h3>\n"+
"        <div class=cui-loading__container ng-if=\"base.loader.for['newGrantSearch.apps']\">\n"+
"            <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <p class=cui-error ng-if=newGrantSearch.grantableAppsError>{{'error-generic'|translate}}</p>\n"+
"        <p ng-if=\"!newGrantSearch.grantableAppsError&&newGrantSearch.applicationList.length===0\">{{'cui-no-details' |translate}}</p>\n"+
"        <cui-expandable class=cui-expandable ng-repeat=\"application in newGrantSearch.applicationList track by application.id\" ng-if=\"!base.loader.for['newGrantSearch.apps']\" transition-speed=150>\n"+
"            <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\">\n"+
"                <div class=cui-exapandable__app-name ng-click=toggleExpand()>\n"+
"                    <h4 class=cui-expandable__title-left>{{application.name | cuiI18n}}\n"+
"                </h4></div>\n"+
"                <div class=cui-expandable__title-end>\n"+
"                    <span class=cui-checkbox__container>\n"+
"                        <input class=cui-checkbox type=checkbox ng-model=newGrantSearch.applicationCheckbox[application.id]>\n"+
"                        <label class=cui-checkbox__label ng-click=\"newGrantSearch.toggleRequest({ type:'application', payload:application });newGrantSearch.checkRelatedAndBundledApps('application',application)\"></label>\n"+
"                    </span>\n"+
"                </div>\n"+
"                <svg cui-icon xmlns=http://www.w3.org/2000/svg class=\"cui-icon cui-icon--light-grey chevron\" ng-class=\"{'cui-hide__opacity': (!application.bundledApps || application.bundledApps.length===0) && (application.servicePackage.parent || (!application.relatedApps || application.relatedApps.length===0))}\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"                  <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#chevron18></use>\n"+
"                </svg>\n"+
"            </cui-expandable-title>\n"+
"            <cui-expandable-body class=cui-expandable__body>\n"+
"                <div class=cui-expandable__body-pane ng-if=\"(application.bundledApps && application.bundledApps.length!==0) || (!application.servicePackage.parent && (application.relatedApps && application.relatedApps.length!==0))\">\n"+
"                    <span class=cui-expandable__body-close ng-click=collapse()>\n"+
"                        <svg xmlns=http://www.w3.org/2000/svg class=cui-icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"                          <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"                        </svg>\n"+
"                    </span>\n"+
"\n"+
"                    <span ng-if=\"(!application.bundledApps || application.bundledApps.length===0) && (!application.relatedApps || application.relatedApps.length===0)\">{{'no-bundled-or-related' | translate}}</span>\n"+
"                        <div class=cui-expandable__pane-col ng-if=\"application.bundledApps && application.bundledApps.length > 0\">\n"+
"                            <h4 class=cui-expandable__pane-title>{{'bundled-applications' | translate}}</h4>\n"+
"                            <div class=cui-expandable__pane-content>\n"+
"                                <span class=cui-expandable__pane-content-item ng-repeat=\"bundledApp in application.bundledApps\">\n"+
"                                    {{bundledApp.name | cuiI18n}}\n"+
"                                </span>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                        <div class=cui-expandable__pane-col ng-if=\"application.relatedApps && application.relatedApps.length > 0\">\n"+
"                            <h4 class=cui-expandable__pane-title>{{'related-applications' | translate}}</h4>\n"+
"                            <div class=cui-expandable__pane-content>\n"+
"                                <ul class=cui-expandable__pane-content-item ng-repeat=\"relatedApp in application.relatedApps\">\n"+
"                                    <li class=\"cui-checkbox__container cui-checkbox__container--right\">\n"+
"                                        <input class=cui-checkbox type=checkbox ng-model=newGrantSearch.applicationCheckbox[relatedApp.id]>\n"+
"                                        <label class=cui-checkbox__label ng-click=\"newGrantSearch.toggleRequest({ type:'application', payload:relatedApp })\">{{relatedApp.name | cuiI18n}}</label>\n"+
"                                    </li>\n"+
"                                </ul>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                \n"+
"            </cui-expandable-body>\n"+
"        </cui-expandable>\n"+
"    <div class=cui-paginate__container ng-if=\"!base.loader.for['newGrantSearch.apps']\">\n"+
"        <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"        <results-per-page class=cui-paginate__select ng-model=newGrantSearch.search.pageSize></results-per-page>\n"+
"        <paginate class=cui-paginate results-per-page=newGrantSearch.search.pageSize count=newGrantSearch.count on-page-change=newGrantSearch.updateSearch ng-model=newGrantSearch.search.page attach-rerender-to=newGrantSearch.reRenderPaginate></paginate>\n"+
"    </div>\n"+
"\n"+
"    <div class=cui-organization__search-button>\n"+
"        <button class=cui-button ng-class=\"{'cui-button--inverted' : newGrantSearch.numberOfRequests===0}\" ng-click=\"newGrantSearch.numberOfRequests != 0 && newGrantSearch.goToClaimSelection()\">{{'select-claims' | translate}}</button>\n"+
"    </div>\n"+
"\n"+
"    </section>\n"+
"</main>\n"+
"\n");



$templateCache.put('app/modules/organization/requests/newOrgGrant/claims/claims.html',
"<div class=\"class-toggle cui-modal\" ng-if=newOrgGrantClaims.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'grants-assigned' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"<div class=cui-org-claims>\n"+
"<div class=cui-applications>\n"+
"  <div class=cui-action ng-hide=\"base.loader.for['newOrgGrantClaims.org']\">\n"+
"\n"+
"    <span class=\"cui-action__title cui-action__title--dark\" ng-click=base.goBack(newOrgGrantClaims.prevState.name,newOrgGrantClaims.prevState.params)>&#60; {{newOrgGrantClaims.org.name}} - {{'new-grant' | translate}}</span>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"      <ng-include src=\"'app/modules/organization/partials/close-with-shadow.html'\" onload=\"prevState=newOrgGrantClaims.prevState\"></ng-include>\n"+
"    </div>\n"+
"  </div>\n"+
"  <section class=\"cui-action cui-action--alt\">\n"+
"    <h2 class=cui-action__title ng-click=\"base.goBack('organization.requests.newOrgGrantSearch',newOrgGrantClaims.prevState.params)\">\n"+
"      &#60; {{'cui-review'|translate}}\n"+
"    </h2>\n"+
"    <div class=cui-action__actions>\n"+
"      <div class=flex_row id=cui-applications__requested-apps ng-click=\"newOrgGrantClaims.requestPopover=!newOrgGrantClaims.requestPopover\" off-click=\"newOrgGrantClaims.requestPopover=false\">\n"+
"        <cui-icon cui-svg-icon=cui:folder id=cui-applications__requested-apps svg-class=\"cui-icon cui-icon--folder\" use-class=cui-icon__ref viewbox=\"0 0 40 33\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': newOrgGrantClaims.numberOfRequests != 0}\">{{newOrgGrantClaims.numberOfRequests}}</sup>\n"+
"      </div>\n"+
"        \n"+
"        <div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=newOrgGrantClaims.requestPopover constraints=\"[{to:'scrollParent',attachment:'together',pin:['right']}]\">\n"+
"          <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"          <div class=cui-action__popover-section>\n"+
"            <span ng-if=\"newOrgGrantClaims.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"            <ul ng-if=\"newOrgGrantClaims.numberOfRequests > 0\">\n"+
"                <li ng-repeat=\"application in newOrgGrantClaims.appsBeingRequestedforPopup\">{{application.name | cuiI18n}}</li>\n"+
"                <li ng-repeat=\"package in newOrgGrantClaims.packagesBeingRequested\">{{packages.name | cuiI18n}}</li>\n"+
"            </ul>\n"+
"          </div>\n"+
"        </div>\n"+
"    </div>\n"+
"  </section>\n"+
"  <div class=cui-organization__main-container>\n"+
"  <div>\n"+
"    <div class=cui-org-claims__claim ng-repeat=\"(applicationId, application) in newOrgGrantClaims.appsBeingRequested\" ng-init=\"index=$index\">\n"+
"\n"+
"      <div class=cui-media>\n"+
"        \n"+
"        <div class=cui-media__image-container>\n"+
"          <div class=cui-media__image cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-names=application.name cui-avatar-cuii18n-filter cui-avatar=application.iconUrl>\n"+
"          </div>\n"+
"        </div>\n"+
"\n"+
"        <div class=cui-media__body>\n"+
"\n"+
"          \n"+
"          <h3 class=cui-media__title>{{application.name | cuiI18n}}</h3>\n"+
"          <h3 ng-if=application.bundledApps class=\"cui-media__title cui-media__title-margin__top\">{{'bundled-applications' | translate}}</h3>\n"+
"          <div ng-if=application.bundledApps ng-repeat=\"bundledApp in application.bundledApps\">\n"+
"              <span>{{bundledApp.name|cuiI18n}}</span>\n"+
"          </div> \n"+
"          <div class=cui-applications__review-text-input>\n"+
"            <h3 class=\"cui-media__title cui-media__title-margin__top\">{{'grant-reason' | translate}}</h3>\n"+
"            <div class=cui-wizard__field-row>\n"+
"              \n"+
"              <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"                <textarea name=\"{{'text_area'+application.id}}\" class=cui-text-area ng-model=newOrgGrantClaims.packageRequests[application.servicePackage.id].reason></textarea>\n"+
"              </div>\n"+
"            </div>\n"+
"          </div>\n"+
"\n"+
"\n"+
"\n"+
"            \n"+
"\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <button disable-animate class=cui-button ng-if=\"!base.loader.for['newOrgGrantClaims.submit'] && !newOrgGrantClaims.error\" ng-click=newOrgGrantClaims.submit()>{{'submit-grant-update' | translate}}</button>\n"+
"    <button disable-animate class=cui-button ng-if=\"base.loader.for['newOrgGrantClaims.submit']\">\n"+
"      <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"    </button>\n"+
"    <button disable-animate class=cui-button ng-if=\"!base.loader.for['newOrgGrantClaims.submit'] && newOrgGrantClaims.error\" ng-click=newOrgGrantClaims.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"\n"+
"  </div> \n"+
"  </div>\n"+
"</div>\n"+
"</div>\n"+
"\n");



$templateCache.put('app/modules/organization/requests/newOrgGrant/requests-newGrant.html',
"<main class=cui-organization__new-request>\n"+
"  <div class=cui-action ng-hide=\"base.loader.for['newOrgGrant.org']\">\n"+
"\n"+
"    <span class=\"cui-action__title cui-action__title--dark\" ng-click=base.goBack(newOrgGrant.prevState.name,newOrgGrant.prevState.params)>&#60; {{newOrgGrant.org.name}} - {{'new-grant' | translate}}</span>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"      <ng-include src=\"'app/modules/organization/partials/close-with-shadow.html'\" onload=\"prevState=newOrgGrant.prevState\"></ng-include>\n"+
"    </div>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-applications__new-request>\n"+
"      <section class=\"cui-action cui-action--alt\">\n"+
"          <h2 class=cui-action__title>{{'select-applications' | translate}}</h2>\n"+
"          <div class=cui-action__actions>\n"+
"              <div class=flex_row id=cui-applications__requested-apps ng-click=\"newOrgGrant.requestPopover=!newOrgGrant.requestPopover\" off-click=\"newOrgGrant.requestPopover=false\">\n"+
"                <cui-icon cui-svg-icon=cui:folder id=cui-applications__requested-apps svg-class=\"cui-icon cui-icon--folder\" use-class=cui-icon__ref viewbox=\"0 0 40 33\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': newOrgGrant.numberOfRequests != 0}\">{{newOrgGrant.numberOfRequests}}</sup>\n"+
"              </div>\n"+
"                \n"+
"                <div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=newOrgGrant.requestPopover constraints=\"[{to:'scrollParent',attachment:'together',pin:['right']}]\">\n"+
"                  <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"                  <div class=cui-action__popover-section>\n"+
"                    <span ng-if=\"newOrgGrant.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"                    <ul ng-if=\"newOrgGrant.numberOfRequests > 0\">\n"+
"                        <li ng-repeat=\"application in newOrgGrant.appsBeingRequested\">{{application.name | cuiI18n}}</li>\n"+
"                        <li ng-repeat=\"package in newOrgGrant.packagesBeingRequested\">{{packages.name | cuiI18n}}</li>\n"+
"                    </ul>\n"+
"                  </div>\n"+
"                  <span ng-if=\"newOrgGrant.numberOfRequests > 0\" class=cui-action__popover-button ng-click=newOrgGrant.goToClaimSelection()>{{'submit-request' | translate}}</span>\n"+
"                </div>\n"+
"          </div>\n"+
"      </section>\n"+
"      <section class=cui-applications__main-container>\n"+
"        \n"+
"          \n"+
"          <div class=cui-applications__search-options>\n"+
"              <div class=cui-input-button>\n"+
"                  \n"+
"                  <input type=text class=cui-input-button__input id=search-by-text ng-model=newOrgGrant.search placeholder=\"{{'search-by-app-name' | translate}}\" on-enter=newOrgGrant.searchCallback focus-if>\n"+
"                  <button class=cui-input-button__button ng-click=newOrgGrant.searchCallback(newOrgGrant.search)>{{'go' | translate}}</button>\n"+
"              </div>\n"+
"              <div class=cui-applications__center-text>{{'or' | translate}}</div>\n"+
"              <a class=cui-link ng-click=newOrgGrant.searchCallback()>{{'show-all' | translate}}</a>\n"+
"          </div>\n"+
"          <section>\n"+
"              <h3 class=cui-sr-only>{{'cui-browse-by-category'|translate}}</h3>\n"+
"              <p class=cui-error ng-if=newOrgGrant.categoryError>{{'error-generic'|translate}}</p>\n"+
"              <div ng-repeat=\"category in newOrgGrant.categories\" ng-if=\"!base.loader.for['newOrgGrant.categories']\">\n"+
"                  <section class=cui-applications__categories ng-click=\"newOrgGrant.searchCallback({type:'category', value:category.name})\">\n"+
"                      <h4 class=cui-applications__category>{{ category.name | cuiI18n }}</h4>\n"+
"                      <cui-icon cui-svg-icon=cui:chevron18 svg-class=\"cui-icon cui-icon--light-grey\" use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                  </section>\n"+
"              </div>\n"+
"          </section>\n"+
"      </section>\n"+
"  </div>\n"+
"</main>");



$templateCache.put('app/modules/organization/requests/newOrgGrant/search/search.html',
"<main class=cui-organization__new-request-search>\n"+
"  <div class=cui-action ng-hide=\"base.loader.for['newOrgGrantSearch.org']\">\n"+
"\n"+
"    <span class=\"cui-action__title cui-action__title--dark\" ng-click=base.goBack(newOrgGrantSearch.prevState.name,newOrgGrantSearch.prevState.params)>&#60; {{newOrgGrantSearch.org.name}} - {{'new-grant' | translate}}</span>\n"+
"    \n"+
"    <div class=cui-action__actions>\n"+
"      <ng-include src=\"'app/modules/organization/partials/close-with-shadow.html'\" onload=\"prevState=newOrgGrantSearch.prevState\"></ng-include>\n"+
"    </div>\n"+
"  </div>\n"+
"    <section class=\"cui-action cui-action--alt\">\n"+
"        <h3 class=cui-sr-only>{{'cui-back-navigation-requests'|translate}}</h3>\n"+
"        <div class=cui-action__title ng-if=!newOrgGrantSearch.search.category ng-click=\"base.goBack('organization.requests.newOrgGrant',newOrgGrantSearch.prevState.params)\">&#60; {{'categories' | translate}}</div>\n"+
"        <span class=cui-action__title ng-if=newOrgGrantSearch.search.category ng-click=\"base.goBack('organization.requests.newOrgGrant',newOrgGrantSearch.prevState.params)\">&#60; {{newOrgGrantSearch.search.category}}</span>\n"+
"        <div class=cui-action__actions>\n"+
"            <div class=flex_row ng-click=\"newOrgGrantSearch.requestPopover=!newOrgGrantSearch.requestPopover\" off-click=\"newOrgGrantSearch.requestPopover=false\" id=cui-applications__requested-apps>\n"+
"                <cui-icon cui-svg-icon=cui:folder svg-class=cui-icon--folder use-class=cui-icon__ref ng-class=\"{'cui-action__icon--active': newOrgGrantSearch.numberOfRequests != 0}\" viewbox=\"0 0 40 33\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"                <sup class=cui-action__icon-counter ng-class=\"{'cui-action__icon-counter--active': newOrgGrantSearch.numberOfRequests != 0}\">{{newOrgGrantSearch.numberOfRequests}}</sup>\n"+
"            </div>\n"+
"            <div tether class=cui-action__popover target=#cui-applications__requested-apps attachment=\"top middle\" targetattachment=\"bottom left\" offset=\"-20px 50px\" ng-if=newOrgGrantSearch.requestPopover>\n"+
"              <span class=cui-action__popover-title>{{'collected-items-for-request' | translate}}</span>\n"+
"              <div class=cui-action__popover-section>\n"+
"                <span ng-if=\"newOrgGrantSearch.numberOfRequests === 0\">{{'no-selected-apps' | translate}}<br></span>\n"+
"                <ul ng-if=\"newOrgGrantSearch.numberOfRequests > 0\">\n"+
"                    <li ng-repeat=\"application in newOrgGrantSearch.appsBeingRequested\">{{application.name | cuiI18n}}</li>\n"+
"                    <li ng-repeat=\"package in newOrgGrantSearch.packagesBeingRequested\">{{package.name | cuiI18n}}</li>\n"+
"                </ul>\n"+
"              </div>\n"+
"              <span ng-if=\"newOrgGrantSearch.numberOfRequests > 0\" class=cui-action__popover-button ng-click=newOrgGrantSearch.goToClaimSelection()>{{'submit-request' | translate}}</span>\n"+
"            </div>\n"+
"        </div>\n"+
"    </section>\n"+
"    <section class=cui-applications__main-container>\n"+
"        <h3 class=cui-sr-only>{{'cui-search-results'|translate}}</h3>\n"+
"        <div class=cui-loading__container ng-if=\"base.loader.for['newOrgGrantSearch.apps']\">\n"+
"            <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"        </div>\n"+
"        \n"+
"        <p class=cui-error ng-if=\"base.apiError.for['newOrgGrantSearch.apps']\">{{'error-generic'|translate}}</p>\n"+
"        \n"+
"        <p ng-if=\"!base.apiError.for['newOrgGrantSearch.apps'] && newOrgGrantSearch.viewList.length===0\">{{'cui-no-details'|translate}}</p>\n"+
"        <cui-expandable class=cui-expandable ng-repeat=\"application in newOrgGrantSearch.viewList track by application.id\" ng-if=\"!base.loader.for['newOrgGrantSearch.apps']\" transition-speed=150>\n"+
"            <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\">\n"+
"                <div class=cui-exapandable__app-name ng-click=toggleExpand()>\n"+
"                    <h4 class=cui-expandable__title-left>{{application.name | cuiI18n}}\n"+
"                </h4></div>\n"+
"                <div class=cui-expandable__title-end>\n"+
"                    <span class=cui-checkbox__container>\n"+
"                        <input class=cui-checkbox type=checkbox ng-model=newOrgGrantSearch.applicationCheckbox[application.id]>\n"+
"                        <label class=cui-checkbox__label ng-click=\"newOrgGrantSearch.toggleRequest({ type:'application', payload:application });newOrgGrantSearch.checkRelatedAndBundledApps('application',application)\"></label>\n"+
"                    </span>\n"+
"                </div>\n"+
"                <svg cui-icon xmlns=http://www.w3.org/2000/svg class=\"cui-icon cui-icon--light-grey chevron\" ng-class=\"{'cui-hide__opacity': (!application.bundledApps || application.bundledApps.length===0) && (application.servicePackage.parent || (!application.relatedApps || application.relatedApps.length===0))}\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\">\n"+
"                  <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#chevron18></use>\n"+
"                </svg>\n"+
"            </cui-expandable-title>\n"+
"            <cui-expandable-body class=cui-expandable__body>\n"+
"                <div class=cui-expandable__body-pane ng-if=\"(application.bundledApps && application.bundledApps.length!==0) || (!application.servicePackage.parent && (application.relatedApps && application.relatedApps.length!==0))\">\n"+
"                    <span class=cui-expandable__body-close ng-click=collapse()>\n"+
"                        <svg xmlns=http://www.w3.org/2000/svg class=cui-icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"                          <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"                        </svg>\n"+
"                    </span>\n"+
"\n"+
"                    <span ng-if=\"(!application.bundledApps || application.bundledApps.length===0) && (!application.relatedApps || application.relatedApps.length===0)\">{{'no-bundled-or-related' | translate}}</span>\n"+
"                        <div class=cui-expandable__pane-col ng-if=\"application.bundledApps && application.bundledApps.length > 0\">\n"+
"                            <h4 class=cui-expandable__pane-title>{{'bundled-applications' | translate}}</h4>\n"+
"                            <div class=cui-expandable__pane-content>\n"+
"                                <span class=cui-expandable__pane-content-item ng-repeat=\"bundledApp in application.bundledApps\">\n"+
"                                    {{bundledApp.name | cuiI18n}}\n"+
"                                </span>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                        <div class=cui-expandable__pane-col ng-if=\"application.relatedApps && application.relatedApps.length > 0\">\n"+
"                            <h4 class=cui-expandable__pane-title>{{'related-applications' | translate}}</h4>\n"+
"                            <div class=cui-expandable__pane-content>\n"+
"                                <ul class=cui-expandable__pane-content-item ng-repeat=\"relatedApp in application.relatedApps\">\n"+
"                                    <li class=\"cui-checkbox__container cui-checkbox__container--right\">\n"+
"                                        <input class=cui-checkbox type=checkbox ng-model=newOrgGrantSearch.applicationCheckbox[relatedApp.id]>\n"+
"                                        <label class=cui-checkbox__label ng-click=\"newOrgGrantSearch.toggleRequest({ type:'application', payload:relatedApp })\">{{relatedApp.name | cuiI18n}}</label>\n"+
"                                    </li>\n"+
"                                </ul>\n"+
"                            </div>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                \n"+
"            </cui-expandable-body>\n"+
"        </cui-expandable>\n"+
"    <div class=cui-paginate__container ng-if=\"!base.loader.for['newOrgGrantSearch.apps'] && !base.apiError.for['newOrgGrantSearch.apps']\">\n"+
"        <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"        <results-per-page class=cui-paginate__select ng-model=newOrgGrantSearch.search.pageSize></results-per-page>\n"+
"        <paginate class=cui-paginate results-per-page=newOrgGrantSearch.search.pageSize count=newOrgGrantSearch.count on-page-change=newOrgGrantSearch.updateSearch ng-model=newOrgGrantSearch.search.page attach-rerender-to=newOrgGrantSearch.reRenderPaginate></paginate>\n"+
"    </div>\n"+
"\n"+
"    <div class=cui-organization__search-button>\n"+
"        <button class=cui-button ng-class=\"{'cui-button--inverted' : newOrgGrantSearch.numberOfRequests===0}\" ng-click=\"newOrgGrantSearch.numberOfRequests != 0 && newOrgGrantSearch.goToClaimSelection()\">{{'cui-review' | translate}}</button>\n"+
"    </div>\n"+
"\n"+
"    </section>\n"+
"</main>\n"+
"\n");



$templateCache.put('app/modules/organization/requests/orgRequests/orgAppRequests/requests-AppRequests.html',
"<main class=\"cui-organization cui-organization-req-org\">\n"+
"  \n"+
"  <h2 class=cui-sr-only>{{'org-req-apps-requests'}}</h2>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"    \n"+
"    <div class=cui-tabs__main-container>\n"+
"      <ul class=cui-tabs__nav>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.orgRegistrationRequests>\n"+
"          <a class=\"cui-tabs__tab cui-tabs__tab\">{{'pending' | translate}} {{'cui-org'|translate}} {{'requests'| translate}}</a>\n"+
"        </li>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.orgAppRequests>\n"+
"          <a class=\"cui-tabs__tab cui-tabs__tab--active\">{{'pending' | translate}} {{'application'|translate}} {{'requests'| translate}}</a>\n"+
"        </li>\n"+
"      </ul>\n"+
"    </div>\n"+
"\n"+
"  \n"+
"  <section class=cui-organization__main-container>\n"+
"    <h3 class=cui-sr-only>{{'new-organization' | translate}}</h3>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['orgAppRequests.data']\">\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"    </div>\n"+
"    \n"+
"    <p class=cui-users__password-success style=\"margin:20px; text-align:center\" ng-if=\"orgAppRequests.data.length===0&&!base.apiError.for['orgAppRequests.data']\">{{'cui-no-details' | translate}}</p>\n"+
"    <p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['orgAppRequests.data']\">{{'error-generic' | translate}}</p>\n"+
"    <div ng-if=\"orgAppRequests.data.length!==0\">\n"+
"      <cui-table-header headers=\"['cui-org', 'submitted', 'request', 'administrator']\" sorting=orgAppRequests.sortBy sorting-callbacks=orgAppRequests.sortingCallbacks>\n"+
"      </cui-table-header>\n"+
"      <cui-table-row ng-repeat=\"orgAppRequestsCtrl in orgAppRequests.data track by $index\" ng-click=orgAppRequests.goToDetails(orgAppRequestsCtrl)>\n"+
"        <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"          <div class=cui-flex-table__avatar-col>\n"+
"            <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[orgAppRequestsCtrl.personData.name.given, orgAppRequestsCtrl.personData.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"          </div>\n"+
"          <div class=cui-flex-table__mobile-stack>\n"+
"             <div class=cui-flex-table__left>\n"+
"              <span class=cui-flex-table__title>{{orgAppRequestsCtrl.personData.organization.name}}</span>\n"+
"            </div>\n"+
"\n"+
"            <div class=cui-flex-table__middle>\n"+
"              <span>{{orgAppRequestsCtrl.personData.creation|date}}</span>\n"+
"            </div>\n"+
"\n"+
"            <div class=cui-flex-table__middle>\n"+
"              <span>\n"+
"              \n"+
"              {{orgAppRequestsCtrl.packageData.name}}\n"+
"              </span>\n"+
"            </div>\n"+
"\n"+
"            <div class=cui-flex-table__right>{{orgAppRequestsCtrl.personData.name.prefix}} {{orgAppRequestsCtrl.personData.name.given}} {{orgAppRequestsCtrl.personData.name.middle}} {{orgAppRequestsCtrl.personData.name.surname}} {{orgAppRequestsCtrl.personData.name.suffix}}\n"+
"              <span></span>\n"+
"            </div>\n"+
"          </div>\n"+
"        </li>\n"+
"      </cui-table-row>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=orgAppRequests.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=orgAppRequests.search.pageSize count=orgAppRequests.userCount on-page-change=orgAppRequests.updateSearchParams ng-model=orgAppRequests.search.page attach-rerender-to=orgAppRequests.reRenderPagination></paginate>\n"+
"    </div>\n"+
"  </section>\n"+
"\n"+
"</main>\n");



$templateCache.put('app/modules/organization/requests/orgRequests/orgRegistrationRequests/requests-RegistrationRequests.html',
"<main class=\"cui-organization cui-organization-req-org\">\n"+
"  \n"+
"  <h2 class=cui-sr-only>{{'org-req-users-requests'}}</h2>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"    \n"+
"    <div class=cui-tabs__main-container>\n"+
"      <ul class=cui-tabs__nav>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.orgRegistrationRequests>\n"+
"          <a class=\"cui-tabs__tab cui-tabs__tab--active\">{{'pending' | translate}} {{'cui-org'|translate}} {{'requests'| translate}}</a>\n"+
"        </li>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.orgAppRequests>\n"+
"          <a class=cui-tabs__tab>{{'pending' | translate}} {{'application'|translate}} {{'requests'| translate}}</a>\n"+
"        </li>\n"+
"      </ul>\n"+
"    </div>\n"+
"  \n"+
"  <div class=cui-tabs__main-container>\n"+
"    <div class=cui-applications__search-options>\n"+
"      <div class=cui-input-button style=width:350px>\n"+
"          <input type=text class=cui-input-button__input ng-model=orgRegistrationRequests.search.organizationName placeholder=\"{{'search-by-app-name'| translate}}\" on-enter=orgRegistrationRequests.searchCallback focus-if>\n"+
"          <button class=cui-input-button__button ng-click=\"orgRegistrationRequests.updateSearch('organizationName',orgRegistrationRequests.search.organizationName)\">{{'go'| translate}}</button>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"  \n"+
"  <section class=cui-organization__main-container>\n"+
"    <h3 class=cui-sr-only>{{'new-organization' | translate}}</h3>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['orgRegistrationRequests.data']\">\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"    </div>\n"+
"    \n"+
"    <p class=cui-users__password-success style=\"margin:20px; text-align:center\" ng-if=\"orgRegistrationRequests.data.length===0&&!base.apiError.for['orgRegistrationRequests.data']\">{{'cui-no-details' | translate}}</p>\n"+
"    <p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['orgRegistrationRequests.data']\">{{'error-generic' | translate}}</p>\n"+
"    <div ng-if=\"orgRegistrationRequests.data.length!==0\">\n"+
"      <cui-table-header headers=\"['cui-org', 'submitted', 'request', 'administrator']\" sorting=orgRegistrationRequests.sortBy sorting-callbacks=orgRegistrationRequests.sortingCallbacks>\n"+
"        </cui-table-header>\n"+
"      <cui-table-row ng-repeat=\"userRequest in orgRegistrationRequests.data track by $index\" ng-click=orgRegistrationRequests.goToDetails(userRequest)>\n"+
"        <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"          <div class=cui-flex-table__avatar-col>\n"+
"            <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[userRequest.personData.name.given, userRequest.personData.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"          </div>\n"+
"          <div class=cui-flex-table__mobile-stack>\n"+
"             <div class=cui-flex-table__left>\n"+
"              <span class=cui-flex-table__title>{{userRequest.personData.organization.name}}</span>\n"+
"            </div>\n"+
"\n"+
"            <div class=cui-flex-table__middle>\n"+
"              <span>{{userRequest.personData.creation|date}}</span>\n"+
"            </div>\n"+
"\n"+
"            <div class=cui-flex-table__middle>\n"+
"              <span>\n"+
"              \n"+
"              {{userRequest.packageData.name}}\n"+
"              </span>\n"+
"            </div>\n"+
"\n"+
"            <div class=cui-flex-table__right>\n"+
"              <span>{{userRequest.personData.name.prefix}} {{userRequest.personData.name.given}} {{userRequest.personData.name.middle}} {{userRequest.personData.name.surname}} {{userRequest.personData.name.suffix}}</span>\n"+
"            </div>\n"+
"          </div>\n"+
"        </li>\n"+
"      </cui-table-row>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-paginate__container>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=orgRegistrationRequests.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=orgRegistrationRequests.search.pageSize count=orgRegistrationRequests.userCount on-page-change=orgRegistrationRequests.pageChange ng-model=orgRegistrationRequests.search.page attach-rerender-to=orgRegistrationRequests.reRenderPagination></paginate>\n"+
"    </div>\n"+
"  </section>\n"+
"\n"+
"</main>\n"+
"\n");



$templateCache.put('app/modules/organization/requests/organizationAppRequests/requests-organization.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/organization/requests/organizationAppRequests target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=cui-organization--pending-requests>\n"+
"  \n"+
"  <div ng-include=\"'app/modules/organization/requests/organizationAppRequests/sections-requests/requests-header.html'\" ng-if=\"!base.loader.for['organizationAppRequest.init']\">\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['organizationAppRequest.noRequest']\">{{'cui-error-person-request' | translate}}</p>\n"+
"  \n"+
"  \n"+
"  <div class=cui-loading__container--user-details ng-if=\"base.loader.for['organizationAppRequest.init']\">\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  \n"+
"  \n"+
"  <div ng-include=\"'app/modules/organization/requests/organizationAppRequests/sections-requests/requests-body.html'\" ng-if=\"!base.loader.for['organizationAppRequest.init']\">\n"+
"  </div>\n"+
"\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationAppRequests/requests-organizationReview.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/organization/requests/organizationAppRequests target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=\"class-toggle cui-modal\" ng-if=organizationAppRequestReview.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"  <div class=cui-modal__pane>\n"+
"    <div class=cui-modal__icon>\n"+
"      <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"organizationAppRequestReview.packageData.approval==='approved'\">{{'approvals-submitted' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"organizationAppRequestReview.packageData.approval==='denied'\">{{'rejection-submitted' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['organizationAppRequestReview.noRequest'] || base.apiError.for['organizationAppRequestReview.active']\">{{'request-approve-or-rejected' | translate}}</p>\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/organizationAppRequests/sections-review/review-header.html'\" ng-if=\"!base.loader.for['organizationAppRequestReview.init']\">\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['organizationAppRequestReview.init']\">\n"+
"	<div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/organizationAppRequests/sections-review/review-body.html'\" ng-if=\"!base.loader.for['organizationAppRequestReview.init']\">\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-organization__main-container>\n"+
"  <p class=cui-error style=text-align:end ng-if=organizationAppRequestReview.error&&organizationAppRequestReview.errorMessage>{{organizationAppRequestReview.errorMessage|translate}}</p>\n"+
"<div class=cui-organization__submit-row disable-animate>\n"+
"  <span ui-sref=\"organization.requests.organizationAppRequest({userId:organizationAppRequestReview.personData.id, orgId:organizationAppRequestReview.personData.organization.id})\" style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"  <button class=cui-button ng-if=\"!base.loader.for['organizationAppRequestReview.submitting'] && !organizationAppRequestReview.error\" ng-click=organizationAppRequestReview.submit() style=margin:5px>{{'submit-approvals' | translate}}</button>\n"+
"  <button class=cui-button ng-if=\"base.loader.for['organizationAppRequestReview.submitting']\">\n"+
"    <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"  </button>\n"+
"  <button class=cui-button ng-if=\"!base.loader.for['organizationAppRequestReview.submitting'] && organizationAppRequestReview.error\" ng-click=organizationAppRequestReview.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"</div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationAppRequests/sections-requests/requests-body.html',
"<ng-form name=pendingRequestsApproval>\n"+
"  <div class=cui-organization__main-container>\n"+
"\n"+
"    \n"+
"    \n"+
"    <div>\n"+
"      <div>\n"+
"        <div class=\"cui-flex-table__header cui-flex-table__header--multi cui-flex-table__header--borderless\">\n"+
"          <div class=cui-flex-table__th>\n"+
"            <span class=cui-flex-table__heading>{{'requested-items' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=cui-flex-table__th--radio>\n"+
"            <span class=cui-flex-table__heading>{{'deny' | translate}}</span>\n"+
"            <span class=cui-flex-table__heading>{{'approve' | translate}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div>\n"+
"        <cui-expandable transition-speed=100>\n"+
"          \n"+
"          <cui-expandable-title>\n"+
"            <div class=cui-flex-table__tr>\n"+
"              <div class=cui-flex-table__mobile-stack>\n"+
"                <div class=cui-flex-table__left>\n"+
"                  <span class=cui-flex-table__title>{{organizationAppRequest.request.packageData.details.name | cuiI18n}}</span>\n"+
"                </div>\n"+
"              </div>\n"+
"              <fieldset class=cui-flex-table__fieldset>\n"+
"                <div class=\"cui-flex-table__right cui-flex-table__multi\">\n"+
"                  <div class=\"cui-radio cui-radio--deny\">\n"+
"                    <input class=\"cui-radio__input cui-radio--deny\" type=radio id=\"radio-choice-{{$index+'a'}}\" value=denied ng-model=organizationAppRequest.request.packageData.approval required>\n"+
"                    <label class=cui-radio__label for=\"radio-choice-{{$index+'a'}}\">\n"+
"                      <div class=cui-radio__outer-button ng-click=collapse()><div class=cui-radio__inner-button></div></div>\n"+
"                    </label>\n"+
"                  </div>\n"+
"                  <div class=\"cui-radio cui-radio--approve\">\n"+
"                    <input class=cui-radio__input type=radio id=radio-choice-{{$index}} value=approved ng-model=organizationAppRequest.request.packageData.approval required>\n"+
"                    <label class=cui-radio__label for=radio-choice-{{$index}}>\n"+
"                      <div class=cui-radio__outer-button ng-click=expand()><div class=cui-radio__inner-button></div></div>\n"+
"                    </label>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </fieldset>\n"+
"            </div>\n"+
"          </cui-expandable-title>\n"+
"          \n"+
"          \n"+
"          <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"            \n"+
"            <div ng-click=collapse()>\n"+
"              <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-expandable__close use-class=\"\" viewbox=\"0 0 48 51\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"            </div>\n"+
"            <div class=cui-expandable__body-row>\n"+
"              \n"+
"              <div class=cui-expandable__body-col>\n"+
"                <div class=cui-expandable__body-header ng-if=\"organizationAppRequest.request.packageData.services.length>0\">{{'bundled-applications' | translate}}:</div>\n"+
"                <div class=cui-expandable__links-container>\n"+
"                  <p ng-if=\"organizationAppRequest.request.packageData.services.length===0\">{{'no-bundled-or-related' | translate}}.</p>\n"+
"                  <div ng-if=\"organizationAppRequest.request.packageData.services.length>0\" ng-repeat=\"service in organizationAppRequest.request.packageData.services\">\n"+
"                    <span class=cui-expandable__link>{{service.name | cuiI18n}}</span><br>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </div>\n"+
"\n"+
"              \n"+
"              <div class=cui-expandable__body-col>\n"+
"                <div class=cui-expandable__body-header>{{'claims' | translate}}:</div>\n"+
"                <p ng-if=\"organizationAppRequest.request.packageData.claims.length===0\">{{'cui-package-no-claims' | translate}}.</p>\n"+
"                <div ng-if=\"organizationAppRequest.request.packageData.claims.length>0\" ng-repeat=\"claim in organizationAppRequest.request.packageData.claims\">\n"+
"                  <li class=\"cui-checkbox__container cui-checkbox__container--right\">\n"+
"                    <input class=cui-checkbox type=checkbox id=option-{{$index}}-{{$parent.$parent.$index}} ng-model=claim.accepted>\n"+
"                    <label class=cui-checkbox__label for=option-{{$index}}-{{$parent.$parent.$index}}>\n"+
"                      {{claim.description | cuiI18n}}\n"+
"                    </label>\n"+
"                  </li>\n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"            </cui-expandable-body></cui-expandable></div>\n"+
"\n"+
"          \n"+
"        \n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-organization__submit-row>\n"+
"      <span ui-sref=organization.requests.orgAppRequests style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-disabled=pendingRequestsApproval.$invalid ng-class=\"{'cui-button--error':pendingRequestsApproval.$invalid}\" ng-click=organizationAppRequest.reviewApprovals() style=margin:10px>{{'review-approvals' | translate}}</button>\n"+
"    </div>\n"+
"\n"+
"  \n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/requests/organizationAppRequests/sections-requests/requests-header.html',
"<div class=cui-organization__requests-person-header>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-media--centered ng-if=organizationAppRequest.request.personData>\n"+
"    \n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=\"cui-profile__user-avatar cui-media__image\" cui-avatar cui-avatar-names=[organizationAppRequest.request.personData.organization.name] cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{organizationAppRequest.request.personData.organization.name}}</h3>\n"+
"      \n"+
"      \n"+
"      \n"+
"      <div class=cui-media__content ng-if=organizationAppRequest.request.personData.organization><span class=cui-media__content--dark>{{'administrator' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{organizationAppRequest.request.personData.name.given}} {{organizationAppRequest.request.personData.name.surname}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'administrator' | translate}} {{'cui-email' | translate}}:</span> <a href=mailto:{{organizationAppRequest.request.personData.email}} class=cui-media__link> {{organizationAppRequest.request.personData.email}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'request-date' | translate}}:</span> {{organizationAppRequest.request.personData.organization.creation | date:base.appConfig.dateFormat}}</div>\n"+
"      \n"+
"      <div class=cui-media__content>\n"+
"        <span class=cui-media__content--dark>{{'status' | translate}}:</span><a href=\"\" class=cui-media__link>{{organizationAppRequest.request.personData.organization.status}}</a>\n"+
"        <cui-icon cui-svg-icon=fa:unlock3 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"organizationAppRequest.request.personData.organization.status==='active'\"></cui-icon>\n"+
"        <cui-icon cui-svg-icon=fa:lock24 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"organizationAppRequest.request.personData.organization.status==='locked'\"></cui-icon>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"  \n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationAppRequests/sections-review/review-body.html',
"<div class=cui-organization__main-container>\n"+
"\n"+
"	\n"+
"	<div>\n"+
"		<h3 class=cui-organization__approval-summary>{{'approval-summary' | translate}}</h3>\n"+
"	</div>\n"+
"	<h4 class=cui-organization__approved>{{'approved-items' | translate}}</h4>\n"+
"	<div class=cui-organization__approved-row>\n"+
"		<span ng-if=\"organizationAppRequestReview.packageData.approval==='approved'\">{{organizationAppRequestReview.packageData.details.name | cuiI18n}}</span>\n"+
"		<span ng-if=\"organizationAppRequestReview.packageData.approval!=='approved'\">{{'no-items-approved' | translate}}.</span>\n"+
"	</div>\n"+
"		\n"+
"	<h4 class=cui-organization__denied>{{'rejected-items' | translate}}</h4>\n"+
"	<p ng-if=\"organizationAppRequestReview.packageData.approval==='approved'\">{{'no-items-rejected' | translate}}.</p>\n"+
"	<div class=cui-organization__rejected-row ng-if=\"organizationAppRequestReview.packageData.approval!=='approved'\">\n"+
"		<span ng-if=\"organizationAppRequestReview.packageData.approval==='denied'\">{{organizationAppRequestReview.packageData.details.name | cuiI18n}}</span>\n"+
"		<textarea class=cui-text-area ng-model=organizationAppRequestReview.packageData.rejectReason placeholder=\"rejection reason (optional)\"></textarea>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationAppRequests/sections-review/review-header.html',
"<div class=cui-organization__requests-person-header>\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-media--centered>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=cui-profile__user-avatar cui-avatar cui-avatar-names=[organizationAppRequestReview.personData.organization.name] cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{organizationAppRequestReview.personData.organization.name}} </h3>\n"+
"      \n"+
"      \n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'administrator' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{organizationAppRequestReview.personData.name.given}} {{organizationAppRequestReview.personData.name.surname}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'administrator' | translate}} {{'cui-email' | translate}}:</span> <a href=mailto:{{organizationRequest.request.personData.email}} class=cui-media__link> {{organizationAppRequestReview.personData.email}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'request-date' | translate}}:</span> {{organizationAppRequestReview.personData.organization.creation | date:base.appConfig.dateFormat}}</div>\n"+
"      \n"+
"      <div class=cui-media__content>\n"+
"        <span class=cui-media__content--dark>{{'status' | translate}}:</span><a href=\"\" class=cui-media__link>{{organizationAppRequestReview.personData.organization.status}}</a>\n"+
"        <cui-icon cui-svg-icon=fa:unlock3 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"organizationAppRequestReview.personData.organization.status==='active'\"></cui-icon>\n"+
"        <cui-icon cui-svg-icon=fa:lock24 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"organizationAppRequestReview.personData.organization.status==='locked'\"></cui-icon>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationRequest/requests-organization.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/organization/requests/organizationRequest target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=cui-organization--pending-requests>\n"+
"  \n"+
"  <div ng-include=\"'app/modules/organization/requests/organizationRequest/sections-requests/requests-header.html'\" ng-if=\"!base.loader.for['organizationRequest.init']\">\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['organizationRequest.noRequest']\">{{'cui-error-person-request' | translate}}</p>\n"+
"  \n"+
"  \n"+
"  <div class=cui-loading__container--user-details ng-if=\"base.loader.for['organizationRequest.init']\">\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  \n"+
"  \n"+
"  <div ng-include=\"'app/modules/organization/requests/organizationRequest/sections-requests/requests-body.html'\" ng-if=\"!base.loader.for['organizationRequest.init']\">\n"+
"  </div>\n"+
"\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationRequest/requests-organizationReview.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/organization/requests/organizationRequest target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=\"class-toggle cui-modal\" ng-if=organizationRequestReview.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"  <div class=cui-modal__pane>\n"+
"    <div class=cui-modal__icon>\n"+
"      <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"organizationRequestReview.request.approval==='denied'\">{{'registration-request-rejected' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"organizationRequestReview.request.approval==='approved'\">{{'registration-request-approved' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"organizationRequestReview.approvedCount!==0\">{{organizationRequestReview.approvedCount}} {{'approvals-submitted' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"organizationRequestReview.deniedCount!==0\">{{organizationRequestReview.deniedCount}} {{'rejection-submitted' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['organizationRequestReview.noRequest'] || base.apiError.for['organizationRequestReview.active']\">{{'request-approve-or-rejected' | translate}}</p>\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/organizationRequest/sections-review/review-header.html'\" ng-if=\"!base.loader.for['organizationRequestReview.init']\">\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['organizationRequestReview.init']\">\n"+
"	<div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/organizationRequest/sections-review/review-body.html'\" ng-if=\"!base.loader.for['organizationRequestReview.init']\">\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-organization__main-container>\n"+
"<div class=cui-organization__submit-row disable-animate>\n"+
"  <span ui-sref=\"organization.requests.organizationRequest({userId:organizationRequestReview.personData.id, orgId:organizationRequestReview.personData.organization.id})\" style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"  <button class=cui-button ng-if=\"!base.loader.for['organizationRequestReview.submitting'] && !organizationRequestReview.error\" ng-click=organizationRequestReview.submit() style=margin:5px>{{'submit-approvals' | translate}}</button>\n"+
"  <button class=cui-button ng-if=\"base.loader.for['organizationRequestReview.submitting']\">\n"+
"    <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"  </button>\n"+
"  <button class=cui-button ng-if=\"!base.loader.for['organizationRequestReview.submitting'] && organizationRequestReview.error\" ng-click=organizationRequestReview.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"</div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationRequest/sections-requests/requests-body.html',
"<ng-form name=pendingRequestsApproval>\n"+
"  <div class=cui-organization__main-container>\n"+
"\n"+
"    \n"+
"    <div class=cui-flex-table__header>\n"+
"      <h3 class=cui-flex-table__heading>{{'registration-decision' | translate}}</h3>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-organization__registration-decision>\n"+
"      <fieldset class=cui-flex-table__fieldset>\n"+
"        <div class=\"cui-flex-table__right cui-flex-table__multi\">\n"+
"          <div class=\"cui-radio cui-radio--deny\">\n"+
"            <input class=\"cui-radio__input cui-radio--deny\" type=radio id=radio-choice-registration-deny value=denied ng-model=organizationRequest.request.request.approval required>\n"+
"            <label class=cui-radio__label for=radio-choice-registration-deny>\n"+
"              <span>{{'deny' | translate}}</span>\n"+
"              <div class=cui-radio__outer-button><div class=cui-radio__inner-button></div></div>\n"+
"            </label>\n"+
"          </div>\n"+
"          <div class=\"cui-radio cui-radio--approve\">\n"+
"            <input class=cui-radio__input type=radio id=radio-choice-registration-approve value=approved ng-model=organizationRequest.request.request.approval required>\n"+
"            <label class=cui-radio__label for=radio-choice-registration-approve>\n"+
"              <span>{{'approve' | translate}}</span>\n"+
"              <div class=cui-radio__outer-button><div class=cui-radio__inner-button></div></div>\n"+
"            </label>\n"+
"          </div>\n"+
"        </div>\n"+
"      </fieldset>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    \n"+
"    <div ng-if=\"organizationRequest.request.packages.length>0\">\n"+
"      <div>\n"+
"        <div class=\"cui-flex-table__header cui-flex-table__header--multi cui-flex-table__header--borderless\">\n"+
"          <div class=cui-flex-table__th>\n"+
"            <span class=cui-flex-table__heading>{{'requested-items' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=cui-flex-table__th--radio>\n"+
"            <span class=cui-flex-table__heading>{{'deny' | translate}}</span>\n"+
"            <span class=cui-flex-table__heading>{{'approve' | translate}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div>\n"+
"        <cui-expandable transition-speed=100 ng-repeat=\"package in organizationRequest.request.packages\">\n"+
"          \n"+
"          <cui-expandable-title>\n"+
"            <div class=cui-flex-table__tr>\n"+
"              <div class=cui-flex-table__mobile-stack>\n"+
"                <div class=cui-flex-table__left>\n"+
"                  <span class=cui-flex-table__title>{{package.details.name | cuiI18n}}</span>\n"+
"                </div>\n"+
"              </div>\n"+
"              <fieldset class=cui-flex-table__fieldset>\n"+
"                <div class=\"cui-flex-table__right cui-flex-table__multi\">\n"+
"                  <div class=\"cui-radio cui-radio--deny\">\n"+
"                    <input class=\"cui-radio__input cui-radio--deny\" type=radio id=\"radio-choice-{{$index+'a'}}\" value=denied ng-model=package.approval required>\n"+
"                    <label class=cui-radio__label for=\"radio-choice-{{$index+'a'}}\">\n"+
"                      <div class=cui-radio__outer-button ng-click=collapse()><div class=cui-radio__inner-button></div></div>\n"+
"                    </label>\n"+
"                  </div>\n"+
"                  <div class=\"cui-radio cui-radio--approve\">\n"+
"                    <input class=cui-radio__input type=radio id=radio-choice-{{$index}} value=approved ng-model=package.approval required>\n"+
"                    <label class=cui-radio__label for=radio-choice-{{$index}}>\n"+
"                      <div class=cui-radio__outer-button ng-click=expand()><div class=cui-radio__inner-button></div></div>\n"+
"                    </label>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </fieldset>\n"+
"            </div>\n"+
"          </cui-expandable-title>\n"+
"          \n"+
"          \n"+
"          <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"            \n"+
"            <div ng-click=collapse()>\n"+
"              <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-expandable__close use-class=\"\" viewbox=\"0 0 48 51\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"            </div>\n"+
"            <div class=cui-expandable__body-row>\n"+
"              \n"+
"              <div class=cui-expandable__body-col>\n"+
"                <div class=cui-expandable__body-header ng-if=\"package.services.length>0\">{{'bundled-applications' | translate}}:</div>\n"+
"                <div class=cui-expandable__links-container>\n"+
"                  <p ng-if=\"package.services.length===0\">{{'no-bundled-or-related' | translate}}.</p>\n"+
"                  <div ng-if=\"package.services.length>0\" ng-repeat=\"service in package.services\">\n"+
"                    <span class=cui-expandable__link>{{service.name | cuiI18n}}</span><br>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </div>\n"+
"\n"+
"              \n"+
"              <div class=cui-expandable__body-col>\n"+
"                <div class=cui-expandable__body-header>{{'claims' | translate}}:</div>\n"+
"                <p ng-if=\"package.claims.length===0\">{{'cui-package-no-claims' | translate}}.</p>\n"+
"                <div ng-if=\"package.claims.length>0\" ng-repeat=\"claim in package.claims\">\n"+
"                  <li class=\"cui-checkbox__container cui-checkbox__container--right\">\n"+
"                    <input class=cui-checkbox type=checkbox id=option-{{$index}}-{{$parent.$parent.$index}} ng-model=claim.accepted>\n"+
"                    <label class=cui-checkbox__label for=option-{{$index}}-{{$parent.$parent.$index}}>\n"+
"                      {{claim.description | cuiI18n}}\n"+
"                    </label>\n"+
"                  </li>\n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"            </cui-expandable-body></cui-expandable></div>\n"+
"\n"+
"          \n"+
"        \n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-organization__submit-row>\n"+
"      <span ui-sref=organization.requests.orgRegistrationRequests style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-disabled=pendingRequestsApproval.$invalid ng-class=\"{'cui-button--error':pendingRequestsApproval.$invalid}\" ng-click=organizationRequest.reviewApprovals() style=margin:10px>{{'review-approvals' | translate}}</button>\n"+
"    </div>\n"+
"\n"+
"  \n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/requests/organizationRequest/sections-requests/requests-header.html',
"<div class=cui-organization__requests-person-header>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-media--centered ng-if=organizationRequest.request.personData>\n"+
"    \n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=\"cui-profile__user-avatar cui-media__image\" cui-avatar cui-avatar-names=[organizationRequest.request.personData.organization.name] cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{organizationRequest.request.personData.organization.name}}</h3>\n"+
"      \n"+
"      \n"+
"      \n"+
"      <div class=cui-media__content ng-if=organizationRequest.request.personData.organization><span class=cui-media__content--dark>{{'administrator' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{organizationRequest.request.personData.name.given}} {{organizationRequest.request.personData.name.surname}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'administrator' | translate}} {{'cui-email' | translate}}:</span> <a href=mailto:{{organizationRequest.request.personData.email}} class=cui-media__link> {{organizationRequest.request.personData.email}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'request-date' | translate}}:</span> {{organizationRequest.request.personData.creation | date:base.appConfig.dateFormat}}</div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'status' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{organizationRequest.request.personData.organization.status}}</a></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <cui-expandable class=cui-expandable transition-speed=150 ng-if=\"organizationRequest.request.personData && organizationRequest.request.personData.organization\">\n"+
"    <cui-expandable-title class=cui-expandable__title ng-click=toggleExpand()>\n"+
"      <div class=cui-expandable__details-status>\n"+
"        <span class=\"cui-link cui-expandable__details\">{{'view-details' | translate}}</span>\n"+
"      </div>\n"+
"    </cui-expandable-title>\n"+
"    <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"      <div class=cui-expandable__body-row>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=organizationRequest.request.personData.organization>\n"+
"          <div class=cui-field-val__field>{{'cui-address' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequest.request.personData.organization.addresses[0].streets[0]}}</span>\n"+
"          <span class=cui-field-val__val>{{organizationRequest.request.personData.organization.addresses[0].city}}</span>\n"+
"          <span class=cui-field-val__val>{{organizationRequest.request.personData.organization.addresses[0].state}}, {{organizationRequest.request.personData.organization.addresses[0].postal}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=organizationRequest.request.personData.organization.phones[0].number>\n"+
"          <div class=cui-field-val__field>{{'cui-phone' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequest.request.personData.organization.phones[0].number}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=organizationRequest.request.personData>\n"+
"          <div class=cui-field-val__field>{{'timezone-and-language' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequest.request.personData.timezone}}</span>\n"+
"          <span class=cui-field-val__val>{{organizationRequest.request.personData.language}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=organizationRequest.request.justification>\n"+
"          <div class=cui-field-val__field>{{'request-reason' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequest.request.justification}}</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </cui-expandable-body>\n"+
"  </cui-expandable>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationRequest/sections-review/review-body.html',
"<div class=cui-organization__main-container>\n"+
"\n"+
"	\n"+
"	<div>\n"+
"		<h3 class=cui-organization__approval-summary>{{'approval-summary' | translate}}</h3>\n"+
"	</div>\n"+
"\n"+
"	<div ng-if=\"organizationRequestReview.request.approval==='approved'\">\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__approved>{{'approved-items' | translate}}</h4>\n"+
"			<div class=cui-organization__approved-row>\n"+
"				<ul>\n"+
"					<li><span>{{'registration-request' | translate}} ({{organizationRequestReview.id}})</span><br></li>\n"+
"					<li ng-if=organizationRequestReview.approvedCount ng-repeat=\"package in organizationRequestReview.packages track by package.id\">\n"+
"						<span ng-if=\"package.approval==='approved'\">{{package.details.name | cuiI18n}}</span>\n"+
"					</li>\n"+
"				</ul>\n"+
"			</div>\n"+
"		</div>\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__denied>{{'rejected-items' | translate}}</h4>\n"+
"			<p ng-if=\"organizationRequestReview.deniedCount===0\">{{'no-items-rejected' | translate}}.</p>\n"+
"			<div class=cui-organization__rejected-row ng-if=organizationRequestReview.deniedCount ng-repeat=\"package in organizationRequestReview.packages track by package.id\">\n"+
"				<span ng-if=\"package.approval==='denied'\">{{package.details.name | cuiI18n}}</span>\n"+
"				<textarea class=cui-text-area ng-if=\"package.approval==='denied'\" ng-model=package.rejectReason placeholder=\"rejection reason (optional)\"></textarea>\n"+
"			</div>\n"+
"		</div>\n"+
"	</div>\n"+
"\n"+
"	\n"+
"	<div ng-if=\"organizationRequestReview.request.approval==='denied'\">\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__approved>{{'approved-items' | translate}}</h4>\n"+
"			<div class=cui-organization__approved-row>\n"+
"				<p>{{'no-items-approved' | translate}}.</p>\n"+
"			</div>\n"+
"		</div>\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__denied>{{'rejected-items' | translate}}</h4>\n"+
"			<div class=cui-organization__rejected-row>\n"+
"				<span>{{'registration-request' | translate}} ({{organizationRequestReview.id}})</span>\n"+
"				<textarea class=cui-text-area ng-model=organizationRequestReview.request.rejectReason placeholder=\"rejection reason (optional)\"></textarea>\n"+
"			</div>\n"+
"		\n"+
"		</div>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/organizationRequest/sections-review/review-header.html',
"<div class=cui-organization__requests-person-header>\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-media--centered>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=cui-profile__user-avatar cui-avatar cui-avatar-names=[organizationRequestReview.personData.organization.name] cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{organizationRequestReview.personData.organization.name}} </h3>\n"+
"      \n"+
"      \n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'administrator' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{organizationRequestReview.personData.name.given}} {{organizationRequestReview.personData.name.surname}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'administrator' | translate}} {{'cui-email' | translate}}:</span> <a href=mailto:{{organizationRequest.request.personData.email}} class=cui-media__link> {{organizationRequestReview.personData.email}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'request-date' | translate}}:</span> {{organizationRequestReview.personData.creation | date:base.appConfig.dateFormat}}</div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'status' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{organizationRequestReview.personData.organization.status}}</a></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <cui-expandable class=cui-expandable transition-speed=150>\n"+
"    <cui-expandable-title class=cui-expandable__title ng-click=toggleExpand()>\n"+
"      <div class=cui-expandable__details-status>\n"+
"        <span class=\"cui-link cui-expandable__details\">{{'view-details' | translate}}</span>\n"+
"        \n"+
"      </div>\n"+
"    </cui-expandable-title>\n"+
"    <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"      <div class=cui-expandable__body-row>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'cui-address' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequestReview.personData.organization.addresses[0].streets[0]}}</span>\n"+
"          <span class=cui-field-val__val>{{organizationRequestReview.personData.organization.addresses[0].city}}</span>\n"+
"          <span class=cui-field-val__val>{{organizationRequestReview.personData.organization.addresses[0].state}}, {{organizationRequestReview.personData.organization.addresses[0].postal}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=organizationRequestReview.personData.organization.phones[0].number>\n"+
"          <div class=cui-field-val__field>{{'cui-phone' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequestReview.personData.organization.phones[0].number}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'timezone-and-language' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequestReview.personData.timezone}}</span>\n"+
"          <span class=cui-field-val__val>{{organizationRequestReview.personData.language}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'request-reason' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{organizationRequestReview.justification}}</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </cui-expandable-body>\n"+
"  </cui-expandable>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/pendingRequestsReview/requests-pendingRequests.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/requests/pendingRequestsReview target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=\"class-toggle cui-modal\" toggled-class=cui-modal--hide ng-if=pendingRequests.success ng-click=toggleClass()>\n"+
"  <div class=cui-modal__pane>\n"+
"    <div class=cui-modal__icon>\n"+
"      <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"pendingRequests.approvedCount!==0\">{{pendingRequests.approvedCount}} {{'approvals-submitted' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"pendingRequests.deniedCount!==0\">{{pendingRequests.deniedCount}} {{'rejection-submitted' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['pendingRequests.init']\">\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/pendingRequestsReview/sections-pendingRequests/pendingRequests-header.html'\" ng-if=\"!base.loader.for['pendingRequests.init']\"></div>\n"+
"\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/pendingRequestsReview/sections-pendingRequests/pendingRequests-body.html'\" ng-if=\"!base.loader.for['pendingRequests.init']\"></div>\n");



$templateCache.put('app/modules/organization/requests/pendingRequestsReview/requests-pendingRequestsReview.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/app/modules/organization/requests/pendingRequestsReview target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=\"class-toggle cui-modal\" toggled-class=cui-modal--hide ng-if=pendingRequestsReview.success ng-click=toggleClass()>\n"+
"  <div class=cui-modal__pane>\n"+
"    <div class=cui-modal__icon>\n"+
"      <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"pendingRequestsReview.approvedCount!==0\">{{pendingRequestsReview.approvedCount}} {{'approvals-submitted' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"pendingRequestsReview.deniedCount!==0\">{{pendingRequestsReview.deniedCount}} {{'rejection-submitted' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['pendingRequestsReview.init']\">\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/pendingRequestsReview/sections-review/review-header.html'\" ng-if=\"!base.loader.for['pendingRequestsReview.init']\"></div>\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/pendingRequestsReview/sections-review/review-body.html'\" ng-if=\"!base.loader.for['pendingRequestsReview.init']\"></div>\n");



$templateCache.put('app/modules/organization/requests/pendingRequestsReview/sections-pendingRequests/pendingRequests-body.html',
"<ng-form name=pendingRequestsApproval>\n"+
"  <div class=cui-organization__main-container>\n"+
"    \n"+
"    <div>\n"+
"\n"+
"      <div>\n"+
"        <div class=\"cui-flex-table__header cui-flex-table__header--borderless\">\n"+
"          <div class=cui-flex-table__th>\n"+
"            <span class=cui-flex-table__heading>{{'requested-items' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=cui-flex-table__th--radio>\n"+
"            <span class=cui-flex-table__heading>{{'deny' | translate}}</span>\n"+
"            <span class=cui-flex-table__heading>{{'approve' | translate}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <cui-expandable ng-repeat=\"package in pendingRequests.packages\" transition-speed=150>\n"+
"        <cui-expandable-title>\n"+
"          <div class=cui-flex-table__tr>\n"+
"            <div class=cui-flex-table__mobile-stack>\n"+
"              <div class=cui-flex-table__left>\n"+
"                <span class=cui-flex-table__title>{{package.details.name | cuiI18n}}</span>\n"+
"              </div>\n"+
"              <div class=cui-flex-table__middle>\n"+
"                <span class=cui-flex-table__text>{{'requested' | translate}}: {{package.creation | date:base.appConfig.dateFormat}}</span>\n"+
"              </div>\n"+
"            </div>\n"+
"            <fieldset class=cui-flex-table__fieldset>\n"+
"              <div class=\"cui-flex-table__right cui-flex-table__multi\">\n"+
"                <div class=\"cui-radio cui-radio--deny\">\n"+
"                  <input class=\"cui-radio__input cui-radio--deny\" type=radio id=\"radio-choice-{{$index+'a'}}\" value=denied ng-model=package.approval required>\n"+
"                  <label class=cui-radio__label for=\"radio-choice-{{$index+'a'}}\" ng-click=collapse()>\n"+
"                    <div class=cui-radio__outer-button><div class=cui-radio__inner-button></div></div>\n"+
"                  </label>\n"+
"                </div>\n"+
"                <div class=\"cui-radio cui-radio--approve\">\n"+
"                  <input class=cui-radio__input type=radio id=radio-choice-{{$index}} value=approved ng-model=package.approval required>\n"+
"                  <label class=cui-radio__label for=radio-choice-{{$index}} ng-click=expand()>\n"+
"                    <div class=cui-radio__outer-button><div class=cui-radio__inner-button></div></div>\n"+
"                  </label>\n"+
"                </div>\n"+
"              </div>\n"+
"            </fieldset>\n"+
"          </div>\n"+
"        </cui-expandable-title>\n"+
"\n"+
"        \n"+
"        <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"\n"+
"          \n"+
"          <div ng-click=collapse()>\n"+
"            <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-expandable__close use-class=\"\" viewbox=\"0 0 48 51\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-expandable__body-row>\n"+
"            \n"+
"            <div class=cui-expandable__body-col>\n"+
"              <div class=cui-expandable__body-header ng-if=\"package.services.length>0\">{{'bundled-applications' | translate}}:</div>\n"+
"              <div class=cui-expandable__links-container>\n"+
"                <p ng-if=\"package.services.length===0\">{{'no-bundled-or-related' | translate}}.</p>\n"+
"                <div ng-if=\"package.services.length>0\" ng-repeat=\"service in package.services\">\n"+
"                  <span class=cui-expandable__link>{{service.name | cuiI18n}}</span><br>\n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"\n"+
"            \n"+
"            <div class=cui-expandable__body-col>\n"+
"              <div class=cui-expandable__body-header>{{'claims' | translate}}:</div>\n"+
"              <p ng-if=\"package.claims.length===0\">{{'cui-package-no-claims' | translate}}.</p>\n"+
"              <div ng-if=\"package.claims.length>0\" ng-repeat=\"claim in package.claims\">\n"+
"                <li class=\"cui-checkbox__container cui-checkbox__container--right\">\n"+
"                  <input class=cui-checkbox type=checkbox id=option-{{$index}}-{{$parent.$parent.$index}} ng-model=claim.accepted>\n"+
"                  <label class=cui-checkbox__label for=option-{{$index}}-{{$parent.$parent.$index}}>\n"+
"                    {{claim.description | cuiI18n}}\n"+
"                  </label>\n"+
"                </li>\n"+
"              </div>\n"+
"            </div>\n"+
"\n"+
"          </div>\n"+
"        </cui-expandable-body>\n"+
"      </cui-expandable>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    \n"+
"    <div class=cui-organization__submit-row disable-animate>\n"+
"      <span ui-sref=organization.requests.usersAppRequests style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-if=!pendingRequests.submitting ng-disabled=pendingRequestsApproval.$invalid ng-class=\"{'cui-button--error':pendingRequestsApproval.$invalid}\" ng-click=pendingRequests.submit() style=margin:5px>{{'submit-approvals' | translate}}</button>\n"+
"      <button class=cui-button ng-if=pendingRequests.submitting>\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-if=\"!pendingRequests.submitting && pendingRequests.error\" ng-click=pendingRequests.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/requests/pendingRequestsReview/sections-pendingRequests/pendingRequests-header.html',
"\n"+
"<div class=cui-organization__request-review-header>\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-media--centered>\n"+
"  \n"+
"  <div class=cui-media__image-container>\n"+
"    <div class=\"cui-profile__user-avatar cui-media__image\" cui-avatar cui-avatar-names=\"[pendingRequests.user.name.given, pendingRequests.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-media__body>\n"+
"    \n"+
"    <h3 class=cui-media__title>{{pendingRequests.user.name.given}} {{pendingRequests.user.name.surname}}</h3>\n"+
"    \n"+
"    <p class=\"cui-media__content cui-media__content--dark\">{{'userID' | translate}}: {{pendingRequests.user.username}}</p>\n"+
"    \n"+
"    <p class=cui-media__content ng-if=\"pendingRequests.user.status==='active'\">{{'cui-registered' | translate}}: {{pendingRequests.user.creation | date:base.appConfig.dateFormat}}</p>\n"+
"    \n"+
"    <div class=cui-media__content>\n"+
"      <span class=cui-media__content--dark>{{'status' | translate}}:</span><a href=\"\" class=cui-media__link>{{pendingRequests.user.status}}</a>\n"+
"      <cui-icon cui-svg-icon=fa:unlock3 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"pendingRequests.user.status==='active'\"></cui-icon>\n"+
"      <cui-icon cui-svg-icon=fa:lock24 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"pendingRequests.user.status==='locked'\"></cui-icon>\n"+
"    </div>\n"+
"    \n"+
"    \n"+
"    \n"+
"    \n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/pendingRequestsReview/sections-review/review-body.html',
"<div class=cui-organization__main-container>\n"+
"	\n"+
"	<h3 class=cui-organization__approval-summary>{{'approval-summary' | translate}}</h3>\n"+
"\n"+
"	\n"+
"	<h4 class=cui-organization__approved>{{'approved-items' | translate}}</h4>\n"+
"	<div class=cui-organization__approved-row>\n"+
"		<p ng-if=\"pendingRequestsReview.approvedCount===0\">{{'no-items-approved' | translate}}.</p>\n"+
"		<ul>\n"+
"			<li ng-if=\"pendingRequestsReview.approvedCount>0\" ng-repeat=\"package in pendingRequestsReview.pendingRequests track by package.id\">\n"+
"				<span ng-if=\"package.approval==='approved'\">{{package.details.name | cuiI18n}}</span>\n"+
"				<br ng-if=\"package.approval==='approved'\">\n"+
"			</li>\n"+
"		</ul>\n"+
"	</div>\n"+
"\n"+
"	\n"+
"	<h4 class=cui-organization__denied>{{'rejected-items' | translate}}</h4>\n"+
"	<div>\n"+
"		<p ng-if=\"pendingRequestsReview.deniedCount===0\">{{'no-items-rejected' | translate}}.</p>\n"+
"		<div class=cui-organization__rejected-row ng-if=\"pendingRequestsReview.deniedCount>0\" ng-repeat=\"package in pendingRequestsReview.pendingRequests track by package.id\">\n"+
"			<span ng-if=\"package.approval==='denied'\">{{package.details.name | cuiI18n}}</span><br>\n"+
"			<textarea class=cui-text-area ng-if=\"package.approval==='denied'\" ng-model=package.rejectReason placeholder=\"rejection reason (optional)\"></textarea>\n"+
"		</div>\n"+
"	</div>\n"+
"	\n"+
"	\n"+
"	<div class=cui-organization__submit-row disable-animate>\n"+
"		<span ui-sref=\"organization.directory.pendingRequests({userId:pendingRequests.user.id, orgId:pendingRequests.user.organization.id})\" style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"		<button class=cui-button ng-if=!pendingRequestsReview.submitting ng-click=pendingRequestsReview.submit() style=margin:5px>{{'submit-approvals' | translate}}</button>\n"+
"		<button class=cui-button ng-if=pendingRequestsReview.submitting>\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      	</button>\n"+
"      	<button class=cui-button ng-if=\"!pendingRequestsReview.submitting && pendingRequestsReview.error\" ng-click=pendingRequestsReview.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/pendingRequestsReview/sections-review/review-header.html',
"\n"+
"<div class=cui-organization__request-review-header>\n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-media--centered ng-if=!pendingRequestsReview.loading>\n"+
"  \n"+
"  <div class=cui-media__image-container>\n"+
"    <div class=cui-profile__user-avatar cui-avatar cui-avatar-names=\"[pendingRequestsReview.user.name.given, pendingRequestsReview.user.name.given]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"  </div>\n"+
"  \n"+
"  \n"+
"  <div class=cui-media__body>\n"+
"    \n"+
"    <h3 class=cui-media__title>{{pendingRequestsReview.user.name.given}} {{pendingRequestsReview.user.name.surname}}</h3>\n"+
"    \n"+
"    <p class=\"cui-media__content cui-media__content--dark\">{{'userID' | translate}}: {{pendingRequestsReview.user.username}}</p>\n"+
"    \n"+
"    <p class=cui-media__content>{{'cui-registered' | translate}}: {{pendingRequestsReview.user.creation | date:base.appConfig.dateFormat}}</p>\n"+
"    \n"+
"    <div class=cui-media__content>\n"+
"      <span class=cui-media__content--dark>{{'status' | translate}}:</span><a href=\"\" class=cui-media__link>{{pendingRequestsReview.user.status}}</a>\n"+
"      <cui-icon cui-svg-icon=fa:unlock3 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"pendingRequestsReview.user.status==='active'\"></cui-icon>\n"+
"      <cui-icon cui-svg-icon=fa:lock24 svg-class=cui-action__icon use-class=\"\" viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\" ng-if=\"pendingRequestsReview.user.status==='locked'\"></cui-icon>\n"+
"    </div>\n"+
"    \n"+
"    \n"+
"    \n"+
"    \n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/personRequest/requests-person.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/organization/requests/personRequest target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=\"class-toggle cui-modal\" ng-if=personRequest.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"  <div class=cui-modal__pane>\n"+
"    <div class=cui-modal__icon>\n"+
"      <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequest.request.request.approval==='denied'\">{{'registration-request-rejected' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequest.request.request.approval==='approved'\">{{'registration-request-approved' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequest.approvedCount!==0\">{{personRequest.approvedCount}} {{'approvals-submitted' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequest.deniedCount!==0\">{{personRequest.deniedCount}} {{'rejection-submitted' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"<div class=cui-organization--pending-requests>\n"+
"  \n"+
"  <div ng-include=\"'app/modules/organization/requests/personRequest/sections-requests/requests-header.html'\" ng-if=\"!base.loader.for['personRequest.init']\">\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <p class=cui-users__password-success style=\"color:red; margin:20px; text-align:center\" ng-if=\"base.apiError.for['personRequest.noRequest']\">{{'cui-error-person-request' | translate}}</p>\n"+
"  \n"+
"  \n"+
"  <div class=cui-loading__container--user-details ng-if=\"base.loader.for['personRequest.init']\">\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  \n"+
"  \n"+
"  <div ng-include=\"'app/modules/organization/requests/personRequest/sections-requests/requests-body.html'\" ng-if=\"!base.loader.for['personRequest.init']\">\n"+
"  </div>\n"+
"\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/personRequest/requests-personReview.html',
"\n"+
"<div class=code-info>The markup and javascript used to build this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/organization/requests/personRequest target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=\"class-toggle cui-modal\" ng-if=personRequestReview.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"  <div class=cui-modal__pane>\n"+
"    <div class=cui-modal__icon>\n"+
"      <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"    </div>\n"+
"    <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequestReview.request.approval==='denied'\">{{'registration-request-rejected' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequestReview.request.approval==='approved'\">{{'registration-request-approved' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequestReview.approvedCount!==0\">{{personRequestReview.approvedCount}} {{'approvals-submitted' | translate}}</span>\n"+
"    <span class=cui-modal__secondary-message ng-if=\"personRequestReview.deniedCount!==0\">{{personRequestReview.deniedCount}} {{'rejection-submitted' | translate}}</span>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/personRequest/sections-review/review-header.html'\" ng-if=personRequestReview.personData>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-loading__container--user-details ng-if=\"base.loader.for['personRequestReview.init']\">\n"+
"	<div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-include=\"'app/modules/organization/requests/personRequest/sections-review/review-body.html'\" ng-if=\"!base.loader.for['personRequestReview.init']\">\n"+
"</div>\n"+
"\n"+
"\n"+
"<div class=cui-organization__submit-row disable-animate>\n"+
"  <span ui-sref=\"organization.requests.personRequest({userId:personRequestReview.person.id, orgId:personRequestReview.person.organization.id})\" style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"  <button class=cui-button ng-if=\"!base.loader.for['personRequestReview.submitting'] && !personRequestReview.error\" ng-click=personRequestReview.submit() style=margin:5px>{{'submit-approvals' | translate}}</button>\n"+
"  <button class=cui-button ng-if=\"base.loader.for['personRequestReview.submitting']\">\n"+
"    <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"  </button>\n"+
"  <button class=cui-button ng-if=\"!base.loader.for['personRequestReview.submitting'] && personRequestReview.error\" ng-click=personRequestReview.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/personRequest/sections-requests/requests-body.html',
"<ng-form name=pendingRequestsApproval>\n"+
"  <div class=cui-organization__main-container>\n"+
"\n"+
"    \n"+
"    <div class=cui-flex-table__header>\n"+
"      <h3 class=cui-flex-table__heading>{{'registration-decision' | translate}}</h3>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-organization__registration-decision>\n"+
"      <fieldset class=cui-flex-table__fieldset>\n"+
"        <div class=\"cui-flex-table__right cui-flex-table__multi\">\n"+
"          <div class=\"cui-radio cui-radio--deny\">\n"+
"            <input class=\"cui-radio__input cui-radio--deny\" type=radio id=radio-choice-registration-deny value=denied ng-model=personRequest.request.request.approval required>\n"+
"            <label class=cui-radio__label for=radio-choice-registration-deny>\n"+
"              <span>{{'deny' | translate}}</span>\n"+
"              <div class=cui-radio__outer-button><div class=cui-radio__inner-button></div></div>\n"+
"            </label>\n"+
"          </div>\n"+
"          <div class=\"cui-radio cui-radio--approve\">\n"+
"            <input class=cui-radio__input type=radio id=radio-choice-registration-approve value=approved ng-model=personRequest.request.request.approval required>\n"+
"            <label class=cui-radio__label for=radio-choice-registration-approve>\n"+
"              <span>{{'approve' | translate}}</span>\n"+
"              <div class=cui-radio__outer-button><div class=cui-radio__inner-button></div></div>\n"+
"            </label>\n"+
"          </div>\n"+
"        </div>\n"+
"      </fieldset>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div ng-if=\"personRequest.packages.length>0 && personRequest.request.request.approval==='approved'\">\n"+
"    \n"+
"      <div>\n"+
"        <div class=\"cui-flex-table__header cui-flex-table__header--multi cui-flex-table__header--borderless\">\n"+
"          <div class=cui-flex-table__th>\n"+
"            <span class=cui-flex-table__heading>{{'requested-items' | translate}}</span>\n"+
"          </div>\n"+
"          <div class=cui-flex-table__th--radio>\n"+
"            <span class=cui-flex-table__heading>{{'deny' | translate}}</span>\n"+
"            <span class=cui-flex-table__heading>{{'approve' | translate}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div>\n"+
"        <cui-expandable transition-speed=100 ng-repeat=\"package in personRequest.packages\">\n"+
"          \n"+
"          <cui-expandable-title>\n"+
"            <div class=cui-flex-table__tr>\n"+
"              <div class=cui-flex-table__mobile-stack>\n"+
"                <div class=cui-flex-table__left>\n"+
"                  <span class=cui-flex-table__title>{{package.details.name | cuiI18n}}</span>\n"+
"                </div>\n"+
"              </div>\n"+
"              <fieldset class=cui-flex-table__fieldset>\n"+
"                <div class=\"cui-flex-table__right cui-flex-table__multi\">\n"+
"                  <div class=\"cui-radio cui-radio--deny\">\n"+
"                    <input class=\"cui-radio__input cui-radio--deny\" type=radio id=\"radio-choice-{{$index+'a'}}\" value=denied ng-model=package.approval required>\n"+
"                    <label class=cui-radio__label for=\"radio-choice-{{$index+'a'}}\">\n"+
"                      <div class=cui-radio__outer-button ng-click=collapse()><div class=cui-radio__inner-button></div></div>\n"+
"                    </label>\n"+
"                  </div>\n"+
"                  <div class=\"cui-radio cui-radio--approve\">\n"+
"                    <input class=cui-radio__input type=radio id=radio-choice-{{$index}} value=approved ng-model=package.approval required>\n"+
"                    <label class=cui-radio__label for=radio-choice-{{$index}}>\n"+
"                      <div class=cui-radio__outer-button ng-click=expand()><div class=cui-radio__inner-button></div></div>\n"+
"                    </label>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </fieldset>\n"+
"            </div>\n"+
"          </cui-expandable-title>\n"+
"          \n"+
"          \n"+
"          <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"            \n"+
"            <div ng-click=collapse()>\n"+
"              <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-expandable__close use-class=\"\" viewbox=\"0 0 48 51\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"            </div>\n"+
"            <div class=cui-expandable__body-row>\n"+
"              \n"+
"              <div class=cui-expandable__body-col>\n"+
"                <div class=cui-expandable__body-header ng-if=\"package.services.length>0\">{{'bundled-applications' | translate}}:</div>\n"+
"                <div class=cui-expandable__links-container>\n"+
"                  <p ng-if=\"package.services.length===0\">{{'no-bundled-or-related' | translate}}.</p>\n"+
"                  <div ng-if=\"package.services.length>0\" ng-repeat=\"service in package.services\">\n"+
"                    <span class=cui-expandable__link>{{service.name | cuiI18n}}</span><br>\n"+
"                  </div>\n"+
"                </div>\n"+
"              </div>\n"+
"\n"+
"              \n"+
"              <div class=cui-expandable__body-col>\n"+
"                <div class=cui-expandable__body-header>{{'claims' | translate}}:</div>\n"+
"                <p ng-if=\"package.claims.length===0\">{{'cui-package-no-claims' | translate}}.</p>\n"+
"                <div ng-if=\"package.claims.length>0\" ng-repeat=\"claim in package.claims\">\n"+
"                  <li class=\"cui-checkbox__container cui-checkbox__container--right\">\n"+
"                    <input class=cui-checkbox type=checkbox id=option-{{$index}}-{{$parent.$parent.$index}} ng-model=claim.accepted>\n"+
"                    <label class=cui-checkbox__label for=option-{{$index}}-{{$parent.$parent.$index}}>\n"+
"                      {{claim.description | cuiI18n}}\n"+
"                    </label>\n"+
"                  </li>\n"+
"                </div>\n"+
"              </div>\n"+
"            </div>\n"+
"            </cui-expandable-body></cui-expandable></div>\n"+
"\n"+
"          \n"+
"        \n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    \n"+
"    \n"+
"    <div class=cui-organization__submit-row disable-animate>\n"+
"      <span ui-sref=organization.requests.usersRegistrationRequests style=margin:5px>{{'cui-cancel' | translate}}</span>\n"+
"      <button class=cui-button ng-disabled=pendingRequestsApproval.$invalid ng-class=\"{'cui-button--error':pendingRequestsApproval.$invalid}\" ng-if=\"!base.loader.for['personRequest.submitting'] && !personRequest.error\" ng-click=personRequest.submit() style=margin:5px>{{'submit-approvals' | translate}}</button>\n"+
"      <button class=cui-button ng-if=\"base.loader.for['personRequest.submitting']\">\n"+
"        <div ng-include=\"'app/common-templates/partials/loader-updating.html'\"></div>\n"+
"      </button>\n"+
"      <button class=cui-button ng-if=\"!base.loader.for['personRequest.submitting'] && personRequest.error\" ng-click=personRequest.submit()>{{'cui-error-try-again' | translate}}</button>\n"+
"    </div>\n"+
"\n"+
"  \n"+
"</ng-form>\n");



$templateCache.put('app/modules/organization/requests/personRequest/sections-requests/requests-header.html',
"<div class=cui-organization__requests-person-header>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-media--centered ng-if=personRequest.request.personData>\n"+
"    \n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=\"cui-profile__user-avatar cui-media__image\" cui-avatar cui-avatar-names=\"[personRequest.request.personData.name.given, personRequest.request.personData.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{personRequest.request.personData.name.given}} {{personRequest.request.personData.name.surname}}</h3>\n"+
"      \n"+
"      <span class=\"cui-media__content cui-media__content--dark\">{{'userID' | translate}}: {{personRequest.request.personData.username}}</span>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'cui-email' | translate}}:</span> <a href=mailto:{{personRequest.request.personData.email}} class=cui-media__link> {{personRequest.request.personData.email}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'request-date' | translate}}:</span> {{personRequest.request.personData.creation | date:base.appConfig.dateFormat}}</div>\n"+
"      \n"+
"      <div class=cui-media__content ng-if=personRequest.request.organization><span class=cui-media__content--dark>{{'cui-org' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{personRequest.request.organization.name}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'status' | translate}}:</span>  <a href=\"\" class=cui-media__link>{{personRequest.request.personData.status}}</a></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <cui-expandable class=cui-expandable transition-speed=150 ng-if=\"personRequest.request.personData && personRequest.request.organization\">\n"+
"    <cui-expandable-title class=cui-expandable__title ng-click=toggleExpand()>\n"+
"      <div class=cui-expandable__details-status>\n"+
"        <span class=\"cui-link cui-expandable__details\">{{'view-details' | translate}}</span>\n"+
"       \n"+
"      </div>\n"+
"    </cui-expandable-title>\n"+
"    <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"      <div class=cui-expandable__body-row>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=personRequest.request.personData>\n"+
"          <div class=cui-field-val__field>{{'cui-address' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequest.request.personData.addresses[0].streets[0]}}</span>\n"+
"          <span class=cui-field-val__val>{{personRequest.request.personData.addresses[0].city}}</span>\n"+
"          <span class=cui-field-val__val>{{personRequest.request.personData.addresses[0].state}}, {{personRequest.request.personData.addresses[0].postal}}</span>\n"+
"          \n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'cui-phone' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequest.request.personData.phones[0].number}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=personRequest.request.personData>\n"+
"          <div class=cui-field-val__field>{{'timezone-and-language' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequest.request.personData.timezone}}</span>\n"+
"          <span class=cui-field-val__val>{{personRequest.request.personData.language}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\" ng-if=personRequest.request.request.justification>\n"+
"          <div class=cui-field-val__field>{{'request' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequest.request.request.justification}}</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </cui-expandable-body>\n"+
"  </cui-expandable>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/personRequest/sections-review/review-body.html',
"<div class=cui-organization__main-container>\n"+
"\n"+
"	\n"+
"	<div>\n"+
"		<h3 class=cui-organization__approval-summary>{{'approval-summary' | translate}}</h3>\n"+
"	</div>\n"+
"\n"+
"	<div ng-if=\"personRequestReview.request.approval==='approved'\">\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__approved>{{'approved-items' | translate}}</h4>\n"+
"			<div class=cui-organization__approved-row>\n"+
"				<ul>\n"+
"					<li><span>{{'registration-request' | translate}}</span><br></li>\n"+
"					<li ng-if=personRequestReview.approvedCount personrequestreview.approvedcount><span><b>{{'cui-applications' | translate}}:</b></span><br></li>\n"+
"					<li ng-if=personRequestReview.approvedCount ng-repeat=\"package in personRequestReview.packages track by package.id\">\n"+
"						<span ng-if=\"package.approval==='approved'\">{{package.details.name | cuiI18n}}</span>\n"+
"					</li>\n"+
"				</ul>\n"+
"			</div>\n"+
"		</div>\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__denied>{{'rejected-items' | translate}}</h4>\n"+
"			<p ng-if=\"personRequestReview.deniedCount===0\">{{'no-items-rejected' | translate}}.</p>\n"+
"			<div class=cui-organization__rejected-row ng-if=personRequestReview.deniedCount ng-repeat=\"package in personRequestReview.packages track by package.id\">\n"+
"				<span ng-if=\"package.approval==='denied'\">{{package.details.name | cuiI18n}}</span>\n"+
"				<textarea class=cui-text-area ng-if=\"package.approval==='denied'\" ng-model=package.rejectReason placeholder=\"rejection reason (optional)\"></textarea>\n"+
"			</div>\n"+
"		</div>\n"+
"	</div>\n"+
"\n"+
"	\n"+
"	<div ng-if=\"personRequestReview.request.approval==='denied'\">\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__approved>{{'approved-items' | translate}}</h4>\n"+
"			<div class=cui-organization__approved-row>\n"+
"				<p>{{'no-items-approved' | translate}}.</p>\n"+
"			</div>\n"+
"		</div>\n"+
"		\n"+
"		<div>\n"+
"			<h4 class=cui-organization__denied>{{'rejected-items' | translate}}</h4>\n"+
"			<div class=cui-organization__rejected-row>\n"+
"				<span>{{'registration-request' | translate}}</span>\n"+
"				<textarea class=cui-text-area ng-model=personRequestReview.request.rejectReason placeholder=\"rejection reason (optional)\"></textarea>\n"+
"			</div>\n"+
"			<div class=cui-organization__rejected-row ng-if=\"personRequestReview.packages.length>0\" ng-repeat=\"package in personRequestReview.packages track by package.id\">\n"+
"				<span>{{package.details.name | cuiI18n}}</span>\n"+
"				<textarea class=cui-text-area ng-model=package.rejectReason placeholder=\"rejection reason (optional)\"></textarea>\n"+
"			</div>\n"+
"		</div>\n"+
"	</div>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/personRequest/sections-review/review-header.html',
"<div class=cui-organization__requests-person-header>\n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"  \n"+
"\n"+
"  \n"+
"  <div class=cui-media--centered>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__image-container>\n"+
"      <div class=cui-profile__user-avatar cui-avatar cui-avatar-names=\"[personRequestReview.personData.name.given, personRequestReview.personData.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{personRequestReview.personData.name.given}} {{personRequestReview.personData.name.surname}}</h3>\n"+
"      \n"+
"      <p class=\"cui-media__content cui-media__content--dark\">{{'userID' | translate}}: {{personRequestReview.personData.username}}</p>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'cui-email' | translate}}:</span> <a href=mailto:{{personRequestReview.personData.email}} class=cui-media__link> {{personRequestReview.personData.email}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'request-date' | translate}}:</span> {{personRequestReview.personData.creation | date:base.appConfig.dateFormat}}</div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'cui-org' | translate}}:</span><a href=\"\" class=cui-media__link>{{personRequestReview.organization.name}}</a></div>\n"+
"      \n"+
"      <div class=cui-media__content><span class=cui-media__content--dark>{{'status' | translate}}:</span><a href=\"\" class=cui-media__link>{{personRequestReview.personData.status}}</a></div>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <cui-expandable class=cui-expandable transition-speed=150>\n"+
"    <cui-expandable-title class=cui-expandable__title ng-click=toggleExpand()>\n"+
"      <div class=cui-expandable__details-status>\n"+
"        <span class=\"cui-link cui-expandable__details\">{{'view-details' | translate}}</span>\n"+
"\n"+
"      </div>\n"+
"    </cui-expandable-title>\n"+
"    <cui-expandable-body class=\"cui-expandable__body cui-expandable__body--alt-bg\">\n"+
"      <div class=cui-expandable__body-row>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'cui-address' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequestReview.personData.addresses[0].streets[0]}}</span>\n"+
"          <span class=cui-field-val__val>{{personRequestReview.personData.addresses[0].city}}</span>\n"+
"          <span class=cui-field-val__val>{{personRequestReview.personData.addresses[0].state}}, {{personRequestReview.personData.addresses[0].postal}}</span>\n"+
"          \n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'cui-phone' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequestReview.personData.phones[0].number}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'timezone-and-language' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequestReview.personData.timezone}}</span>\n"+
"          <span class=cui-field-val__val>{{personRequestReview.personData.language}}</span>\n"+
"        </div>\n"+
"        \n"+
"        <div class=\"cui-expandable__body-col cui-expandable__body-col--small\">\n"+
"          <div class=cui-field-val__field>{{'request' | translate}}:</div>\n"+
"          <span class=cui-field-val__val>{{personRequestReview.request.justification}}</span>\n"+
"        </div>\n"+
"      </div>\n"+
"    </cui-expandable-body>\n"+
"  </cui-expandable>\n"+
"</div>\n");



$templateCache.put('app/modules/organization/requests/usersRequests/usersAppRequests/requests-AppRequests.html',
"<main class=\"cui-organization cui-organization-req-uers\">\n"+
"  \n"+
"  <h2 class=cui-sr-only>{{'org-req-apps-requests'}}</h2>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"    \n"+
"    <div class=cui-tabs__main-container>\n"+
"      <ul class=cui-tabs__nav>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.usersRegistrationRequests>\n"+
"          <a class=\"cui-tabs__tab cui-tabs__tab\">{{'pending' | translate}} {{'user' | translate}} {{'requests' | translate}}</a>\n"+
"        </li>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.usersAppRequests>\n"+
"          <a class=\"cui-tabs__tab cui-tabs__tab--active\">{{'pending' | translate}} {{'application' | translate}} {{'requests' | translate}}</a>\n"+
"        </li>\n"+
"      </ul>\n"+
"    </div>\n"+
"\n"+
"  \n"+
"  <section class=cui-organization__main-container>\n"+
"    <h3 class=cui-sr-only>{{'users-requests' | translate}}</h3>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['usersAppRequests.data']\">\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"    </div>\n"+
"\n"+
"    <cui-table-header headers=\"['cui-name', 'submitted', 'application', 'division']\" sorting=usersAppRequests.sortBy sorting-callbacks=usersAppRequests.sortingCallbacks>\n"+
"      </cui-table-header>\n"+
"    <cui-table-row ng-repeat=\"userRequest in usersAppRequests.data track by $index\" ng-click=usersAppRequests.goToDetails(userRequest)>\n"+
"      <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"        <div class=cui-flex-table__avatar-col>\n"+
"          <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[userRequest.personData.name.given, userRequest.personData.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"        </div>\n"+
"        <div class=cui-flex-table__mobile-stack>\n"+
"           <div class=cui-flex-table__left>\n"+
"            <span class=cui-flex-table__title>{{userRequest.personData.name.prefix}} {{userRequest.personData.name.given}} {{userRequest.personData.name.middle}} {{userRequest.personData.name.surname}} {{userRequest.personData.name.suffix}}</span>\n"+
"          </div>\n"+
"\n"+
"         \n"+
"\n"+
"          <div class=cui-flex-table__middle>\n"+
"            <span>{{userRequest.personData.creation|date}}</span>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-flex-table__middle>\n"+
"            <span>\n"+
"            \n"+
"            {{userRequest.packageData.name}}\n"+
"            </span>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-flex-table__right>\n"+
"            <span>{{userRequest.personData.organization.name}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </li>\n"+
"    </cui-table-row>\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=usersAppRequests.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=usersAppRequests.search.pageSize count=usersAppRequests.userCount on-page-change=usersAppRequests.updateSearchParams ng-model=usersAppRequests.search.page attach-rerender-to=usersAppRequests.reRenderPagination></paginate>\n"+
"    </div>\n"+
"  </section>\n"+
"\n"+
"</main>\n");



$templateCache.put('app/modules/organization/requests/usersRequests/usersRegistrationRequests/requests-RegistrationRequests.html',
"<main class=\"cui-organization cui-organization-req-uers\">\n"+
"  \n"+
"  <h2 class=cui-sr-only>{{'org-req-users-requests'}}</h2>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"    \n"+
"    <div class=cui-tabs__main-container>\n"+
"      <ul class=cui-tabs__nav>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.usersRegistrationRequests>\n"+
"          <a class=\"cui-tabs__tab cui-tabs__tab--active\">{{'pending' | translate}} {{'user' | translate}} {{'requests' | translate}}</a>\n"+
"        </li>\n"+
"        <li class=cui-tabs__tab-container ui-sref=organization.requests.usersAppRequests>\n"+
"          <a class=cui-tabs__tab>{{'pending' | translate}} {{'application' | translate}} {{'requests' | translate}}</a>\n"+
"        </li>\n"+
"      </ul>\n"+
"    </div>\n"+
"\n"+
"  \n"+
"  <section class=cui-organization__main-container>\n"+
"    <h3 class=cui-sr-only>{{'users-requests' | translate}}</h3>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['usersRegistrationRequests.data']\">\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"    </div>\n"+
"\n"+
"    <div class=\"cui-action cui-action--alt\">\n"+
"      <div class=\"cui-radio cui-radio--basic-ltr\">\n"+
"          <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-yes ng-model=usersRegistrationRequests.searchBy value=person>\n"+
"          <label class=cui-radio__label for=radio-choice-basic-yes><span></span>{{'people' | translate}}</label>\n"+
"          <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-no ng-model=usersRegistrationRequests.searchBy value=org>\n"+
"          <label class=cui-radio__label for=radio-choice-basic-no><span></span>{{'organizations' | translate}}</label>\n"+
"      </div>&nbsp;\n"+
"      <div class=\"cui-input-button cui-input-button--alt-bg\" style=width:350px>\n"+
"          <input class=cui-input-button__input ng-model=usersRegistrationRequests.searchValue focus-if placeholder=\"{{'search' | translate}}\" on-enter=usersRegistrationRequests.updateSearchByName>\n"+
"          <button class=cui-input-button__button ng-click=usersRegistrationRequests.updateSearchByName()>{{'search' | translate}}</button>\n"+
"      </div>\n"+
"</div>\n"+
"\n"+
"    <cui-table-header headers=\"['cui-name', 'submitted', 'application', 'division']\" sorting=usersRegistrationRequests.sortBy sorting-callbacks=usersRegistrationRequests.sortingCallbacks>\n"+
"      </cui-table-header>\n"+
"    <cui-table-row ng-repeat=\"userRequest in usersRegistrationRequests.data track by $index\" ng-click=usersRegistrationRequests.goToDetails(userRequest)>\n"+
"      <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"        <div class=cui-flex-table__avatar-col>\n"+
"          <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=\"[userRequest.personData.name.given, userRequest.personData.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"        </div>\n"+
"        <div class=cui-flex-table__mobile-stack>\n"+
"           <div class=cui-flex-table__left>\n"+
"            <span class=cui-flex-table__title>{{userRequest.personData.name.prefix}} {{userRequest.personData.name.given}} {{userRequest.personData.name.middle}} {{userRequest.personData.name.surname}} {{userRequest.personData.name.suffix}}</span>\n"+
"          </div>\n"+
"\n"+
"       \n"+
"\n"+
"          <div class=cui-flex-table__middle>\n"+
"            <span>{{userRequest.personData.creation|date}}</span>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-flex-table__middle>\n"+
"            <span>\n"+
"            \n"+
"            {{userRequest.packageData.name}}\n"+
"            </span>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-flex-table__right>\n"+
"            <span>{{userRequest.personData.organization.name}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </li>\n"+
"    </cui-table-row>\n"+
"    <div align=center ng-if=\"usersRegistrationRequests.data.length===0\">{{'cui-no-details'|translate}}</div>\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container>\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=usersRegistrationRequests.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=usersRegistrationRequests.search.pageSize count=usersRegistrationRequests.userCount on-page-change=usersRegistrationRequests.updateSearchParams ng-model=usersRegistrationRequests.search.page attach-rerender-to=usersRegistrationRequests.reRenderPagination></paginate>\n"+
"    </div>\n"+
"  </section>\n"+
"\n"+
"</main>\n"+
"\n");



$templateCache.put('app/modules/organization/roles/organization-roles.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/thirdwavellc/cui-idm-b2x/tree/master/assets/app/organization/roles target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"<div class=cui-organization>\n"+
"  \n"+
"  <div class=cui-action>\n"+
"    <nav class=cui-breadcrumb ng-include=\"'app/modules/organization/partials/breadcrumbs.html'\"></nav>\n"+
"    <div class=cui-action__actions ng-include=\"'app/modules/organization/partials/invite-actions.html'\"></div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-organization__main-container>\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=orgRoles.loading>\n"+
"      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"    <p>Organization Roles Page</p>\n"+
"\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userInvited/complete-registration-popover.html',
"\n"+
"<div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#org-link pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=userInvited.showOrgInfo>\n"+
"      <p class=cui-popover__row>{{userInvited.organization.name}}<br>\n"+
"      {{userInvited.organization.phones[0].number}}<br>\n"+
"      {{userInvited.organization.addresses[0].streets[0]}}<br>\n"+
"      {{userInvited.organization.addresses[0].city}}, {{userInvited.organization.addresses[0].state}} \n"+
"      {{userInvited.organization.addresses[0].postal}}<br>\n"+
"      {{userInvited.organization.addresses[0].country}}</p>\n"+
"</div>");



$templateCache.put('app/modules/registration/userInvited/userInvited-steps/userInvited-applications-popup.html',
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#selection-popup pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=userInvited.selectionPopUp style=width:171px>\n"+
"        <div class=cui-popover__row>\n"+
"        	<div class=cui-badge ng-bind=userInvited.applications.numberOfSelected></div>\n"+
"          	<span>{{'cui-selected-apps' | translate}}</span>\n"+
"        </div>\n"+
"        <div class=cui-popover__row>\n"+
"        	\n"+
"        	<div>\n"+
"        		<div ng-repeat=\"application in userInvited.applications.processedSelected\">\n"+
"	          		{{application.name}}\n"+
"	          	</div>\n"+
"        	</div>          \n"+
"        </div>\n"+
"        <div class=cui-popover__row>\n"+
"        	<span class=cui-link>Got it!</span>\n"+
"        </div>\n"+
"      </div>");



$templateCache.put('app/modules/registration/userInvited/userInvited-steps/userInvited-applications.html',
"\n"+
"<div ng-if=!userInvited.applications.list>\n"+
"  {{'cui-org-no-applications'|translate}}.\n"+
"  <div class=cui-wizard__controls style=margin-top:20px>\n"+
"    <button class=cui-wizard__previous ng-if=!wizardFinished ng-click=previous()>&#60;&#60; {{'cui-previous' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=!wizardFinished ng-click=next()>{{'cui-next' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=wizardFinished ng-click=goToStep(4)>{{'cui-back-to-review' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-if=\"userInvited.applications.list && (!userInvited.applications.step || userInvited.applications.step===1)\" ng-init=\"userInvited.applications.step=1\">\n"+
"  \n"+
"  \n"+
"  <div style=direction:rtl;margin-bottom:10px class=cui-link>\n"+
"    <div class=cui-badge ng-bind=userInvited.applications.numberOfSelected ng-click=\"userInvited.selectionPopUp =! userInvited.selectionPopUp\" id=selection-popup off-click=\"userInvited.selectionPopUp=false\"></div>\n"+
"    {{'cui-selections' | translate }}\n"+
"    <div ng-include=\"'app/modules/registration/userInvited/userInvited-steps/userInvited-applications-popup.html'\"></div>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-loading__container--organization-list ng-if=userInvited.updatingApps>\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  <div ng-if=\"!userInvited.updatingApps \" ng-repeat=\"application in userInvited.applications.list | orderBy:'name' track by application.id\" style=margin-bottom:10px>\n"+
"    <cui-expandable class=cui-expandable>\n"+
"      <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"        <div>\n"+
"        <input id=application{{application.id}} type=checkbox ng-model=userInvited.applications.selected[application.id] ng-true-value=\"'{{application.id}},{{application.servicePackage.id}},{{application.name | cuiI18n}},{{application.servicePackage.personTacEnabled}}'\" ng-false-value=null ng-change=userInvited.applications.updateNumberOfSelected(userInvited.applications.selected[application.id]) style=margin-right:10px>\n"+
"        <span ng-bind=\"application.name | cuiI18n\"></span>\n"+
"        </div>\n"+
"        <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </cui-expandable-title>\n"+
"\n"+
"      \n"+
"    </cui-expandable>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-paginate__container>\n"+
"    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"    <results-per-page class=cui-paginate__select ng-model=userInvited.pageSize></results-per-page>\n"+
"    <paginate class=cui-paginate results-per-page=userInvited.pageSize count=userInvited.appCount on-page-change=userInvited.pageChange ng-model=userInvited.page></paginate>\n"+
"  </div>\n"+
"  <div class=cui-wizard__controls style=\"margin:20px 0 10px\">{{'cui-application-select-info'|translate}}</div>\n"+
"  <div class=cui-wizard__controls>\n"+
"    <button class=cui-wizard__previous ng-if=!wizardFinished ng-click=previous()>&#60;&#60; {{'cui-previous' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-click=\"userInvited.applications.process()===0? next() : userInvited.getAppicationTaC();userInvited.applications.step=2\">{{'cui-next' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-if=\"userInvited.applications.list && userInvited.applications.step===2\">\n"+
"  <cui-icon cui-svg-icon=fa:chevron20 svg-class=\"cui-icon cui-icon--light-grey chevron chevron-left\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  <span class=cursor__pointer ng-click=\"userInvited.applications.step=1\" translate> {{'cui-all-applications'}}</span>\n"+
"  <div style=float:right class=cui-link>\n"+
"    {{'cui-selections' | translate }}\n"+
"    <div class=cui-badge ng-bind=userInvited.applications.numberOfSelected ng-click=\"userInvited.selectionPopUp =! userInvited.selectionPopUp\" id=selection-popup off-click=\"userInvited.selectionPopUp=false\"></div>\n"+
"    <div ng-include=\"'app/modules/registration/userInvited/userInvited-steps/userInvited-applications-popup.html'\"></div>\n"+
"  </div>\n"+
"  <div style=\"margin:2em 0\">\n"+
"    {{'cui-tos-applications'|translate}}\n"+
"  </div>\n"+
"  <ng-form name=selectApps class=application-review>\n"+
"    <div class=\"application-review__name application-review__label\">\n"+
"      <span translate>{{ 'cui-application-name' }}</span>\n"+
"    </div>\n"+
"    <div class=\"application-review__tos-link application-review__label\">\n"+
"      <span translate>{{ 'cui-application-tos' }}</span>\n"+
"    </div>\n"+
"    <div class=\"application-review__tos-agreement application-review__label\">\n"+
"      <span translate>{{ 'cui-application-tos-agreement' }}</span>\n"+
"    </div>\n"+
"    <div ng-repeat=\"application in userInvited.applications.processedSelected\" class=application-review__list>\n"+
"        <div class=application-review__name ng-if=\"application.showTac=='true'\">\n"+
"          <span>{{application.name}}</span>\n"+
"        </div>\n"+
"        <div class=application-review__tos-link ng-click=userInvited.showTac($index) ng-if=\"application.showTac=='true'\">\n"+
"          <a class=cui-link translate>{{'cui-view-tos'}}</a>\n"+
"        </div>\n"+
"        <div class=application-review__tos-agreement ng-if=\"application.showTac=='true'\">\n"+
"          <div class=cui-switch>\n"+
"            <input class=cui-switch__input ng-model=userInvited.applications.processedSelected[$index].acceptedTos name=application{{$index}} id=application{{$index}} type=checkbox ng-required=true>\n"+
"            <label class=cui-switch__label for=application{{$index}}>\n"+
"              <div class=cui-switch__container>\n"+
"                <span class=cui-switch__checked-message>Accept</span>\n"+
"                <span class=cui-switch__unchecked-message>Don't Accept</span>\n"+
"              </div>\n"+
"            </label>\n"+
"          </div>\n"+
"        </div>\n"+
"    </div>\n"+
"  </ng-form>\n"+
"\n"+
"  <div class=cui-wizard__step-error ng-if=\"!selectApps.$valid && userInvited.applications.formTouched\">{{ 'cui-package-tos' | translate }}</div>\n"+
"  <div class=cui-wizard__controls>\n"+
"    <button class=cui-wizard__previous ng-click=\"userInvited.applications.step=userInvited.applications.step-1\">&#60;&#60; {{'cui-all-applications' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=!wizardFinished ng-click=\"userInvited.applications.formTouched=true;nextWithErrorChecking(selectApps)\" ng-class=\"{'cui-wizard__next--error' : !selectApps.$valid }\">{{'cui-next' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=wizardFinished ng-click=\"selectApps.$valid && goToStep(4)\" ng-class=\"{'cui-wizard__next--error': !selectApps.$valid}\">{{'cui-back-to-review' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-if=\"userInvited.applications.list && userInvited.applications.step===3\">\n"+
"  <cui-icon cui-svg-icon=fa:chevron20 svg-class=\"cui-icon cui-icon--light-grey chevron chevron-left\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  <span class=cursor__pointer ng-click=\"userInvited.applications.step=2\" translate> {{'cui-printer-friendly-tac'}}</span>\n"+
"  <div style=float:right class=cui-link>\n"+
"    {{'cui-selections' | translate }}\n"+
"    <div class=cui-badge ng-bind=userInvited.applications.numberOfSelected ng-click=\"userInvited.selectionPopUp =! userInvited.selectionPopUp\" id=selection-popup off-click=\"userInvited.selectionPopUp=false\"></div>\n"+
"    <div ng-include=\"'app/modules/registration/userInvited/userInvited-steps/userInvited-applications-popup.html'\"></div>\n"+
"  </div>\n"+
"  <div class=tac_wrapper>\n"+
"    {{userInvited.tacContent}}\n"+
"  </div>\n"+
"  <div class=cui-wizard__controls>\n"+
"    <button class=cui-wizard__previous ng-click=\"userInvited.applications.step=userInvited.applications.step-1\" style=font-size:1em>&#60;&#60; {{'cui-all-applications' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userInvited/userInvited-steps/userInvited-login.html',
"<ng-form name=userLogin novalidate>\n"+
"\n"+
"  \n"+
"  \n"+
"  <label for=userID>{{'username' | translate}}</label>\n"+
"  <div class=cui-error ng-messages=userLogin.userID.$error ng-if=userLogin.userID.$dirty>\n"+
"    <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-error ng-if=\"userLogin.userID.$error.usernameTaken && userLogin.userID.$dirty\">\n"+
"    <div class=cui-error__message>{{'cui-username-taken' | translate}}</div>\n"+
"  </div>\n"+
"  <input type=text name=userID class=cui-input ng-required=true ng-model=userInvited.userLogin.username custom-error=userInvited.customErrors.userName ng-class=\"{'cui-input--error' : userLogin.userID.$touched && userLogin.userID.$invalid}\">\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <div class=cui-input__password-holder>\n"+
"        <label>{{'cui-password' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=userLogin.password.$error ng-if=userLogin.password.$dirty>\n"+
"          <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"        </div>\n"+
"        <input id=test-input type=password name=password class=cui-input ng-required=true ng-model=userInvited.userLogin.password ng-class=\"{'cui-input--error': userLogin.password.$touched && userLogin.password.$invalid}\" password-validation=userInvited.passwordRules ng-model-options={allowInvalid:true} ng-change=\"userInvited.userLogin.hiddenPassword=base.generateHiddenPassword(userInvited.userLogin.password)\" ng-focus=\"usersWalkup.passwordPopover=true\" ng-blur=\"usersWalkup.passwordPopover=false\">\n"+
"        \n"+
"        <div cui-popover target=#test-input popover-positions=\"[{position:'right'},{position:'bottom'}]\" ng-if=usersWalkup.passwordPopover>\n"+
"          <div password-popover ng-messages=userLogin.password.$error ng-messages-multiple class=cui-error__password>\n"+
"            <div ng-messages-include=app/common-templates/password-validation.html></div>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-password-re' | translate}}</label>\n"+
"      <div class=cui-error ng-if=\"userLogin.passwordRe.$dirty && userLogin.passwordRe.$error.match\">\n"+
"        <div class=cui-error__message>{{'password-mismatch' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=password name=passwordRe class=cui-input ng-required=true ng-model=userInvited.userLogin.passwordRe match=userInvited.userLogin.password>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-question' | translate}} 1</label>\n"+
"      <cui-dropdown ng-model=userInvited.userLogin.question1 class=cui-dropdown return-value=object display-value=\"(object.question | cuiI18n)\" options=userInvited.userLogin.challengeQuestions1>\n"+
"      </cui-dropdown>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-answer' | translate}} 1</label>\n"+
"      <div class=cui-error ng-if=userLogin.answer1.$dirty>\n"+
"        <div class=cui-error__message ng-if=userLogin.answer1.$error.required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"        <div ng-if=userInvited.answer1&&userLogin.answer1.$error.unique class=cui-error__message>{{'security-question-repeated' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text name=answer1 class=cui-input ng-required=true ng-focus=\"userInvited.answer2=false;userInvited.answer1=true\" ng-model=userInvited.userLogin.challengeAnswer1 unique=userInvited.userLogin.challengeAnswer2>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-question' | translate}} 2</label>\n"+
"        <cui-dropdown ng-model=userInvited.userLogin.question2 class=cui-dropdown return-value=object display-value=\"(object.question | cuiI18n)\" options=userInvited.userLogin.challengeQuestions2></cui-dropdown>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-answer' | translate}} 2</label>\n"+
"      <div class=cui-error ng-if=userLogin.answer2.$dirty>\n"+
"        <div class=cui-error__message ng-if=userLogin.answer2.$error.required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"        <div ng-if=userInvited.answer2&&userLogin.answer2.$error.unique class=cui-error__message>{{'security-question-repeated' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text name=answer2 class=cui-input ng-required=true ng-model=userInvited.userLogin.challengeAnswer2 unique=userInvited.userLogin.challengeAnswer1 ng-focus=\"userInvited.answer1=false;userInvited.answer2=true\">\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"</ng-form>\n"+
"\n"+
"<div class=cui-wizard__controls>\n"+
"  <button type=button class=cui-wizard__previous ng-if=!wizardFinished ng-click=previous()>&#60;&#60; {{'cui-previous' | translate}}</button>\n"+
"  <button type=button class=cui-wizard__next ng-if=!wizardFinished ng-click=nextWithErrorChecking(userLogin) ng-class=\"(userLogin.$invalid)? 'cui-wizard__next--error' : ''\">{{'cui-next' | translate}}</button>\n"+
"  <button type=button class=cui-wizard__next ng-if=wizardFinished ng-click=\"userLogin.$valid && goToStep(4)\" ng-class=\"!userLogin.$valid? 'cui-wizard__next--error' : ''\">{{'cui-back-to-review' | translate}}</button>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userInvited/userInvited-steps/userInvited-review.html',
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'cui-user-information' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body disable-animate class=cui-expandable__body>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.firstNameError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-first-name model=userInvited.user.name.given on-edit=userInvited.inlineEdit.firstName hide-save-if=userInvited.inlineEdit.noSaveFirstName on-save=userInvited.inlineEdit.updateFirstNameError></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.lastNameError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-last-name model=userInvited.user.name.surname on-edit=userInvited.inlineEdit.lastName hide-save-if=userInvited.inlineEdit.noSaveLastName on-save=userInvited.inlineEdit.updateLastNameError></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.emailError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"      </div>\n"+
"      <div ng-if=!userInvited.isEmailTaken class=cui-warning>{{'cui-error-email-exists' | translate}}</div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-email model=userInvited.user.email on-edit=userInvited.inlineEdit.email on-save=userInvited.inlineEdit.updateEmailError hide-save-if=userInvited.inlineEdit.noSaveEmail></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.countryError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit type=auto-complete wrapper-class=cui-expandable__review-item__inline-wrapper input-class=\"cui-expandable__review-input cui-expandable__review-input__autocomplete\" label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-country model=userInvited.userCountry display=userInvited.userCountry.title selected-object=userInvited.userCountry local-data=base.countries.list search-fields=name title-field=name on-edit=userInvited.inlineEdit.country on-save=userInvited.inlineEdit.updateCountryError hide-save-if=userInvited.inlineEdit.noSaveCountry field-required=userInvited.userCountry></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.address1Error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-address-1 model=userInvited.user.addresses[0].streets[0] on-edit=userInvited.inlineEdit.address1 hide-save-if=userInvited.inlineEdit.noSaveAddress1 on-save=userInvited.inlineEdit.updateAddress1Error></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-address-2 model=userInvited.user.addresses[0].streets[1]></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-city model=userInvited.user.addresses[0].city></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-state model=userInvited.user.addresses[0].state></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-postal model=userInvited.user.addresses[0].postal></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.telephoneError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-telephone model=userInvited.user.phones[0].number on-edit=userInvited.inlineEdit.telephone hide-save-if=userInvited.inlineEdit.noSaveTelephone on-save=userInvited.inlineEdit.updateTelephoneError></inline-edit>\n"+
"    </div> \n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-language model=userInvited.user.language display=userInvited.user.language.name options-expression=\"language as language.name  for language in options\" options=userInvited.languages></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-timezone model=userInvited.user.timezone display=userInvited.user.timezone.name options-expression=\"timeZone as timeZone.name  for timeZone in options\" options=base.timezones></inline-edit>\n"+
"    </div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"      {{'cui-organization-information' | translate}}\n"+
"      <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </cui-expandable-title>\n"+
"\n"+
"    <cui-expandable-body class=cui-expandable__body>\n"+
"      \n"+
"      <div class=cui-expandable__review-item><span class=cui-expandable__review-item__field>{{'cui-org' | translate}}</span> <span class=review-item__value>{{userInvited.organization.name}}</span></div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'cui-sign-in-information' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body disable-animate class=cui-expandable__body>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.userIdError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-user-id model=userInvited.userLogin.username on-edit=userInvited.inlineEdit.userId hide-save-if=userInvited.inlineEdit.noSaveUserId on-save=userInvited.inlineEdit.updateUserIdError></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-wrapper><span class=cui-expandable__review-item__field>{{'cui-password' | translate}}</span> <span class=review-item__value>{{userInvited.userLogin.hiddenPassword}}</span></div>\n"+
"    \n"+
"        <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-question model=userInvited.userLogin.question1 display=\"userInvited.userLogin.question1.question | cuiI18n\" options-expression=\"question as (question.question|cuiI18n) for question in options\" options=userInvited.userLogin.challengeQuestions1></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.challengeAnswer1Error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-answer model=userInvited.userLogin.challengeAnswer1 on-edit=userInvited.inlineEdit.challengeAnswer1 hide-save-if=userInvited.inlineEdit.noSaveChallengeAnswer1 on-save=userInvited.inlineEdit.updateChallengeAnswer1Error></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-question model=userInvited.userLogin.question2 display=\"userInvited.userLogin.question2.question | cuiI18n\" options-expression=\"question as (question.question|cuiI18n) for question in options\" options=userInvited.userLogin.challengeQuestions2></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userInvited.inlineEdit.challengeAnswer2Error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-answer model=userInvited.userLogin.challengeAnswer2 on-edit=userInvited.inlineEdit.challengeAnswer2 hide-save-if=userInvited.inlineEdit.noSaveChallengeAnswer2 on-save=userInvited.inlineEdit.updateChallengeAnswer2Error></inline-edit>\n"+
"    </div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'cui-application-selection' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body class=cui-expandable__body>\n"+
"    <div class=cui-expandable__review-item ng-if=\"userInvited.applications.processedSelected.length===0 || !userInvited.applications.processedSelected.length\">\n"+
"      <span class=cui-link ng-click=goToStep(3)>{{'no-applications-selected' | translate}}</span>\n"+
"    </div>\n"+
"    <div class=cui-expandable__review-item ng-repeat=\"application in userInvited.applications.processedSelected\">\n"+
"      <input id=application{{application.id}} ng-checked=true type=checkbox ng-model=userInvited.check[application.id] ng-true-value=true ng-false-value=null ng-click=userInvited.applications.updateSelected(application,userInvited.check[application.id],application.id) style=margin-right:10px>\n"+
"      <label for=application{{application.id}} ng-bind=application.name></label>\n"+
"    </div>\n"+
"    <div class=cui-expandable__review-item ng-if=\"userInvited.applications.processedSelected.length!==0 && userInvited.applications.processedSelected.length\">\n"+
"      <span>{{'cui-need-different-app' | translate}}</span>\n"+
"      <span>? {{'cui-go-back-to' | translate}}</span>\n"+
"      <span class=cui-link ng-click=\"userInvited.applications.step=1;goToStep(3)\"> {{'cui-all-applications' | translate}}</span>\n"+
"    </div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'request-reason' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body class=cui-expandable__title>\n"+
"    <div class=cui-applications__review-text-input>\n"+
"        <input type=text class=cui-input ng-model=userInvited.reason>\n"+
"    </div>\n"+
"\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<div class=cui-wizard__controls>\n"+
"  <div class=cui-error ng-if=userInvited.submitError><label>{{userInvited.errorMessage | translate}}</label></div>\n"+
"  <cui-button disable-animate button-click=\"userInvitedRegForm.$valid && userInvited.submit()\" loading-if=userInvited.submitting loading-message=\"{{'cui-button-loading-text' | translate}}\" error-if=userInvited.submitError error-message=\"{{'cui-error-try-again' | translate}}\">\n"+
"    <button class=cui-wizard__next ng-class=\"(!userInvitedRegForm.$valid)? 'cui-wizard__next--error' : userInvited.sucess? 'success' : usersInvite.success===false? 'fail' : ''\" style=position:relative>\n"+
"      <span ng-if=\"!userInvited.submitting && !userInvited.submitError\">{{'cui-submit' | translate}}</span>\n"+
"    </button>\n"+
"  </cui-button>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userInvited/userInvited-steps/userInvited-userProfile.html',
"<ng-form name=user novalidate>\n"+
"\n"+
"  \n"+
"  <p>{{\"cui-all-fields-required\" | translate}}. {{\"cui-complete-registration\" | translate}}\n"+
"    <a href=\"\" id=org-link class=\"cui-link--medium-light cui-link--no-decoration\" ng-click=\"userInvited.showOrgInfo = !userInvited.showOrgInfo\">{{userInvited.organization.name}}\n"+
"      <div ng-include=\"'app/modules/registration/userInvited/complete-registration-popover.html'\"></div>\n"+
"    </a>\n"+
"  </p>\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label for=user-name-given>{{'cui-first-name' | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.firstName.$error ng-if=user.firstName.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text name=firstName class=cui-input ng-required=true ng-model=userInvited.user.name.given>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label for=user-name-surname>{{'cui-last-name' | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.lastName.$error ng-if=user.lastName.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.user.name.surname name=lastName class=cui-input ng-required=true>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-email' | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.email.$error ng-if=user.email.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      \n"+
"      <div class=cui-error ng-if=\"user.email.$error.email && user.email.$dirty\">\n"+
"        <div class=cui-error__message>{{'cui-this-is-not-valid-email' | translate}}</div>\n"+
"      </div>\n"+
"      <div ng-if=!userInvited.isEmailTaken class=cui-warning>{{'cui-error-email-exists' | translate}}</div>\n"+
"      <input type=text name=email class=cui-input custom-error=userInvited.customErrors.email ng-required=true ng-model=userInvited.user.email ng-blur=userInvited.checkDuplicateEmail(userInvited.user.email) ng-disabled=userInvited.invitationData.restrictEmail>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-email-re' | translate}}</label>\n"+
"      <div class=cui-error ng-if=\"user.emailRe.$dirty && user.emailRe.$error.match\">\n"+
"        <div class=cui-error__message>{{'email-mismatch' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.emailRe name=emailRe class=cui-input ng-required=true match=userInvited.user.email ng-disabled=userInvited.invitationData.restrictEmail>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label for=country>{{\"cui-country\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.country.$error ng-if=user.country.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <div auto-complete input-name=country pause=100 selected-object=userInvited.userCountry local-data=base.countries.list search-fields=name title-field=name input-class=cui-input match-class=highlight auto-match=true field-required=userInvited.userCountry></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{\"cui-street-address\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.address1.$error ng-if=user.address1.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.user.addresses[0].streets[0] class=cui-input name=address1 ng-required=true>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{\"cui-address\" | translate}} 2</label>\n"+
"      <div class=cui-error ng-messages=user.address2.$error ng-if=user.address2.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.user.addresses[0].streets[1] class=cui-input name=address2 placeholder=\"{{'cui-address-example' | translate}}\" ng-required=true>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{\"cui-city\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.city.$error ng-if=user.city.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.user.addresses[0].city class=cui-input name=city ng-required=true>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{\"cui-state\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.state.$error ng-if=user.state.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.user.addresses[0].state class=cui-input name=state ng-required=true>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label for=postal-code>{{\"cui-postal\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.postal.$error ng-if=user.postal.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.user.addresses[0].postal class=cui-input name=postal ng-required=true>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{\"cui-telephone\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.telephone.$error ng-if=user.telephone.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userInvited.user.phones[0].number class=cui-input name=telephone ng-required=true>\n"+
"    </div>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"        <label>{{'cui-language' | translate}}</label>\n"+
"        <cui-dropdown ng-model=userInvited.user.language class=cui-dropdown return-value=object display-value=object.name options=userInvited.languages></cui-dropdown>\n"+
"    </div>\n"+
"  </div>\n"+
"    \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"        <label for=timezone>{{'cui-timezone' | translate}}</label>\n"+
"        <cui-dropdown ng-model=userInvited.user.timezone class=cui-dropdown return-value=object display-value=object.name options=base.timezones></cui-dropdown>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-tos-container>\n"+
"    <input type=checkbox name=TOS id=TOS ng-model=usersRegister.tos ng-required=true class=cui-checkbox>\n"+
"    <label ng-click=\"usersRegister.tos=!usersRegister.tos\" class=cui-checkbox__label> {{'cui-agree-covisint' | translate}}\n"+
"      <a href=\"\" class=\"cui-link cui-padding--h-5\">{{'terms-of-service' | translate}}</a> {{'cui-and' | translate}}\n"+
"      <a href=\"\" class=\"cui-link cui-padding--h-5\">{{'privacy-policy' | translate}}</a>\n"+
"    </label>\n"+
"    <span class=cui-wizard__step-error ng-if=\"user.TOS.$dirty && user.TOS.$error.required\"><br><br> {{'cui-tos-agree' | translate}} </span>\n"+
"  </div>\n"+
"\n"+
"  <div class=\"cui-wizard__controls cui-wizard__controls--clear\">\n"+
"    <button type=button class=cui-wizard__next ng-if=!wizardFinished ng-click=userInvited.selectOrganization();nextWithErrorChecking(user) ng-class=\"(user.$invalid)? 'cui-wizard__next--error' : ''\">{{'cui-next' | translate}}</button>\n"+
"    <button type=button class=cui-wizard__next ng-if=wizardFinished ng-click=\"user.$valid && goToStep(4)\" ng-class=\"(user.$invalid)? 'cui-wizard__next--error' : ''\">{{'cui-back-to-review' | translate}}</button>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/registration/userInvited/userInvited.html',
"\n"+
"<div class=code-info>The markup and javascript used to create this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/registration/userInvited target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=cui-loading__container--organization-list ng-if=userInvited.initializing>\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"<p style=color:red align=center ng-if=\"base.apiError.for['RegistrationFactory.inValidInvite']\">{{ 'cui-invalid-invitation'| translate}}</p>\n"+
"<div class=cui-form--mobile-steps ng-if=\"!userInvited.initializing && !base.apiError.for['RegistrationFactory.inValidInvite']\">\n"+
"  <div class=cui-form__title>{{'create-account' | translate}}</div>\n"+
"  <div class=cui-form__body>\n"+
"    <cui-wizard bar mobile-stack=700 class=cui-wizard step=1 minimum-padding=100 clickable-indicators dirty-validation>\n"+
"      <indicator-container class=\"indicator-container indicator-container--icons\"></indicator-container>\n"+
"\n"+
"      <ng-form name=userInvitedRegForm novalidate>\n"+
"        <step step-title=\"{{'cui-user-profile' | translate}}\" icon=cui:user>\n"+
"          <div ng-include=\"'app/modules/registration/userInvited/userInvited-steps/userInvited-userProfile.html'\"></div>\n"+
"        </step>\n"+
"\n"+
"        <step step-title=\"{{'cui-login' | translate}}\" icon=cui:login>\n"+
"          <div ng-include=\"'app/modules/registration/userInvited/userInvited-steps/userInvited-login.html'\"></div>\n"+
"        </step>\n"+
"\n"+
"        <step step-title=\"{{'cui-applications' | translate}}\" icon=cui:applications>\n"+
"          <div ng-include=\"'app/modules/registration/userInvited/userInvited-steps/userInvited-applications.html'\"></div>\n"+
"        </step>\n"+
"\n"+
"        <step step-title=\"{{'cui-review' | translate}}\" icon=cui:review>\n"+
"          <div ng-include=\"'app/modules/registration/userInvited/userInvited-steps/userInvited-review.html'\"></div>\n"+
"        </step>\n"+
"      </ng-form>\n"+
"    </cui-wizard>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userWalkup/userWalkup-steps/userWalkup-applications-popup.html',
"      \n"+
"      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#selection-popup pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=userWalkup.selectionPopUp style=width:171px>\n"+
"        <div class=cui-popover__row>\n"+
"        	<div class=cui-badge ng-bind=userWalkup.applications.numberOfSelected></div>\n"+
"          	<span>{{'cui-selected-apps' | translate}}</span>\n"+
"        </div>\n"+
"        <div class=cui-popover__row>\n"+
"        	\n"+
"        	<div>\n"+
"        		<div ng-repeat=\"application in userWalkup.applications.processedSelected\">\n"+
"	          		{{application.name}}\n"+
"	          	</div>\n"+
"        	</div>          \n"+
"        </div>\n"+
"        <div class=cui-popover__row>\n"+
"        	<span class=cui-link>Got it!</span>\n"+
"        </div>\n"+
"      </div>");



$templateCache.put('app/modules/registration/userWalkup/userWalkup-steps/userWalkup-applications.html',
"\n"+
"<div ng-if=!userWalkup.applications.list>\n"+
"  {{'cui-org-no-applications'|translate}}.\n"+
"  <div class=cui-wizard__controls style=margin-top:20px>\n"+
"    <button class=cui-wizard__previous ng-if=!wizardFinished ng-click=previous()>&#60;&#60; {{'cui-previous' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=!wizardFinished ng-click=next()>{{'cui-next' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=wizardFinished ng-click=goToStep(5)>{{'cui-back-to-review' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-if=\"userWalkup.applications.list && (!userWalkup.applications.step || userWalkup.applications.step===1)\" ng-init=\"userWalkup.applications.step=1\">\n"+
"  \n"+
"  \n"+
"  <div style=direction:rtl;margin-bottom:10px class=cui-link>\n"+
"    <div class=cui-badge ng-bind=userWalkup.applications.numberOfSelected ng-click=\"userWalkup.selectionPopUp =! userWalkup.selectionPopUp\" id=selection-popup off-click=\"userWalkup.selectionPopUp=false\"></div>\n"+
"    {{'cui-selections' | translate }}\n"+
"    <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-applications-popup.html'\"></div>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-loading__container--organization-list ng-if=userWalkup.updatingApps>\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  <div ng-if=!userWalkup.updatingApps ng-repeat=\"application in userWalkup.applications.list | orderBy:'name' track by application.id\" style=margin-bottom:10px>\n"+
"    <cui-expandable class=cui-expandable>\n"+
"      <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"        <div>\n"+
"        <input id=application{{application.id}} type=checkbox ng-model=userWalkup.applications.selected[application.id] ng-true-value=\"'{{application.id}},{{application.servicePackage.id}},{{application.name | cuiI18n}},{{application.servicePackage.personTacEnabled}}'\" ng-false-value=null ng-change=userWalkup.applications.updateNumberOfSelected(userWalkup.applications.selected[application.id],application) style=margin-right:10px>\n"+
"        <span ng-bind=\"application.name | cuiI18n\"></span>\n"+
"        </div>\n"+
"        <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"      </cui-expandable-title>\n"+
"\n"+
"      \n"+
"    </cui-expandable>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-paginate__container>\n"+
"    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"    <results-per-page class=cui-paginate__select ng-model=userWalkup.appPaginationSize></results-per-page>\n"+
"    <paginate class=cui-paginate results-per-page=userWalkup.appPaginationSize count=userWalkup.appCount on-page-change=userWalkup.appPaginationPageHandler ng-model=userWalkup.appPaginationCurrentPage attach-rerender-to=userWalkup.appReRenderPaginate></paginate>\n"+
"  </div>\n"+
"  <div class=cui-wizard__controls style=\"margin:20px 0 10px\">{{'cui-application-select-info'|translate}}</div>\n"+
"  <div class=cui-wizard__controls>\n"+
"    <button class=cui-wizard__previous ng-if=!wizardFinished ng-click=previous()>&#60;&#60; {{'cui-previous' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-click=\"userWalkup.applications.process()===0? next() : userWalkup.getAppicationTaC();userWalkup.applications.step=2\">{{'cui-next' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-if=\"userWalkup.applications.list && userWalkup.applications.step===2\">\n"+
"  <cui-icon cui-svg-icon=fa:chevron20 svg-class=\"cui-icon cui-icon--light-grey chevron chevron-left\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  <span class=cursor__pointer ng-click=\"userWalkup.applications.step=1\" translate> {{'cui-all-applications'}}</span>\n"+
"  <div style=float:right class=cui-link>\n"+
"    {{'cui-selections' | translate }}\n"+
"    <div class=cui-badge ng-bind=userWalkup.applications.numberOfSelected ng-click=\"userWalkup.selectionPopUp =! userWalkup.selectionPopUp\" id=selection-popup off-click=\"userWalkup.selectionPopUp=false\"></div>\n"+
"    <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-applications-popup.html'\"></div>\n"+
"  </div>\n"+
"  <div style=\"margin:2em 0\">\n"+
"    {{'cui-tos-applications'|translate}}\n"+
"  </div>\n"+
"  <ng-form name=selectApps class=application-review>\n"+
"    <div class=\"application-review__name application-review__label\">\n"+
"      <span translate>{{ 'cui-application-name' }}</span>\n"+
"    </div>\n"+
"    <div class=\"application-review__tos-link application-review__label\">\n"+
"      <span translate>{{ 'cui-application-tos' }}</span>\n"+
"    </div>\n"+
"    <div class=\"application-review__tos-agreement application-review__label\">\n"+
"      <span translate>{{ 'cui-application-tos-agreement' }}</span>\n"+
"    </div>\n"+
"    <div ng-repeat=\"application in userWalkup.applications.processedSelected\" class=application-review__list>\n"+
"        <div class=application-review__name ng-if=\"application.showTac=='true'\">\n"+
"          <span>{{application.name}}</span>\n"+
"        </div>\n"+
"        <div class=application-review__tos-link ng-click=userWalkup.showTac($index) ng-if=\"application.showTac=='true'\">\n"+
"          <a class=cui-link translate>{{'cui-view-tos'}}</a>\n"+
"        </div>\n"+
"        <div class=application-review__tos-agreement ng-if=\"application.showTac=='true'\">\n"+
"          <div class=cui-switch>\n"+
"            <input class=cui-switch__input ng-model=userWalkup.applications.processedSelected[$index].acceptedTos name=application{{$index}} id=application{{$index}} type=checkbox ng-required=true>\n"+
"            <label class=cui-switch__label for=application{{$index}}>\n"+
"              <div class=cui-switch__container>\n"+
"                <span class=cui-switch__checked-message>Accept</span>\n"+
"                <span class=cui-switch__unchecked-message>Don't Accept</span>\n"+
"              </div>\n"+
"            </label>\n"+
"          </div>\n"+
"        </div>\n"+
"    </div>\n"+
"  </ng-form>\n"+
"\n"+
"  <div class=cui-wizard__step-error ng-if=\"!selectApps.$valid && userWalkup.applications.formTouched\">{{ 'cui-package-tos' | translate }}</div>\n"+
"  <div class=cui-wizard__controls>\n"+
"    <button class=cui-wizard__previous ng-click=\"userWalkup.applications.step=userWalkup.applications.step-1\">&#60;&#60; {{'cui-all-applications' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=!wizardFinished ng-click=\"userWalkup.applications.formTouched=true;nextWithErrorChecking(selectApps)\" ng-class=\"{'cui-wizard__next--error' : !selectApps.$valid }\">{{'cui-next' | translate}}</button>\n"+
"    <button class=cui-wizard__next ng-if=wizardFinished ng-click=\"selectApps.$valid && goToStep(5)\" ng-class=\"{'cui-wizard__next--error': !selectApps.$valid}\">{{'cui-back-to-review' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n"+
"\n"+
"\n"+
"<div ng-if=\"userWalkup.applications.list && userWalkup.applications.step===3\">\n"+
"  <cui-icon cui-svg-icon=fa:chevron20 svg-class=\"cui-icon cui-icon--light-grey chevron chevron-left\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  <span class=cursor__pointer ng-click=\"userWalkup.applications.step=2\" translate> {{'cui-printer-friendly-tac'}}</span>\n"+
"  <div style=float:right class=cui-link>\n"+
"    {{'cui-selections' | translate }}\n"+
"    <div class=cui-badge ng-bind=userWalkup.applications.numberOfSelected ng-click=\"userWalkup.selectionPopUp =! userWalkup.selectionPopUp\" id=selection-popup off-click=\"userWalkup.selectionPopUp=false\"></div>\n"+
"    <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-applications-popup.html'\"></div>\n"+
"  </div>\n"+
"  <div class=tac_wrapper>\n"+
"    {{userWalkup.tacContent}}\n"+
"  </div>\n"+
"  <div class=cui-wizard__controls>\n"+
"    <button class=cui-wizard__previous ng-click=\"userWalkup.applications.step=userWalkup.applications.step-1\" style=font-size:1em>&#60;&#60; {{'cui-all-applications' | translate}}</button>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userWalkup/userWalkup-steps/userWalkup-login.html',
"<ng-form name=userLogin novalidate>\n"+
"\n"+
"  \n"+
"  \n"+
"  <label for=userID>{{'username' | translate}}</label>\n"+
"  <div class=cui-error ng-messages=userLogin.userID.$error ng-if=userLogin.userID.$dirty>\n"+
"    <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-error ng-if=\"userLogin.userID.$error.usernameTaken && userLogin.userID.$dirty\">\n"+
"    <div class=cui-error__message>{{'cui-username-taken' | translate}}</div>\n"+
"  </div>\n"+
"  <input type=text name=userID class=cui-input ng-required=true ng-model=userWalkup.userLogin.username custom-error=userWalkup.customErrors.userName ng-class=\"{'cui-input--error' : userLogin.userID.$touched && userLogin.userID.$invalid}\">\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <div class=cui-input__password-holder>\n"+
"        <label>{{'cui-password' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=userLogin.password.$error ng-if=userLogin.password.$dirty>\n"+
"          <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"        </div>\n"+
"        <input id=test-input type=password name=password class=cui-input ng-required=true ng-model=userWalkup.userLogin.password ng-class=\"{'cui-input--error': userLogin.password.$touched && userLogin.password.$invalid}\" password-validation=userWalkup.passwordRules ng-model-options={allowInvalid:true} ng-change=\"userWalkup.userLogin.hiddenPassword=base.generateHiddenPassword(userWalkup.userLogin.password)\" ng-focus=\"usersWalkup.passwordPopover=true\" ng-blur=\"usersWalkup.passwordPopover=false\">\n"+
"        \n"+
"        <div cui-popover target=#test-input popover-positions=\"[{position:'right'},{position:'bottom'}]\" ng-if=usersWalkup.passwordPopover>\n"+
"          <div password-popover ng-messages=userLogin.password.$error ng-messages-multiple class=cui-error__password>\n"+
"            <div ng-messages-include=app/common-templates/password-validation.html></div>\n"+
"          </div>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-password-re' | translate}}</label>\n"+
"      <div class=cui-error ng-if=\"userLogin.passwordRe.$dirty && userLogin.passwordRe.$error.match\">\n"+
"        <div class=cui-error__message>{{'password-mismatch' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=password name=passwordRe class=cui-input ng-required=true ng-model=userWalkup.userLogin.passwordRe match=userWalkup.userLogin.password>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-question' | translate}} 1</label>\n"+
"      <cui-dropdown ng-model=userWalkup.userLogin.question1 class=cui-dropdown return-value=object display-value=\"(object.question | cuiI18n)\" options=userWalkup.userLogin.challengeQuestions1>\n"+
"      </cui-dropdown>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-answer' | translate}} 1</label>\n"+
"      <div class=cui-error ng-if=userLogin.answer1.$dirty>\n"+
"        <div class=cui-error__message ng-if=userLogin.answer1.$error.required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"        <div ng-if=userWalkup.answer1&&userLogin.answer1.$error.unique class=cui-error__message>{{'security-question-repeated' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text name=answer1 class=cui-input ng-required=true ng-focus=\"userWalkup.answer2=false;userWalkup.answer1=true\" ng-model=userWalkup.userLogin.challengeAnswer1 unique=userWalkup.userLogin.challengeAnswer2>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-question' | translate}} 2</label>\n"+
"        <cui-dropdown ng-model=userWalkup.userLogin.question2 class=cui-dropdown return-value=object display-value=\"(object.question | cuiI18n)\" options=userWalkup.userLogin.challengeQuestions2></cui-dropdown>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-challenge-answer' | translate}} 2</label>\n"+
"      <div class=cui-error ng-if=userLogin.answer2.$dirty>\n"+
"        <div class=cui-error__message ng-if=userLogin.answer2.$error.required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"        <div ng-if=userWalkup.answer2&&userLogin.answer2.$error.unique class=cui-error__message>{{'security-question-repeated' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text name=answer2 class=cui-input ng-required=true ng-model=userWalkup.userLogin.challengeAnswer2 unique=userWalkup.userLogin.challengeAnswer1 ng-focus=\"userWalkup.answer1=false;userWalkup.answer2=true\">\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"</ng-form>\n"+
"\n"+
"<div class=cui-wizard__controls>\n"+
"  <button type=button class=cui-wizard__previous ng-if=!wizardFinished ng-click=previous()>&#60;&#60; {{'cui-previous' | translate}}</button>\n"+
"  <button type=button class=cui-wizard__next ng-if=!wizardFinished ng-click=nextWithErrorChecking(userLogin) ng-class=\"(userLogin.$invalid)? 'cui-wizard__next--error' : ''\">{{'cui-next' | translate}}</button>\n"+
"  <button type=button class=cui-wizard__next ng-if=wizardFinished ng-click=\"userLogin.$valid && goToStep(5)\" ng-class=\"!userLogin.$valid? 'cui-wizard__next--error' : ''\">{{'cui-back-to-review' | translate}}</button>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userWalkup/userWalkup-steps/userWalkup-organization.html',
"<ng-form name=organizationSelect novalidate>\n"+
"<h6 class=h6>{{'cui-all-organizations' | translate}}</h6>\n"+
"  <div class=cui-wizard__field-row>\n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <div class=cui-div__with-icon-input>\n"+
"        <cui-icon cui-svg-icon=cui:search svg-class=\"cui-icon cui-icon--light-grey cui-icon__with-input\" use-class=cui-icon__ref viewbox=\"0 0 48 48\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        <input type=text ng-model=userWalkup.orgFilterByname ng-model-options={debounce:2000} placeholder=\"{{'cui-filter-org-name' | translate}}\" class=cui-input__with-icon>\n"+
"      </div>\n"+
"      \n"+
"    </div>\n"+
"  </div>\n"+
"  \n"+
"  <div class=cui-loading__container--organization-list ng-if=userWalkup.updatingOrgs>\n"+
"    <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"  </div>\n"+
"  <p ng-if=\"userWalkup.organizationList.length===0&&!userWalkup.updatingOrgs\">{{'cui-no-orgs-for-name'|translate}}</p>\n"+
"  <cui-expandable ng-if=!userWalkup.updatingOrgs class=cui-expandable ng-repeat=\"organization in userWalkup.organizationList | orderBy:'name' track by organization.id\">\n"+
"    <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex cui-expandable__title--alt-layout\" ng-click=toggleExpand()>\n"+
"      {{organization.name}}\n"+
"      <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </cui-expandable-title>\n"+
"\n"+
"    <cui-expandable-body class=cui-expandable__body>\n"+
"      <span class=cui-field-val__val>{{organization.addresses[0].streets[0]}}</span>\n"+
"      <span class=cui-field-val__val>{{organization.addresses[0].city}}</span>\n"+
"      <span class=cui-field-val__val>{{organization.addresses[0].state}}</span>\n"+
"      <span class=cui-field-val__val>{{organization.addresses[0].postal}}</span><br>\n"+
"      <span class=cui-field-val__val>{{organization.url}}</span><br>\n"+
"      <span class=cui-field-val__val>{{organization.phones[0].number}}</span>\n"+
"\n"+
"      <div class=cui-wizard__controls>\n"+
"        <button type=button class=cui-wizard__next ng-click=userWalkup.selectOrganization(organization);next()>{{'cui-select-org' | translate}}</button>\n"+
"      </div>\n"+
"    </cui-expandable-body>\n"+
"  </cui-expandable>\n"+
"\n"+
"  \n"+
"  <div class=cui-paginate__container ng-if=!base.loader.for.userWalkup.initializing>\n"+
"    <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"    <results-per-page class=cui-paginate__select ng-model=userWalkup.orgPaginationSize></results-per-page>\n"+
"    <paginate class=cui-paginate results-per-page=userWalkup.orgPaginationSize count=userWalkup.organizationCount on-page-change=userWalkup.orgPaginationPageHandler ng-model=userWalkup.orgPaginationCurrentPage attach-rerender-to=userWalkup.orgReRenderPaginate></paginate>\n"+
"  </div>\n"+
"</ng-form>\n"+
"\n"+
"<div class=cui-wizard__controls>\n"+
"  <button type=button class=cui-wizard__previous ng-click=previous() style=margin-right:0>&#60;&#60; {{'cui-previous' | translate}}</button>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userWalkup/userWalkup-steps/userWalkup-review.html',
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'cui-user-information' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body disable-animate class=cui-expandable__body>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.firstNameError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-first-name model=userWalkup.user.name.given on-edit=userWalkup.inlineEdit.firstName hide-save-if=userWalkup.inlineEdit.noSaveFirstName on-save=userWalkup.inlineEdit.updateFirstNameError></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.lastNameError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-last-name model=userWalkup.user.name.surname on-edit=userWalkup.inlineEdit.lastName hide-save-if=userWalkup.inlineEdit.noSaveLastName on-save=userWalkup.inlineEdit.updateLastNameError></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.emailError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"      </div>\n"+
"      <div ng-if=!userWalkup.isEmailTaken class=cui-warning>{{'cui-error-email-exists' | translate}}</div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-email model=userWalkup.user.email on-edit=userWalkup.inlineEdit.email on-save=userWalkup.inlineEdit.updateEmailError hide-save-if=userWalkup.inlineEdit.noSaveEmail></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.countryError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit type=auto-complete wrapper-class=cui-expandable__review-item__inline-wrapper input-class=\"cui-expandable__review-input cui-expandable__review-input__autocomplete\" label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-country model=userWalkup.userCountry display=userWalkup.userCountry.title selected-object=userWalkup.userCountry local-data=base.countries.list search-fields=name title-field=name on-edit=userWalkup.inlineEdit.country on-save=userWalkup.inlineEdit.updateCountryError hide-save-if=userWalkup.inlineEdit.noSaveCountry field-required=userWalkup.userCountry></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.address1Error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-address-1 model=userWalkup.user.addresses[0].streets[0] on-edit=userWalkup.inlineEdit.address1 hide-save-if=userWalkup.inlineEdit.noSaveAddress1 on-save=userWalkup.inlineEdit.updateAddress1Error></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-address-2 model=userWalkup.user.addresses[0].streets[1]></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-city model=userWalkup.user.addresses[0].city></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-state model=userWalkup.user.addresses[0].state></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-postal model=userWalkup.user.addresses[0].postal></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.telephoneError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-telephone model=userWalkup.user.phones[0].number on-edit=userWalkup.inlineEdit.telephone hide-save-if=userWalkup.inlineEdit.noSaveTelephone on-save=userWalkup.inlineEdit.updateTelephoneError></inline-edit>\n"+
"    </div> \n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-language model=userWalkup.user.language display=userWalkup.user.language.name options-expression=\"language as language.name  for language in options\" options=userWalkup.languages></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-timezone model=userWalkup.user.timezone display=userWalkup.user.timezone.name options-expression=\"timeZone as timeZone.name  for timeZone in options\" options=base.timezones></inline-edit>\n"+
"    </div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"      {{'cui-organization-information' | translate}}\n"+
"      <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"    </cui-expandable-title>\n"+
"\n"+
"    <cui-expandable-body class=cui-expandable__body>\n"+
"      \n"+
"      <div class=cui-expandable__review-item><span class=cui-expandable__review-item__field>{{'cui-org' | translate}}</span> <span class=review-item__value>{{userWalkup.organization.name}}</span></div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'cui-sign-in-information' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body disable-animate class=cui-expandable__body>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.userIdError>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-user-id model=userWalkup.userLogin.username on-edit=userWalkup.inlineEdit.userId hide-save-if=userWalkup.inlineEdit.noSaveUserId on-save=userWalkup.inlineEdit.updateUserIdError></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-wrapper><span class=cui-expandable__review-item__field>{{'cui-password' | translate}}</span> <span class=review-item__value>{{userWalkup.userLogin.hiddenPassword}}</span></div>\n"+
"    \n"+
"        <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-question model=userWalkup.userLogin.question1 display=\"userWalkup.userLogin.question1.question | cuiI18n\" options-expression=\"question as (question.question|cuiI18n) for question in options\" options=userWalkup.userLogin.challengeQuestions1></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.challengeAnswer1Error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-answer model=userWalkup.userLogin.challengeAnswer1 on-edit=userWalkup.inlineEdit.challengeAnswer1 hide-save-if=userWalkup.inlineEdit.noSaveChallengeAnswer1 on-save=userWalkup.inlineEdit.updateChallengeAnswer1Error></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <inline-edit type=dropdown wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input__dropdown label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-question model=userWalkup.userLogin.question2 display=\"userWalkup.userLogin.question2.question | cuiI18n\" options-expression=\"question as (question.question|cuiI18n) for question in options\" options=userWalkup.userLogin.challengeQuestions2></inline-edit>\n"+
"    </div>\n"+
"    \n"+
"    <div class=cui-expandable__review-item__inline-edit>\n"+
"      <div class=cui-error ng-messages=userWalkup.inlineEdit.challengeAnswer2Error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"      <inline-edit wrapper-class=cui-expandable__review-item__inline-wrapper input-class=cui-expandable__review-input label-class=cui-expandable__review-item__field value-class=dummy class=cui-users__field label=cui-challenge-answer model=userWalkup.userLogin.challengeAnswer2 on-edit=userWalkup.inlineEdit.challengeAnswer2 hide-save-if=userWalkup.inlineEdit.noSaveChallengeAnswer2 on-save=userWalkup.inlineEdit.updateChallengeAnswer2Error></inline-edit>\n"+
"    </div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  \n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'cui-application-selection' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body class=cui-expandable__body>\n"+
"    <div class=cui-expandable__review-item ng-if=\"userWalkup.applications.processedSelected.length===0 || !userWalkup.applications.processedSelected.length\">\n"+
"      <span class=cui-link ng-click=goToStep(4)>{{'no-applications-selected' | translate}}</span>\n"+
"    </div>\n"+
"    <div class=cui-expandable__review-item ng-repeat=\"application in userWalkup.applications.processedSelected\">\n"+
"      <input id=application{{application.id}} type=checkbox ng-model=userWalkup.applications.selected[application.id] ng-true-value=\"'{{application.id}},{{application.packageId}},{{application.name}},{{application.showTac}}'\" ng-false-value=null ng-click=userWalkup.applications.updateSelected(application,userWalkup.applications.selected[application.id],application.id) style=margin-right:10px>\n"+
"      <label for=application{{application.id}} ng-bind=application.name></label>\n"+
"    </div>\n"+
"    <div class=cui-expandable__review-item ng-if=\"userWalkup.applications.processedSelected.length!==0 && userWalkup.applications.processedSelected.length\">\n"+
"      <span>{{'cui-need-different-app' | translate}}</span>\n"+
"      <span>? {{'cui-go-back-to' | translate}}</span>\n"+
"      <span class=cui-link ng-click=\"userWalkup.applications.step=1;goToStep(4)\"> {{'cui-all-applications' | translate}}</span>\n"+
"    </div>\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"<cui-expandable class=\"cui-expandable expanded\">\n"+
"  <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\" ng-click=toggleExpand()>\n"+
"    {{'request-reason' | translate}}\n"+
"    <cui-icon cui-svg-icon=fa:chevron18 svg-class=\"cui-icon cui-icon--light-grey chevron\" use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"  </cui-expandable-title>\n"+
"\n"+
"  <cui-expandable-body class=cui-expandable__title>\n"+
"    <div class=cui-applications__review-text-input>\n"+
"        <input type=text class=cui-input ng-model=userWalkup.reason>\n"+
"    </div>\n"+
"\n"+
"  </cui-expandable-body>\n"+
"</cui-expandable>\n"+
"\n"+
"\n"+
"<div class=cui-wizard__controls>\n"+
"  <div class=cui-error ng-if=userWalkup.submitError><label>{{userWalkup.errorMessage | translate}}</label></div>\n"+
"  <cui-button disable-animate button-click=\"userWalkupRegForm.$valid && userWalkup.submit()\" loading-if=userWalkup.submitting loading-message=\"{{'cui-button-loading-text' | translate}}\" error-if=userWalkup.submitError error-message=\"{{'cui-error-try-again' | translate}}\">\n"+
"    <button class=cui-wizard__next ng-class=\"(!userWalkupRegForm.$valid)? 'cui-wizard__next--error' : userWalkup.sucess? 'success' : usersInvite.success===false? 'fail' : ''\" style=position:relative>\n"+
"      <span ng-if=\"!userWalkup.submitting && !userWalkup.submitError\">{{'cui-submit' | translate}}</span>\n"+
"    </button>\n"+
"  </cui-button>\n"+
"</div>\n");



$templateCache.put('app/modules/registration/userWalkup/userWalkup-steps/userWalkup-userProfile.html',
"<ng-form name=user novalidate>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label for=user-name-given>{{'cui-first-name' | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.firstName.$error ng-if=user.firstName.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text name=firstName class=cui-input ng-required=true ng-model=userWalkup.user.name.given>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label for=user-name-surname>{{'cui-last-name' | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.lastName.$error ng-if=user.lastName.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userWalkup.user.name.surname name=lastName class=cui-input ng-required=true>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-email' | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.email.$error ng-if=user.email.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      \n"+
"      <div class=cui-error ng-if=\"user.email.$error.email && user.email.$dirty\">\n"+
"        <div class=cui-error__message>{{'cui-this-is-not-valid-email' | translate}}</div>\n"+
"      </div>\n"+
"      <div ng-if=!userWalkup.isEmailTaken class=cui-warning>{{'cui-error-email-exists' | translate}}</div>\n"+
"      <input type=text name=email class=cui-input custom-error=userWalkup.customErrors.email ng-required=true ng-model=userWalkup.user.email ng-blur=userWalkup.checkDuplicateEmail(userWalkup.user.email)>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{'cui-email-re' | translate}}</label>\n"+
"      <div class=cui-error ng-if=\"user.emailRe.$dirty && user.emailRe.$error.match\">\n"+
"        <div class=cui-error__message>{{'email-mismatch' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userWalkup.emailRe name=emailRe class=cui-input ng-required=true match=userWalkup.user.email>\n"+
"    </div>\n"+
"  </div>\n"+
"\n"+
"  \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label for=country>{{\"cui-country\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.country.$error ng-if=user.country.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <div auto-complete input-name=country pause=100 selected-object=userWalkup.userCountry local-data=base.countries.list search-fields=name title-field=name input-class=cui-input match-class=highlight auto-match=true field-required=userWalkup.userCountry></div>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>{{\"cui-telephone\" | translate}}</label>\n"+
"      <div class=cui-error ng-messages=user.telephone.$error ng-if=user.telephone.$dirty>\n"+
"        <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"      </div>\n"+
"      <input type=text ng-model=userWalkup.user.phones[0].number class=cui-input name=telephone ng-required=true>\n"+
"    </div>\n"+
"  </div>\n"+
"    \n"+
"  <div class=cui-wizard__field-row>\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>Medical Licence</label>\n"+
"      <input type=text ng-model=userWalkup.extended.medicalLicence class=cui-input name=address2>\n"+
"    </div>\n"+
"\n"+
"    \n"+
"    <div class=\"cui-wizard__field-container cui-wizard__field-container--half\">\n"+
"      <label>Study List</label>\n"+
"      <input type=text ng-model=userWalkup.user.addresses[0].city class=cui-input name=city>\n"+
"    </div>\n"+
"  </div>\n"+
"  <div class=\"cui-wizard__controls cui-wizard__controls--clear\">\n"+
"    <button type=button class=cui-wizard__next ng-if=!wizardFinished ng-click=nextWithErrorChecking(user) ng-class=\"(user.$invalid)? 'cui-wizard__next--error' : ''\">{{'cui-next' | translate}}</button>\n"+
"    <button type=button class=cui-wizard__next ng-if=wizardFinished ng-click=\"user.$valid && goToStep(5)\" ng-class=\"(user.$invalid)? 'cui-wizard__next--error' : ''\">{{'cui-back-to-review' | translate}}</button>\n"+
"  </div>\n"+
"</ng-form>\n"+
"\n"+
"    \n"+
"\n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"    \n"+
"    \n"+
"\n"+
"    \n"+
"    \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"    \n"+
"    \n"+
"\n"+
"    \n"+
"    \n"+
"  \n"+
"\n"+
"  \n"+
"  \n"+
"    \n"+
"    \n"+
"    \n"+
"  \n"+
"    \n"+
"  \n"+
"    \n"+
"    \n"+
"  \n"+
"\n"+
"  \n"+
"\n");



$templateCache.put('app/modules/registration/userWalkup/userWalkup.html',
"\n"+
"<div class=code-info>The markup and javascript used to create this page can be found <a class=cui-link href=https://github.com/covisint/cui-idm-b2x/tree/master/app/modules/registration/userWalkup target=blank>here</a>.</div>\n"+
"\n"+
"\n"+
"\n"+
"<div class=cui-loading__container--organization-list ng-if=userWalkup.initializing>\n"+
"  <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"</div>\n"+
"\n"+
"<div class=cui-form--mobile-steps ng-if=!userWalkup.initializing>\n"+
"  <div class=cui-form__title>{{'create-account' | translate}}</div>\n"+
"  <div class=cui-form__body>\n"+
"    <cui-wizard bar mobile-stack=700 class=cui-wizard step=1 minimum-padding=100 clickable-indicators dirty-validation>\n"+
"      <indicator-container class=\"indicator-container indicator-container--icons\"></indicator-container>\n"+
"\n"+
"      <ng-form name=userWalkupRegForm novalidate>\n"+
"        <step step-title=\"{{'cui-user-profile' | translate}}\" icon=cui:user>\n"+
"          <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-userProfile.html'\"></div>\n"+
"        </step>\n"+
"\n"+
"        <step step-title=\"{{'cui-org' | translate}}\" icon=cui:skyscraper>\n"+
"          <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-organization.html'\"></div>\n"+
"        </step>\n"+
"\n"+
"        <step step-title=\"{{'cui-login' | translate}}\" icon=cui:login>\n"+
"          <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-login.html'\"></div>\n"+
"        </step>\n"+
"\n"+
"        <step step-title=\"{{'cui-applications' | translate}}\" icon=cui:applications>\n"+
"          <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-applications.html'\"></div>\n"+
"        </step>\n"+
"\n"+
"        <step step-title=\"{{'cui-review' | translate}}\" icon=cui:review>\n"+
"          <div ng-include=\"'app/modules/registration/userWalkup/userWalkup-steps/userWalkup-review.html'\"></div>\n"+
"        </step>\n"+
"      </ng-form>\n"+
"    </cui-wizard>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/user/appHistory/app-grantHistory.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/modules/user/history target=blank>here</a> and the layout styles <a href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/scss/3-views/user class=cui-link target=blank>here</a></div>\n"+
"\n"+
"<div class=cui-users__appHistory-container>\n"+
"    \n"+
"    \n"+
"    <div class=cui-users__main-container>\n"+
"\n"+
"		\n"+
"		\n"+
"\n"+
"      	\n"+
"		<p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['appGrantHistory.initHistory']\"><b>{{'error-generic'|translate}}</b></p>\n"+
"        \n"+
"        <div class=cui-users__profile-media ng-if=!appGrantHistory.loading>\n"+
"            <div class=cui-media>\n"+
"                <div class=cui-media__image-container>\n"+
"                    \n"+
"                    <div class=cui-media__image cui-avatar cui-avatar-email=appGrantHistory.user.email cui-avatar-names=\"[appGrantHistory.user.name.given, appGrantHistory.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"                </div>\n"+
"                <div class=cui-media__body>\n"+
"                    \n"+
"                    <h3 class=cui-media__title>{{appGrantHistory.user.name.given}} {{appGrantHistory.user.name.surname}}</h3>\n"+
"                    \n"+
"                    <p class=cui-media__content--small ng-if=appGrantHistory.registeredDate>{{'cui-registered' | translate}}: {{appGrantHistory.registeredDate | date:base.appConfig.dateFormat}}</p>\n"+
"                    <p class=cui-media__content--small>{{'cui-user-id' | translate}}: {{appGrantHistory.user.username}}</p>\n"+
"                    <p class=cui-media__content--small ng-if=appGrantHistory.user.lastLoginDate>{{'cui-last-login' | translate}}: {{appGrantHistory.user.lastLoginDate | date:base.appConfig.dateFormat}}</p>\n"+
"                </div>\n"+
"            </div>\n"+
"        </div>\n"+
"        \n"+
"        <div style=\"margin:auto;  width:400px\">\n"+
"            <nav class=cui-breadcrumb>\n"+
"                <ul class=cui-breadcrumb__links>\n"+
"                    <li class=user_profile_image style=\"padding: 8px; margin-right:10px\" ng-init=\"profilesrc='app/modules/user/user_icon/profile.png'\" ng-mouseover=\"profilesrc='app/modules/user/user_icon/profile_current.png'\" ng-mouseout=\"profilesrc='app/modules/user/user_icon/profile.png'\"><a ui-sref=user.profile><img ng-src={{profilesrc}} width=46px height=44px></a>\n"+
"                        </li>\n"+
"                        <li class=user_roles_image style=\"padding: 8px; margin-right:10px\" ng-init=\"rolesrc='app/modules/user/user_icon/roles.png'\" ng-mouseover=\"rolesrc='app/modules/user/user_icon/roles_mouseover.png'\" ng-mouseout=\"rolesrc='app/modules/user/user_icon/roles.png'\"><a ui-sref=user.roles><img ng-src={{rolesrc}} width=34px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_apps_image style=\"padding: 8px; margin-right:10px\"><a ui-sref=user.appRequestHistory><img src=app/modules/user/user_icon/app_mouseover.png width=29px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_history_image style=\"padding: 8px\" ng-init=\"historysrc='app/modules/user/user_icon/history.png'\" ng-mouseover=\"historysrc='app/modules/user/user_icon/history_mouseover.png'\" ng-mouseout=\"historysrc='app/modules/user/user_icon/history.png'\"><a ui-sref=user.history><img ng-src={{historysrc}} width=49px height=44px></a>\n"+
"                </li></ul>\n"+
"            </nav>\n"+
"        </div>\n"+
"        <hr>\n"+
"        <main class=\"cui-organization cui-organization-req-uers\">\n"+
"		\n"+
"		\n"+
"		<div class=cui-tabs__main-container>\n"+
"		      <ul class=cui-tabs__nav>\n"+
"		        <li class=cui-tabs__tab-container ui-sref=user.appRequestHistory>\n"+
"		          <a class=\"cui-tabs__tab cui-tabs__tab\">{{'cui-application-requested-history' | translate}}</a>\n"+
"		        </li>\n"+
"		        <li class=cui-tabs__tab-container ui-sref=user.appGrantHistory>\n"+
"		          <a class=\"cui-tabs__tab cui-tabs__tab--active\">{{'cui-application-granted-history' | translate}}</a>\n"+
"		        </li>\n"+
"		      </ul>\n"+
"			</div>\n"+
"		    	<div class=cui-action>\n"+
"		    		    <div class=\"cui-action cui-action--alt\">\n"+
"					      <div class=\"cui-radio cui-radio--basic-ltr\">\n"+
"					          <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-yes ng-model=appGrantHistory.searchBy value=name>\n"+
"					          <label class=cui-radio__label for=radio-choice-basic-yes><span></span>{{'cui-name' | translate}}</label>\n"+
"					          <input class=cui-radio__input type=radio name=radio-choice-basic-yes id=radio-choice-basic-no ng-model=appGrantHistory.searchBy value=action>\n"+
"					          <label class=cui-radio__label for=radio-choice-basic-no><span></span>{{'action' | translate}}</label>\n"+
"					      </div>&nbsp;\n"+
"					      <div class=\"cui-input-button cui-input-button--alt-bg\" style=width:350px>\n"+
"					          <input class=cui-input-button__input ng-model=appGrantHistory.searchValue focus-if placeholder=\"{{'search' | translate}}\" on-enter=\"appGrantHistory.updateSearch('search',appGrantHistory.searchValue)\">\n"+
"					          <button class=cui-input-button__button ng-click=\"appGrantHistory.updateSearch('search',appGrantHistory.searchValue)\">{{'search' | translate}}</button>\n"+
"					      </div>\n"+
"					</div>\n"+
"		      		<div class=cui-action__actions>\n"+
"					    \n"+
"					    <div class=cui-action__action-container ng-click=\"appGrantHistory.granted.sortClicked =! appGrantHistory.granted.sortClicked\" id=sort-buttons off-click=\"appGrantHistory.granted.sortClicked=false\">\n"+
"					      <cui-icon cui-svg-icon=fa:sort14 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"					      <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"					      \n"+
"					      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#sort-buttons pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=appGrantHistory.granted.sortClicked style=width:171px>\n"+
"					        \n"+
"					        <div class=cui-popover__row>\n"+
"					          <span ng-click=\"appGrantHistory.updateSearch('eventdate','')\">{{'cui-by-decision-date' | translate}}</span>\n"+
"					        </div>\n"+
"					        <div class=cui-popover__row>\n"+
"					           <span ng-click=\"appGrantHistory.updateSearch('eventType','')\">{{'action' | translate}}</span>\n"+
"					        </div>\n"+
"					        <div class=cui-popover__row>\n"+
"					           <span ng-click=\"appGrantHistory.updateSearch('actorId','')\">{{'evaluator' | translate}}</span>\n"+
"					        </div>\n"+
"					      </div>\n"+
"					    </div>\n"+
"\n"+
"					    \n"+
"					    <div class=cui-action__action-container ng-click=\"appGrantHistory.granted.refineClicked =! appGrantHistory.granted.refineClicked\" id=refine-buttons off-click=\"appGrantHistory.granted.refineClicked=false\">\n"+
"					      <cui-icon cui-svg-icon=fa:filter10 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"					      <span class=cui-action__action-label>{{'refine' | translate}}</span>\n"+
"					      \n"+
"					      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#refine-buttons pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-70px'}, 'any']\" ng-if=appGrantHistory.granted.refineClicked style=width:214px>\n"+
"					        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"					          <span ng-click=\"appGrantHistory.updateSearch('status')\">{{'all' | translate}}</span>\n"+
"					          <span>({{appGrantHistory.popupCount}})</span>\n"+
"					        </div>\n"+
"					        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"					          <span ng-click=\"appGrantHistory.updateSearch('status','active')\">{{'active' | translate}}</span>\n"+
"					          <span>({{appGrantHistory.activeCount}})</span>\n"+
"					        </div>\n"+
"					        <div class=\"cui-popover__row cui-popover--row__flex\">\n"+
"					          <span ng-click=\"appGrantHistory.updateSearch('status','suspended')\">{{'suspended' | translate}}</span>\n"+
"					          <span>({{appGrantHistory.suspendedCount}})</span>\n"+
"					        </div>\n"+
"					      </div>\n"+
"					    </div>\n"+
"					  </div>\n"+
"		      	</div>\n"+
"		\n"+
"		<section class=cui-organization__main-container>\n"+
"		<h3 class=cui-sr-only>{{'users-requests' | translate}}</h3>\n"+
"\n"+
"		\n"+
"		<div class=cui-loading__container ng-if=\"base.loader.for['appGrantHistory.initHistory']\">\n"+
"		  <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"		</div>\n"+
"\n"+
"		<cui-table-header headers=\"['cui-name', 'status', 'action', 'cui-by-decision-date', 'evaluator']\" sorting=appGrantHistory.sortBy sorting-callbacks=appGrantHistory.sortingCallbacks>\n"+
"		  </cui-table-header>\n"+
"		  \n"+
"		  <div class=cui-media__content ng-if=\"appGrantHistory.grantedHistory.length===0\">{{'cui-no-details'|translate}}</div>\n"+
"		<cui-table-row ng-repeat=\"application in appGrantHistory.grantedHistory track by $index\">\n"+
"		  <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"		    <div class=cui-flex-table__avatar-col>\n"+
"		      <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=application.name cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-cuii18n-filter cui-avatar=application.iconUrl></div>\n"+
"		    </div>\n"+
"		    <div class=cui-flex-table__mobile-stack>\n"+
"		       <div class=cui-flex-table__left>\n"+
"		        <span class=cui-flex-table__title>{{application.name | cuiI18n|capitalize}}</span>\n"+
"		      </div>\n"+
"\n"+
"		      <div class=cui-flex-table__middle>\n"+
"		        <span>{{application.status}}</span>\n"+
"		      </div>\n"+
"\n"+
"		      <div class=cui-flex-table__middle>\n"+
"		        <span class=cui-media__content>{{ application.eventType }}</span>\n"+
"		      </div>\n"+
"\n"+
"		      <div class=cui-flex-table__middle>\n"+
"		        <span>{{application.eventDate}}</span>\n"+
"		      </div>\n"+
"		      <div class=cui-flex-table__right>\n"+
"		         <span class=cui-media__content> {{application.actor.given}} {{application.actor.surname}}</span>\n"+
"		      </div>\n"+
"		    </div>\n"+
"		  </li>\n"+
"		</cui-table-row>\n"+
"\n"+
"		\n"+
"		<div class=cui-paginate__container ng-if=\"!base.loader.for['appGrantHistory.initHistory']\">\n"+
"		  <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"		  <results-per-page class=cui-paginate__select ng-model=appGrantHistory.search.pageSize></results-per-page>\n"+
"		  <paginate class=cui-paginate results-per-page=appGrantHistory.search.pageSize count=appGrantHistory.count on-page-change=appGrantHistory.pageGrantedChange ng-model=appGrantHistory.search.page attach-rerender-to=appGrantHistory.reRenderPaginate></paginate>\n"+
"		</div>\n"+
"		</section>\n"+
"\n"+
"		</main>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/modules/user/appHistory/app-requestHistory.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/modules/user/history target=blank>here</a> and the layout styles <a href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/scss/3-views/user class=cui-link target=blank>here</a></div>\n"+
"\n"+
" \n"+
"<div class=cui-users__appHistory-container>\n"+
"    <div class=cui-users__main-container>\n"+
"\n"+
"		\n"+
"		\n"+
"\n"+
"      	\n"+
"		<p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['appRequestHistory.initHistory']\"><b>{{'error-generic'|translate}}</b></p>\n"+
"        \n"+
"        <div class=cui-users__profile-media ng-if=!appRequestHistory.loading>\n"+
"            <div class=cui-media>\n"+
"                <div class=cui-media__image-container>\n"+
"                    \n"+
"                    <div class=cui-media__image cui-avatar cui-avatar-email=appRequestHistory.user.email cui-avatar-names=\"[appRequestHistory.user.name.given, appRequestHistory.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"                </div>\n"+
"                <div class=cui-media__body>\n"+
"                    \n"+
"                    <h3 class=cui-media__title>{{appRequestHistory.user.name.given}} {{appRequestHistory.user.name.surname}}</h3>\n"+
"                    \n"+
"                    <p class=cui-media__content--small ng-if=appRequestHistory.registeredDate>{{'cui-registered' | translate}}: {{appRequestHistory.registeredDate | date:base.appConfig.dateFormat}}</p>\n"+
"                    <p class=cui-media__content--small>{{'cui-user-id' | translate}}: {{appRequestHistory.user.username}}</p>\n"+
"                    <p class=cui-media__content--small ng-if=appRequestHistory.user.lastLoginDate>{{'cui-last-login' | translate}}: {{appRequestHistory.user.lastLoginDate | date:base.appConfig.dateFormat}}</p>\n"+
"                </div>\n"+
"            </div>\n"+
"        </div>\n"+
"        \n"+
"        <div style=\"margin:auto;  width:400px\">\n"+
"            <nav class=cui-breadcrumb>\n"+
"                <ul class=cui-breadcrumb__links>\n"+
"                    <li class=user_profile_image style=\"padding: 8px; margin-right:10px\" ng-init=\"profilesrc='app/modules/user/user_icon/profile.png'\" ng-mouseover=\"profilesrc='app/modules/user/user_icon/profile_current.png'\" ng-mouseout=\"profilesrc='app/modules/user/user_icon/profile.png'\"><a ui-sref=user.profile><img ng-src={{profilesrc}} width=46px height=44px></a>\n"+
"                        </li>\n"+
"                        <li class=user_roles_image style=\"padding: 8px; margin-right:10px\" ng-init=\"rolesrc='app/modules/user/user_icon/roles.png'\" ng-mouseover=\"rolesrc='app/modules/user/user_icon/roles_mouseover.png'\" ng-mouseout=\"rolesrc='app/modules/user/user_icon/roles.png'\"><a ui-sref=user.roles><img ng-src={{rolesrc}} width=34px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_apps_image style=\"padding: 8px; margin-right:10px\"><a ui-sref=user.appRequestHistory><img src=app/modules/user/user_icon/app_mouseover.png width=29px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_history_image style=\"padding: 8px\" ng-init=\"historysrc='app/modules/user/user_icon/history.png'\" ng-mouseover=\"historysrc='app/modules/user/user_icon/history_mouseover.png'\" ng-mouseout=\"historysrc='app/modules/user/user_icon/history.png'\"><a ui-sref=user.history><img ng-src={{historysrc}} width=49px height=44px></a>\n"+
"                </li></ul>\n"+
"            </nav>\n"+
"        </div>\n"+
"        <hr>\n"+
"        <main class=\"cui-organization cui-organization-req-uers\">\n"+
"  \n"+
"  <h2 class=cui-sr-only>{{'org-req-apps-requests'}}</h2>\n"+
"\n"+
"  \n"+
"  \n"+
"\n"+
"    \n"+
"    <div class=cui-tabs__main-container>\n"+
"	      <ul class=cui-tabs__nav>\n"+
"	        <li class=cui-tabs__tab-container ui-sref=user.appRequestHistory>\n"+
"	          <a class=\"cui-tabs__tab cui-tabs__tab--active\">{{'cui-application-requested-history' | translate}}</a>\n"+
"	        </li>\n"+
"	        <li class=cui-tabs__tab-container ui-sref=user.appGrantHistory>\n"+
"	          <a class=\"cui-tabs__tab cui-tabs__tab\">{{'cui-application-granted-history' | translate}}</a>\n"+
"	        </li>\n"+
"	      </ul>\n"+
"    	</div>\n"+
"    	<div class=cui-action>\n"+
"  		  <div class=cui-action__actions>\n"+
"		    \n"+
"		    <div class=cui-action__action-container ng-click=\"appRequestHistory.requestsortClicked =! appRequestHistory.requestsortClicked\" id=sort-button off-click=\"appRequestHistory.requestsortClicked=false\">\n"+
"		      <cui-icon cui-svg-icon=fa:sort14 svg-class=cui-action__icon use-class=cui-icon__ref viewbox=\"0 0 216 146\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"		      <span class=cui-action__action-label>{{'sort' | translate}}</span>\n"+
"		      \n"+
"		      <div cui-popover class=\"cui-popover cui-popover--menu cui-popover--positionless\" target=#sort-button pointer-height=13 pointer-width=10 popover-positions=\"[{position:'bottom',contentOffset:'-40px'}, 'any']\" attachment=\"top middle\" target-attachment=\"bottom middle\" ng-if=appRequestHistory.requestsortClicked style=width:171px>\n"+
"		        \n"+
"		        <div class=cui-popover__row>\n"+
"		          <span ng-click=\"appRequestHistory.updateSearch('requesteddate','','requested')\">{{'cui-by-request-date' | translate}}</span>\n"+
"		        </div>\n"+
"		         <div class=cui-popover__row>\n"+
"		          <span ng-click=\"appRequestHistory.updateSearch('decisiondate','','requested')\">{{'cui-by-decision-date' | translate}}</span>\n"+
"		        </div>\n"+
"		      </div>\n"+
"		    </div>\n"+
"\n"+
"		    \n"+
"		    \n"+
"		      \n"+
"		     \n"+
"		  </div>\n"+
"  </div>\n"+
"  \n"+
"  <section class=cui-organization__main-container>\n"+
"    <h3 class=cui-sr-only>{{'users-requests' | translate}}</h3>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['appRequestHistory.initHistory']\">\n"+
"      <div class=\"cui-loader cui-loader--content\" ng-include=\"'app/common-templates/partials/loader-content.html'\"></div>\n"+
"    </div>\n"+
"\n"+
"    <cui-table-header headers=\"['cui-name', 'cui-by-request-date', 'approved', 'cui-by-decision-date', 'evaluator']\" sorting=appRequestHistory.sortBy sorting-callbacks=appRequestHistory.sortingCallbacks>\n"+
"      </cui-table-header>\n"+
"      <div class=cui-media__content ng-if=\"appRequestHistory.requestedHistory.length===0\">{{'cui-no-details'|translate}}</div>\n"+
"    <cui-table-row ng-repeat=\"application in appRequestHistory.requestedHistory track by $index\">\n"+
"      <li class=\"cui-flex-table__tr cui-flex-table__tr--c\">\n"+
"        <div class=cui-flex-table__avatar-col>\n"+
"          <div class=cui-profile__user-avatar aria-hidden=true cui-avatar cui-avatar-names=application.name cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5 cui-avatar-cuii18n-filter cui-avatar=application.iconUrl></div>\n"+
"        </div>\n"+
"        <div class=cui-flex-table__mobile-stack>\n"+
"           <div class=cui-flex-table__left>\n"+
"            <span class=cui-flex-table__title>{{application.name | cuiI18n|capitalize}}</span>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-flex-table__middle>\n"+
"            <span>{{application.requestedDate}}</span>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-flex-table__middle>\n"+
"            <span class=cui-media__content ng-if=\"application.isApproved==true\"> {{ 'yes'|translate }}</span>\n"+
"			<span class=cui-media__content ng-if=\"application.isApproved==false\"> {{'cui-no'|translate  }}</span>\n"+
"          </div>\n"+
"\n"+
"          <div class=cui-flex-table__middle>\n"+
"            <span>{{application.evaluationDate}}</span>\n"+
"          </div>\n"+
"          <div class=cui-flex-table__right>\n"+
"             <span class=cui-media__content> {{application.evaluator.given}} {{application.evaluator.surname}}</span>\n"+
"          </div>\n"+
"        </div>\n"+
"      </li>\n"+
"    </cui-table-row>\n"+
"\n"+
"    \n"+
"    <div class=cui-paginate__container ng-if=\"!base.loader.for['appRequestHistory.initHistory']\">\n"+
"      <span class=cui-paginate__results-label>{{'cui-num-results-page' | translate}}</span>\n"+
"      <results-per-page class=cui-paginate__select ng-model=appRequestHistory.search.pageSize></results-per-page>\n"+
"      <paginate class=cui-paginate results-per-page=appRequestHistory.search.pageSize count=appRequestHistory.count on-page-change=appRequestHistory.pageChange ng-model=appRequestHistory.search.page attach-rerender-to=appRequestHistory.reRenderPaginate></paginate>\n"+
"    </div>\n"+
"  </section>\n"+
"\n"+
"</main>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/modules/user/history/user-history.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/modules/user/history target=blank>here</a> and the layout styles <a href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/scss/3-views/user class=cui-link target=blank>here</a></div>\n"+
"\n"+
"<div class=cui-users__history-container>\n"+
"    \n"+
"    \n"+
"    <div class=cui-users__main-container>\n"+
"        \n"+
"        <div class=cui-loading__container ng-if=\"base.loader.for['userHistory.initHistory']\">\n"+
"            <div class=cui-loading--center>\n"+
"                <div class=cui-loading></div>\n"+
"            </div>\n"+
"        </div>\n"+
"        \n"+
"        <p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['userHistoryFactory.initStatusHistory']\">{{'cui-userstatus-history-error' | translate}} {{'cui-try-again'|translate}}</p>\n"+
"        <p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['userHistoryFactory.initPasswordChangeHistory']\">{{'cui-password-change-log-error' | translate}} {{'cui-try-again'|translate}}</p>\n"+
"        \n"+
"        <div class=cui-users__profile-media ng-if=!userHistory.loading>\n"+
"            <div class=cui-media>\n"+
"                <div class=cui-media__image-container>\n"+
"                    \n"+
"                    <div class=cui-media__image cui-avatar cui-avatar-email=userHistory.user.email cui-avatar-names=\"[userHistory.user.name.given, userHistory.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"                </div>\n"+
"                <div class=cui-media__body>\n"+
"                    \n"+
"                    <h3 class=cui-media__title>{{userHistory.user.name.given}} {{userHistory.user.name.surname}}</h3>\n"+
"                    \n"+
"                    <p class=cui-media__content--small ng-if=userHistory.registeredDate>{{'cui-registered' | translate}}: {{userHistory.registeredDate | date:base.appConfig.dateFormat}}</p>\n"+
"                    <p class=cui-media__content--small>{{'cui-user-id' | translate}}: {{userHistory.user.username}}</p>\n"+
"                    <p class=cui-media__content--small ng-if=userHistory.user.lastLoginDate>{{'cui-last-login' | translate}}: {{userHistory.user.lastLoginDate | date:base.appConfig.dateFormat}}</p>\n"+
"                </div>\n"+
"            </div>\n"+
"        </div>\n"+
"        \n"+
"        <div style=\"margin:auto;  width:400px\">\n"+
"            <nav class=cui-breadcrumb>\n"+
"                <ul class=cui-breadcrumb__links>\n"+
"                    <li class=user_profile_image style=\"padding: 8px; margin-right:10px\" ng-init=\"profilesrc='app/modules/user/user_icon/profile.png'\" ng-mouseover=\"profilesrc='app/modules/user/user_icon/profile_current.png'\" ng-mouseout=\"profilesrc='app/modules/user/user_icon/profile.png'\"><a ui-sref=user.profile><img src={{profilesrc}} width=46px height=44px></a>\n"+
"                        </li>\n"+
"                        <li class=user_roles_image style=\"padding: 8px; margin-right:11px\" ng-init=\"rolesrc='app/modules/user/user_icon/roles.png'\" ng-mouseover=\"rolesrc='app/modules/user/user_icon/roles_mouseover.png'\" ng-mouseout=\"rolesrc='app/modules/user/user_icon/roles.png'\"><a ui-sref=user.roles><img ng-src={{rolesrc}} width=34px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_apps_image style=\"padding: 8px; margin-right:10px\" ng-init=\"appsrc='app/modules/user/user_icon/app.png'\" ng-mouseover=\"appsrc='app/modules/user/user_icon/app_mouseover.png'\" ng-mouseout=\"appsrc='app/modules/user/user_icon/app.png'\"><a ui-sref=user.appRequestHistory><img ng-src={{appsrc}} width=29px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_history_image style=\"padding: 8px\"><a ui-sref=user.history><img src=app/modules/user/user_icon/history_mouseover.png width=49px height=44px></a>\n"+
"                        </li>\n"+
"                </ul>\n"+
"            </nav>\n"+
"        </div>\n"+
"        <hr>\n"+
"        \n"+
"        <div class=\"cui-users__profile cui-users__history\">\n"+
"            \n"+
"            <div class=cui-users__profile-info>\n"+
"                <div class=cui-action>\n"+
"                    <div class=cui-action__title>{{'cui-status-history'|translate}}</div>\n"+
"                </div>\n"+
"                <div class=cui-users__info-block>\n"+
"                    <div class=cui-users__last-login>{{'cui-last-login' | translate}}: {{userHistory.lastLogin | date:base.appConfig.dateFormat}}</div>\n"+
"                </div>\n"+
"                <div class=cui-users__info-block>\n"+
"                    <div ng-repeat=\"status in userHistory.statusHistory\">\n"+
"                        <span class=cui-field-val__field>{{status.status|lowercase}}</span>\n"+
"                        <span class=cui-field-val__val>: {{status.lastUpdatedDate}}</span>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </div>\n"+
"            \n"+
"            <div class=cui-users__profile-info>\n"+
"                <div class=cui-action>\n"+
"                    <div class=cui-action__title>{{'cui-password-change-log'|translate}}</div>\n"+
"                </div>\n"+
"                \n"+
"                <p class=cui-users__password-success style=color:#4a4a4a ng-if=\"userHistory.passwordChangeHistory==0\">{{'cui-no-details' | translate}}</p>\n"+
"                <table class=cui-table-alt ng-if=\"userHistory.passwordChangeHistory&&userHistory.passwordChangeHistory.length!=0\">\n"+
"                    <thead>\n"+
"                        <th>{{'cui-date'|translate}}</th>\n"+
"                        <th>{{'cui-event-type'|translate}}</th>\n"+
"                        <th>{{'cui-action-by'|translate}}</th>\n"+
"                        <th>{{'cui-notes'|translate}}</th>\n"+
"                    </thead>\n"+
"                    <tbody>\n"+
"                        <tr ng-repeat=\"pwdChangeHistory in userHistory.passwordChangeHistory\">\n"+
"                            <td>{{pwdChangeHistory.creation|date:base.appConfig.dateFormat}}</td>\n"+
"                            <td>{{pwdChangeHistory.eventType|lowercase}}</td>\n"+
"                            <td><span ng-if=pwdChangeHistory.passwordUpdatedUserId>{{userHistory.userName.given}} {{userHistory.userName.surname}}</span></td>\n"+
"                            <td>{{pwdChangeHistory.reason}}</td>\n"+
"                        </tr>\n"+
"                    </tbody>\n"+
"                </table>\n"+
"            </div>\n"+
"        </div>\n"+
"    </div>\n"+
"</div>\n");



$templateCache.put('app/modules/user/profile/sections/address.html',
"<ng-form name=address>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'cui-address' | translate}}</span>\n"+
"        <span disable-animate class=cui-link href=\"\" ng-if=!toggled ng-click=userProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        \n"+
"        <div disable-animate ng-if=toggled ng-click=toggleOff()>\n"+
"          <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=!toggled>\n"+
"        <div class=cui-field-val__val ng-if=\"userProfile.user.addresses[0].streets[0].length>0\">{{userProfile.user.addresses[0].streets[0]}} </div>\n"+
"        <div class=cui-field-val__val ng-if=\"userProfile.user.addresses[0].streets[1].length>0\">{{userProfile.user.addresses[0].streets[1]}}</div>\n"+
"        <div class=cui-field-val__val>{{userProfile.user.addresses[0].city}}</div>\n"+
"        <div class=cui-field-val__val>{{userProfile.user.addresses[0].state}}<span ng-if=\"userProfile.user.addresses[0].state && userProfile.user.addresses[0].postal\">, </span>{{userProfile.user.addresses[0].postal}}</div>\n"+
"        <div class=cui-field-val__val>{{base.countries.getCountryByCode(userProfile.user.addresses[0].country).name}}</div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userProfile.pushToggleOff({'name':'address','function':toggleOff})\">\n"+
"        \n"+
"        <label for=\"{{'cui-street-address' | translate}}\">{{'cui-street-address' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=address.streetAddress.$error>\n"+
"            <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"          </div>\n"+
"        <input type=text name=streetAddress class=cui-input ng-model=userProfile.tempUser.addresses[0].streets[0] ng-required=true>\n"+
"        \n"+
"        <label for=\"{{'cui-address-2' | translate}}\">{{'cui-address-2' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-address-2' | translate}}\" ng-model=userProfile.tempUser.addresses[0].streets[1] class=cui-input>\n"+
"        \n"+
"        <label for=\"{{'cui-city' | translate}}\">{{'cui-city' | translate}}</label>\n"+
"        <input type=text name=\"{{'cui-city' | translate}}\" class=cui-input ng-model=userProfile.tempUser.addresses[0].city>\n"+
"        \n"+
"        <div class=cui-form__field-row>\n"+
"          <div class=\"cui-form__field-container cui-form__field-container--half\">\n"+
"            <label for=\"{{'cui-state' | translate}}\">{{'cui-state' | translate}}</label>\n"+
"            <input type=text name=\"{{'cui-state' | translate}}\" class=cui-input ng-model=userProfile.tempUser.addresses[0].state>\n"+
"          </div>\n"+
"          \n"+
"          <div class=\"cui-form__field-container cui-form__field-container--half\">\n"+
"            <label for=\"{{'cui-zip' | translate}}\">{{'cui-zip' | translate}}</label>\n"+
"            <input type=text name=\"{{'cui-zip' | translate}}\" class=cui-input ng-model=userProfile.tempUser.addresses[0].postal>\n"+
"          </div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-wizard__field-container>\n"+
"          <label for=country>{{\"cui-country\" | translate}}</label>\n"+
"          <div class=\"cui-error ng-active\" ng-messages=address.country.$error ng-if=address.country.$dirty>\n"+
"            <div class=cui-error__message ng-message=required>{{'cui-this-field-is-required' | translate}}</div>\n"+
"          </div>\n"+
"          <div auto-complete input-name=country pause=100 selected-object=userProfile.userCountry initial-value=base.countries.getCountryByCode(userProfile.tempUser.addresses[0].country) local-data=base.countries.list search-fields=name title-field=name input-class=cui-input match-class=highlight auto-match=true field-required=userProfile.userCountry></div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=\"userProfile.resetTempObject(userProfile.user, userProfile.tempUser); toggleOff()\">{{'cui-cancel' | translate}}</a>\n"+
"\n"+
"          <cui-button loading-if=userProfile.address.submitting loading-message=\"{{'cui-button-loading-text' | translate}}\" button-click=\"address.$valid && userProfile.updatePerson('address', toggleOff)\">\n"+
"            <button class=cui-button ng-class=\"{ 'cui-button--error': !address.$valid }\">\n"+
"              <span ng-if=\"!userProfile.address || !userProfile.address.submitting\">{{'cui-update' | translate}}</span>\n"+
"            </button>\n"+
"          </cui-button>\n"+
"        </div>\n"+
"\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/user/profile/sections/basic-info.html',
"<ng-form name=basicInfo>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'basic-info' | translate}}</span>\n"+
"        <span disable-animate class=cui-link href=\"\" ng-if=!toggled ng-click=userProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        \n"+
"        <div disable-animate ng-if=toggled ng-click=toggleOff()>\n"+
"          <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      <div ng-if=!toggled>\n"+
"        <span class=cui-field-val__field>{{'cui-name' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{userProfile.user.name.given}} {{userProfile.user.name.surname}}</span><br>\n"+
"        <span class=cui-field-val__field>{{'cui-email' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{userProfile.user.email}} </span>\n"+
"      </div>\n"+
"\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userProfile.pushToggleOff({'name':'basicInfo','function':toggleOff})\">\n"+
"\n"+
"        \n"+
"        <label for=firstName>{{'cui-first-name' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.firstName.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=text name=firstName class=cui-input ng-model=userProfile.tempUser.name.given ng-required=true focus-if=toggled>\n"+
"\n"+
"        \n"+
"        <label for=lastName>{{'cui-last-name' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.lastName.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=text name=lastName class=cui-input ng-model=userProfile.tempUser.name.surname ng-required=true>\n"+
"\n"+
"        \n"+
"        <label for=email>{{'cui-email' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=basicInfo.email.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=email name=email class=cui-input ng-model=userProfile.tempUser.email ng-required=true>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <cui-button loading-if=userProfile.basicInfo.submitting loading-message=\"{{'cui-button-loading-text' | translate}}\" button-click=\"basicInfo.$valid && userProfile.updatePerson('basicInfo', toggleOff)\">\n"+
"            <button class=cui-button ng-class=\"{ 'cui-button--error': !basicInfo.$valid }\">\n"+
"              <span ng-if=\"!userProfile.basicInfo || !userProfile.basicInfo.submitting\">{{'cui-update' | translate}}</span>\n"+
"            </button>\n"+
"          </cui-button>\n"+
"        </div>\n"+
"\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/user/profile/sections/challenge-questions.html',
"<ng-form name=challengeQuestions>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-checkbox__container>\n"+
"          <input type=checkbox name=option-1 id=option-1 class=cui-checkbox ng-model=userProfile.maskAnswers ng-click=userProfile.updateUIMasking();>\n"+
"          <label for=option-1 class=cui-checkbox__label>{{'cui-mask-answers'|translate}}</label>\n"+
"      </div>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'challenge-questions' | translate}}</span>\n"+
"        <span disable-animate class=cui-link href=\"\" ng-if=!toggled ng-click=userProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        \n"+
"        <div disable-animate ng-if=toggled ng-click=toggleOff()>\n"+
"          <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=!toggled>\n"+
"        <div ng-repeat=\"question in userProfile.challengeQuestionsTexts\">\n"+
"          <span class=cui-field-val__field>{{$index+1}}:</span>\n"+
"          <span class=cui-field-val__val>{{question}}</span>\n"+
"          <br>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userProfile.pushToggleOff({'name':'challengeQuestions','function':toggleOff})\">\n"+
"        <div ng-repeat=\"question in userProfile.tempUserSecurityQuestions.questions\">\n"+
"          <b>{{'cui-challenge-question' | translate}} {{$index+1}}</b>\n"+
"          <cui-dropdown ng-model=question.question.id class=cui-dropdown return-value=object.id display-value=\"(object.question | cuiI18n)\" options=\"userProfile['allChallengeQuestions' + $index]\"></cui-dropdown>\n"+
"          {{'cui-answer' | translate}}\n"+
"          <div class=cui-error ng-messages=\"challengeQuestions['answer' + $index].$error\">\n"+
"            <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"          </div>\n"+
"          <input type={{userProfile.inputType}} ng-model=question.answer class=cui-input ng-class=\"{'cui-input--error':!challengeQuestions['answer'+$index].$valid}\" name=answer{{$index}} ng-change=userProfile.checkIfRepeatedSecurityAnswer(userProfile.tempUserSecurityQuestions.questions,challengeQuestions) ng-required=true>\n"+
"          <br><br>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <cui-button loading-if=userProfile.challengeQuestions.submitting loading-message=\"{{'cui-button-loading-text' | translate}}\" button-click=\"userProfile.saveChallengeQuestions('challengeQuestions', toggleOff)\">\n"+
"            <button class=cui-button ng-class=\"{'cui-button--error':!challengeQuestions.$valid}\">\n"+
"              <span ng-if=\"( !userProfile.challengeQuestions || !userProfile.challengeQuestions.submitting ) && !userProfile.challengeQuestions.error\">{{'cui-update' | translate}}</span>\n"+
"            </button>\n"+
"          </cui-button>\n"+
"        </div>\n"+
"\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/user/profile/sections/header.html',
"<div class=cui-users__profile-media ng-if=!userProfile.loading>\n"+
"  <div class=cui-media>\n"+
"    <div class=cui-media__image-container>\n"+
"      \n"+
"      <div class=cui-media__image cui-avatar cui-avatar-email=userProfile.user.email cui-avatar-names=\"[userProfile.user.name.given, userProfile.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"    </div>\n"+
"    <div class=cui-media__body>\n"+
"      \n"+
"      <h3 class=cui-media__title>{{userProfile.user.name.given}} {{userProfile.user.name.surname}}</h3>\n"+
"      \n"+
"      <p class=cui-media__content--small ng-if=userProfile.registeredDate>{{'cui-registered' | translate}}: {{userProfile.registeredDate | date:base.appConfig.dateFormat}}</p>\n"+
"      <p class=cui-media__content--small>{{'cui-user-id' | translate}}: {{userProfile.user.username}}</p>\n"+
"      <p class=cui-media__content--small ng-if=userProfile.user.lastLoginDate>{{'cui-last-login' | translate}}: {{userProfile.user.lastLoginDate | date:base.appConfig.dateFormat}}</p>\n"+
"    </div>\n"+
"  </div>\n"+
"</div>\n");



$templateCache.put('app/modules/user/profile/sections/password.html',
"<ng-form name=password>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <div>\n"+
"        <span class=cui-field-val__field ng-if=!toggled>{{'cui-password' | translate}}:</span>\n"+
"        <span class=cui-field-val__field ng-if=toggled>{{'cui-password' | translate}}</span>\n"+
"        <span class=\"cui-field-val__val cui-star-password\" ng-if=!toggled>**********</span><br>\n"+
"        </div>\n"+
"        <span disable-animate class=cui-link href=\"\" ng-if=!toggled ng-click=userProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        \n"+
"        <div disable-animate ng-if=toggled ng-click=toggleOff()>\n"+
"          <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userProfile.pushToggleOff({'name':'password','function':toggleOff})\">\n"+
"\n"+
"        \n"+
"        <label for=currentPassword>{{'current-password' | translate}}</label>\n"+
"        <div class=cui-error ng-messages=password.currentPassword.$error ng-if=password.currentPassword.$touched>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=password name=currentPassword class=cui-input ng-model=userProfile.userPasswordAccount.currentPassword ng-required=true focus-if=toggled>\n"+
"\n"+
"        \n"+
"        <div class=cui-input__password-holder>\n"+
"          <label for=newPassword>{{'cui-enter-new-password' | translate}} </label>\n"+
"          <input class=cui-input name=newPassword type=password ng-model=userProfile.userPasswordAccount.password ng-required=true ng-class=\"{'cui-input--error': password.newPassword.$touched && password.newPassword.$invalid}\" password-validation=userProfile.passwordRules ng-change=\"userProfile.validatePassword(userProfile.userPasswordAccount.password, password, 'newPassword')\" ng-focus=\"userProfile.passwordPopover=true\" ng-blur=\"userProfile.passwordPopover=false\">\n"+
"          \n"+
"          <div password-popover ng-messages=password.newPassword.$error ng-messages-multiple ng-if=\"userProfile.passwordPopover && password.newPassword.$invalid\" class=cui-error__password>\n"+
"            \n"+
"            <div ng-messages-include=app/common-templates/password-validation-history/password-validation-top.html></div>\n"+
"            \n"+
"            <div class=cui-error__message ng-if=!userProfile.validNewPasswordDisallowed>\n"+
"              <br>\n"+
"              <span translate=disallowed-password-rule></span>\n"+
"            </div><br>\n"+
"            \n"+
"            <div class=cui-error__message>\n"+
"              <div class=cui-error__status ng-class=\"{'cui-error__status--pass': userProfile.validNewPasswordHistory && userProfile.userPasswordAccount.length>0}\"></div>\n"+
"              <span translate=cui-password-history-rule translate-value-number-of-passwords={{userProfile.numberOfPasswords}}></span>\n"+
"            </div><br>\n"+
"            \n"+
"            <div ng-messages-include=app/common-templates/password-validation-history/password-validation-bottom.html></div>\n"+
"          </div>\n"+
"        </div>\n"+
"\n"+
"        \n"+
"        <label for=newPasswordRe>{{'cui-re-enter-new-password' | translate}} {{userProfile.userPasswordAccount.length}}{{userProfile.validNewPasswordHistory}}asd{{userProfile.validNewPasswordDisallowed}}</label>\n"+
"        <div class=cui-error ng-if=\"password.newPasswordRe.$touched && password.newPasswordRe.$error.match\">\n"+
"          <div class=cui-error__message>{{'password-mismatch' | translate}}</div>\n"+
"        </div>\n"+
"        <input class=cui-input type=password ng-model=userProfile.passwordRe name=newPasswordRe match=userProfile.userPasswordAccount.password>\n"+
"        <div class=cui-error style=\"text-align: right\" ng-if=userProfile.lifetimeError>\n"+
"          <div class=cui-error__message>{{'cannot-change-password'| translate}}</div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-mousedown=userProfile.resetPasswordFields();toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          \n"+
"          <button class=cui-button ng-click=\"password.$valid && userProfile.updatePassword('password',toggleOff);\" ng-class=\"{'cui-button--error':!password.$valid}\">\n"+
"            <span ng-if=\"(!userProfile.password || !userProfile.password.submitting) && !userProfile.password.error\">{{'cui-update' | translate}}</span>\n"+
"            <span ng-if=userProfile.password.submitting>{{'cui-button-loading-text'|translate}}</span>\n"+
"            <span ng-if=userProfile.password.error>{{'cui-error-try-again'| translate}}</span>\n"+
"          </button>\n"+
"        </div>\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/user/profile/sections/phone-fax.html',
"<ng-form name=phoneFax>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'cui-phone-fax' | translate}}</span>\n"+
"        <span disable-animate class=cui-link href=\"\" ng-if=!toggled ng-click=userProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        \n"+
"        <div disable-animate ng-if=toggled ng-click=toggleOff()>\n"+
"          <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=!toggled ng-repeat=\"phone in userProfile.user.phones\">\n"+
"        <span class=cui-field-val__field ng-if=\"$index==0\">{{\"cui-phone-office\" | translate}}:</span>\n"+
"        <span class=cui-field-val__field ng-if=\"$index==1\">{{\"cui-phone-mobile\" | translate}}:</span>\n"+
"        <span class=cui-field-val__field ng-if=\"$index==2\">{{\"cui-phone-fax\" | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{phone.number}}</span>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled>\n"+
"        \n"+
"\n"+
"        <label><b>*{{\"cui-phone-office\" | translate}}</b></label>\n"+
"        <div class=cui-error ng-messages=phoneFax.telephone.$error>\n"+
"          <div ng-messages-include=app/common-templates/messages.html></div>\n"+
"        </div>\n"+
"        <input type=text ng-model=userProfile.tempUser.phones[0].number class=cui-input name=telephone autocomplete=off ng-required=true>\n"+
"\n"+
"        \n"+
"        <label>{{\"cui-phone-mobile\" | translate}}</label>\n"+
"        <input type=text ng-model=userProfile.tempUser.phones[1].number class=cui-input name=mobphone autocomplete=off>\n"+
"\n"+
"        \n"+
"        <label for=user-fax>{{'cui-phone-fax'| translate}}</label>\n"+
"        <input type=text name=faxNumber class=cui-input ng-model=userProfile.tempUser.phones[2].number autocomplete=off>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"          <cui-button loading-if=userProfile.phoneFax.submitting loading-message=\"{{'cui-button-loading-text' | translate}}\" button-click=\"phoneFax.$valid && userProfile.updatePerson('phoneFax', toggleOff)\">\n"+
"            <button class=cui-button ng-class=\"{ 'cui-button--error': !phoneFax.$valid }\">\n"+
"              <span ng-if=\"!userProfile.phoneFax || !userProfile.phoneFax.submitting\">{{'cui-update' | translate}}</span>\n"+
"            </button>\n"+
"          </cui-button>\n"+
"        </div>\n"+
"\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/user/profile/sections/timezone-language.html',
"<ng-form name=timezoneLanguage>\n"+
"  <div class=cui-users__field>\n"+
"    <div class=cui-users__address-container class-toggle toggled-class=show-address>\n"+
"      <div class=cui-users__field>\n"+
"        <span class=cui-field-val__field>{{'timezone-and-language' | translate}}</span>\n"+
"        <span disable-animate class=cui-link href=\"\" ng-if=!toggled ng-click=userProfile.toggleAllOff();toggleOn()>{{'cui-edit' | translate}}</span>\n"+
"        \n"+
"        <div disable-animate ng-if=toggled ng-click=toggleOff()>\n"+
"          <cui-icon cui-svg-icon=cui:close-no-fill svg-class=cui-action__icon viewbox=\"0 0 48 53\" preserveaspectratio=\"xMidYMid meet\"></cui-icon>\n"+
"        </div>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=!toggled disable-animate>\n"+
"        <span class=cui-field-val__field>{{'cui-timezone' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{userProfile.timezoneById(userProfile.user.timezone)}}</span><br>\n"+
"        <span class=cui-field-val__field>{{'cui-language' | translate}}:</span>\n"+
"        <span class=cui-field-val__val>{{base.languages[userProfile.user.language]}}</span>\n"+
"      </div>\n"+
"\n"+
"      \n"+
"      <div ng-if=toggled ng-init=\"userProfile.pushToggleOff({'name':'timezoneLangauge','function':toggleOff})\" disable-animate>\n"+
"        \n"+
"        <label for=timezone>{{'cui-timezone' | translate}}</label>\n"+
"        <cui-dropdown ng-model=userProfile.tempUser.timezone class=cui-dropdown return-value=object.id display-value=object.name options=base.timezones></cui-dropdown>\n"+
"        \n"+
"        <label for=language>{{'cui-language' | translate}}</label>\n"+
"        <cui-dropdown ng-model=userProfile.tempUser.language class=cui-dropdown return-value=key display-value=value options=base.languages></cui-dropdown>\n"+
"\n"+
"        \n"+
"        <div class=cui-users__address-submit>\n"+
"          <a class=\"cui-link cui-form__cancel\" href=\"\" ng-click=toggleOff()>{{'cui-cancel' | translate}}</a>\n"+
"\n"+
"          <cui-button loading-if=userProfile.timezoneLanguage.submitting loading-message=\"{{'cui-button-loading-text' | translate}}\" button-click=\"userProfile.updatePerson('timezoneLanguage', toggleOff)\">\n"+
"            <button class=cui-button>\n"+
"              <span ng-if=\"( !userProfile.challengeQuestions || !userProfile.challengeQuestions.submitting ) && !userProfile.challengeQuestions.error\">{{'cui-update' | translate}}</span>\n"+
"            </button>\n"+
"          </cui-button>\n"+
"        </div>\n"+
"\n"+
"      </div>\n"+
"    </div>\n"+
"  </div>\n"+
"</ng-form>\n");



$templateCache.put('app/modules/user/profile/user-profile.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/modules/user/profile target=blank>here</a> and the layout styles <a href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/scss/3-views/user class=cui-link target=blank>here</a></div>\n"+
"\n"+
"<ng-form name=edit novalidate>\n"+
"    <div class=cui-users__edit>\n"+
"        \n"+
"        \n"+
"        <div class=cui-users__main-container>\n"+
"            \n"+
"            <div class=cui-loading__container ng-if=\"base.loader.for['userProfile.initProfile']\">\n"+
"                <div class=cui-loading--center>\n"+
"                    <div class=cui-loading></div>\n"+
"                </div>\n"+
"            </div>\n"+
"            \n"+
"            <p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['userProfileFactory.initUser']\">{{'cui-userProfile-user-error' | translate}}</p>\n"+
"            <p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['userProfileFactory.initSecurityQuestions']\">{{'cui-userProfile-security-error' | translate}}</p>\n"+
"            <p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['userProfileFactory.initPasswordPolicy']\">{{'cui-userProfile-password-error' | translate}}</p>\n"+
"            \n"+
"            <div ng-include=\"'app/modules/user/profile/sections/header.html'\" ng-if=userProfile.user></div>\n"+
"            <div style=\"margin:auto;  width:400px\">\n"+
"                <nav class=cui-breadcrumb>\n"+
"                    <ul class=cui-breadcrumb__links>\n"+
"                        <li class=user_profile_image style=\"padding: 8px; margin-right:10px\"><a ui-sref=user.profile><img src=app/modules/user/user_icon/profile_current.png width=46px height=44px></a>\n"+
"                        </li>\n"+
"                        <li class=user_roles_image style=\"padding: 8px; margin-right: 11px\" ng-init=\"rolesrc='app/modules/user/user_icon/roles.png'\" ng-mouseover=\"rolesrc='app/modules/user/user_icon/roles_mouseover.png'\" ng-mouseout=\"rolesrc='app/modules/user/user_icon/roles.png'\"><a ui-sref=user.roles><img ng-src={{rolesrc}} width=34px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_apps_image style=\"padding: 8px; margin-right: 10px\" ng-init=\"appsrc='app/modules/user/user_icon/app.png'\" ng-mouseover=\"appsrc='app/modules/user/user_icon/app_mouseover.png'\" ng-mouseout=\"appsrc='app/modules/user/user_icon/app.png'\"><a ui-sref=user.appRequestHistory><img ng-src={{appsrc}} width=29px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_history_image style=\"padding: 8px\" ng-init=\"historysrc='app/modules/user/user_icon/history.png'\" ng-mouseover=\"historysrc='app/modules/user/user_icon/history_mouseover.png'\" ng-mouseout=\"historysrc='app/modules/user/user_icon/history.png'\"><a ui-sref=user.history><img ng-src={{historysrc}} width=49px height=44px></a>\n"+
"                        </li>\n"+
"                    </ul>\n"+
"                </nav>\n"+
"            </div>\n"+
"\n"+
"            <hr>\n"+
"            <div class=cui-users__profile>\n"+
"                \n"+
"                <div class=cui-users__profile-info>\n"+
"                    <div class=cui-users__info-block>\n"+
"                        \n"+
"                        <div ng-include=\"'app/modules/user/profile/sections/basic-info.html'\" ng-if=userProfile.user></div>\n"+
"                    </div>\n"+
"                    <div class=cui-users__info-block>\n"+
"                        <div ng-if=userProfile.passwordUpdateSuccess class=cui-users__password-success>{{'cui-pwd-reset-success' | translate}}</div>\n"+
"                        \n"+
"                        <div ng-include=\"'app/modules/user/profile/sections/password.html'\" ng-if=userProfile.passwordRules></div>\n"+
"                    </div>\n"+
"                    <div class=cui-users__info-block>\n"+
"                        \n"+
"                        <div ng-include=\"'app/modules/user/profile/sections/challenge-questions.html'\" ng-if=\"userProfile.userSecurityQuestions && userProfile.allSecurityQuestions\"></div>\n"+
"                    </div>\n"+
"                    <div class=cui-users__info-block>\n"+
"                        \n"+
"                        <div ng-include=\"'app/modules/user/profile/sections/timezone-language.html'\" ng-if=userProfile.user></div>\n"+
"                    </div>\n"+
"                </div>\n"+
"                \n"+
"                <div class=cui-users__profile-info>\n"+
"                    <div class=cui-users__info-block>\n"+
"                        \n"+
"                        <div ng-include=\"'app/modules/user/profile/sections/address.html'\" ng-if=userProfile.user></div>\n"+
"                    </div>\n"+
"                    <div class=cui-users__info-block>\n"+
"                        \n"+
"                        <div ng-include=\"'app/modules/user/profile/sections/phone-fax.html'\" ng-if=userProfile.user></div>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </div>\n"+
"        </div>\n"+
"    </div>\n"+
"</ng-form>");



$templateCache.put('app/modules/user/roles/user-roles.html',
"\n"+
"<div class=code-info>Code for this page can be found <a class=cui-link href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/modules/user/history target=blank>here</a> and the layout styles <a href=https://github.com/Covisint/cui-idm-b2x/tree/master/app/scss/3-views/user class=cui-link target=blank>here</a></div>\n"+
"<div class=\"class-toggle cui-modal\" ng-if=userRoles.success toggled-class=cui-modal--hide ng-click=toggleClass()>\n"+
"    <div class=cui-modal__pane>\n"+
"        <div class=cui-modal__icon>\n"+
"            <cui-icon cui-svg-icon=cui:check-with-border class=cui-modal__icon></cui-icon>\n"+
"        </div>\n"+
"        <span class=cui-modal__primary-message>{{'cui-success' | translate}}</span>\n"+
"        <span class=cui-modal__secondary-message>{{'your-assign-role-success' | translate}}</span>\n"+
"    </div>\n"+
"</div>\n"+
"\n"+
"<div class=cui-users__appHistory-container>\n"+
"    \n"+
"    <div class=cui-users__main-container>\n"+
"\n"+
"    \n"+
"    <div class=cui-loading__container ng-if=\"base.loader.for['userRoles.initHistory']\">\n"+
"      <div class=cui-loading--center><div class=cui-loading></div></div>\n"+
"    </div>\n"+
"\n"+
"        \n"+
"    <p class=cui-users__password-success style=color:red ng-if=\"base.apiError.for['userRoles.initHistory']\"><b>{{'error-generic'|translate}}</b></p>\n"+
"        \n"+
"        <div class=cui-users__profile-media ng-if=!userRoles.loading>\n"+
"            <div class=cui-media>\n"+
"                <div class=cui-media__image-container>\n"+
"                    \n"+
"                    <div class=cui-media__image cui-avatar cui-avatar-email=userRoles.user.email cui-avatar-names=\"[userRoles.user.name.given, userRoles.user.name.surname]\" cui-avatar-color-class-prefix=cui-avatar__color cui-avatar-color-count=5></div>\n"+
"                </div>\n"+
"                <div class=cui-media__body>\n"+
"                    \n"+
"                    <h3 class=cui-media__title>{{userRoles.user.name.given}} {{userRoles.user.name.surname}}</h3>\n"+
"                    \n"+
"                    <p class=cui-media__content--small ng-if=userRoles.registeredDate>{{'cui-registered' | translate}}: {{userRoles.registeredDate | date:base.appConfig.dateFormat}}</p>\n"+
"                    <p class=cui-media__content--small>{{'cui-user-id' | translate}}: {{userRoles.user.username}}</p>\n"+
"                    <p class=cui-media__content--small ng-if=userRoles.user.lastLoginDate>{{'cui-last-login' | translate}}: {{userRoles.user.lastLoginDate | date:base.appConfig.dateFormat}}</p>\n"+
"                </div>\n"+
"            </div>\n"+
"        </div>\n"+
"        \n"+
"        <div style=\"margin:auto;  width:400px\">\n"+
"            <nav class=cui-breadcrumb>\n"+
"                <ul class=cui-breadcrumb__links>\n"+
"                    <li class=user_profile_image style=\"padding: 8px; margin-right:10px\" ng-init=\"profilesrc='app/modules/user/user_icon/profile.png'\" ng-mouseover=\"profilesrc='app/modules/user/user_icon/profile_current.png'\" ng-mouseout=\"profilesrc='app/modules/user/user_icon/profile.png'\"><a ui-sref=user.profile><img ng-src={{profilesrc}} width=46px height=44px></a>\n"+
"                        </li>\n"+
"                        <li class=user_roles_image style=\"padding: 8px; margin-right:10px\"><a ui-sref=user.roles><img ng-src=app/modules/user/user_icon/roles_mouseover.png width=34px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_apps_image style=\"padding: 8px; margin-right:10px\" ng-init=\"appsrc='app/modules/user/user_icon/app.png'\" ng-mouseover=\"appsrc='app/modules/user/user_icon/app_mouseover.png'\" ng-mouseout=\"appsrc='app/modules/user/user_icon/app.png'\"><a ui-sref=user.appRequestHistory><img ng-src={{appsrc}} width=29px height=45px></a>\n"+
"                        </li>\n"+
"                        <li class=user_history_image style=\"padding: 8px\" ng-init=\"historysrc='app/modules/user/user_icon/history.png'\" ng-mouseover=\"historysrc='app/modules/user/user_icon/history_mouseover.png'\" ng-mouseout=\"historysrc='app/modules/user/user_icon/history.png'\"><a ui-sref=user.history><img ng-src={{historysrc}} width=49px height=44px></a>\n"+
"                </li></ul>\n"+
"            </nav>\n"+
"        </div>\n"+
"        <hr>\n"+
"    <div class=\"cui-users__profile cui-users__history\" ng-if=\"!base.loader.for['userRoles.initHistory']&&!base.apiError.for['userRoles.initHistory']\">\n"+
"        \n"+
"        <div class=cui-users__profile-info>\n"+
"          <div class=cui-action>\n"+
"              <div class=cui-action__title>{{'cui-assigned-roles'|translate}}</div>\n"+
"          </div>\n"+
"          <p class=cui-users__password-success style=color:red ng-if=userRoles.getRolesDetailsError><b>{{'error-generic'|translate}}</b></p>\n"+
"            <div class=cui-users__info-block>\n"+
"                <div class=cui-media__content ng-if=\"userRoles.rolesDetails.length===0\">{{'cui-no-details'|translate}}</div>\n"+
"              <div class=\"cui-media cui-media--border cui-media--tr\" ng-repeat=\"roles in userRoles.rolesDetails\">\n"+
"                <div class=cui-media__body>\n"+
"                  <span class=cui-media__content>{{roles.name}}</span>\n"+
"                </div>\n"+
"              </div>\n"+
"        </div>\n"+
"        </div>\n"+
"        \n"+
"        <div class=cui-users__profile-info ng-if=base.accessByAnyAdmin()>\n"+
"            <div class=cui-action>\n"+
"                <div class=cui-action__title>{{'cui-available-roles'|translate}}</div>\n"+
"            </div>\n"+
"            \n"+
"            <div class=cui-media__content ng-if=\"userRoles.rolesGrantable.length===0&&!userRoles.grantedHistoryError\">{{'cui-no-details'|translate}}</div>\n"+
"            <p class=cui-users__password-success style=color:red ng-if=userRoles.grantedHistoryError><b>{{'error-generic'|translate}}</b></p>\n"+
"        <cui-expandable class=cui-expandable ng-repeat=\"roles in userRoles.rolesGrantable\" ng-class=\"application.expanded?'expanded':''\" transition-speed=150 style=\"border-bottom:1px solid #ddd\">\n"+
"            <cui-expandable-title class=\"cui-expandable__title cui-expandable__title--flex\">\n"+
"               \n"+
"                <span class=cui-checkbox__container>\n"+
"                    <input class=cui-checkbox type=checkbox id=\"{{'checkbox-'+roles.roleId}}\" ng-model=userRoles.appCheckbox[roles.roleId]>\n"+
"                    <label for=\"{{'checkbox-'+roles.roleId}}\" class=cui-checkbox__label ng-click=userRoles.checkrequest(roles.roleId)></label>\n"+
"                </span>\n"+
"                \n"+
"                <div class=cui-applications__expandable-info ng-click=toggleExpand()>\n"+
"                    <h3 class=cui-expandable__title-left>{{roles.name}}</h3>\n"+
"                </div>\n"+
"                <svg cui-icon xmlns=http://www.w3.org/2000/svg class=\"cui-icon cui-icon--light-grey chevron\" ng-class=cui-hide__opacity preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 216 146\" ng-click=toggleExpand()>\n"+
"                  <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/font-awesome/font-awesome-out.svg#chevron18></use>\n"+
"                </svg>\n"+
"            </cui-expandable-title>\n"+
"            <cui-expandable-body class=cui-expandable__body>\n"+
"                <div class=cui-expandable__body-pane>\n"+
"                    <span class=cui-expandable__body-close ng-click=collapse()>\n"+
"                        <svg xmlns=http://www.w3.org/2000/svg class=cui-icon preserveAspectRatio=\"xMidYMid meet\" viewBox=\"2 0 48 48\">\n"+
"                          <use class=cui-icon__ref xlink:href=node_modules/@covisint/cui-icons/dist/icons/icons-out.svg#close-no-fill></use>\n"+
"                        </svg>\n"+
"                    </span>\n"+
"                    <div class=cui-expandable__pane-col ng-if=\"roles.privileges && roles.privileges.length > 0\">\n"+
"                        <h4 class=cui-expandable__pane-title>{{'privileges' | translate}}:</h4>\n"+
"                        <span ng-if=\"(!roles.privileges || roles.privileges.length===0)\">{{'cui-no-details' | translate}}</span>\n"+
"                        <div class=cui-expandable__pane-content>\n"+
"                            <span class=cui-expandable__pane-content-item ng-repeat=\"privileges in roles.privileges\">\n"+
"                                {{privileges.privilegeName}}\n"+
"                            </span>\n"+
"                        </div>\n"+
"                    </div>\n"+
"                </div>\n"+
"            </cui-expandable-body>\n"+
"        </cui-expandable>\n"+
"            <div class=cui-applications__submit-options ng-if=\"userRoles.rolesGrantable.length>0&&!userRoles.grantedHistoryError\">\n"+
"                <button class=cui-button ng-class=\"{'cui-button--error' : !userRoles.appCheckboxValid }\" ng-click=userRoles.appCheckboxValid&&userRoles.assignRoles()>\n"+
"                    <span ng-if=!userRoles.rolessubmitError>{{'submit-request' | translate}}</span>\n"+
"                    <span ng-if=\"userRoles.rolessubmitError===true\">{{'cui-error-try-again' | translate}}</span>\n"+
"                </button>\n"+
"            </div>\n"+
"        </div>\n"+
"    </div>\n"+
"    </div>\n"+
"</div>\n");


}]);

angular.bootstrap(document,['app']);
});

});
})(angular,$);
//# sourceMappingURL=app.js.map
